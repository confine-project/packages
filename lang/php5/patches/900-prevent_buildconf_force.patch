--- a/configure
+++ b/configure
@@ -826,6 +826,8 @@ ac_help="$ac_help
  --disable-all   Disable all extensions which are enabled by default
 "
 ac_help="$ac_help
+  --with-system-tzdata[=DIR]      to specify use of system timezone data"
+ac_help="$ac_help
   --with-regex=TYPE       regex library type: system, php. [TYPE=php]
                           WARNING: Do NOT use unless you know what you are doing!"
 ac_help="$ac_help
@@ -847,6 +849,30 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-zlib-dir=<DIR>   Define the location of zlib install directory"
 ac_help="$ac_help
+  --enable-apc           Enable APC support"
+ac_help="$ac_help
+  --enable-apc-debug     Enable APC debugging"
+ac_help="$ac_help
+  --enable-apc-filehits   Enable per request file info about files used from the APC cache (ie: apc_cache_info('filehits')) "
+ac_help="$ac_help
+  --disable-apc-mmap
+                          Disable mmap support and use IPC shm instead"
+ac_help="$ac_help
+  --enable-apc-sem
+                          Enable semaphore locks instead of fcntl"
+ac_help="$ac_help
+  --disable-apc-pthreadmutex
+                          Disable pthread mutex locking "
+ac_help="$ac_help
+  --enable-apc-spinlocks
+                          Enable spin locks  EXPERIMENTAL "
+ac_help="$ac_help
+  --enable-apc-memprotect
+                          Enable mmap/shm memory protection"
+ac_help="$ac_help
+  --disable-valgrind-checks
+                          Disable valgrind based memory checks"
+ac_help="$ac_help
   --enable-bcmath         Enable bc style precision math functions"
 ac_help="$ac_help
   --with-bz2[=DIR]        Include BZip2 support"
@@ -884,6 +910,8 @@ ac_help="$ac_help
 ac_help="$ac_help
   --disable-flatfile        DBA: FlatFile support (bundled)"
 ac_help="$ac_help
+  --enable-dio            Enable direct I/O support"
+ac_help="$ac_help
   --disable-dom           Disable DOM support"
 ac_help="$ac_help
   --with-libxml-dir[=DIR]   DOM: libxml2 install prefix"
@@ -951,6 +979,8 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-ldap-sasl[=DIR]    LDAP: Include Cyrus SASL support"
 ac_help="$ac_help
+  --with-libevent             Include libevent support"
+ac_help="$ac_help
   --enable-mbstring       Enable multibyte string support"
 ac_help="$ac_help
   --disable-mbregex         MBSTRING: Disable multibyte regex support"
@@ -1167,6 +1197,24 @@ ac_help="$ac_help
 ac_help="$ac_help
   --with-pcre-dir           ZIP: pcre install prefix"
 ac_help="$ac_help
+  --enable-http           Enable extended HTTP support"
+ac_help="$ac_help
+  --with-http-shared-deps
+                           HTTP: disable to not depend on extensions like hash,
+                                 iconv and session (when built shared)"
+ac_help="$ac_help
+  --with-http-curl-requests[=LIBCURLDIR]
+                           HTTP: with cURL request support"
+ac_help="$ac_help
+  --with-http-curl-libevent[=LIBEVENTDIR]
+                           HTTP: libevent install directory"
+ac_help="$ac_help
+  --with-http-zlib-compression[=LIBZDIR]
+                           HTTP: with zlib encodings support"
+ac_help="$ac_help
+  --with-http-magic-mime[=LIBMAGICDIR]
+                           HTTP: with magic mime response content type guessing"
+ac_help="$ac_help
   --enable-mysqlnd       Enable mysqlnd expliciely, will be done implicitly
                          when required by other extensions"
 ac_help="$ac_help
@@ -1893,12 +1941,12 @@ fi
 
 
 echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
-echo "configure:1897: checking for Cygwin environment" >&5
+echo "configure:1945: checking for Cygwin environment" >&5
 if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1902 "configure"
+#line 1950 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -1909,7 +1957,7 @@ int main() {
 return __CYGWIN__;
 ; return 0; }
 EOF
-if { (eval echo configure:1913: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1961: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_cygwin=yes
 else
@@ -1926,19 +1974,19 @@ echo "$ac_t""$ac_cv_cygwin" 1>&6
 CYGWIN=
 test "$ac_cv_cygwin" = yes && CYGWIN=yes
 echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
-echo "configure:1930: checking for mingw32 environment" >&5
+echo "configure:1978: checking for mingw32 environment" >&5
 if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1935 "configure"
+#line 1983 "configure"
 #include "confdefs.h"
 
 int main() {
 return __MINGW32__;
 ; return 0; }
 EOF
-if { (eval echo configure:1942: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1990: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_mingw32=yes
 else
@@ -1957,7 +2005,7 @@ test "$ac_cv_mingw32" = yes && MINGW32=y
 
 
 echo $ac_n "checking for egrep""... $ac_c" 1>&6
-echo "configure:1961: checking for egrep" >&5
+echo "configure:2009: checking for egrep" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_egrep'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1972,7 +2020,7 @@ echo "$ac_t""$ac_cv_prog_egrep" 1>&6
  
 
 echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
-echo "configure:1976: checking for a sed that does not truncate output" >&5
+echo "configure:2024: checking for a sed that does not truncate output" >&5
 if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2122,7 +2170,7 @@ else { echo "configure: error: can not r
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:2126: checking host system type" >&5
+echo "configure:2174: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
@@ -2143,7 +2191,7 @@ host_os=`echo $host | sed 's/^\([^-]*\)-
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:2147: checking target system type" >&5
+echo "configure:2195: checking target system type" >&5
 
 target_alias=$target
 case "$target_alias" in
@@ -2255,7 +2303,7 @@ rm -f libs/*
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2259: checking for $ac_word" >&5
+echo "configure:2307: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2285,7 +2333,7 @@ if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2289: checking for $ac_word" >&5
+echo "configure:2337: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2336,7 +2384,7 @@ fi
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2340: checking for $ac_word" >&5
+echo "configure:2388: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2368,7 +2416,7 @@ fi
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:2372: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:2420: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -2379,12 +2427,12 @@ cross_compiling=$ac_cv_prog_cc_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 2383 "configure"
+#line 2431 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:2388: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -2410,12 +2458,12 @@ if test $ac_cv_prog_cc_works = no; then
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:2414: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:2462: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:2419: checking whether we are using GNU C" >&5
+echo "configure:2467: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2424,7 +2472,7 @@ else
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2428: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2476: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -2443,7 +2491,7 @@ ac_test_CFLAGS="${CFLAGS+set}"
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:2447: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:2495: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2475,7 +2523,7 @@ else
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:2479: checking how to run the C preprocessor" >&5
+echo "configure:2527: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -2490,13 +2538,13 @@ else
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 2494 "configure"
+#line 2542 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2500: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2548: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2507,13 +2555,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 2511 "configure"
+#line 2559 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2517: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2565: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2524,13 +2572,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 2528 "configure"
+#line 2576 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2534: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2582: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2557,9 +2605,9 @@ echo "$ac_t""$CPP" 1>&6
 
   ICC="no"
   echo $ac_n "checking for icc""... $ac_c" 1>&6
-echo "configure:2561: checking for icc" >&5
+echo "configure:2609: checking for icc" >&5
   cat > conftest.$ac_ext <<EOF
-#line 2563 "configure"
+#line 2611 "configure"
 #include "confdefs.h"
 __INTEL_COMPILER
 EOF
@@ -2581,9 +2629,9 @@ rm -f conftest*
 
   SUNCC="no"
   echo $ac_n "checking for suncc""... $ac_c" 1>&6
-echo "configure:2585: checking for suncc" >&5
+echo "configure:2633: checking for suncc" >&5
   cat > conftest.$ac_ext <<EOF
-#line 2587 "configure"
+#line 2635 "configure"
 #include "confdefs.h"
 __SUNPRO_C
 EOF
@@ -2606,10 +2654,10 @@ rm -f conftest*
 
 if test "x$CC" != xcc; then
   echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
-echo "configure:2610: checking whether $CC and cc understand -c and -o together" >&5
+echo "configure:2658: checking whether $CC and cc understand -c and -o together" >&5
 else
   echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
-echo "configure:2613: checking whether cc understands -c and -o together" >&5
+echo "configure:2661: checking whether cc understands -c and -o together" >&5
 fi
 set dummy $CC; ac_cc="`echo $2 |
 		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
@@ -2621,16 +2669,16 @@ else
 # We do the test twice because some compilers refuse to overwrite an
 # existing .o file with -o, though they will create one.
 ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
-if { (eval echo configure:2625: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-   test -f conftest.o && { (eval echo configure:2626: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
+if { (eval echo configure:2673: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
+   test -f conftest.o && { (eval echo configure:2674: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
 then
   eval ac_cv_prog_cc_${ac_cc}_c_o=yes
   if test "x$CC" != xcc; then
     # Test first that cc exists at all.
-    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2631: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
+    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2679: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
       ac_try='cc -c conftest.c -o conftest.o 1>&5'
-      if { (eval echo configure:2633: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
-	 test -f conftest.o && { (eval echo configure:2634: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
+      if { (eval echo configure:2681: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
+	 test -f conftest.o && { (eval echo configure:2682: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
       then
         # cc works too.
         :
@@ -2657,7 +2705,7 @@ EOF
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:2661: checking how to run the C preprocessor" >&5
+echo "configure:2709: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -2672,13 +2720,13 @@ else
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 2676 "configure"
+#line 2724 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2682: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2730: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2689,13 +2737,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 2693 "configure"
+#line 2741 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2699: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2747: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2706,13 +2754,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 2710 "configure"
+#line 2758 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2716: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2764: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2737,9 +2785,9 @@ fi
 echo "$ac_t""$CPP" 1>&6
 
 echo $ac_n "checking for AIX""... $ac_c" 1>&6
-echo "configure:2741: checking for AIX" >&5
+echo "configure:2789: checking for AIX" >&5
 cat > conftest.$ac_ext <<EOF
-#line 2743 "configure"
+#line 2791 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
@@ -2761,7 +2809,7 @@ rm -f conftest*
 
 
 echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
-echo "configure:2765: checking whether ln -s works" >&5
+echo "configure:2813: checking whether ln -s works" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2786,7 +2834,7 @@ fi
 php_with_libdir=lib
 
 echo $ac_n "checking for system library directory""... $ac_c" 1>&6
-echo "configure:2790: checking for system library directory" >&5
+echo "configure:2838: checking for system library directory" >&5
 # Check whether --with-libdir or --without-libdir was given.
 if test "${with_libdir+set}" = set; then
   withval="$with_libdir"
@@ -2809,7 +2857,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_rpath=yes
 
 echo $ac_n "checking whether to enable runpaths""... $ac_c" 1>&6
-echo "configure:2813: checking whether to enable runpaths" >&5
+echo "configure:2861: checking whether to enable runpaths" >&5
 # Check whether --enable-rpath or --disable-rpath was given.
 if test "${enable_rpath+set}" = set; then
   enableval="$enable_rpath"
@@ -2830,7 +2878,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 echo $ac_n "checking if compiler supports -R""... $ac_c" 1>&6
-echo "configure:2834: checking if compiler supports -R" >&5
+echo "configure:2882: checking if compiler supports -R" >&5
 if eval "test \"`echo '$''{'php_cv_cc_dashr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2838,14 +2886,14 @@ else
   SAVE_LIBS=$LIBS
   LIBS="-R /usr/$PHP_LIBDIR $LIBS"
   cat > conftest.$ac_ext <<EOF
-#line 2842 "configure"
+#line 2890 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2849: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   php_cv_cc_dashr=yes
 else
@@ -2863,7 +2911,7 @@ if test $php_cv_cc_dashr = "yes"; then
   ld_runpath_switch=-R
 else
   echo $ac_n "checking if compiler supports -Wl,-rpath,""... $ac_c" 1>&6
-echo "configure:2867: checking if compiler supports -Wl,-rpath," >&5
+echo "configure:2915: checking if compiler supports -Wl,-rpath," >&5
   if eval "test \"`echo '$''{'php_cv_cc_rpath'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2871,14 +2919,14 @@ else
     SAVE_LIBS=$LIBS
     LIBS="-Wl,-rpath,/usr/$PHP_LIBDIR $LIBS"
     cat > conftest.$ac_ext <<EOF
-#line 2875 "configure"
+#line 2923 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2882: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2930: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   php_cv_cc_rpath=yes
 else
@@ -2909,7 +2957,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2913: checking for $ac_word" >&5
+echo "configure:2961: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2950,7 +2998,7 @@ test -n "$AWK" || AWK="bork"
       ;;
     *)
       echo $ac_n "checking if $AWK is broken""... $ac_c" 1>&6
-echo "configure:2954: checking if $AWK is broken" >&5
+echo "configure:3002: checking if $AWK is broken" >&5
       if ! $AWK 'function foo() {}' >/dev/null 2>&1 ; then
         echo "$ac_t""yes" 1>&6
         { echo "configure: error: You should install GNU awk" 1>&2; exit 1; }
@@ -2969,7 +3017,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2973: checking for $ac_word" >&5
+echo "configure:3021: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3009,7 +3057,7 @@ test -n "$YACC" || YACC="yacc"
   bison_version=none
   if test "$YACC"; then
     echo $ac_n "checking for bison version""... $ac_c" 1>&6
-echo "configure:3013: checking for bison version" >&5
+echo "configure:3061: checking for bison version" >&5
 if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3047,7 +3095,7 @@ echo "$ac_t""$php_cv_bison_version" 1>&6
   # Extract the first word of "re2c", so it can be a program name with args.
 set dummy re2c; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3051: checking for $ac_word" >&5
+echo "configure:3099: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RE2C'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3075,7 +3123,7 @@ fi
 
   if test -n "$RE2C"; then
     echo $ac_n "checking for re2c version""... $ac_c" 1>&6
-echo "configure:3079: checking for re2c version" >&5
+echo "configure:3127: checking for re2c version" >&5
 if eval "test \"`echo '$''{'php_cv_re2c_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3114,7 +3162,7 @@ esac
 php_enable_re2c_cgoto=no
 
 echo $ac_n "checking whether to enable computed goto gcc extension with re2c""... $ac_c" 1>&6
-echo "configure:3118: checking whether to enable computed goto gcc extension with re2c" >&5
+echo "configure:3166: checking whether to enable computed goto gcc extension with re2c" >&5
 # Check whether --enable-re2c-cgoto or --disable-re2c-cgoto was given.
 if test "${enable_re2c_cgoto+set}" = set; then
   enableval="$enable_re2c_cgoto"
@@ -3137,9 +3185,9 @@ if test "$PHP_RE2C_CGOTO" = "no"; then
   RE2C_FLAGS=""
 else
   echo $ac_n "checking whether re2c -g works""... $ac_c" 1>&6
-echo "configure:3141: checking whether re2c -g works" >&5
+echo "configure:3189: checking whether re2c -g works" >&5
   cat > conftest.$ac_ext <<EOF
-#line 3143 "configure"
+#line 3191 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -3157,7 +3205,7 @@ label2:
   
 ; return 0; }
 EOF
-if { (eval echo configure:3161: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3209: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     RE2C_FLAGS=""
@@ -3223,7 +3271,7 @@ case $host_alias in
       
   gcc_arg_name=ac_cv_gcc_arg_no_cpp_precomp
   echo $ac_n "checking whether $CC supports -no-cpp-precomp""... $ac_c" 1>&6
-echo "configure:3227: checking whether $CC supports -no-cpp-precomp" >&5
+echo "configure:3275: checking whether $CC supports -no-cpp-precomp" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_no_cpp_precomp'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3424,7 +3472,7 @@ esac
 # Disable PIC mode by default where it is known to be safe to do so,
 # to avoid the performance hit from the lost register
 echo $ac_n "checking whether to force non-PIC code in shared modules""... $ac_c" 1>&6
-echo "configure:3428: checking whether to force non-PIC code in shared modules" >&5
+echo "configure:3476: checking whether to force non-PIC code in shared modules" >&5
 case $host_alias in
   i?86-*-linux*|i?86-*-freebsd*)
     if test "${with_pic+set}" != "set" || test "$with_pic" = "no"; then
@@ -3454,7 +3502,7 @@ esac
 
 
 echo $ac_n "checking whether /dev/urandom exists""... $ac_c" 1>&6
-echo "configure:3458: checking whether /dev/urandom exists" >&5 
+echo "configure:3506: checking whether /dev/urandom exists" >&5 
 if test -r "/dev/urandom" && test -c "/dev/urandom"; then 
   cat >> confdefs.h <<\EOF
 #define HAVE_DEV_URANDOM 1
@@ -3515,7 +3563,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3519 "configure"
+#line 3567 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3533,7 +3581,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3537: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3585: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3553,7 +3601,7 @@ fi
   CFLAGS=$save_CFLAGS
 
   echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
-echo "configure:3557: checking for pthreads_cflags" >&5
+echo "configure:3605: checking for pthreads_cflags" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3575,7 +3623,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3579 "configure"
+#line 3627 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3593,7 +3641,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3597: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3623,7 +3671,7 @@ fi
 echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6
 
 echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
-echo "configure:3627: checking for pthreads_lib" >&5
+echo "configure:3675: checking for pthreads_lib" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3645,7 +3693,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 3649 "configure"
+#line 3697 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -3663,7 +3711,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:3667: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3715: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -3794,7 +3842,7 @@ ext_output=$PHP_AOLSERVER
 
 
 echo $ac_n "checking for AOLserver support""... $ac_c" 1>&6
-echo "configure:3798: checking for AOLserver support" >&5
+echo "configure:3846: checking for AOLserver support" >&5
 
 if test "$PHP_AOLSERVER" != "no"; then
   if test -d "$PHP_AOLSERVER/include"; then
@@ -4059,7 +4107,7 @@ ext_output=$PHP_APXS
 
 
 echo $ac_n "checking for Apache 1.x module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:4063: checking for Apache 1.x module support via DSO through APXS" >&5
+echo "configure:4111: checking for Apache 1.x module support via DSO through APXS" >&5
 
 if test "$PHP_APXS" != "no"; then
   if test "$PHP_APXS" = "yes"; then
@@ -4390,7 +4438,7 @@ ext_output=$PHP_APACHE
 
 
 echo $ac_n "checking for Apache 1.x module support""... $ac_c" 1>&6
-echo "configure:4394: checking for Apache 1.x module support" >&5
+echo "configure:4442: checking for Apache 1.x module support" >&5
 
 if test "$PHP_SAPI" != "apache" && test "$PHP_APACHE" != "no"; then
   
@@ -5267,7 +5315,7 @@ fi
 php_enable_mod_charset=no
 
 echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
-echo "configure:5271: checking whether to enable Apache charset compatibility option" >&5
+echo "configure:5319: checking whether to enable Apache charset compatibility option" >&5
 # Check whether --enable-mod-charset or --disable-mod-charset was given.
 if test "${enable_mod_charset+set}" = set; then
   enableval="$enable_mod_charset"
@@ -5299,7 +5347,7 @@ if test "$APACHE_MODULE" = "yes"; then
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:5303: checking whether $CC supports -rdynamic" >&5
+echo "configure:5351: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5342,7 +5390,7 @@ if test -n "$APACHE_INSTALL"; then
 
   
 echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
-echo "configure:5346: checking for member fd in BUFF *" >&5
+echo "configure:5394: checking for member fd in BUFF *" >&5
 if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5354,14 +5402,14 @@ else
     CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
   fi
   cat > conftest.$ac_ext <<EOF
-#line 5358 "configure"
+#line 5406 "configure"
 #include "confdefs.h"
 #include <httpd.h>
 int main() {
 conn_rec *c; int fd = c->client->fd;
 ; return 0; }
 EOF
-if { (eval echo configure:5365: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:5413: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     ac_cv_php_fd_in_buff=yes
@@ -5434,7 +5482,7 @@ ext_output=$PHP_APXS2FILTER
 
 
 echo $ac_n "checking for Apache 2.0 filter-module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:5438: checking for Apache 2.0 filter-module support via DSO through APXS" >&5
+echo "configure:5486: checking for Apache 2.0 filter-module support via DSO through APXS" >&5
 
 if test "$PHP_APXS2FILTER" != "no"; then
   if test "$PHP_APXS2FILTER" = "yes"; then
@@ -6323,7 +6371,7 @@ ext_output=$PHP_APXS2
 
 
 echo $ac_n "checking for Apache 2.0 handler-module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:6327: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
+echo "configure:6375: checking for Apache 2.0 handler-module support via DSO through APXS" >&5
 
 if test "$PHP_APXS2" != "no"; then
   if test "$PHP_APXS2" = "yes"; then
@@ -7213,7 +7261,7 @@ ext_output=$PHP_APACHE_HOOKS
 
 
 echo $ac_n "checking for Apache 1.x (hooks) module support via DSO through APXS""... $ac_c" 1>&6
-echo "configure:7217: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5
+echo "configure:7265: checking for Apache 1.x (hooks) module support via DSO through APXS" >&5
 
 if test "$PHP_APACHE_HOOKS" != "no"; then
   if test "$PHP_APACHE_HOOKS" = "yes"; then
@@ -7544,7 +7592,7 @@ ext_output=$PHP_APACHE_HOOKS_STATIC
 
 
 echo $ac_n "checking for Apache 1.x (hooks) module support""... $ac_c" 1>&6
-echo "configure:7548: checking for Apache 1.x (hooks) module support" >&5
+echo "configure:7596: checking for Apache 1.x (hooks) module support" >&5
 
 if test "$PHP_SAPI" != "apache" && test "$PHP_SAPI" != "apache_hooks" && test "$PHP_APACHE_HOOKS_STATIC" != "no"; then
 
@@ -8421,7 +8469,7 @@ fi
 php_enable_mod_charset=no
 
 echo $ac_n "checking whether to enable Apache charset compatibility option""... $ac_c" 1>&6
-echo "configure:8425: checking whether to enable Apache charset compatibility option" >&5
+echo "configure:8473: checking whether to enable Apache charset compatibility option" >&5
 # Check whether --enable-mod-charset or --disable-mod-charset was given.
 if test "${enable_mod_charset+set}" = set; then
   enableval="$enable_mod_charset"
@@ -8453,7 +8501,7 @@ if test "$APACHE_HOOKS_MODULE" = "yes";
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:8457: checking whether $CC supports -rdynamic" >&5
+echo "configure:8505: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8496,7 +8544,7 @@ if test -n "$APACHE_HOOKS_INSTALL"; then
 
   
 echo $ac_n "checking for member fd in BUFF *""... $ac_c" 1>&6
-echo "configure:8500: checking for member fd in BUFF *" >&5
+echo "configure:8548: checking for member fd in BUFF *" >&5
 if eval "test \"`echo '$''{'ac_cv_php_fd_in_buff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -8508,14 +8556,14 @@ else
     CPPFLAGS="$CPPFLAGS $APACHE_INCLUDE"
   fi
   cat > conftest.$ac_ext <<EOF
-#line 8512 "configure"
+#line 8560 "configure"
 #include "confdefs.h"
 #include <httpd.h>
 int main() {
 conn_rec *c; int fd = c->client->fd;
 ; return 0; }
 EOF
-if { (eval echo configure:8519: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:8567: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     ac_cv_php_fd_in_buff=yes
@@ -8589,7 +8637,7 @@ ext_output=$PHP_CAUDIUM
 
 
 echo $ac_n "checking for Caudium support""... $ac_c" 1>&6
-echo "configure:8593: checking for Caudium support" >&5
+echo "configure:8641: checking for Caudium support" >&5
 
 if test "$PHP_CAUDIUM" != "no"; then
   if test "$prefix" = "NONE"; then CPREF=/usr/local/; fi
@@ -8659,7 +8707,7 @@ if test "$PHP_CAUDIUM" != "no"; then
       PIKE_C_INCLUDE=/usr/local/include/`basename $PIKE`
     fi
     echo $ac_n "checking for C includes in $PIKE_C_INCLUDE""... $ac_c" 1>&6
-echo "configure:8663: checking for C includes in $PIKE_C_INCLUDE" >&5
+echo "configure:8711: checking for C includes in $PIKE_C_INCLUDE" >&5
     if test -f $PIKE_C_INCLUDE/version.h; then
       PIKE_TEST_VER=`$PIKE -e 'string v; int rel;sscanf(version(), "Pike v%s release %d", v, rel); write(v+"."+rel);'`
       ###### VERSION MATCH CHECK #######
@@ -8948,7 +8996,7 @@ ext_output=$PHP_CLI
 
 
 echo $ac_n "checking for CLI build""... $ac_c" 1>&6
-echo "configure:8952: checking for CLI build" >&5
+echo "configure:9000: checking for CLI build" >&5
 if test "$PHP_CLI" != "no"; then
   
   src=$abs_srcdir/sapi/cli/Makefile.frag
@@ -8998,7 +9046,7 @@ echo "$ac_t""$PHP_CLI" 1>&6
 php_with_continuity=no
 
 echo $ac_n "checking for Continuity support""... $ac_c" 1>&6
-echo "configure:9002: checking for Continuity support" >&5
+echo "configure:9050: checking for Continuity support" >&5
 # Check whether --with-continuity or --without-continuity was given.
 if test "${with_continuity+set}" = set; then
   withval="$with_continuity"
@@ -9022,7 +9070,7 @@ if test "$PHP_CONTINUITY" != "no"; then
     { echo "configure: error: Please specify the path to the root of your Continuity server using --with-continuity=DIR" 1>&2; exit 1; }
   fi
   echo $ac_n "checking for Continuity include files""... $ac_c" 1>&6
-echo "configure:9026: checking for Continuity include files" >&5
+echo "configure:9074: checking for Continuity include files" >&5
   if test -d $PHP_CONTINUITY/include ; then
     CAPI_INCLUDE=$PHP_CONTINUITY/include
     echo "$ac_t""Continuity Binary Distribution" 1>&6
@@ -9280,7 +9328,7 @@ ext_output=$PHP_EMBED
 
 
 echo $ac_n "checking for embedded SAPI library support""... $ac_c" 1>&6
-echo "configure:9284: checking for embedded SAPI library support" >&5
+echo "configure:9332: checking for embedded SAPI library support" >&5
 
 if test "$PHP_EMBED" != "no"; then
   case "$PHP_EMBED" in
@@ -9556,7 +9604,7 @@ ext_output=$PHP_FPM
 
 
 echo $ac_n "checking for FPM build""... $ac_c" 1>&6
-echo "configure:9560: checking for FPM build" >&5
+echo "configure:9608: checking for FPM build" >&5
 if test "$PHP_FPM" != "no"; then
   echo "$ac_t""$PHP_FPM" 1>&6
 
@@ -9564,12 +9612,12 @@ if test "$PHP_FPM" != "no"; then
   for ac_func in setenv clearenv setproctitle
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:9568: checking for $ac_func" >&5
+echo "configure:9616: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9573 "configure"
+#line 9621 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -9592,7 +9640,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:9596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -9619,14 +9667,14 @@ done
 
   
 echo $ac_n "checking for library containing socket""... $ac_c" 1>&6
-echo "configure:9623: checking for library containing socket" >&5
+echo "configure:9671: checking for library containing socket" >&5
 if eval "test \"`echo '$''{'ac_cv_search_socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_func_search_save_LIBS="$LIBS"
 ac_cv_search_socket="no"
 cat > conftest.$ac_ext <<EOF
-#line 9630 "configure"
+#line 9678 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9637,7 +9685,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:9641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9689: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_socket="none required"
 else
@@ -9648,7 +9696,7 @@ rm -f conftest*
 test "$ac_cv_search_socket" = "no" && for i in socket; do
 LIBS="-l$i  $ac_func_search_save_LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 9652 "configure"
+#line 9700 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9659,7 +9707,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:9663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9711: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_socket="-l$i"
 break
@@ -9681,14 +9729,14 @@ else :
 fi
   
 echo $ac_n "checking for library containing inet_addr""... $ac_c" 1>&6
-echo "configure:9685: checking for library containing inet_addr" >&5
+echo "configure:9733: checking for library containing inet_addr" >&5
 if eval "test \"`echo '$''{'ac_cv_search_inet_addr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_func_search_save_LIBS="$LIBS"
 ac_cv_search_inet_addr="no"
 cat > conftest.$ac_ext <<EOF
-#line 9692 "configure"
+#line 9740 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9699,7 +9747,7 @@ int main() {
 inet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:9703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_inet_addr="none required"
 else
@@ -9710,7 +9758,7 @@ rm -f conftest*
 test "$ac_cv_search_inet_addr" = "no" && for i in nsl; do
 LIBS="-l$i  $ac_func_search_save_LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 9714 "configure"
+#line 9762 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -9721,7 +9769,7 @@ int main() {
 inet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:9725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9773: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_search_inet_addr="-l$i"
 break
@@ -9746,17 +9794,17 @@ fi
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9750: checking for $ac_hdr" >&5
+echo "configure:9798: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9755 "configure"
+#line 9803 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9760: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9808: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9786,17 +9834,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9790: checking for $ac_hdr" >&5
+echo "configure:9838: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9795 "configure"
+#line 9843 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9800: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9848: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9826,17 +9874,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:9830: checking for $ac_hdr" >&5
+echo "configure:9878: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 9835 "configure"
+#line 9883 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:9840: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:9888: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -9865,17 +9913,17 @@ done
 
   
   echo $ac_n "checking for prctl""... $ac_c" 1>&6
-echo "configure:9869: checking for prctl" >&5
+echo "configure:9917: checking for prctl" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 9872 "configure"
+#line 9920 "configure"
 #include "confdefs.h"
  #include <sys/prctl.h> 
 int main() {
 prctl(0, 0, 0, 0, 0);
 ; return 0; }
 EOF
-if { (eval echo configure:9879: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:9927: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -9898,17 +9946,17 @@ rm -f conftest*
   have_clock_gettime=no
 
   echo $ac_n "checking for clock_gettime""... $ac_c" 1>&6
-echo "configure:9902: checking for clock_gettime" >&5
+echo "configure:9950: checking for clock_gettime" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 9905 "configure"
+#line 9953 "configure"
 #include "confdefs.h"
  #include <time.h> 
 int main() {
 struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
 ; return 0; }
 EOF
-if { (eval echo configure:9912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9960: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
     have_clock_gettime=yes
@@ -9926,20 +9974,20 @@ rm -f conftest*
 
   if test "$have_clock_gettime" = "no"; then
     echo $ac_n "checking for clock_gettime in -lrt""... $ac_c" 1>&6
-echo "configure:9930: checking for clock_gettime in -lrt" >&5
+echo "configure:9978: checking for clock_gettime in -lrt" >&5
 
     SAVED_LIBS="$LIBS"
     LIBS="$LIBS -lrt"
 
     cat > conftest.$ac_ext <<EOF
-#line 9936 "configure"
+#line 9984 "configure"
 #include "confdefs.h"
  #include <time.h> 
 int main() {
 struct timespec ts; clock_gettime(CLOCK_MONOTONIC, &ts);
 ; return 0; }
 EOF
-if { (eval echo configure:9943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:9991: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
       have_clock_gettime=yes
@@ -9968,13 +10016,13 @@ EOF
 
   if test "$have_clock_gettime" = "no"; then
     echo $ac_n "checking for clock_get_time""... $ac_c" 1>&6
-echo "configure:9972: checking for clock_get_time" >&5
+echo "configure:10020: checking for clock_get_time" >&5
 
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 9978 "configure"
+#line 10026 "configure"
 #include "confdefs.h"
  #include <mach/mach.h>
       #include <mach/clock.h>
@@ -9998,7 +10046,7 @@ else
       }
     
 EOF
-if { (eval echo configure:10002: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       have_clock_get_time=yes
@@ -10029,10 +10077,10 @@ EOF
   have_broken_ptrace=no
 
   echo $ac_n "checking for ptrace""... $ac_c" 1>&6
-echo "configure:10033: checking for ptrace" >&5
+echo "configure:10081: checking for ptrace" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 10036 "configure"
+#line 10084 "configure"
 #include "confdefs.h"
 
     #include <sys/types.h>
@@ -10041,7 +10089,7 @@ int main() {
 ptrace(0, 0, (void *) 0, 0);
 ; return 0; }
 EOF
-if { (eval echo configure:10045: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10093: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     have_ptrace=yes
@@ -10059,13 +10107,13 @@ rm -f conftest*
 
   if test "$have_ptrace" = "yes"; then
     echo $ac_n "checking whether ptrace works""... $ac_c" 1>&6
-echo "configure:10063: checking whether ptrace works" >&5
+echo "configure:10111: checking whether ptrace works" >&5
 
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 10069 "configure"
+#line 10117 "configure"
 #include "confdefs.h"
 
       #include <unistd.h>
@@ -10136,7 +10184,7 @@ else
       }
     
 EOF
-if { (eval echo configure:10140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""yes" 1>&6
@@ -10167,10 +10215,10 @@ EOF
 
   if test "$have_broken_ptrace" = "yes"; then
     echo $ac_n "checking for mach_vm_read""... $ac_c" 1>&6
-echo "configure:10171: checking for mach_vm_read" >&5
+echo "configure:10219: checking for mach_vm_read" >&5
 
     cat > conftest.$ac_ext <<EOF
-#line 10174 "configure"
+#line 10222 "configure"
 #include "confdefs.h"
  #include <mach/mach.h>
       #include <mach/mach_vm.h>
@@ -10181,7 +10229,7 @@ int main() {
     
 ; return 0; }
 EOF
-if { (eval echo configure:10185: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10233: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       have_mach_vm_read=yes
@@ -10217,13 +10265,13 @@ EOF
 
   if test -n "$proc_mem_file" ; then
     echo $ac_n "checking for proc mem file""... $ac_c" 1>&6
-echo "configure:10221: checking for proc mem file" >&5
+echo "configure:10269: checking for proc mem file" >&5
   
     if test "$cross_compiling" = yes; then
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 10227 "configure"
+#line 10275 "configure"
 #include "confdefs.h"
 
       #define _GNU_SOURCE
@@ -10253,7 +10301,7 @@ else
       }
     
 EOF
-if { (eval echo configure:10257: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:10305: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""$proc_mem_file" 1>&6
@@ -10297,9 +10345,9 @@ EOF
 
   
   echo $ac_n "checking if gcc supports __sync_bool_compare_and_swap""... $ac_c" 1>&6
-echo "configure:10301: checking if gcc supports __sync_bool_compare_and_swap" >&5
+echo "configure:10349: checking if gcc supports __sync_bool_compare_and_swap" >&5
   cat > conftest.$ac_ext <<EOF
-#line 10303 "configure"
+#line 10351 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -10310,7 +10358,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:10314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:10362: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
     echo "$ac_t""yes" 1>&6
@@ -10333,17 +10381,17 @@ rm -f conftest*
   have_lq=no
 
   echo $ac_n "checking for TCP_INFO""... $ac_c" 1>&6
-echo "configure:10337: checking for TCP_INFO" >&5
+echo "configure:10385: checking for TCP_INFO" >&5
 
   cat > conftest.$ac_ext <<EOF
-#line 10340 "configure"
+#line 10388 "configure"
 #include "confdefs.h"
  #include <netinet/tcp.h> 
 int main() {
 struct tcp_info ti; int x = TCP_INFO;
 ; return 0; }
 EOF
-if { (eval echo configure:10347: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10395: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     have_lq=tcp_info
@@ -10368,17 +10416,17 @@ EOF
 
   if test "$have_lq" = "no" ; then
     echo $ac_n "checking for SO_LISTENQLEN""... $ac_c" 1>&6
-echo "configure:10372: checking for SO_LISTENQLEN" >&5
+echo "configure:10420: checking for SO_LISTENQLEN" >&5
 
     cat > conftest.$ac_ext <<EOF
-#line 10375 "configure"
+#line 10423 "configure"
 #include "confdefs.h"
  #include <sys/socket.h> 
 int main() {
 int x = SO_LISTENQLIMIT; int y = SO_LISTENQLEN;
 ; return 0; }
 EOF
-if { (eval echo configure:10382: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10430: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       have_lq=so_listenq
@@ -10404,17 +10452,17 @@ EOF
 
 	
 	echo $ac_n "checking for sysconf""... $ac_c" 1>&6
-echo "configure:10408: checking for sysconf" >&5
+echo "configure:10456: checking for sysconf" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10411 "configure"
+#line 10459 "configure"
 #include "confdefs.h"
  #include <unistd.h> 
 int main() {
 sysconf(_SC_CLK_TCK);
 ; return 0; }
 EOF
-if { (eval echo configure:10418: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10466: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10435,17 +10483,17 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for times""... $ac_c" 1>&6
-echo "configure:10439: checking for times" >&5
+echo "configure:10487: checking for times" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10442 "configure"
+#line 10490 "configure"
 #include "confdefs.h"
  #include <sys/times.h> 
 int main() {
 struct tms t; times(&t);
 ; return 0; }
 EOF
-if { (eval echo configure:10449: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10497: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10466,10 +10514,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for kqueue""... $ac_c" 1>&6
-echo "configure:10470: checking for kqueue" >&5
+echo "configure:10518: checking for kqueue" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10473 "configure"
+#line 10521 "configure"
 #include "confdefs.h"
  
 		#include <sys/types.h>
@@ -10486,7 +10534,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10490: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10538: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10507,10 +10555,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for port framework""... $ac_c" 1>&6
-echo "configure:10511: checking for port framework" >&5
+echo "configure:10559: checking for port framework" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10514 "configure"
+#line 10562 "configure"
 #include "confdefs.h"
  
 		#include <port.h>
@@ -10526,7 +10574,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10530: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10578: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10547,10 +10595,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for /dev/poll""... $ac_c" 1>&6
-echo "configure:10551: checking for /dev/poll" >&5
+echo "configure:10599: checking for /dev/poll" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10554 "configure"
+#line 10602 "configure"
 #include "confdefs.h"
  
 		#include <stdio.h>
@@ -10568,7 +10616,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10572: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10620: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10589,10 +10637,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for epoll""... $ac_c" 1>&6
-echo "configure:10593: checking for epoll" >&5
+echo "configure:10641: checking for epoll" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10596 "configure"
+#line 10644 "configure"
 #include "confdefs.h"
  
 		#include <sys/epoll.h>
@@ -10621,7 +10669,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10625: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10673: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10642,10 +10690,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for poll""... $ac_c" 1>&6
-echo "configure:10646: checking for poll" >&5
+echo "configure:10694: checking for poll" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10649 "configure"
+#line 10697 "configure"
 #include "confdefs.h"
  
 		#include <poll.h>
@@ -10664,7 +10712,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10668: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10716: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -10685,10 +10733,10 @@ rm -f conftest*
 
 	
 	echo $ac_n "checking for select""... $ac_c" 1>&6
-echo "configure:10689: checking for select" >&5
+echo "configure:10737: checking for select" >&5
 
 	cat > conftest.$ac_ext <<EOF
-#line 10692 "configure"
+#line 10740 "configure"
 #include "confdefs.h"
  
 		/* According to POSIX.1-2001 */
@@ -10712,7 +10760,7 @@ int main() {
 	
 ; return 0; }
 EOF
-if { (eval echo configure:10716: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:10764: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 		cat >> confdefs.h <<\EOF
@@ -11090,7 +11138,7 @@ fi
 php_with_isapi=no
 
 echo $ac_n "checking for Zeus ISAPI support""... $ac_c" 1>&6
-echo "configure:11094: checking for Zeus ISAPI support" >&5
+echo "configure:11142: checking for Zeus ISAPI support" >&5
 # Check whether --with-isapi or --without-isapi was given.
 if test "${with_isapi+set}" = set; then
   withval="$with_isapi"
@@ -11344,7 +11392,7 @@ fi
 
 
 echo $ac_n "checking for LiteSpeed support""... $ac_c" 1>&6
-echo "configure:11348: checking for LiteSpeed support" >&5
+echo "configure:11396: checking for LiteSpeed support" >&5
 
 
 php_with_litespeed=no
@@ -11607,7 +11655,7 @@ echo "$ac_t""$PHP_LITESPEED" 1>&6
 php_with_milter=no
 
 echo $ac_n "checking for Milter support""... $ac_c" 1>&6
-echo "configure:11611: checking for Milter support" >&5
+echo "configure:11659: checking for Milter support" >&5
 # Check whether --with-milter or --without-milter was given.
 if test "${with_milter+set}" = set; then
   withval="$with_milter"
@@ -11899,7 +11947,7 @@ fi
 php_with_nsapi=no
 
 echo $ac_n "checking for NSAPI support""... $ac_c" 1>&6
-echo "configure:11903: checking for NSAPI support" >&5
+echo "configure:11951: checking for NSAPI support" >&5
 # Check whether --with-nsapi or --without-nsapi was given.
 if test "${with_nsapi+set}" = set; then
   withval="$with_nsapi"
@@ -11923,7 +11971,7 @@ if test "$PHP_NSAPI" != "no"; then
     { echo "configure: error: Please specify the path to the root of your Netscape/iPlanet/Sun Webserver using --with-nsapi=DIR" 1>&2; exit 1; }
   fi
   echo $ac_n "checking for NSAPI include files""... $ac_c" 1>&6
-echo "configure:11927: checking for NSAPI include files" >&5
+echo "configure:11975: checking for NSAPI include files" >&5
   if test -d $PHP_NSAPI/include ; then
     NSAPI_INC_DIR="$PHP_NSAPI/include"
     echo "$ac_t""Netscape 3.x / Sun 7.x style" 1>&6
@@ -11931,17 +11979,17 @@ echo "configure:11927: checking for NSAP
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:11935: checking for $ac_hdr" >&5
+echo "configure:11983: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 11940 "configure"
+#line 11988 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:11945: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:11993: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -11976,17 +12024,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:11980: checking for $ac_hdr" >&5
+echo "configure:12028: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 11985 "configure"
+#line 12033 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:11990: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:12038: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -12259,7 +12307,7 @@ fi
 php_with_phttpd=no
 
 echo $ac_n "checking for PHTTPD support""... $ac_c" 1>&6
-echo "configure:12263: checking for PHTTPD support" >&5
+echo "configure:12311: checking for PHTTPD support" >&5
 # Check whether --with-phttpd or --without-phttpd was given.
 if test "${with_phttpd+set}" = set; then
   withval="$with_phttpd"
@@ -12513,7 +12561,7 @@ fi
 php_with_pi3web=no
 
 echo $ac_n "checking for Pi3Web support""... $ac_c" 1>&6
-echo "configure:12517: checking for Pi3Web support" >&5
+echo "configure:12565: checking for Pi3Web support" >&5
 # Check whether --with-pi3web or --without-pi3web was given.
 if test "${with_pi3web+set}" = set; then
   withval="$with_pi3web"
@@ -12885,7 +12933,7 @@ ext_output=$PHP_ROXEN
 php_enable_roxen_zts=no
 
 echo $ac_n "checking whether Roxen module is build using ZTS""... $ac_c" 1>&6
-echo "configure:12889: checking whether Roxen module is build using ZTS" >&5
+echo "configure:12937: checking whether Roxen module is build using ZTS" >&5
 # Check whether --enable-roxen-zts or --disable-roxen-zts was given.
 if test "${enable_roxen_zts+set}" = set; then
   enableval="$enable_roxen_zts"
@@ -12906,7 +12954,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 RESULT=
 echo $ac_n "checking for Roxen/Pike support""... $ac_c" 1>&6
-echo "configure:12910: checking for Roxen/Pike support" >&5
+echo "configure:12958: checking for Roxen/Pike support" >&5
 if test "$PHP_ROXEN" != "no"; then
   if test ! -d $PHP_ROXEN ; then
     { echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
@@ -13192,7 +13240,7 @@ ext_output=$PHP_THTTPD
 
 
 echo $ac_n "checking for thttpd""... $ac_c" 1>&6
-echo "configure:13196: checking for thttpd" >&5
+echo "configure:13244: checking for thttpd" >&5
 
 if test "$PHP_THTTPD" != "no"; then
   if test ! -d $PHP_THTTPD; then
@@ -13225,7 +13273,7 @@ if test "$PHP_THTTPD" != "no"; then
         
   gcc_arg_name=ac_cv_gcc_arg_rdynamic
   echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
-echo "configure:13229: checking whether $CC supports -rdynamic" >&5
+echo "configure:13277: checking whether $CC supports -rdynamic" >&5
 if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -13461,24 +13509,24 @@ ext_output=$PHP_TUX
 
 
 echo $ac_n "checking for TUX""... $ac_c" 1>&6
-echo "configure:13465: checking for TUX" >&5
+echo "configure:13513: checking for TUX" >&5
 if test "$PHP_TUX" != "no"; then
   INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_TUX/php5.tux.so"
   for ac_hdr in tuxmodule.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:13472: checking for $ac_hdr" >&5
+echo "configure:13520: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 13477 "configure"
+#line 13525 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:13482: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:13530: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -13715,7 +13763,7 @@ ext_output=$PHP_WEBJAMES
 
 
 echo $ac_n "checking for webjames""... $ac_c" 1>&6
-echo "configure:13719: checking for webjames" >&5
+echo "configure:13767: checking for webjames" >&5
 
 if test "$PHP_WEBJAMES" != "no"; then
   
@@ -13975,14 +14023,14 @@ ext_output=$PHP_CGI
 
 if test "$PHP_SAPI" = "default"; then
   echo $ac_n "checking whether to build CGI binary""... $ac_c" 1>&6
-echo "configure:13979: checking whether to build CGI binary" >&5
+echo "configure:14027: checking whether to build CGI binary" >&5
   if test "$PHP_CGI" != "no"; then
     echo "$ac_t""yes" 1>&6
 
     echo $ac_n "checking for socklen_t in sys/socket.h""... $ac_c" 1>&6
-echo "configure:13984: checking for socklen_t in sys/socket.h" >&5
+echo "configure:14032: checking for socklen_t in sys/socket.h" >&5
     cat > conftest.$ac_ext <<EOF
-#line 13986 "configure"
+#line 14034 "configure"
 #include "confdefs.h"
 #include <sys/socket.h>
 EOF
@@ -14002,9 +14050,9 @@ rm -f conftest*
 
 
     echo $ac_n "checking for sun_len in sys/un.h""... $ac_c" 1>&6
-echo "configure:14006: checking for sun_len in sys/un.h" >&5
+echo "configure:14054: checking for sun_len in sys/un.h" >&5
     cat > conftest.$ac_ext <<EOF
-#line 14008 "configure"
+#line 14056 "configure"
 #include "confdefs.h"
 #include <sys/un.h>
 EOF
@@ -14024,7 +14072,7 @@ rm -f conftest*
 
 
     echo $ac_n "checking whether cross-process locking is required by accept()""... $ac_c" 1>&6
-echo "configure:14028: checking whether cross-process locking is required by accept()" >&5
+echo "configure:14076: checking whether cross-process locking is required by accept()" >&5
     case "`uname -sr`" in
       IRIX\ 5.* | SunOS\ 5.* | UNIX_System_V\ 4.0)	
         echo "$ac_t""yes" 1>&6
@@ -14268,7 +14316,7 @@ fi
 
 
 echo $ac_n "checking for chosen SAPI module""... $ac_c" 1>&6
-echo "configure:14272: checking for chosen SAPI module" >&5
+echo "configure:14320: checking for chosen SAPI module" >&5
 echo "$ac_t""$PHP_SAPI" 1>&6
 
 if test "$enable_maintainer_zts" = "yes"; then
@@ -14325,7 +14373,7 @@ fi
   # Extract the first word of "sendmail", so it can be a program name with args.
 set dummy sendmail; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:14329: checking for $ac_word" >&5
+echo "configure:14377: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PROG_SENDMAIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14364,7 +14412,7 @@ fi
 
 
   echo $ac_n "checking whether system uses EBCDIC""... $ac_c" 1>&6
-echo "configure:14368: checking whether system uses EBCDIC" >&5
+echo "configure:14416: checking whether system uses EBCDIC" >&5
 if eval "test \"`echo '$''{'ac_cv_ebcdic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14375,7 +14423,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 14379 "configure"
+#line 14427 "configure"
 #include "confdefs.h"
 
 int main(void) { 
@@ -14383,7 +14431,7 @@ int main(void) {
 } 
 
 EOF
-if { (eval echo configure:14387: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14435: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   ac_cv_ebcdic=yes
@@ -14411,7 +14459,7 @@ EOF
 
 
 echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:14415: checking whether byte ordering is bigendian" >&5
+echo "configure:14463: checking whether byte ordering is bigendian" >&5
 if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14421,7 +14469,7 @@ else
   ac_cv_c_bigendian_php=unknown
 else
   cat > conftest.$ac_ext <<EOF
-#line 14425 "configure"
+#line 14473 "configure"
 #include "confdefs.h"
 
 int main(void)
@@ -14437,7 +14485,7 @@ int main(void)
 }
   
 EOF
-if { (eval echo configure:14441: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_bigendian_php=yes
 else
@@ -14463,7 +14511,7 @@ EOF
 
 
   echo $ac_n "checking whether writing to stdout works""... $ac_c" 1>&6
-echo "configure:14467: checking whether writing to stdout works" >&5
+echo "configure:14515: checking whether writing to stdout works" >&5
 if eval "test \"`echo '$''{'ac_cv_write_stdout'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -14474,7 +14522,7 @@ else
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 14478 "configure"
+#line 14526 "configure"
 #include "confdefs.h"
 
 #ifdef HAVE_UNISTD_H
@@ -14492,7 +14540,7 @@ main()
 }
     
 EOF
-if { (eval echo configure:14496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_write_stdout=yes
@@ -14567,12 +14615,12 @@ test -d /usr/ucblib &&
   unset found
   
   echo $ac_n "checking for socket""... $ac_c" 1>&6
-echo "configure:14571: checking for socket" >&5
+echo "configure:14619: checking for socket" >&5
 if eval "test \"`echo '$''{'ac_cv_func_socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14576 "configure"
+#line 14624 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char socket(); below.  */
@@ -14595,7 +14643,7 @@ socket();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14647: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_socket=yes"
 else
@@ -14613,12 +14661,12 @@ if eval "test \"`echo '$ac_cv_func_'sock
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __socket""... $ac_c" 1>&6
-echo "configure:14617: checking for __socket" >&5
+echo "configure:14665: checking for __socket" >&5
 if eval "test \"`echo '$''{'ac_cv_func___socket'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14622 "configure"
+#line 14670 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __socket(); below.  */
@@ -14641,7 +14689,7 @@ __socket();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___socket=yes"
 else
@@ -14679,7 +14727,7 @@ EOF
   unset ac_cv_lib_socket___socket
   unset found
   echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
-echo "configure:14683: checking for socket in -lsocket" >&5
+echo "configure:14731: checking for socket in -lsocket" >&5
 ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14687,7 +14735,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14691 "configure"
+#line 14739 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14698,7 +14746,7 @@ int main() {
 socket()
 ; return 0; }
 EOF
-if { (eval echo configure:14702: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14750: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14718,7 +14766,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __socket in -lsocket""... $ac_c" 1>&6
-echo "configure:14722: checking for __socket in -lsocket" >&5
+echo "configure:14770: checking for __socket in -lsocket" >&5
 ac_lib_var=`echo socket'_'__socket | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14726,7 +14774,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14730 "configure"
+#line 14778 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14737,7 +14785,7 @@ int main() {
 __socket()
 ; return 0; }
 EOF
-if { (eval echo configure:14741: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14789: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14769,11 +14817,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 14773 "configure"
+#line 14821 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:14777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:14825: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -14824,12 +14872,12 @@ EOF
   unset found
   
   echo $ac_n "checking for socketpair""... $ac_c" 1>&6
-echo "configure:14828: checking for socketpair" >&5
+echo "configure:14876: checking for socketpair" >&5
 if eval "test \"`echo '$''{'ac_cv_func_socketpair'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14833 "configure"
+#line 14881 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char socketpair(); below.  */
@@ -14852,7 +14900,7 @@ socketpair();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14904: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_socketpair=yes"
 else
@@ -14870,12 +14918,12 @@ if eval "test \"`echo '$ac_cv_func_'sock
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __socketpair""... $ac_c" 1>&6
-echo "configure:14874: checking for __socketpair" >&5
+echo "configure:14922: checking for __socketpair" >&5
 if eval "test \"`echo '$''{'ac_cv_func___socketpair'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 14879 "configure"
+#line 14927 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __socketpair(); below.  */
@@ -14898,7 +14946,7 @@ __socketpair();
 
 ; return 0; }
 EOF
-if { (eval echo configure:14902: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:14950: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___socketpair=yes"
 else
@@ -14936,7 +14984,7 @@ EOF
   unset ac_cv_lib_socket___socketpair
   unset found
   echo $ac_n "checking for socketpair in -lsocket""... $ac_c" 1>&6
-echo "configure:14940: checking for socketpair in -lsocket" >&5
+echo "configure:14988: checking for socketpair in -lsocket" >&5
 ac_lib_var=`echo socket'_'socketpair | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14944,7 +14992,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14948 "configure"
+#line 14996 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14955,7 +15003,7 @@ int main() {
 socketpair()
 ; return 0; }
 EOF
-if { (eval echo configure:14959: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -14975,7 +15023,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __socketpair in -lsocket""... $ac_c" 1>&6
-echo "configure:14979: checking for __socketpair in -lsocket" >&5
+echo "configure:15027: checking for __socketpair in -lsocket" >&5
 ac_lib_var=`echo socket'_'__socketpair | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -14983,7 +15031,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 14987 "configure"
+#line 15035 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -14994,7 +15042,7 @@ int main() {
 __socketpair()
 ; return 0; }
 EOF
-if { (eval echo configure:14998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15046: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15026,11 +15074,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15030 "configure"
+#line 15078 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15034: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15082: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15081,12 +15129,12 @@ EOF
   unset found
   
   echo $ac_n "checking for htonl""... $ac_c" 1>&6
-echo "configure:15085: checking for htonl" >&5
+echo "configure:15133: checking for htonl" >&5
 if eval "test \"`echo '$''{'ac_cv_func_htonl'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15090 "configure"
+#line 15138 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char htonl(); below.  */
@@ -15109,7 +15157,7 @@ htonl();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15113: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_htonl=yes"
 else
@@ -15127,12 +15175,12 @@ if eval "test \"`echo '$ac_cv_func_'hton
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __htonl""... $ac_c" 1>&6
-echo "configure:15131: checking for __htonl" >&5
+echo "configure:15179: checking for __htonl" >&5
 if eval "test \"`echo '$''{'ac_cv_func___htonl'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15136 "configure"
+#line 15184 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __htonl(); below.  */
@@ -15155,7 +15203,7 @@ __htonl();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15159: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15207: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___htonl=yes"
 else
@@ -15193,7 +15241,7 @@ EOF
   unset ac_cv_lib_socket___htonl
   unset found
   echo $ac_n "checking for htonl in -lsocket""... $ac_c" 1>&6
-echo "configure:15197: checking for htonl in -lsocket" >&5
+echo "configure:15245: checking for htonl in -lsocket" >&5
 ac_lib_var=`echo socket'_'htonl | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15201,7 +15249,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15205 "configure"
+#line 15253 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15212,7 +15260,7 @@ int main() {
 htonl()
 ; return 0; }
 EOF
-if { (eval echo configure:15216: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15264: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15232,7 +15280,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __htonl in -lsocket""... $ac_c" 1>&6
-echo "configure:15236: checking for __htonl in -lsocket" >&5
+echo "configure:15284: checking for __htonl in -lsocket" >&5
 ac_lib_var=`echo socket'_'__htonl | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15240,7 +15288,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15244 "configure"
+#line 15292 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15251,7 +15299,7 @@ int main() {
 __htonl()
 ; return 0; }
 EOF
-if { (eval echo configure:15255: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15283,11 +15331,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15287 "configure"
+#line 15335 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15339: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15338,12 +15386,12 @@ EOF
   unset found
   
   echo $ac_n "checking for gethostname""... $ac_c" 1>&6
-echo "configure:15342: checking for gethostname" >&5
+echo "configure:15390: checking for gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15347 "configure"
+#line 15395 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostname(); below.  */
@@ -15366,7 +15414,7 @@ gethostname();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15370: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15418: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostname=yes"
 else
@@ -15384,12 +15432,12 @@ if eval "test \"`echo '$ac_cv_func_'geth
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
-echo "configure:15388: checking for __gethostname" >&5
+echo "configure:15436: checking for __gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15393 "configure"
+#line 15441 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __gethostname(); below.  */
@@ -15412,7 +15460,7 @@ __gethostname();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15416: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15464: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___gethostname=yes"
 else
@@ -15450,7 +15498,7 @@ EOF
   unset ac_cv_lib_nsl___gethostname
   unset found
   echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
-echo "configure:15454: checking for gethostname in -lnsl" >&5
+echo "configure:15502: checking for gethostname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15458,7 +15506,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15462 "configure"
+#line 15510 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15469,7 +15517,7 @@ int main() {
 gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:15473: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15489,7 +15537,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
-echo "configure:15493: checking for __gethostname in -lnsl" >&5
+echo "configure:15541: checking for __gethostname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15497,7 +15545,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15501 "configure"
+#line 15549 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15508,7 +15556,7 @@ int main() {
 __gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:15512: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15560: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15540,11 +15588,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15544 "configure"
+#line 15592 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15595,12 +15643,12 @@ EOF
   unset found
   
   echo $ac_n "checking for gethostbyaddr""... $ac_c" 1>&6
-echo "configure:15599: checking for gethostbyaddr" >&5
+echo "configure:15647: checking for gethostbyaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyaddr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15604 "configure"
+#line 15652 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyaddr(); below.  */
@@ -15623,7 +15671,7 @@ gethostbyaddr();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15627: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15675: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyaddr=yes"
 else
@@ -15641,12 +15689,12 @@ if eval "test \"`echo '$ac_cv_func_'geth
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __gethostbyaddr""... $ac_c" 1>&6
-echo "configure:15645: checking for __gethostbyaddr" >&5
+echo "configure:15693: checking for __gethostbyaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_func___gethostbyaddr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15650 "configure"
+#line 15698 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __gethostbyaddr(); below.  */
@@ -15669,7 +15717,7 @@ __gethostbyaddr();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___gethostbyaddr=yes"
 else
@@ -15707,7 +15755,7 @@ EOF
   unset ac_cv_lib_nsl___gethostbyaddr
   unset found
   echo $ac_n "checking for gethostbyaddr in -lnsl""... $ac_c" 1>&6
-echo "configure:15711: checking for gethostbyaddr in -lnsl" >&5
+echo "configure:15759: checking for gethostbyaddr in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostbyaddr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15715,7 +15763,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15719 "configure"
+#line 15767 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15726,7 +15774,7 @@ int main() {
 gethostbyaddr()
 ; return 0; }
 EOF
-if { (eval echo configure:15730: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15746,7 +15794,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __gethostbyaddr in -lnsl""... $ac_c" 1>&6
-echo "configure:15750: checking for __gethostbyaddr in -lnsl" >&5
+echo "configure:15798: checking for __gethostbyaddr in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__gethostbyaddr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15754,7 +15802,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15758 "configure"
+#line 15806 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15765,7 +15813,7 @@ int main() {
 __gethostbyaddr()
 ; return 0; }
 EOF
-if { (eval echo configure:15769: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -15797,11 +15845,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 15801 "configure"
+#line 15849 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:15805: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:15853: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -15852,12 +15900,12 @@ EOF
   unset found
   
   echo $ac_n "checking for yp_get_default_domain""... $ac_c" 1>&6
-echo "configure:15856: checking for yp_get_default_domain" >&5
+echo "configure:15904: checking for yp_get_default_domain" >&5
 if eval "test \"`echo '$''{'ac_cv_func_yp_get_default_domain'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15861 "configure"
+#line 15909 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char yp_get_default_domain(); below.  */
@@ -15880,7 +15928,7 @@ yp_get_default_domain();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15884: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_yp_get_default_domain=yes"
 else
@@ -15898,12 +15946,12 @@ if eval "test \"`echo '$ac_cv_func_'yp_g
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __yp_get_default_domain""... $ac_c" 1>&6
-echo "configure:15902: checking for __yp_get_default_domain" >&5
+echo "configure:15950: checking for __yp_get_default_domain" >&5
 if eval "test \"`echo '$''{'ac_cv_func___yp_get_default_domain'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 15907 "configure"
+#line 15955 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __yp_get_default_domain(); below.  */
@@ -15926,7 +15974,7 @@ __yp_get_default_domain();
 
 ; return 0; }
 EOF
-if { (eval echo configure:15930: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:15978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___yp_get_default_domain=yes"
 else
@@ -15964,7 +16012,7 @@ EOF
   unset ac_cv_lib_nsl___yp_get_default_domain
   unset found
   echo $ac_n "checking for yp_get_default_domain in -lnsl""... $ac_c" 1>&6
-echo "configure:15968: checking for yp_get_default_domain in -lnsl" >&5
+echo "configure:16016: checking for yp_get_default_domain in -lnsl" >&5
 ac_lib_var=`echo nsl'_'yp_get_default_domain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -15972,7 +16020,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 15976 "configure"
+#line 16024 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -15983,7 +16031,7 @@ int main() {
 yp_get_default_domain()
 ; return 0; }
 EOF
-if { (eval echo configure:15987: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16035: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16003,7 +16051,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __yp_get_default_domain in -lnsl""... $ac_c" 1>&6
-echo "configure:16007: checking for __yp_get_default_domain in -lnsl" >&5
+echo "configure:16055: checking for __yp_get_default_domain in -lnsl" >&5
 ac_lib_var=`echo nsl'_'__yp_get_default_domain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16011,7 +16059,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16015 "configure"
+#line 16063 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16022,7 +16070,7 @@ int main() {
 __yp_get_default_domain()
 ; return 0; }
 EOF
-if { (eval echo configure:16026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16074: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16054,11 +16102,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16058 "configure"
+#line 16106 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16110,12 +16158,12 @@ EOF
   unset found
   
   echo $ac_n "checking for dlopen""... $ac_c" 1>&6
-echo "configure:16114: checking for dlopen" >&5
+echo "configure:16162: checking for dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16119 "configure"
+#line 16167 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen(); below.  */
@@ -16138,7 +16186,7 @@ dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16190: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_dlopen=yes"
 else
@@ -16156,12 +16204,12 @@ if eval "test \"`echo '$ac_cv_func_'dlop
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __dlopen""... $ac_c" 1>&6
-echo "configure:16160: checking for __dlopen" >&5
+echo "configure:16208: checking for __dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func___dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16165 "configure"
+#line 16213 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __dlopen(); below.  */
@@ -16184,7 +16232,7 @@ __dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16236: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___dlopen=yes"
 else
@@ -16222,7 +16270,7 @@ EOF
   unset ac_cv_lib_dl___dlopen
   unset found
   echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:16226: checking for dlopen in -ldl" >&5
+echo "configure:16274: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16230,7 +16278,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16234 "configure"
+#line 16282 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16241,7 +16289,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:16245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16293: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16261,7 +16309,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:16265: checking for __dlopen in -ldl" >&5
+echo "configure:16313: checking for __dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'__dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16269,7 +16317,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16273 "configure"
+#line 16321 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16280,7 +16328,7 @@ int main() {
 __dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:16284: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16332: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16312,11 +16360,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16316 "configure"
+#line 16364 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16368: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16368,7 +16416,7 @@ EOF
 
 fi
 echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
-echo "configure:16372: checking for sin in -lm" >&5
+echo "configure:16420: checking for sin in -lm" >&5
 ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16376,7 +16424,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16380 "configure"
+#line 16428 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16387,7 +16435,7 @@ int main() {
 sin()
 ; return 0; }
 EOF
-if { (eval echo configure:16391: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16439: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16421,12 +16469,12 @@ fi
   unset found
   
   echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
-echo "configure:16425: checking for inet_aton" >&5
+echo "configure:16473: checking for inet_aton" >&5
 if eval "test \"`echo '$''{'ac_cv_func_inet_aton'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16430 "configure"
+#line 16478 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char inet_aton(); below.  */
@@ -16449,7 +16497,7 @@ inet_aton();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16453: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_inet_aton=yes"
 else
@@ -16467,12 +16515,12 @@ if eval "test \"`echo '$ac_cv_func_'inet
 else
   echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __inet_aton""... $ac_c" 1>&6
-echo "configure:16471: checking for __inet_aton" >&5
+echo "configure:16519: checking for __inet_aton" >&5
 if eval "test \"`echo '$''{'ac_cv_func___inet_aton'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16476 "configure"
+#line 16524 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char __inet_aton(); below.  */
@@ -16495,7 +16543,7 @@ __inet_aton();
 
 ; return 0; }
 EOF
-if { (eval echo configure:16499: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16547: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func___inet_aton=yes"
 else
@@ -16533,7 +16581,7 @@ EOF
   unset ac_cv_lib_resolv___inet_aton
   unset found
   echo $ac_n "checking for inet_aton in -lresolv""... $ac_c" 1>&6
-echo "configure:16537: checking for inet_aton in -lresolv" >&5
+echo "configure:16585: checking for inet_aton in -lresolv" >&5
 ac_lib_var=`echo resolv'_'inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16541,7 +16589,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16545 "configure"
+#line 16593 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16552,7 +16600,7 @@ int main() {
 inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16556: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16572,7 +16620,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __inet_aton in -lresolv""... $ac_c" 1>&6
-echo "configure:16576: checking for __inet_aton in -lresolv" >&5
+echo "configure:16624: checking for __inet_aton in -lresolv" >&5
 ac_lib_var=`echo resolv'_'__inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16580,7 +16628,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16584 "configure"
+#line 16632 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16591,7 +16639,7 @@ int main() {
 __inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16595: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16643: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16623,11 +16671,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16627 "configure"
+#line 16675 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16631: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16679: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16669,7 +16717,7 @@ EOF
   unset ac_cv_lib_bind___inet_aton
   unset found
   echo $ac_n "checking for inet_aton in -lbind""... $ac_c" 1>&6
-echo "configure:16673: checking for inet_aton in -lbind" >&5
+echo "configure:16721: checking for inet_aton in -lbind" >&5
 ac_lib_var=`echo bind'_'inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16677,7 +16725,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16681 "configure"
+#line 16729 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16688,7 +16736,7 @@ int main() {
 inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16692: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16740: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16708,7 +16756,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __inet_aton in -lbind""... $ac_c" 1>&6
-echo "configure:16712: checking for __inet_aton in -lbind" >&5
+echo "configure:16760: checking for __inet_aton in -lbind" >&5
 ac_lib_var=`echo bind'_'__inet_aton | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16716,7 +16764,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lbind  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16720 "configure"
+#line 16768 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16727,7 +16775,7 @@ int main() {
 __inet_aton()
 ; return 0; }
 EOF
-if { (eval echo configure:16731: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:16779: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -16759,11 +16807,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 16763 "configure"
+#line 16811 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:16767: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -16814,12 +16862,12 @@ EOF
 
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:16818: checking for ANSI C header files" >&5
+echo "configure:16866: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16823 "configure"
+#line 16871 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -16827,7 +16875,7 @@ else
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:16831: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:16879: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -16844,7 +16892,7 @@ rm -f conftest*
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 16848 "configure"
+#line 16896 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -16862,7 +16910,7 @@ fi
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 16866 "configure"
+#line 16914 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -16883,7 +16931,7 @@ if test "$cross_compiling" = yes; then
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 16887 "configure"
+#line 16935 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -16894,7 +16942,7 @@ if (XOR (islower (i), ISLOWER (i)) || to
 exit (0); }
 
 EOF
-if { (eval echo configure:16898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:16946: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -16922,12 +16970,12 @@ for ac_hdr in dirent.h sys/ndir.h sys/di
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
-echo "configure:16926: checking for $ac_hdr that defines DIR" >&5
+echo "configure:16974: checking for $ac_hdr that defines DIR" >&5
 if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 16931 "configure"
+#line 16979 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -16935,7 +16983,7 @@ int main() {
 DIR *dirp = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:16939: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:16987: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_header_dirent_$ac_safe=yes"
 else
@@ -16960,7 +17008,7 @@ done
 # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
 if test $ac_header_dirent = dirent.h; then
 echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
-echo "configure:16964: checking for opendir in -ldir" >&5
+echo "configure:17012: checking for opendir in -ldir" >&5
 ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -16968,7 +17016,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldir  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 16972 "configure"
+#line 17020 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -16979,7 +17027,7 @@ int main() {
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:16983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:17031: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -17001,7 +17049,7 @@ fi
 
 else
 echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
-echo "configure:17005: checking for opendir in -lx" >&5
+echo "configure:17053: checking for opendir in -lx" >&5
 ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -17009,7 +17057,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lx  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 17013 "configure"
+#line 17061 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -17020,7 +17068,7 @@ int main() {
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:17024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:17072: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -17102,17 +17150,17 @@ assert.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:17106: checking for $ac_hdr" >&5
+echo "configure:17154: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17111 "configure"
+#line 17159 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:17116: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:17164: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -17141,12 +17189,12 @@ done
 
 
   echo $ac_n "checking for fopencookie""... $ac_c" 1>&6
-echo "configure:17145: checking for fopencookie" >&5
+echo "configure:17193: checking for fopencookie" >&5
 if eval "test \"`echo '$''{'ac_cv_func_fopencookie'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17150 "configure"
+#line 17198 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char fopencookie(); below.  */
@@ -17169,7 +17217,7 @@ fopencookie();
 
 ; return 0; }
 EOF
-if { (eval echo configure:17173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:17221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_fopencookie=yes"
 else
@@ -17191,7 +17239,7 @@ fi
 
   if test "$have_glibc_fopencookie" = "yes"; then
 cat > conftest.$ac_ext <<EOF
-#line 17195 "configure"
+#line 17243 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -17201,7 +17249,7 @@ int main() {
 cookie_io_functions_t cookie;
 ; return 0; }
 EOF
-if { (eval echo configure:17205: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17253: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   have_cookie_io_functions_t=yes
 else
@@ -17220,7 +17268,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17224 "configure"
+#line 17272 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -17252,7 +17300,7 @@ main() {
 
 
 EOF
-if { (eval echo configure:17256: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17304: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cookie_io_functions_use_off64_t=yes
@@ -17272,7 +17320,7 @@ fi
     else
 
 cat > conftest.$ac_ext <<EOF
-#line 17276 "configure"
+#line 17324 "configure"
 #include "confdefs.h"
 
 #define _GNU_SOURCE
@@ -17282,7 +17330,7 @@ int main() {
  _IO_cookie_io_functions_t cookie; 
 ; return 0; }
 EOF
-if { (eval echo configure:17286: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17334: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   have_IO_cookie_io_functions_t=yes
 else
@@ -17316,7 +17364,7 @@ EOF
 
 
   echo $ac_n "checking for broken getcwd""... $ac_c" 1>&6
-echo "configure:17320: checking for broken getcwd" >&5
+echo "configure:17368: checking for broken getcwd" >&5
   os=`uname -sr 2>/dev/null`
   case $os in
     SunOS*)
@@ -17331,14 +17379,14 @@ EOF
 
 
   echo $ac_n "checking for broken libc stdio""... $ac_c" 1>&6
-echo "configure:17335: checking for broken libc stdio" >&5
+echo "configure:17383: checking for broken libc stdio" >&5
   if eval "test \"`echo '$''{'_cv_have_broken_glibc_fopen_append'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
   if test "$cross_compiling" = yes; then
   cat > conftest.$ac_ext <<EOF
-#line 17342 "configure"
+#line 17390 "configure"
 #include "confdefs.h"
 
 #include <features.h>
@@ -17351,7 +17399,7 @@ choke me
 
 ; return 0; }
 EOF
-if { (eval echo configure:17355: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17403: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   _cv_have_broken_glibc_fopen_append=yes
 else
@@ -17364,7 +17412,7 @@ rm -f conftest*
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 17368 "configure"
+#line 17416 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -17392,7 +17440,7 @@ int main(int argc, char *argv[])
 }
 
 EOF
-if { (eval echo configure:17396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17444: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   _cv_have_broken_glibc_fopen_append=no
 else
@@ -17420,12 +17468,12 @@ EOF
 
 
 echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
-echo "configure:17424: checking whether struct tm is in sys/time.h or time.h" >&5
+echo "configure:17472: checking whether struct tm is in sys/time.h or time.h" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17429 "configure"
+#line 17477 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <time.h>
@@ -17433,7 +17481,7 @@ int main() {
 struct tm *tp; tp->tm_sec;
 ; return 0; }
 EOF
-if { (eval echo configure:17437: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17485: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm=time.h
 else
@@ -17454,12 +17502,12 @@ EOF
 fi
 
 echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
-echo "configure:17458: checking for tm_zone in struct tm" >&5
+echo "configure:17506: checking for tm_zone in struct tm" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17463 "configure"
+#line 17511 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_cv_struct_tm>
@@ -17467,7 +17515,7 @@ int main() {
 struct tm tm; tm.tm_zone;
 ; return 0; }
 EOF
-if { (eval echo configure:17471: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17519: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm_zone=yes
 else
@@ -17487,12 +17535,12 @@ EOF
 
 else
   echo $ac_n "checking for tzname""... $ac_c" 1>&6
-echo "configure:17491: checking for tzname" >&5
+echo "configure:17539: checking for tzname" >&5
 if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17496 "configure"
+#line 17544 "configure"
 #include "confdefs.h"
 #include <time.h>
 #ifndef tzname /* For SGI.  */
@@ -17502,7 +17550,7 @@ int main() {
 atoi(*tzname);
 ; return 0; }
 EOF
-if { (eval echo configure:17506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:17554: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_var_tzname=yes
 else
@@ -17526,16 +17574,16 @@ fi
 
 
   echo $ac_n "checking for missing declarations of reentrant functions""... $ac_c" 1>&6
-echo "configure:17530: checking for missing declarations of reentrant functions" >&5
+echo "configure:17578: checking for missing declarations of reentrant functions" >&5
   cat > conftest.$ac_ext <<EOF
-#line 17532 "configure"
+#line 17580 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 struct tm *(*func)() = localtime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17539: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17587: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17553,14 +17601,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17557 "configure"
+#line 17605 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 struct tm *(*func)() = gmtime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17564: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17612: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17578,14 +17626,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17582 "configure"
+#line 17630 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 char *(*func)() = asctime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17589: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17637: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17603,14 +17651,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17607 "configure"
+#line 17655 "configure"
 #include "confdefs.h"
 #include <time.h>
 int main() {
 char *(*func)() = ctime_r
 ; return 0; }
 EOF
-if { (eval echo configure:17614: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17662: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17628,14 +17676,14 @@ EOF
 fi
 rm -f conftest*
   cat > conftest.$ac_ext <<EOF
-#line 17632 "configure"
+#line 17680 "configure"
 #include "confdefs.h"
 #include <string.h>
 int main() {
 char *(*func)() = strtok_r
 ; return 0; }
 EOF
-if { (eval echo configure:17639: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17687: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     :
@@ -17656,16 +17704,16 @@ rm -f conftest*
 
 
   echo $ac_n "checking for fclose declaration""... $ac_c" 1>&6
-echo "configure:17660: checking for fclose declaration" >&5
+echo "configure:17708: checking for fclose declaration" >&5
   cat > conftest.$ac_ext <<EOF
-#line 17662 "configure"
+#line 17710 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main() {
 int (*func)() = fclose
 ; return 0; }
 EOF
-if { (eval echo configure:17669: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17717: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -17691,12 +17739,12 @@ rm -f conftest*
 
 
 echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
-echo "configure:17695: checking for tm_gmtoff in struct tm" >&5
+echo "configure:17743: checking for tm_gmtoff in struct tm" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17700 "configure"
+#line 17748 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_cv_struct_tm>
@@ -17704,7 +17752,7 @@ int main() {
 struct tm tm; tm.tm_gmtoff;
 ; return 0; }
 EOF
-if { (eval echo configure:17708: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17756: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_tm_gmtoff=yes
 else
@@ -17727,12 +17775,12 @@ fi
 
 
 echo $ac_n "checking for struct flock""... $ac_c" 1>&6
-echo "configure:17731: checking for struct flock" >&5
+echo "configure:17779: checking for struct flock" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_flock'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17736 "configure"
+#line 17784 "configure"
 #include "confdefs.h"
 
 #include <unistd.h>
@@ -17742,7 +17790,7 @@ int main() {
 struct flock x;
 ; return 0; }
 EOF
-if { (eval echo configure:17746: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17794: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
           ac_cv_struct_flock=yes
@@ -17769,12 +17817,12 @@ fi
 
 
 echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
-echo "configure:17773: checking for socklen_t" >&5
+echo "configure:17821: checking for socklen_t" >&5
 if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 17778 "configure"
+#line 17826 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -17786,7 +17834,7 @@ socklen_t x;
 
 ; return 0; }
 EOF
-if { (eval echo configure:17790: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:17838: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   ac_cv_socklen_t=yes
@@ -17812,7 +17860,7 @@ fi
 
 
 echo $ac_n "checking size of size_t""... $ac_c" 1>&6
-echo "configure:17816: checking size of size_t" >&5
+echo "configure:17864: checking size of size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17820,9 +17868,10 @@ else
   ac_cv_sizeof_size_t=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17824 "configure"
+#line 17872 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -17831,7 +17880,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:17835: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17884: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_size_t=`cat conftestval`
 else
@@ -17851,7 +17900,7 @@ EOF
 
 
 echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:17855: checking size of long long" >&5
+echo "configure:17904: checking size of long long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17859,9 +17908,10 @@ else
   ac_cv_sizeof_long_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17863 "configure"
+#line 17912 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -17870,7 +17920,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:17874: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long=`cat conftestval`
 else
@@ -17890,7 +17940,7 @@ EOF
 
 
 echo $ac_n "checking size of long long int""... $ac_c" 1>&6
-echo "configure:17894: checking size of long long int" >&5
+echo "configure:17944: checking size of long long int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17898,9 +17948,10 @@ else
   ac_cv_sizeof_long_long_int=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17902 "configure"
+#line 17952 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -17909,7 +17960,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:17913: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:17964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long_int=`cat conftestval`
 else
@@ -17929,7 +17980,7 @@ EOF
 
 
 echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:17933: checking size of long" >&5
+echo "configure:17984: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17937,9 +17988,10 @@ else
   ac_cv_sizeof_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 17941 "configure"
+#line 17992 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -17948,7 +18000,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:17952: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18004: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -17968,7 +18020,7 @@ EOF
 
 
 echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:17972: checking size of int" >&5
+echo "configure:18024: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -17976,9 +18028,10 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 17980 "configure"
+#line 18032 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -17987,7 +18040,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:17991: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18044: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -18009,7 +18062,7 @@ EOF
 
 
   echo $ac_n "checking size of intmax_t""... $ac_c" 1>&6
-echo "configure:18013: checking size of intmax_t" >&5
+echo "configure:18066: checking size of intmax_t" >&5
   
   php_cache_value=php_cv_sizeof_intmax_t
   if eval "test \"`echo '$''{'php_cv_sizeof_intmax_t'+set}'`\" = set"; then
@@ -18026,7 +18079,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 18030 "configure"
+#line 18083 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -18050,7 +18103,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:18054: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18107: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -18089,7 +18142,7 @@ EOF
 
 
   echo $ac_n "checking size of ssize_t""... $ac_c" 1>&6
-echo "configure:18093: checking size of ssize_t" >&5
+echo "configure:18146: checking size of ssize_t" >&5
   
   php_cache_value=php_cv_sizeof_ssize_t
   if eval "test \"`echo '$''{'php_cv_sizeof_ssize_t'+set}'`\" = set"; then
@@ -18106,7 +18159,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 18110 "configure"
+#line 18163 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -18130,7 +18183,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:18134: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -18169,7 +18222,7 @@ EOF
 
 
   echo $ac_n "checking size of ptrdiff_t""... $ac_c" 1>&6
-echo "configure:18173: checking size of ptrdiff_t" >&5
+echo "configure:18226: checking size of ptrdiff_t" >&5
   
   php_cache_value=php_cv_sizeof_ptrdiff_t
   if eval "test \"`echo '$''{'php_cv_sizeof_ptrdiff_t'+set}'`\" = set"; then
@@ -18186,7 +18239,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 18190 "configure"
+#line 18243 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -18210,7 +18263,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:18214: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18267: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -18249,12 +18302,12 @@ EOF
 
 
 echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
-echo "configure:18253: checking for st_blksize in struct stat" >&5
+echo "configure:18306: checking for st_blksize in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18258 "configure"
+#line 18311 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -18262,7 +18315,7 @@ int main() {
 struct stat s; s.st_blksize;
 ; return 0; }
 EOF
-if { (eval echo configure:18266: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18319: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_blksize=yes
 else
@@ -18284,12 +18337,12 @@ fi
 
 if test "`uname -s 2>/dev/null`" != "QNX"; then
   echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
-echo "configure:18288: checking for st_blocks in struct stat" >&5
+echo "configure:18341: checking for st_blocks in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_blocks'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18293 "configure"
+#line 18346 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -18297,7 +18350,7 @@ int main() {
 struct stat s; s.st_blocks;
 ; return 0; }
 EOF
-if { (eval echo configure:18301: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18354: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_blocks=yes
 else
@@ -18324,12 +18377,12 @@ else
   WARNING_LEVEL=0
 fi
 echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
-echo "configure:18328: checking for st_rdev in struct stat" >&5
+echo "configure:18381: checking for st_rdev in struct stat" >&5
 if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18333 "configure"
+#line 18386 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -18337,7 +18390,7 @@ int main() {
 struct stat s; s.st_rdev;
 ; return 0; }
 EOF
-if { (eval echo configure:18341: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18394: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_struct_st_rdev=yes
 else
@@ -18359,12 +18412,12 @@ fi
 
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:18363: checking for size_t" >&5
+echo "configure:18416: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18368 "configure"
+#line 18421 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -18392,12 +18445,12 @@ EOF
 fi
 
 echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:18396: checking for uid_t in sys/types.h" >&5
+echo "configure:18449: checking for uid_t in sys/types.h" >&5
 if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18401 "configure"
+#line 18454 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 EOF
@@ -18428,12 +18481,12 @@ fi
 
 
     echo $ac_n "checking for struct sockaddr_storage""... $ac_c" 1>&6
-echo "configure:18432: checking for struct sockaddr_storage" >&5
+echo "configure:18485: checking for struct sockaddr_storage" >&5
 if eval "test \"`echo '$''{'ac_cv_sockaddr_storage'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18437 "configure"
+#line 18490 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -18441,7 +18494,7 @@ int main() {
 struct sockaddr_storage s; s
 ; return 0; }
 EOF
-if { (eval echo configure:18445: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18498: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sockaddr_storage=yes
 else
@@ -18462,13 +18515,13 @@ EOF
 
   fi
     echo $ac_n "checking for field sa_len in struct sockaddr""... $ac_c" 1>&6
-echo "configure:18466: checking for field sa_len in struct sockaddr" >&5
+echo "configure:18519: checking for field sa_len in struct sockaddr" >&5
 if eval "test \"`echo '$''{'ac_cv_sockaddr_sa_len'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 18472 "configure"
+#line 18525 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -18476,7 +18529,7 @@ int main() {
 static struct sockaddr sa; int n = (int) sa.sa_len; return n;
 ; return 0; }
 EOF
-if { (eval echo configure:18480: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:18533: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sockaddr_sa_len=yes
 else
@@ -18499,12 +18552,12 @@ EOF
 
 
 echo $ac_n "checking for IPv6 support""... $ac_c" 1>&6
-echo "configure:18503: checking for IPv6 support" >&5
+echo "configure:18556: checking for IPv6 support" >&5
 if eval "test \"`echo '$''{'ac_cv_ipv6_support'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18508 "configure"
+#line 18561 "configure"
 #include "confdefs.h"
  #include <sys/types.h>
 #include <sys/socket.h>
@@ -18513,7 +18566,7 @@ int main() {
 struct sockaddr_in6 s; struct in6_addr t=in6addr_any; int i=AF_INET6; s; t.s6_addr[0] = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:18517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_ipv6_support=yes
 else
@@ -18529,12 +18582,12 @@ echo "$ac_t""$ac_cv_ipv6_support" 1>&6
 
 
 echo $ac_n "checking for vprintf""... $ac_c" 1>&6
-echo "configure:18533: checking for vprintf" >&5
+echo "configure:18586: checking for vprintf" >&5
 if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18538 "configure"
+#line 18591 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char vprintf(); below.  */
@@ -18557,7 +18610,7 @@ vprintf();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18614: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_vprintf=yes"
 else
@@ -18581,12 +18634,12 @@ fi
 
 if test "$ac_cv_func_vprintf" != yes; then
 echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
-echo "configure:18585: checking for _doprnt" >&5
+echo "configure:18638: checking for _doprnt" >&5
 if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18590 "configure"
+#line 18643 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char _doprnt(); below.  */
@@ -18609,7 +18662,7 @@ _doprnt();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func__doprnt=yes"
 else
@@ -18718,12 +18771,12 @@ nanosleep \
 
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:18722: checking for $ac_func" >&5
+echo "configure:18775: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18727 "configure"
+#line 18780 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -18746,7 +18799,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:18750: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -18777,7 +18830,7 @@ done
   unset ac_cv_lib_rt___nanosleep
   unset found
   echo $ac_n "checking for nanosleep in -lrt""... $ac_c" 1>&6
-echo "configure:18781: checking for nanosleep in -lrt" >&5
+echo "configure:18834: checking for nanosleep in -lrt" >&5
 ac_lib_var=`echo rt'_'nanosleep | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -18785,7 +18838,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 18789 "configure"
+#line 18842 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -18796,7 +18849,7 @@ int main() {
 nanosleep()
 ; return 0; }
 EOF
-if { (eval echo configure:18800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18853: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -18816,7 +18869,7 @@ else
   echo "$ac_t""no" 1>&6
 
     echo $ac_n "checking for __nanosleep in -lrt""... $ac_c" 1>&6
-echo "configure:18820: checking for __nanosleep in -lrt" >&5
+echo "configure:18873: checking for __nanosleep in -lrt" >&5
 ac_lib_var=`echo rt'_'__nanosleep | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -18824,7 +18877,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 18828 "configure"
+#line 18881 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -18835,7 +18888,7 @@ int main() {
 __nanosleep()
 ; return 0; }
 EOF
-if { (eval echo configure:18839: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -18867,11 +18920,11 @@ fi
   found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 18871 "configure"
+#line 18924 "configure"
 #include "confdefs.h"
 main() { return (0); }
 EOF
-if { (eval echo configure:18875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:18928: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   found=yes
 else
@@ -18915,25 +18968,25 @@ EOF
 
 
 echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
-echo "configure:18919: checking for getaddrinfo" >&5
+echo "configure:18972: checking for getaddrinfo" >&5
 if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 18924 "configure"
+#line 18977 "configure"
 #include "confdefs.h"
 #include <netdb.h>
 int main() {
 struct addrinfo *g,h;g=&h;getaddrinfo("","",g,&g);
 ; return 0; }
 EOF
-if { (eval echo configure:18931: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:18984: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   if test "$cross_compiling" = yes; then
   ac_cv_func_getaddrinfo=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 18937 "configure"
+#line 18990 "configure"
 #include "confdefs.h"
 
 #include <netdb.h>
@@ -18973,7 +19026,7 @@ int main(void) {
 }
   
 EOF
-if { (eval echo configure:18977: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19030: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_getaddrinfo=yes
 else
@@ -19003,19 +19056,19 @@ EOF
 fi
 
 echo $ac_n "checking for __sync_fetch_and_add""... $ac_c" 1>&6
-echo "configure:19007: checking for __sync_fetch_and_add" >&5
+echo "configure:19060: checking for __sync_fetch_and_add" >&5
 if eval "test \"`echo '$''{'ac_cv_func_sync_fetch_and_add'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19012 "configure"
+#line 19065 "configure"
 #include "confdefs.h"
 
 int main() {
 int x;__sync_fetch_and_add(&x,1);
 ; return 0; }
 EOF
-if { (eval echo configure:19019: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19072: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_sync_fetch_and_add=yes
 else
@@ -19038,12 +19091,12 @@ fi
 for ac_func in strlcat strlcpy getopt
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:19042: checking for $ac_func" >&5
+echo "configure:19095: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19047 "configure"
+#line 19100 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -19066,7 +19119,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -19093,7 +19146,7 @@ done
 
 
 echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
-echo "configure:19097: checking whether utime accepts a null argument" >&5
+echo "configure:19150: checking whether utime accepts a null argument" >&5
 if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19103,7 +19156,7 @@ if test "$cross_compiling" = yes; then
   ac_cv_func_utime_null=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 19107 "configure"
+#line 19160 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -19114,7 +19167,7 @@ exit(!(stat ("conftestdata", &s) == 0 &&
 && t.st_mtime - s.st_mtime < 120));
 }
 EOF
-if { (eval echo configure:19118: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19171: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_utime_null=yes
 else
@@ -19140,19 +19193,19 @@ fi
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:19144: checking for working alloca.h" >&5
+echo "configure:19197: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19149 "configure"
+#line 19202 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:19156: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -19173,12 +19226,12 @@ EOF
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:19177: checking for alloca" >&5
+echo "configure:19230: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19182 "configure"
+#line 19235 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -19206,7 +19259,7 @@ int main() {
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:19210: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19263: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -19238,12 +19291,12 @@ EOF
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:19242: checking whether alloca needs Cray hooks" >&5
+echo "configure:19295: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19247 "configure"
+#line 19300 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -19268,12 +19321,12 @@ echo "$ac_t""$ac_cv_os_cray" 1>&6
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:19272: checking for $ac_func" >&5
+echo "configure:19325: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19277 "configure"
+#line 19330 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -19296,7 +19349,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19353: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -19323,7 +19376,7 @@ done
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:19327: checking stack direction for C alloca" >&5
+echo "configure:19380: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19331,7 +19384,7 @@ else
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 19335 "configure"
+#line 19388 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -19350,7 +19403,7 @@ main ()
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:19354: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -19373,13 +19426,13 @@ fi
 
 
   echo $ac_n "checking for declared timezone""... $ac_c" 1>&6
-echo "configure:19377: checking for declared timezone" >&5
+echo "configure:19430: checking for declared timezone" >&5
 if eval "test \"`echo '$''{'ac_cv_declared_timezone'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 19383 "configure"
+#line 19436 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -19394,7 +19447,7 @@ int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:19398: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19451: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   ac_cv_declared_timezone=yes
@@ -19420,7 +19473,7 @@ EOF
 
 
 echo $ac_n "checking for type of reentrant time-related functions""... $ac_c" 1>&6
-echo "configure:19424: checking for type of reentrant time-related functions" >&5
+echo "configure:19477: checking for type of reentrant time-related functions" >&5
 if eval "test \"`echo '$''{'ac_cv_time_r_type'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19431,7 +19484,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 19435 "configure"
+#line 19488 "configure"
 #include "confdefs.h"
 
 #include <time.h>
@@ -19449,7 +19502,7 @@ return (1);
 }
 
 EOF
-if { (eval echo configure:19453: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19506: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   ac_cv_time_r_type=hpux
@@ -19465,7 +19518,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 19469 "configure"
+#line 19522 "configure"
 #include "confdefs.h"
 
 #include <time.h>
@@ -19481,7 +19534,7 @@ main() {
 }
   
 EOF
-if { (eval echo configure:19485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19538: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     ac_cv_time_r_type=irix
@@ -19519,12 +19572,12 @@ EOF
 
 
     echo $ac_n "checking for readdir_r""... $ac_c" 1>&6
-echo "configure:19523: checking for readdir_r" >&5
+echo "configure:19576: checking for readdir_r" >&5
 if eval "test \"`echo '$''{'ac_cv_func_readdir_r'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19528 "configure"
+#line 19581 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char readdir_r(); below.  */
@@ -19547,7 +19600,7 @@ readdir_r();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19551: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_readdir_r=yes"
 else
@@ -19569,7 +19622,7 @@ fi
 
   if test "$ac_cv_func_readdir_r" = "yes"; then
   echo $ac_n "checking for type of readdir_r""... $ac_c" 1>&6
-echo "configure:19573: checking for type of readdir_r" >&5
+echo "configure:19626: checking for type of readdir_r" >&5
 if eval "test \"`echo '$''{'ac_cv_what_readdir_r'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19580,7 +19633,7 @@ else
    
 else
   cat > conftest.$ac_ext <<EOF
-#line 19584 "configure"
+#line 19637 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
@@ -19605,7 +19658,7 @@ main() {
 }
     
 EOF
-if { (eval echo configure:19609: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:19662: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_what_readdir_r=POSIX
@@ -19616,7 +19669,7 @@ else
   rm -fr conftest*
   
       cat > conftest.$ac_ext <<EOF
-#line 19620 "configure"
+#line 19673 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
@@ -19626,7 +19679,7 @@ int readdir_r(DIR *, struct dirent *);
         
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:19630: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:19683: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -19668,12 +19721,12 @@ EOF
 
 
 echo $ac_n "checking for in_addr_t""... $ac_c" 1>&6
-echo "configure:19672: checking for in_addr_t" >&5
+echo "configure:19725: checking for in_addr_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_in_addr_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19677 "configure"
+#line 19730 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -19707,12 +19760,12 @@ fi
 for ac_func in crypt_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:19711: checking for $ac_func" >&5
+echo "configure:19764: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 19716 "configure"
+#line 19769 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -19735,7 +19788,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:19739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:19792: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -19763,14 +19816,14 @@ done
 if test "x$php_crypt_r" = "x1"; then
   
   echo $ac_n "checking which data struct is used by crypt_r""... $ac_c" 1>&6
-echo "configure:19767: checking which data struct is used by crypt_r" >&5
+echo "configure:19820: checking which data struct is used by crypt_r" >&5
 if eval "test \"`echo '$''{'php_cv_crypt_r_style'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     php_cv_crypt_r_style=none
     cat > conftest.$ac_ext <<EOF
-#line 19774 "configure"
+#line 19827 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19783,7 +19836,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19787: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19840: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=cryptd
 else
@@ -19794,7 +19847,7 @@ rm -f conftest*
 
     if test "$php_cv_crypt_r_style" = "none"; then
       cat > conftest.$ac_ext <<EOF
-#line 19798 "configure"
+#line 19851 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19807,7 +19860,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19811: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19864: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=struct_crypt_data
 else
@@ -19819,7 +19872,7 @@ rm -f conftest*
 
     if test "$php_cv_crypt_r_style" = "none"; then
       cat > conftest.$ac_ext <<EOF
-#line 19823 "configure"
+#line 19876 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT 1
@@ -19833,7 +19886,7 @@ crypt_r("passwd", "hash", &buffer);
 
 ; return 0; }
 EOF
-if { (eval echo configure:19837: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:19890: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   php_cv_crypt_r_style=struct_crypt_data_gnu_source
 else
@@ -19892,7 +19945,7 @@ fi
 php_enable_gcov=no
 
 echo $ac_n "checking whether to include gcov symbols""... $ac_c" 1>&6
-echo "configure:19896: checking whether to include gcov symbols" >&5
+echo "configure:19949: checking whether to include gcov symbols" >&5
 # Check whether --enable-gcov or --disable-gcov was given.
 if test "${enable_gcov+set}" = set; then
   enableval="$enable_gcov"
@@ -19931,7 +19984,7 @@ if test "$PHP_GCOV" = "yes"; then
   # Extract the first word of "lcov", so it can be a program name with args.
 set dummy lcov; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:19935: checking for $ac_word" >&5
+echo "configure:19988: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LTP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19960,7 +20013,7 @@ fi
   # Extract the first word of "genhtml", so it can be a program name with args.
 set dummy genhtml; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:19964: checking for $ac_word" >&5
+echo "configure:20017: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LTP_GENHTML'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -19995,7 +20048,7 @@ fi
 
   if test "$LTP"; then
     echo $ac_n "checking for ltp version""... $ac_c" 1>&6
-echo "configure:19999: checking for ltp version" >&5
+echo "configure:20052: checking for ltp version" >&5
 if eval "test \"`echo '$''{'php_cv_ltp_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -20052,7 +20105,7 @@ fi
 php_enable_debug=no
 
 echo $ac_n "checking whether to include debugging symbols""... $ac_c" 1>&6
-echo "configure:20056: checking whether to include debugging symbols" >&5
+echo "configure:20109: checking whether to include debugging symbols" >&5
 # Check whether --enable-debug or --disable-debug was given.
 if test "${enable_debug+set}" = set; then
   enableval="$enable_debug"
@@ -20100,7 +20153,7 @@ fi
 php_with_layout=PHP
 
 echo $ac_n "checking layout of installed files""... $ac_c" 1>&6
-echo "configure:20104: checking layout of installed files" >&5
+echo "configure:20157: checking layout of installed files" >&5
 # Check whether --with-layout or --without-layout was given.
 if test "${with_layout+set}" = set; then
   withval="$with_layout"
@@ -20132,7 +20185,7 @@ esac
 php_with_config_file_path=DEFAULT
 
 echo $ac_n "checking path to configuration file""... $ac_c" 1>&6
-echo "configure:20136: checking path to configuration file" >&5
+echo "configure:20189: checking path to configuration file" >&5
 # Check whether --with-config-file-path or --without-config-file-path was given.
 if test "${with_config_file_path+set}" = set; then
   withval="$with_config_file_path"
@@ -20163,7 +20216,7 @@ if test "$PHP_CONFIG_FILE_PATH" = "DEFAU
 fi
 
 echo $ac_n "checking where to scan for configuration files""... $ac_c" 1>&6
-echo "configure:20167: checking where to scan for configuration files" >&5
+echo "configure:20220: checking where to scan for configuration files" >&5
 
 php_with_config_file_scan_dir=DEFAULT
 
@@ -20196,7 +20249,7 @@ test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLA
 php_enable_safe_mode=no
 
 echo $ac_n "checking whether to enable safe mode by default""... $ac_c" 1>&6
-echo "configure:20200: checking whether to enable safe mode by default" >&5
+echo "configure:20253: checking whether to enable safe mode by default" >&5
 # Check whether --enable-safe-mode or --disable-safe-mode was given.
 if test "${enable_safe_mode+set}" = set; then
   enableval="$enable_safe_mode"
@@ -20228,7 +20281,7 @@ EOF
 fi
 
 echo $ac_n "checking for safe mode exec dir""... $ac_c" 1>&6
-echo "configure:20232: checking for safe mode exec dir" >&5
+echo "configure:20285: checking for safe mode exec dir" >&5
 
 php_with_exec_dir=no
 
@@ -20269,7 +20322,7 @@ fi
 php_enable_sigchild=no
 
 echo $ac_n "checking whether to enable PHP's own SIGCHLD handler""... $ac_c" 1>&6
-echo "configure:20273: checking whether to enable PHP's own SIGCHLD handler" >&5
+echo "configure:20326: checking whether to enable PHP's own SIGCHLD handler" >&5
 # Check whether --enable-sigchild or --disable-sigchild was given.
 if test "${enable_sigchild+set}" = set; then
   enableval="$enable_sigchild"
@@ -20304,7 +20357,7 @@ fi
 php_enable_magic_quotes=no
 
 echo $ac_n "checking whether to enable magic quotes by default""... $ac_c" 1>&6
-echo "configure:20308: checking whether to enable magic quotes by default" >&5
+echo "configure:20361: checking whether to enable magic quotes by default" >&5
 # Check whether --enable-magic-quotes or --disable-magic-quotes was given.
 if test "${enable_magic_quotes+set}" = set; then
   enableval="$enable_magic_quotes"
@@ -20339,7 +20392,7 @@ fi
 php_enable_libgcc=no
 
 echo $ac_n "checking whether to explicitly link against libgcc""... $ac_c" 1>&6
-echo "configure:20343: checking whether to explicitly link against libgcc" >&5
+echo "configure:20396: checking whether to explicitly link against libgcc" >&5
 # Check whether --enable-libgcc or --disable-libgcc was given.
 if test "${enable_libgcc+set}" = set; then
   enableval="$enable_libgcc"
@@ -20416,7 +20469,7 @@ fi
 php_enable_short_tags=yes
 
 echo $ac_n "checking whether to enable short tags by default""... $ac_c" 1>&6
-echo "configure:20420: checking whether to enable short tags by default" >&5
+echo "configure:20473: checking whether to enable short tags by default" >&5
 # Check whether --enable-short-tags or --disable-short-tags was given.
 if test "${enable_short_tags+set}" = set; then
   enableval="$enable_short_tags"
@@ -20451,7 +20504,7 @@ fi
 php_enable_dmalloc=no
 
 echo $ac_n "checking whether to enable dmalloc""... $ac_c" 1>&6
-echo "configure:20455: checking whether to enable dmalloc" >&5
+echo "configure:20508: checking whether to enable dmalloc" >&5
 # Check whether --enable-dmalloc or --disable-dmalloc was given.
 if test "${enable_dmalloc+set}" = set; then
   enableval="$enable_dmalloc"
@@ -20472,7 +20525,7 @@ echo "$ac_t""$ext_output" 1>&6
 
 if test "$PHP_DMALLOC" = "yes"; then
   echo $ac_n "checking for dmalloc_error in -ldmalloc""... $ac_c" 1>&6
-echo "configure:20476: checking for dmalloc_error in -ldmalloc" >&5
+echo "configure:20529: checking for dmalloc_error in -ldmalloc" >&5
 ac_lib_var=`echo dmalloc'_'dmalloc_error | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -20480,7 +20533,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldmalloc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 20484 "configure"
+#line 20537 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -20491,7 +20544,7 @@ int main() {
 dmalloc_error()
 ; return 0; }
 EOF
-if { (eval echo configure:20495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:20548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -20536,7 +20589,7 @@ fi
 php_enable_ipv6=yes
 
 echo $ac_n "checking whether to enable IPv6 support""... $ac_c" 1>&6
-echo "configure:20540: checking whether to enable IPv6 support" >&5
+echo "configure:20593: checking whether to enable IPv6 support" >&5
 # Check whether --enable-ipv6 or --disable-ipv6 was given.
 if test "${enable_ipv6+set}" = set; then
   enableval="$enable_ipv6"
@@ -20563,7 +20616,7 @@ EOF
 fi
 
 echo $ac_n "checking how big to make fd sets""... $ac_c" 1>&6
-echo "configure:20567: checking how big to make fd sets" >&5
+echo "configure:20620: checking how big to make fd sets" >&5
 
 php_enable_fd_setsize=no
 
@@ -20631,7 +20684,7 @@ fi
 
 
 echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:20635: checking size of long" >&5
+echo "configure:20688: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -20639,9 +20692,10 @@ else
   ac_cv_sizeof_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 20643 "configure"
+#line 20696 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -20650,7 +20704,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:20654: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:20708: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -20670,7 +20724,7 @@ EOF
 
 
 echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:20674: checking size of int" >&5
+echo "configure:20728: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -20678,9 +20732,10 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 20682 "configure"
+#line 20736 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -20689,7 +20744,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:20693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:20748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -20710,13 +20765,13 @@ EOF
 
 
 echo $ac_n "checking for int32_t""... $ac_c" 1>&6
-echo "configure:20714: checking for int32_t" >&5
+echo "configure:20769: checking for int32_t" >&5
 if eval "test \"`echo '$''{'ac_cv_int_type_int32_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 cat > conftest.$ac_ext <<EOF
-#line 20720 "configure"
+#line 20775 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H
@@ -20735,7 +20790,7 @@ if (sizeof (int32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:20739: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:20794: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_int_type_int32_t=yes
 else
@@ -20758,13 +20813,13 @@ fi
 
 
 echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
-echo "configure:20762: checking for uint32_t" >&5
+echo "configure:20817: checking for uint32_t" >&5
 if eval "test \"`echo '$''{'ac_cv_int_type_uint32_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 cat > conftest.$ac_ext <<EOF
-#line 20768 "configure"
+#line 20823 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H
@@ -20783,7 +20838,7 @@ if (sizeof (uint32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:20787: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:20842: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_int_type_uint32_t=yes
 else
@@ -20815,17 +20870,17 @@ stdlib.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:20819: checking for $ac_hdr" >&5
+echo "configure:20874: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 20824 "configure"
+#line 20879 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:20829: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:20884: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -20855,12 +20910,12 @@ done
 for ac_func in strtoll atoll strftime
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:20859: checking for $ac_func" >&5
+echo "configure:20914: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 20864 "configure"
+#line 20919 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -20883,7 +20938,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:20887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:20942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -20909,6 +20964,44 @@ done
 
 
 
+php_with_system_tzdata=no
+
+echo $ac_n "checking for use of system timezone data""... $ac_c" 1>&6
+echo "configure:20971: checking for use of system timezone data" >&5
+# Check whether --with-system-tzdata or --without-system-tzdata was given.
+if test "${with_system_tzdata+set}" = set; then
+  withval="$with_system_tzdata"
+  PHP_SYSTEM_TZDATA=$withval
+else
+  
+  PHP_SYSTEM_TZDATA=no
+  
+
+fi
+
+
+ext_output=$PHP_SYSTEM_TZDATA
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SYSTEM_TZDATA" != "no"; then
+   cat >> confdefs.h <<\EOF
+#define HAVE_SYSTEM_TZDATA 1
+EOF
+
+
+   if test "$PHP_SYSTEM_TZDATA" != "yes"; then
+      cat >> confdefs.h <<EOF
+#define HAVE_SYSTEM_TZDATA_PREFIX "$PHP_SYSTEM_TZDATA"
+EOF
+
+   fi
+fi
+
+
+
 
 PHP_DATE_CFLAGS="-I@ext_builddir@/lib"
 timelib_sources="lib/astro.c lib/dow.c lib/parse_date.c lib/parse_tz.c 
@@ -21345,7 +21438,7 @@ case $PHP_REGEX in
 esac
 
 echo $ac_n "checking which regex library to use""... $ac_c" 1>&6
-echo "configure:21349: checking which regex library to use" >&5
+echo "configure:21442: checking which regex library to use" >&5
 echo "$ac_t""$REGEX_TYPE" 1>&6
 
 if test "$REGEX_TYPE" = "php"; then
@@ -21722,13 +21815,13 @@ elif test "$REGEX_TYPE" = "system"; then
 EOF
 
     echo $ac_n "checking whether field re_magic exists in struct regex_t""... $ac_c" 1>&6
-echo "configure:21726: checking whether field re_magic exists in struct regex_t" >&5
+echo "configure:21819: checking whether field re_magic exists in struct regex_t" >&5
 if eval "test \"`echo '$''{'ac_cv_regex_t_re_magic'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
   cat > conftest.$ac_ext <<EOF
-#line 21732 "configure"
+#line 21825 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <regex.h>
@@ -21736,7 +21829,7 @@ int main() {
 regex_t rt; rt.re_magic;
 ; return 0; }
 EOF
-if { (eval echo configure:21740: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:21833: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_regex_t_re_magic=yes
 else
@@ -21762,7 +21855,7 @@ fi
 php_enable_libxml=yes
 
 echo $ac_n "checking whether to enable LIBXML support""... $ac_c" 1>&6
-echo "configure:21766: checking whether to enable LIBXML support" >&5
+echo "configure:21859: checking whether to enable LIBXML support" >&5
 # Check whether --enable-libxml or --disable-libxml was given.
 if test "${enable_libxml+set}" = set; then
   enableval="$enable_libxml"
@@ -21807,7 +21900,7 @@ if test -z "$PHP_LIBXML_DIR"; then
 php_with_libxml_dir=no
 
 echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:21811: checking libxml2 install dir" >&5
+echo "configure:21904: checking libxml2 install dir" >&5
 # Check whether --with-libxml-dir or --without-libxml-dir was given.
 if test "${with_libxml_dir+set}" = set; then
   withval="$with_libxml_dir"
@@ -21833,7 +21926,7 @@ if test "$PHP_LIBXML" != "no"; then
 
   
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:21837: checking for xml2-config path" >&5
+echo "configure:21930: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -21991,7 +22084,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:21995: checking whether libxml build works" >&5
+echo "configure:22088: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -22007,7 +22100,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 22011 "configure"
+#line 22104 "configure"
 #include "confdefs.h"
 
     
@@ -22018,7 +22111,7 @@ else
     }
   
 EOF
-if { (eval echo configure:22022: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:22115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -22383,7 +22476,7 @@ fi
 php_with_openssl=no
 
 echo $ac_n "checking for OpenSSL support""... $ac_c" 1>&6
-echo "configure:22387: checking for OpenSSL support" >&5
+echo "configure:22480: checking for OpenSSL support" >&5
 # Check whether --with-openssl or --without-openssl was given.
 if test "${with_openssl+set}" = set; then
   withval="$with_openssl"
@@ -22427,7 +22520,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_kerberos=no
 
 echo $ac_n "checking for Kerberos support""... $ac_c" 1>&6
-echo "configure:22431: checking for Kerberos support" >&5
+echo "configure:22524: checking for Kerberos support" >&5
 # Check whether --with-kerberos or --without-kerberos was given.
 if test "${with_kerberos+set}" = set; then
   withval="$with_kerberos"
@@ -22753,7 +22846,7 @@ EOF
     # Extract the first word of "krb5-config", so it can be a program name with args.
 set dummy krb5-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:22757: checking for $ac_word" >&5
+echo "configure:22850: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -23113,7 +23206,7 @@ fi
   fi
 
   echo $ac_n "checking for DSA_get_default_method in -lssl""... $ac_c" 1>&6
-echo "configure:23117: checking for DSA_get_default_method in -lssl" >&5
+echo "configure:23210: checking for DSA_get_default_method in -lssl" >&5
 ac_lib_var=`echo ssl'_'DSA_get_default_method | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23121,7 +23214,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23125 "configure"
+#line 23218 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23132,7 +23225,7 @@ int main() {
 DSA_get_default_method()
 ; return 0; }
 EOF
-if { (eval echo configure:23136: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23229: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23156,7 +23249,7 @@ else
 fi
 
   echo $ac_n "checking for X509_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:23160: checking for X509_free in -lcrypto" >&5
+echo "configure:23253: checking for X509_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'X509_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23164,7 +23257,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23168 "configure"
+#line 23261 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23175,7 +23268,7 @@ int main() {
 X509_free()
 ; return 0; }
 EOF
-if { (eval echo configure:23179: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23217,7 +23310,7 @@ fi
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:23221: checking for $ac_word" >&5
+echo "configure:23314: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -23422,9 +23515,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:23426: checking for OpenSSL version" >&5
+echo "configure:23519: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 23428 "configure"
+#line 23521 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -23579,7 +23672,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:23583: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:23676: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23587,7 +23680,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23591 "configure"
+#line 23684 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23598,7 +23691,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:23602: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23695: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23755,7 +23848,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:23759: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:23852: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -23763,7 +23856,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 23767 "configure"
+#line 23860 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -23774,7 +23867,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:23778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:23871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -23939,7 +24032,7 @@ ext_output=$PHP_PCRE_REGEX
 
   if test "$PHP_PCRE_REGEX" != "yes" && test "$PHP_PCRE_REGEX" != "no"; then
     echo $ac_n "checking for PCRE headers location""... $ac_c" 1>&6
-echo "configure:23943: checking for PCRE headers location" >&5
+echo "configure:24036: checking for PCRE headers location" >&5
     for i in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/include $PHP_PCRE_REGEX/include/pcre $PHP_PCRE_REGEX/local/include; do
       test -f $i/pcre.h && PCRE_INCDIR=$i
     done
@@ -23950,7 +24043,7 @@ echo "configure:23943: checking for PCRE
     echo "$ac_t""$PCRE_INCDIR" 1>&6
 
     echo $ac_n "checking for PCRE library location""... $ac_c" 1>&6
-echo "configure:23954: checking for PCRE library location" >&5
+echo "configure:24047: checking for PCRE library location" >&5
     for j in $PHP_PCRE_REGEX $PHP_PCRE_REGEX/$PHP_LIBDIR; do
       test -f $j/libpcre.a || test -f $j/libpcre.$SHLIB_SUFFIX_NAME && PCRE_LIBDIR=$j
     done
@@ -24372,7 +24465,7 @@ EOF
 
   else
     echo $ac_n "checking for PCRE library to use""... $ac_c" 1>&6
-echo "configure:24376: checking for PCRE library to use" >&5
+echo "configure:24469: checking for PCRE library to use" >&5
     echo "$ac_t""bundled" 1>&6
     pcrelib_sources="pcrelib/pcre_chartables.c pcrelib/pcre_ucd.c \
     				 pcrelib/pcre_compile.c pcrelib/pcre_config.c pcrelib/pcre_exec.c \
@@ -24709,7 +24802,7 @@ EOF
 php_with_sqlite3=yes
 
 echo $ac_n "checking whether to enable the SQLite3 extension""... $ac_c" 1>&6
-echo "configure:24713: checking whether to enable the SQLite3 extension" >&5
+echo "configure:24806: checking whether to enable the SQLite3 extension" >&5
 # Check whether --with-sqlite3 or --without-sqlite3 was given.
 if test "${with_sqlite3+set}" = set; then
   withval="$with_sqlite3"
@@ -24764,7 +24857,7 @@ if test $PHP_SQLITE3 != "no"; then
 
   if test $PHP_SQLITE3 != "yes"; then
     echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
-echo "configure:24768: checking for sqlite3 files in default path" >&5
+echo "configure:24861: checking for sqlite3 files in default path" >&5
     for i in $PHP_SQLITE3 /usr/local /usr; do
       if test -r $i/include/sqlite3.h; then
         SQLITE3_DIR=$i
@@ -24779,7 +24872,7 @@ echo "configure:24768: checking for sqli
     fi
 
     echo $ac_n "checking for SQLite 3.3.9+""... $ac_c" 1>&6
-echo "configure:24783: checking for SQLite 3.3.9+" >&5
+echo "configure:24876: checking for SQLite 3.3.9+" >&5
     
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
@@ -24878,7 +24971,7 @@ echo "configure:24783: checking for SQLi
   done
 
   echo $ac_n "checking for sqlite3_prepare_v2 in -lsqlite3""... $ac_c" 1>&6
-echo "configure:24882: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
+echo "configure:24975: checking for sqlite3_prepare_v2 in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_prepare_v2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -24886,7 +24979,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 24890 "configure"
+#line 24983 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -24897,7 +24990,7 @@ int main() {
 sqlite3_prepare_v2()
 ; return 0; }
 EOF
-if { (eval echo configure:24901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:24994: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -25157,7 +25250,7 @@ fi
   done
 
   echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
-echo "configure:25161: checking for sqlite3_key in -lsqlite3" >&5
+echo "configure:25254: checking for sqlite3_key in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -25165,7 +25258,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 25169 "configure"
+#line 25262 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -25176,7 +25269,7 @@ int main() {
 sqlite3_key()
 ; return 0; }
 EOF
-if { (eval echo configure:25180: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:25273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -25308,7 +25401,7 @@ fi
   done
 
   echo $ac_n "checking for sqlite3_load_extension in -lsqlite3""... $ac_c" 1>&6
-echo "configure:25312: checking for sqlite3_load_extension in -lsqlite3" >&5
+echo "configure:25405: checking for sqlite3_load_extension in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_load_extension | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -25316,7 +25409,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 25320 "configure"
+#line 25413 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -25327,7 +25420,7 @@ int main() {
 sqlite3_load_extension()
 ; return 0; }
 EOF
-if { (eval echo configure:25331: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:25424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -25364,7 +25457,7 @@ fi
 
   else
     echo $ac_n "checking bundled sqlite3 library""... $ac_c" 1>&6
-echo "configure:25368: checking bundled sqlite3 library" >&5
+echo "configure:25461: checking bundled sqlite3 library" >&5
     echo "$ac_t""yes" 1>&6
 
     sqlite3_extra_sources="libsqlite/sqlite3.c"
@@ -25720,7 +25813,7 @@ fi
 php_with_zlib=no
 
 echo $ac_n "checking for ZLIB support""... $ac_c" 1>&6
-echo "configure:25724: checking for ZLIB support" >&5
+echo "configure:25817: checking for ZLIB support" >&5
 # Check whether --with-zlib or --without-zlib was given.
 if test "${with_zlib+set}" = set; then
   withval="$with_zlib"
@@ -25764,7 +25857,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_zlib_dir=no
 
 echo $ac_n "checking if the location of ZLIB install directory is defined""... $ac_c" 1>&6
-echo "configure:25768: checking if the location of ZLIB install directory is defined" >&5
+echo "configure:25861: checking if the location of ZLIB install directory is defined" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -26207,7 +26300,7 @@ EOF
   done
 
   echo $ac_n "checking for gzgets in -lz""... $ac_c" 1>&6
-echo "configure:26211: checking for gzgets in -lz" >&5
+echo "configure:26304: checking for gzgets in -lz" >&5
 ac_lib_var=`echo z'_'gzgets | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -26215,7 +26308,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lz  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 26219 "configure"
+#line 26312 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -26226,7 +26319,7 @@ int main() {
 gzgets()
 ; return 0; }
 EOF
-if { (eval echo configure:26230: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:26323: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -26363,18 +26456,18 @@ fi
 
 
 
-php_enable_bcmath=no
+php_enable_apc=no
 
-echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
-echo "configure:26370: checking whether to enable bc style precision math functions" >&5
-# Check whether --enable-bcmath or --disable-bcmath was given.
-if test "${enable_bcmath+set}" = set; then
-  enableval="$enable_bcmath"
-  PHP_BCMATH=$enableval
+echo $ac_n "checking whether to enable APC support""... $ac_c" 1>&6
+echo "configure:26463: checking whether to enable APC support" >&5
+# Check whether --enable-apc or --disable-apc was given.
+if test "${enable_apc+set}" = set; then
+  enableval="$enable_apc"
+  PHP_APC=$enableval
 else
   
-  PHP_BCMATH=no
-  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL
+  PHP_APC=no
+  test "$PHP_ENABLE_ALL" && PHP_APC=$PHP_ENABLE_ALL
 
 fi
 
@@ -26382,12 +26475,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_BCMATH in
+case $PHP_APC in
 shared,*)
-  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
+  PHP_APC=`echo "$PHP_APC"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_BCMATH=yes
+  PHP_APC=yes
   ;;
 no)
   ext_output=no
@@ -26406,396 +26499,481 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_BCMATH" != "no"; then
+# Check whether --enable-apc-debug or --disable-apc-debug was given.
+if test "${enable_apc_debug+set}" = set; then
+  enableval="$enable_apc_debug"
   
-  ext_builddir=ext/bcmath
-  ext_srcdir=$abs_srcdir/ext/bcmath
+  PHP_APC_DEBUG=yes
 
-  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_BCMATH_SHARED=no
-    
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+else
   
+  PHP_APC_DEBUG=no
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should enable cache request file info""... $ac_c" 1>&6
+echo "configure:26517: checking whether we should enable cache request file info" >&5
+# Check whether --enable-apc-filehits or --disable-apc-filehits was given.
+if test "${enable_apc_filehits+set}" = set; then
+  enableval="$enable_apc_filehits"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_APC_FILEHITS=$enableval
+	echo "$ac_t""$enableval" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+else
+  
+  PHP_APC_FILEHITS=no
+	echo "$ac_t""no" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
 
-    EXT_STATIC="$EXT_STATIC bcmath"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_BCMATH_SHARED=yes
-      
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+echo $ac_n "checking whether we should use mmap""... $ac_c" 1>&6
+echo "configure:26534: checking whether we should use mmap" >&5
+# Check whether --enable-apc-mmap or --disable-apc-mmap was given.
+if test "${enable_apc_mmap+set}" = set; then
+  enableval="$enable_apc_mmap"
   
+  PHP_APC_MMAP=$enableval
+  echo "$ac_t""$enableval" 1>&6
+
+else
   
+  PHP_APC_MMAP=yes
+  echo "$ac_t""yes" 1>&6
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should use semaphore locking instead of fcntl""... $ac_c" 1>&6
+echo "configure:26551: checking whether we should use semaphore locking instead of fcntl" >&5
+# Check whether --enable-apc-sem or --disable-apc-sem was given.
+if test "${enable_apc_sem+set}" = set; then
+  enableval="$enable_apc_sem"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  PHP_APC_SEM=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+else
+  
+  PHP_APC_SEM=no
+  echo "$ac_t""no" 1>&6
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBCMATH, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
-  fi
+echo $ac_n "checking whether we should use pthread mutex locking""... $ac_c" 1>&6
+echo "configure:26568: checking whether we should use pthread mutex locking" >&5
+# Check whether --enable-apc-pthreadmutex or --disable-apc-pthreadmutex was given.
+if test "${enable_apc_pthreadmutex+set}" = set; then
+  enableval="$enable_apc_pthreadmutex"
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)
-
-$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
-	$link_cmd
+  PHP_APC_PTHREADMUTEX=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-EOF
+else
+  
+  PHP_APC_PTHREADMUTEX=yes
+  echo "$ac_t""yes" 1>&6
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BCMATH, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
-  fi
+if test "$PHP_APC_PTHREADMUTEX" != "no"; then
+	orig_LIBS="$LIBS"
+	LIBS="$LIBS -lpthread"
+	if test "$cross_compiling" = yes; then
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
+				
+  
+  case pthread in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpthread $LIBS" 
+   ;;
+  esac
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)
 
-$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
-	$link_cmd
+			
+	
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26603 "configure"
+#include "confdefs.h"
 
+				#include <sys/types.h>
+				#include <pthread.h>
+                                main() {
+				pthread_mutex_t mutex;
+				pthread_mutexattr_t attr;	
+
+				if(pthread_mutexattr_init(&attr)) { 
+					puts("Unable to initialize pthread attributes (pthread_mutexattr_init).");
+					return -1; 
+				}
+				if(pthread_mutexattr_setpshared(&attr, PTHREAD_PROCESS_SHARED)) { 
+					puts("Unable to set PTHREAD_PROCESS_SHARED (pthread_mutexattr_setpshared), your system may not support shared mutex's.");
+					return -1; 
+				}	
+				if(pthread_mutex_init(&mutex, &attr)) { 
+					puts("Unable to initialize the mutex (pthread_mutex_init).");
+					return -1; 
+				}
+				if(pthread_mutexattr_destroy(&attr)) { 
+					puts("Unable to destroy mutex attributes (pthread_mutexattr_destroy).");
+					return -1; 
+				}
+				if(pthread_mutex_destroy(&mutex)) { 
+					puts("Unable to destroy mutex (pthread_mutex_destroy).");
+					return -1; 
+				}
+
+				puts("pthread mutex's are supported!");
+				return 0;
+                                }
+			
 EOF
+if { (eval echo configure:26638: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+   				
+  
+  case pthread in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpthread $LIBS" 
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_BCMATH 1
-EOF
 
-    fi
-  fi
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+   				echo "configure: warning: It doesn't appear that pthread mutex's are supported on your system" 1>&2
+  			PHP_APC_PTHREADMUTEX=no
+			
+fi
+rm -fr conftest*
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_BCMATH_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+	LIBS="$orig_LIBS"
+fi
+
+echo $ac_n "checking whether we should use spin locks""... $ac_c" 1>&6
+echo "configure:26666: checking whether we should use spin locks" >&5
+# Check whether --enable-apc-spinlocks or --disable-apc-spinlocks was given.
+if test "${enable_apc_spinlocks+set}" = set; then
+  enableval="$enable_apc_spinlocks"
   
+  PHP_APC_SPINLOCKS=$enableval
+  echo "$ac_t""$enableval" 1>&6
+
+else
   
+  PHP_APC_SPINLOCKS=no
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
+echo $ac_n "checking whether we should enable memory protection""... $ac_c" 1>&6
+echo "configure:26683: checking whether we should enable memory protection" >&5
+# Check whether --enable-apc-memprotect or --disable-apc-memprotect was given.
+if test "${enable_apc_memprotect+set}" = set; then
+  enableval="$enable_apc_memprotect"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  PHP_APC_MEMPROTECT=$enableval
+  echo "$ac_t""$enableval" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+else
+  
+  PHP_APC_MEMPROTECT=no
+  echo "$ac_t""no" 1>&6
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
 
-        EXT_STATIC="$EXT_STATIC bcmath"
-        ;;
-      *)
-        
-  
-  case ext/bcmath in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+if test "$PHP_APC" != "no"; then
+  test "$PHP_APC_MMAP" != "no" && cat >> confdefs.h <<\EOF
+#define APC_MMAP 1
+EOF
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  test "$PHP_APC_FILEHITS" != "no" && cat >> confdefs.h <<\EOF
+#define APC_FILEHITS 1
+EOF
 
 
-  old_IFS=$IFS
-  for ac_src in bcmath.c \
-libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
-libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
-libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
-libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+	if test "$PHP_APC_DEBUG" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define __DEBUG_APC__ 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+	fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+	if test "$PHP_APC_SEM" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_SEM_LOCKS 1
 EOF
-  done
 
+	elif test "$PHP_APC_SPINLOCKS" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_SPIN_LOCKS 1
+EOF
+ 
+	elif test "$PHP_APC_PTHREADMUTEX" != "no"; then 
+		cat >> confdefs.h <<\EOF
+#define APC_PTHREADMUTEX_LOCKS 1
+EOF
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+	else 
+		cat >> confdefs.h <<\EOF
+#define APC_FCNTL_LOCKS 1
+EOF
 
+	fi
+  
+	if test "$PHP_APC_MEMPROTECT" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define APC_MEMPROTECT 1
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=bcmath
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+	fi
 
-  fi
+  echo $ac_n "checking for zend_set_lookup_function_hook""... $ac_c" 1>&6
+echo "configure:26746: checking for zend_set_lookup_function_hook" >&5
+if eval "test \"`echo '$''{'php_cv_zend_set_lookup_function_hook'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    orig_cflags=$CFLAGS
+    CFLAGS="$INCLUDES $EXTRA_INCLUDES"
+    cat > conftest.$ac_ext <<EOF
+#line 26754 "configure"
+#include "confdefs.h"
 
+#include "main/php.h"
+#include "Zend/zend_API.h"
+    
+int main() {
+#ifndef zend_set_lookup_function_hook
+	(void) zend_set_lookup_function_hook;
+#endif
+; return 0; }
+EOF
+if { (eval echo configure:26766: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
   
+      php_cv_zend_set_lookup_function_hook=yes
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"
+      php_cv_zend_set_lookup_function_hook=no
+    
+fi
+rm -f conftest*
+    CFLAGS=$orig_cflags
   
+fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_BCMATH 1
+echo "$ac_t""$php_cv_zend_set_lookup_function_hook" 1>&6
+  if test "$php_cv_zend_set_lookup_function_hook" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define APC_HAVE_LOOKUP_HOOKS 1
 EOF
 
-fi
+  else
+    cat >> confdefs.h <<\EOF
+#define APC_HAVE_LOOKUP_HOOKS 0
+EOF
+
+  fi
 
+  for ac_func in sigaction
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:26800: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26805 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
+int main() {
 
-php_with_bz2=no
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
-echo "configure:26735: checking for BZip2 support" >&5
-# Check whether --with-bz2 or --without-bz2 was given.
-if test "${with_bz2+set}" = set; then
-  withval="$with_bz2"
-  PHP_BZ2=$withval
+; return 0; }
+EOF
+if { (eval echo configure:26828: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  echo $ac_n "checking for union semun""... $ac_c" 1>&6
+echo "configure:26853: checking for union semun" >&5
+if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_BZ2=no
-  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL
+    cat > conftest.$ac_ext <<EOF
+#line 26859 "configure"
+#include "confdefs.h"
 
+#include <sys/types.h>
+#include <sys/ipc.h>
+#include <sys/sem.h>
+    
+int main() {
+union semun x; x.val=1
+; return 0; }
+EOF
+if { (eval echo configure:26870: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+      php_cv_semun=yes
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+      php_cv_semun=no
+    
+fi
+rm -f conftest*
+  
 fi
 
+echo "$ac_t""$php_cv_semun" 1>&6
+  if test "$php_cv_semun" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 1
+EOF
 
+  else
+    cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 0
+EOF
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_BZ2 in
-shared,*)
-  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_BZ2=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
+  fi
 
+  echo $ac_n "checking whether we should enable valgrind support""... $ac_c" 1>&6
+echo "configure:26901: checking whether we should enable valgrind support" >&5
+  # Check whether --enable-valgrind-checks or --disable-valgrind-checks was given.
+if test "${enable_valgrind_checks+set}" = set; then
+  enableval="$enable_valgrind_checks"
+  
+    PHP_APC_VALGRIND=$enableval
+    echo "$ac_t""$enableval" 1>&6
+  
+else
+  
+    PHP_APC_VALGRIND=yes
+    echo "$ac_t""yes" 1>&6
+    ac_safe=`echo "valgrind/memcheck.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for valgrind/memcheck.h""... $ac_c" 1>&6
+echo "configure:26915: checking for valgrind/memcheck.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 26920 "configure"
+#include "confdefs.h"
+#include <valgrind/memcheck.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:26925: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_VALGRIND_MEMCHECK_H 1
+EOF
 
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+  
+fi
 
-if test "$PHP_BZ2" != "no"; then
-  if test -r $PHP_BZ2/include/bzlib.h; then
-    BZIP_DIR=$PHP_BZ2
-  else
-    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
-echo "configure:26780: checking for BZip2 in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/bzlib.h; then
-        BZIP_DIR=$i
-        echo "$ac_t""found in $i" 1>&6
-        break
-      fi
-    done
-  fi
 
-  if test -z "$BZIP_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
-  fi
+  apc_sources="apc.c php_apc.c \
+               apc_cache.c \
+               apc_compile.c \
+               apc_debug.c \
+               apc_fcntl.c \
+               apc_main.c \
+               apc_mmap.c \
+               apc_sem.c \
+               apc_shm.c \
+               apc_pthreadmutex.c \
+               apc_spin.c \
+               pgsql_s_lock.c \
+               apc_sma.c \
+               apc_stack.c \
+               apc_zend.c \
+               apc_rfc1867.c \
+               apc_signal.c \
+               apc_pool.c \
+               apc_iterator.c \
+               apc_bin.c \
+               apc_string.c "
 
   
   save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$BZIP_DIR/$PHP_LIBDIR
-  "
+  ac_stuff=""
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -26888,27 +27066,27 @@ echo "configure:26780: checking for BZip
     esac
   done
 
-  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
-echo "configure:26893: checking for BZ2_bzerror in -lbz2" >&5
-ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for shm_open in -lrt""... $ac_c" 1>&6
+echo "configure:27071: checking for shm_open in -lrt" >&5
+ac_lib_var=`echo rt'_'shm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbz2  $LIBS"
+LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 26901 "configure"
+#line 27079 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char BZ2_bzerror();
+char shm_open();
 
 int main() {
-BZ2_bzerror()
+shm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:26912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:27090: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -26927,167 +27105,53 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-    
-  if test "$BZIP_DIR/include" != "/usr/include"; then
-    
-  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/include
-  else
-    
-    ep_dir="`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-
-  if test "$ext_shared" = "yes"; then
-    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
-    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
-      
-  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
-    
-  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$BZIP_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
+  case rt in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        APC_SHARED_LIBADD="-lrt $APC_SHARED_LIBADD" 
+    else
       
   
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case bz2 in
+  case rt in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbz2 $LIBS" 
+      LIBS="-lrt $LIBS" 
    ;;
   esac
 
 
+    fi
+   ;;
+  esac
 
 
-  fi
-
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_BZ2 1
-EOF
-
-  
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_bz2_BZ2_bzerror
+    unset ac_cv_lib_rt_shm_open
     
-    { echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
-  
   
 fi
 
-
   
-  ext_builddir=ext/bz2
-  ext_srcdir=$abs_srcdir/ext/bz2
+  ext_builddir=ext/apc
+  ext_srcdir=$abs_srcdir/ext/apc
 
-  ac_extra=
+  ac_extra=`echo "\\$(APC_CFLAGS)"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_BZ2_SHARED=no
+    PHP_APC_SHARED=no
     
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27102,7 +27166,7 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -27125,18 +27189,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC bz2"
+    EXT_STATIC="$EXT_STATIC apc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC apc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_BZ2_SHARED=yes
+      PHP_APC_SHARED=yes
       
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27151,14 +27215,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"
+      shared_objects_apc="$shared_objects_apc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -27181,31 +27245,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpapc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(PHPAPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpapc.so '$ext_builddir'/phpapc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBZ2, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPAPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(PHPAPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpapc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpapc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_apc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)
+\$(phplibdir)/phpapc.$suffix: $ext_builddir/phpapc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpapc.$suffix \$(phplibdir)
 
-$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
+$ext_builddir/phpapc.$suffix: \$(shared_objects_apc) \$(PHPAPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27218,31 +27282,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/apc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(APC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/apc.so '$ext_builddir'/apc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BZ2, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(APC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_apc) $(APC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/apc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/apc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_apc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)
+\$(phplibdir)/apc.$suffix: $ext_builddir/apc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/apc.$suffix \$(phplibdir)
 
-$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
+$ext_builddir/apc.$suffix: \$(shared_objects_apc) \$(APC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27250,22 +27314,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_BZ2 1
+#define COMPILE_DL_APC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_BZ2_SHARED=no
+    PHP_APC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27280,7 +27344,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -27303,15 +27367,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC bz2"
+        EXT_STATIC="$EXT_STATIC apc"
         ;;
       *)
         
   
-  case ext/bz2 in
+  case ext/apc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/apc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/apc/"; ac_bdir="ext/apc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27326,7 +27390,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in bz2.c bz2_filter.c; do
+  for ac_src in $apc_sources; do
   
       IFS=.
       set $ac_src
@@ -27351,7 +27415,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC apc"
   fi
   
   
@@ -27360,31 +27424,39 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=bz2
+    PHP_PECL_EXTENSION=apc
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST APC_SHARED_LIBADD"
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST APC_CFLAGS"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_APC 1
+EOF
 
 fi
 
 
 
-php_enable_calendar=no
 
-echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
-echo "configure:27380: checking whether to enable calendar conversion support" >&5
-# Check whether --enable-calendar or --disable-calendar was given.
-if test "${enable_calendar+set}" = set; then
-  enableval="$enable_calendar"
-  PHP_CALENDAR=$enableval
+php_enable_bcmath=no
+
+echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
+echo "configure:27452: checking whether to enable bc style precision math functions" >&5
+# Check whether --enable-bcmath or --disable-bcmath was given.
+if test "${enable_bcmath+set}" = set; then
+  enableval="$enable_bcmath"
+  PHP_BCMATH=$enableval
 else
   
-  PHP_CALENDAR=no
-  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL
+  PHP_BCMATH=no
+  test "$PHP_ENABLE_ALL" && PHP_BCMATH=$PHP_ENABLE_ALL
 
 fi
 
@@ -27392,12 +27464,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CALENDAR in
+case $PHP_BCMATH in
 shared,*)
-  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
+  PHP_BCMATH=`echo "$PHP_BCMATH"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CALENDAR=yes
+  PHP_BCMATH=yes
   ;;
 no)
   ext_output=no
@@ -27416,25 +27488,21 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_CALENDAR" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_CALENDAR 1
-EOF
-
+if test "$PHP_BCMATH" != "no"; then
   
-  ext_builddir=ext/calendar
-  ext_srcdir=$abs_srcdir/ext/calendar
+  ext_builddir=ext/bcmath
+  ext_srcdir=$abs_srcdir/ext/bcmath
 
-  ac_extra=
+  ac_extra=`echo "-I@ext_srcdir@/libbcmath/src"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_CALENDAR_SHARED=no
+    PHP_BCMATH_SHARED=no
     
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27449,7 +27517,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27472,18 +27544,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC calendar"
+    EXT_STATIC="$EXT_STATIC bcmath"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_CALENDAR_SHARED=yes
+      PHP_BCMATH_SHARED=yes
       
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27498,14 +27570,18 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"
+      shared_objects_bcmath="$shared_objects_bcmath $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -27528,31 +27604,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbcmath.so '$ext_builddir'/phpbcmath.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCALENDAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBCMATH, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(PHPBCMATH_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbcmath.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbcmath.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)
+\$(phplibdir)/phpbcmath.$suffix: $ext_builddir/phpbcmath.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbcmath.$suffix \$(phplibdir)
 
-$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
+$ext_builddir/phpbcmath.$suffix: \$(shared_objects_bcmath) \$(PHPBCMATH_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27565,31 +27641,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bcmath.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bcmath.so '$ext_builddir'/bcmath.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CALENDAR, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BCMATH, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bcmath) $(BCMATH_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bcmath.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bcmath.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bcmath"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)
+\$(phplibdir)/bcmath.$suffix: $ext_builddir/bcmath.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/bcmath.$suffix \$(phplibdir)
 
-$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
+$ext_builddir/bcmath.$suffix: \$(shared_objects_bcmath) \$(BCMATH_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27597,22 +27673,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_CALENDAR 1
+#define COMPILE_DL_BCMATH 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_CALENDAR_SHARED=no
+    PHP_BCMATH_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27627,7 +27703,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27650,15 +27730,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC calendar"
+        EXT_STATIC="$EXT_STATIC bcmath"
         ;;
       *)
         
   
-  case ext/calendar in
+  case ext/bcmath in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bcmath"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bcmath/"; ac_bdir="ext/bcmath/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27673,7 +27753,11 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  for ac_src in bcmath.c \
+libbcmath/src/add.c libbcmath/src/div.c libbcmath/src/init.c libbcmath/src/neg.c libbcmath/src/outofmem.c libbcmath/src/raisemod.c libbcmath/src/rt.c libbcmath/src/sub.c \
+libbcmath/src/compare.c libbcmath/src/divmod.c libbcmath/src/int2num.c libbcmath/src/num2long.c libbcmath/src/output.c libbcmath/src/recmul.c \
+libbcmath/src/sqrt.c libbcmath/src/zero.c libbcmath/src/debug.c libbcmath/src/doaddsub.c libbcmath/src/nearzero.c libbcmath/src/num2str.c libbcmath/src/raise.c \
+libbcmath/src/rmzero.c libbcmath/src/str2num.c; do
   
       IFS=.
       set $ac_src
@@ -27698,7 +27782,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC bcmath"
   fi
   
   
@@ -27707,28 +27791,37 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=calendar
+    PHP_PECL_EXTENSION=bcmath
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir/libbcmath/src"
+  
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_BCMATH 1
+EOF
+
 fi
 
 
 
-php_enable_ctype=yes
+php_with_bz2=no
 
-echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
-echo "configure:27724: checking whether to enable ctype functions" >&5
-# Check whether --enable-ctype or --disable-ctype was given.
-if test "${enable_ctype+set}" = set; then
-  enableval="$enable_ctype"
-  PHP_CTYPE=$enableval
+echo $ac_n "checking for BZip2 support""... $ac_c" 1>&6
+echo "configure:27817: checking for BZip2 support" >&5
+# Check whether --with-bz2 or --without-bz2 was given.
+if test "${with_bz2+set}" = set; then
+  withval="$with_bz2"
+  PHP_BZ2=$withval
 else
   
-  PHP_CTYPE=yes
-  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL
+  PHP_BZ2=no
+  test "$PHP_ENABLE_ALL" && PHP_BZ2=$PHP_ENABLE_ALL
 
 fi
 
@@ -27736,12 +27829,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CTYPE in
+case $PHP_BZ2 in
 shared,*)
-  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
+  PHP_BZ2=`echo "$PHP_BZ2"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CTYPE=yes
+  PHP_BZ2=yes
   ;;
 no)
   ext_output=no
@@ -27760,54 +27853,352 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_CTYPE" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_CTYPE 1
-EOF
-
-  
-  ext_builddir=ext/ctype
-  ext_srcdir=$abs_srcdir/ext/ctype
+if test "$PHP_BZ2" != "no"; then
+  if test -r $PHP_BZ2/include/bzlib.h; then
+    BZIP_DIR=$PHP_BZ2
+  else
+    echo $ac_n "checking for BZip2 in default path""... $ac_c" 1>&6
+echo "configure:27862: checking for BZip2 in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/bzlib.h; then
+        BZIP_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+        break
+      fi
+    done
+  fi
 
-  ac_extra=
+  if test -z "$BZIP_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the BZip2 distribution" 1>&2; exit 1; }
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_CTYPE_SHARED=no
-    
   
-  case ext/ctype in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$BZIP_DIR/$PHP_LIBDIR
+  "
   
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for BZ2_bzerror in -lbz2""... $ac_c" 1>&6
+echo "configure:27975: checking for BZ2_bzerror in -lbz2" >&5
+ac_lib_var=`echo bz2'_'BZ2_bzerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbz2  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 27983 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char BZ2_bzerror();
+
+int main() {
+BZ2_bzerror()
+; return 0; }
+EOF
+if { (eval echo configure:27994: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+  if test "$BZIP_DIR/include" != "/usr/include"; then
+    
+  if test -z "$BZIP_DIR/include" || echo "$BZIP_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/include
+  else
+    
+    ep_dir="`echo $BZIP_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    
+
+  if test "$ext_shared" = "yes"; then
+    BZ2_SHARED_LIBADD="-lbz2 $BZ2_SHARED_LIBADD"
+    if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
+      
+  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        BZ2_SHARED_LIBADD="-L$ai_p $BZ2_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && BZ2_SHARED_LIBADD="$ld_runpath_switch$ai_p $BZ2_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$BZIP_DIR/$PHP_LIBDIR"; then
+    
+  if test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$BZIP_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$BZIP_DIR/$PHP_LIBDIR" || echo "$BZIP_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$BZIP_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $BZIP_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$BZIP_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case bz2 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbz2 $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_BZ2 1
+EOF
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_bz2_BZ2_bzerror
+    
+    { echo "configure: error: bz2 module requires libbz2 >= 1.0.0" 1>&2; exit 1; }
+  
+  
+fi
+
+
+  
+  ext_builddir=ext/bz2
+  ext_srcdir=$abs_srcdir/ext/bz2
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_BZ2_SHARED=no
+    
+  
+  case ext/bz2 in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in bz2.c bz2_filter.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
     cat >>Makefile.objects<<EOF
 $ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
@@ -27816,18 +28207,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC ctype"
+    EXT_STATIC="$EXT_STATIC bz2"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_CTYPE_SHARED=yes
+      PHP_BZ2_SHARED=yes
       
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27842,14 +28233,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"
+      shared_objects_bz2="$shared_objects_bz2 $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -27872,31 +28263,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpbz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpbz2.so '$ext_builddir'/phpbz2.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCTYPE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPBZ2, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(PHPBZ2_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpbz2.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpbz2.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)
+\$(phplibdir)/phpbz2.$suffix: $ext_builddir/phpbz2.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpbz2.$suffix \$(phplibdir)
 
-$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
+$ext_builddir/phpbz2.$suffix: \$(shared_objects_bz2) \$(PHPBZ2_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27909,31 +28300,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/bz2.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/bz2.so '$ext_builddir'/bz2.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CTYPE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(BZ2, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_bz2) $(BZ2_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/bz2.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/bz2.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_bz2"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)
+\$(phplibdir)/bz2.$suffix: $ext_builddir/bz2.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/bz2.$suffix \$(phplibdir)
 
-$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
+$ext_builddir/bz2.$suffix: \$(shared_objects_bz2) \$(BZ2_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -27941,22 +28332,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_CTYPE 1
+#define COMPILE_DL_BZ2 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_CTYPE_SHARED=no
+    PHP_BZ2_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -27971,7 +28362,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
@@ -27994,15 +28385,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC ctype"
+        EXT_STATIC="$EXT_STATIC bz2"
         ;;
       *)
         
   
-  case ext/ctype in
+  case ext/bz2 in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/bz2"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/bz2/"; ac_bdir="ext/bz2/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -28017,7 +28408,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in ctype.c; do
+  for ac_src in bz2.c bz2_filter.c; do
   
       IFS=.
       set $ac_src
@@ -28042,7 +28433,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC bz2"
   fi
   
   
@@ -28051,28 +28442,31 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=ctype
+    PHP_PECL_EXTENSION=bz2
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST BZ2_SHARED_LIBADD"
+
 fi
 
 
 
-php_with_curl=no
+php_enable_calendar=no
 
-echo $ac_n "checking for cURL support""... $ac_c" 1>&6
-echo "configure:28068: checking for cURL support" >&5
-# Check whether --with-curl or --without-curl was given.
-if test "${with_curl+set}" = set; then
-  withval="$with_curl"
-  PHP_CURL=$withval
+echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
+echo "configure:28462: checking whether to enable calendar conversion support" >&5
+# Check whether --enable-calendar or --disable-calendar was given.
+if test "${enable_calendar+set}" = set; then
+  enableval="$enable_calendar"
+  PHP_CALENDAR=$enableval
 else
   
-  PHP_CURL=no
-  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL
+  PHP_CALENDAR=no
+  test "$PHP_ENABLE_ALL" && PHP_CALENDAR=$PHP_ENABLE_ALL
 
 fi
 
@@ -28080,12 +28474,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_CURL in
+case $PHP_CALENDAR in
 shared,*)
-  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
+  PHP_CALENDAR=`echo "$PHP_CALENDAR"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_CURL=yes
+  PHP_CALENDAR=yes
   ;;
 no)
   ext_output=no
@@ -28104,572 +28498,796 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+if test "$PHP_CALENDAR" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_CALENDAR 1
+EOF
 
-php_with_curlwrappers=no
+  
+  ext_builddir=ext/calendar
+  ext_srcdir=$abs_srcdir/ext/calendar
 
-echo $ac_n "checking if we should use cURL for url streams""... $ac_c" 1>&6
-echo "configure:28112: checking if we should use cURL for url streams" >&5
-# Check whether --with-curlwrappers or --without-curlwrappers was given.
-if test "${with_curlwrappers+set}" = set; then
-  withval="$with_curlwrappers"
-  PHP_CURLWRAPPERS=$withval
-else
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_CALENDAR_SHARED=no
+    
+  
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  PHP_CURLWRAPPERS=no
   
 
-fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-ext_output=$PHP_CURLWRAPPERS
-echo "$ac_t""$ext_output" 1>&6
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-if test "$PHP_CURL" != "no"; then
-  if test -r $PHP_CURL/include/curl/easy.h; then
-    CURL_DIR=$PHP_CURL
+    EXT_STATIC="$EXT_STATIC calendar"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
+    fi
   else
-    echo $ac_n "checking for cURL in default path""... $ac_c" 1>&6
-echo "configure:28136: checking for cURL in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/curl/easy.h; then
-        CURL_DIR=$i
-        echo "$ac_t""found in $i" 1>&6
-        break
-      fi
-    done
-  fi
-
-  if test -z "$CURL_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the libcurl distribution -
-    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
-  fi
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_CALENDAR_SHARED=yes
+      
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-  CURL_CONFIG="curl-config"
-  echo $ac_n "checking for cURL 7.10.5 or greater""... $ac_c" 1>&6
-echo "configure:28154: checking for cURL 7.10.5 or greater" >&5
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
-    CURL_CONFIG=${CURL_DIR}/bin/curl-config
-  else
-    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
-      CURL_CONFIG=${CURL_DIR}/curl-config
-    fi
-  fi
-
-  curl_version_full=`$CURL_CONFIG --version`
-  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
-  if test "$curl_version" -ge 7010005; then
-    echo "$ac_t""$curl_version_full" 1>&6
-    CURL_LIBS=`$CURL_CONFIG --libs`
-  else
-    { echo "configure: error: cURL version 7.10.5 or later is required to compile php with cURL support" 1>&2; exit 1; }
-  fi
 
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-  if test "$CURL_DIR/include" != "/usr/include"; then
-    
-  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/include
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_calendar="$shared_objects_calendar $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpcalendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpcalendar.so '$ext_builddir'/phpcalendar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCALENDAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(PHPCALENDAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpcalendar.$suffix"
   else
-    
-    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpcalendar.$suffix"
   fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
 
-  fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpcalendar.$suffix: $ext_builddir/phpcalendar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpcalendar.$suffix \$(phplibdir)
 
-  
-  for ac_i in $CURL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+$ext_builddir/phpcalendar.$suffix: \$(shared_objects_calendar) \$(PHPCALENDAR_SHARED_DEPENDENCIES)
+	$link_cmd
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+EOF
 
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-    fi
-   ;;
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/calendar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/calendar.so '$ext_builddir'/calendar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CALENDAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_calendar) $(CALENDAR_SHARED_LIBADD)'
+      ;;
   esac
 
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/calendar.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/calendar.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_calendar"
 
-    
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
-      else
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/calendar.$suffix: $ext_builddir/calendar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/calendar.$suffix \$(phplibdir)
+
+$ext_builddir/calendar.$suffix: \$(shared_objects_calendar) \$(CALENDAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_CALENDAR 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_CALENDAR_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
         
   
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
 
-      fi
-    
-  fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    ;;
-    esac
-  done
 
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-
-  if test "$ext_shared" = "yes"; then
-    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
-    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
-  fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    
-      if test "$ext_shared" = "yes"; then
-        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
-      else
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC calendar"
+        ;;
+      *)
         
   
+  case ext/calendar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/calendar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/calendar/"; ac_bdir="ext/calendar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in calendar.c dow.c french.c gregor.c jewish.c julian.c easter.c cal_unix.c; do
   
-  fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-      fi
-    
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    fi
-  else
-    
 
-  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
-    
-  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$CURL_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC calendar"
   fi
-
-    
-      
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=calendar
     
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
-  
-  
-  case curl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcurl $LIBS" 
-   ;;
-  esac
-
 
+fi
 
 
-  fi
 
+php_enable_ctype=yes
 
+echo $ac_n "checking whether to enable ctype functions""... $ac_c" 1>&6
+echo "configure:28806: checking whether to enable ctype functions" >&5
+# Check whether --enable-ctype or --disable-ctype was given.
+if test "${enable_ctype+set}" = set; then
+  enableval="$enable_ctype"
+  PHP_CTYPE=$enableval
+else
   
-  echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
-echo "configure:28392: checking for SSL support in libcurl" >&5
-  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
-  if test "$CURL_SSL" = "SSL"; then
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define HAVE_CURL_SSL 1
-EOF
+  PHP_CTYPE=yes
+  test "$PHP_ENABLE_ALL" && PHP_CTYPE=$PHP_ENABLE_ALL
 
-   
-    save_CFLAGS="$CFLAGS"
-    CFLAGS="`$CURL_CONFIG --cflags`"
-   
-    echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:28405: checking how to run the C preprocessor" >&5
-# On Suns, sometimes $CPP names a directory.
-if test -n "$CPP" && test -d "$CPP"; then
-  CPP=
 fi
-if test -z "$CPP"; then
-if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-    # This must be in double quotes, not single quotes, because CPP may get
-  # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp.
-  cat > conftest.$ac_ext <<EOF
-#line 28420 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28426: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
-  cat > conftest.$ac_ext <<EOF
-#line 28437 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28443: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -nologo -E"
-  cat > conftest.$ac_ext <<EOF
-#line 28454 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_CTYPE in
+shared,*)
+  PHP_CTYPE=`echo "$PHP_CTYPE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_CTYPE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_CTYPE" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_CTYPE 1
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28460: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP=/lib/cpp
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-fi
-rm -f conftest*
-  ac_cv_prog_CPP="$CPP"
-fi
-  CPP="$ac_cv_prog_CPP"
-else
-  ac_cv_prog_CPP="$CPP"
-fi
-echo "$ac_t""$CPP" 1>&6
 
-    echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
-echo "configure:28485: checking for openssl support in libcurl" >&5
-    if test "$cross_compiling" = yes; then
   
-      echo "$ac_t""no" 1>&6
+  ext_builddir=ext/ctype
+  ext_srcdir=$abs_srcdir/ext/ctype
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_CTYPE_SHARED=no
     
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28492 "configure"
-#include "confdefs.h"
+  
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-#include <curl/curl.h>
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-int main(int argc, char *argv[])
-{
-  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
 
-  if (data && data->ssl_version && *data->ssl_version) {
-    const char *ptr = data->ssl_version;
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    while(*ptr == ' ') ++ptr;
-    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
-  }
-  return 1;
-}
-    
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:28511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+  done
+
+
+    EXT_STATIC="$EXT_STATIC ctype"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_CTYPE_SHARED=yes
+      
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-      echo "$ac_t""yes" 1>&6
-      for ac_hdr in openssl/crypto.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:28519: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28524 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28529: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_ctype="$shared_objects_ctype $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
- 
-        cat >> confdefs.h <<\EOF
-#define HAVE_CURL_OPENSSL 1
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpctype.so '$ext_builddir'/phpctype.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPCTYPE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(PHPCTYPE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpctype.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpctype.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpctype.$suffix: $ext_builddir/phpctype.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpctype.$suffix \$(phplibdir)
+
+$ext_builddir/phpctype.$suffix: \$(shared_objects_ctype) \$(PHPCTYPE_SHARED_DEPENDENCIES)
+	$link_cmd
+
 EOF
 
-      
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-    
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/ctype.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/ctype.so '$ext_builddir'/ctype.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(CTYPE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_ctype) $(CTYPE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/ctype.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/ctype.$suffix"
+  fi
   
-      echo "$ac_t""no" 1>&6
-    
-fi
-rm -fr conftest*
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_ctype"
 
-   
-    echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
-echo "configure:28574: checking for gnutls support in libcurl" >&5
-    if test "$cross_compiling" = yes; then
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/ctype.$suffix: $ext_builddir/ctype.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/ctype.$suffix \$(phplibdir)
+
+$ext_builddir/ctype.$suffix: \$(shared_objects_ctype) \$(CTYPE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_CTYPE 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_CTYPE_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-      echo "$ac_t""no" 1>&6
-    
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28581 "configure"
-#include "confdefs.h"
 
-#include <curl/curl.h>
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-int main(int argc, char *argv[])
-{
-  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
   
-  if (data && data->ssl_version && *data->ssl_version) {
-    const char *ptr = data->ssl_version;
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    while(*ptr == ' ') ++ptr;
-    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
-  }
-  return 1;
-}
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:28600: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+  done
+
+
+        EXT_STATIC="$EXT_STATIC ctype"
+        ;;
+      *)
+        
   
-      echo "$ac_t""yes" 1>&6
-      ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
-echo "configure:28606: checking for gcrypt.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 28611 "configure"
-#include "confdefs.h"
-#include <gcrypt.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:28616: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  case ext/ctype in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/ctype"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/ctype/"; ac_bdir="ext/ctype/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-        cat >> confdefs.h <<\EOF
-#define HAVE_CURL_GNUTLS 1
-EOF
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
 
+  old_IFS=$IFS
+  for ac_src in ctype.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-else
-  echo "$ac_t""no" 1>&6
-fi
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC ctype"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=ctype
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+php_with_curl=no
+
+echo $ac_n "checking for cURL support""... $ac_c" 1>&6
+echo "configure:29150: checking for cURL support" >&5
+# Check whether --with-curl or --without-curl was given.
+if test "${with_curl+set}" = set; then
+  withval="$with_curl"
+  PHP_CURL=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-      echo "$ac_t""no" 1>&6
-    
+  PHP_CURL=no
+  test "$PHP_ENABLE_ALL" && PHP_CURL=$PHP_ENABLE_ALL
+
 fi
-rm -fr conftest*
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_CURL in
+shared,*)
+  PHP_CURL=`echo "$PHP_CURL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_CURL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_curlwrappers=no
+
+echo $ac_n "checking if we should use cURL for url streams""... $ac_c" 1>&6
+echo "configure:29194: checking if we should use cURL for url streams" >&5
+# Check whether --with-curlwrappers or --without-curlwrappers was given.
+if test "${with_curlwrappers+set}" = set; then
+  withval="$with_curlwrappers"
+  PHP_CURLWRAPPERS=$withval
+else
+  
+  PHP_CURLWRAPPERS=no
+  
+
 fi
 
-   
-    CFLAGS="$save_CFLAGS"
+
+ext_output=$PHP_CURLWRAPPERS
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_CURL" != "no"; then
+  if test -r $PHP_CURL/include/curl/easy.h; then
+    CURL_DIR=$PHP_CURL
   else
-    echo "$ac_t""no" 1>&6
+    echo $ac_n "checking for cURL in default path""... $ac_c" 1>&6
+echo "configure:29218: checking for cURL in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/curl/easy.h; then
+        CURL_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+        break
+      fi
+    done
+  fi
+
+  if test -z "$CURL_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the libcurl distribution -
+    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
+  fi
+
+  CURL_CONFIG="curl-config"
+  echo $ac_n "checking for cURL 7.10.5 or greater""... $ac_c" 1>&6
+echo "configure:29236: checking for cURL 7.10.5 or greater" >&5
+
+  if ${CURL_DIR}/bin/curl-config --libs > /dev/null 2>&1; then
+    CURL_CONFIG=${CURL_DIR}/bin/curl-config
+  else
+    if ${CURL_DIR}/curl-config --libs > /dev/null 2>&1; then
+      CURL_CONFIG=${CURL_DIR}/curl-config
+    fi
+  fi
+
+  curl_version_full=`$CURL_CONFIG --version`
+  curl_version=`echo ${curl_version_full} | sed -e 's/libcurl //' | $AWK 'BEGIN { FS = "."; } { printf "%d", ($1 * 1000 + $2) * 1000 + $3;}'`
+  if test "$curl_version" -ge 7010005; then
+    echo "$ac_t""$curl_version_full" 1>&6
+    CURL_LIBS=`$CURL_CONFIG --libs`
+  else
+    { echo "configure: error: cURL version 7.10.5 or later is required to compile php with cURL support" 1>&2; exit 1; }
   fi
 
   
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
-  "
+  if test "$CURL_DIR/include" != "/usr/include"; then
+    
+  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/include
+  else
+    
+    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
+  fi
+
+    
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  for ac_i in $ac_stuff; do
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+  
+  for ac_i in $CURL_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -pthread"
       else
         
   
@@ -28691,7 +29309,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        CURL_SHARED_LIBADD="$CURL_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -28726,8 +29344,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
       else
         
   
@@ -28753,27 +29371,491 @@ fi
     esac
   done
 
-  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
-echo "configure:28758: checking for curl_easy_perform in -lcurl" >&5
-ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lcurl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 28766 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char curl_easy_perform();
+  
 
-int main() {
-curl_easy_perform()
-; return 0; }
+  if test "$ext_shared" = "yes"; then
+    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
+    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+      
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        CURL_SHARED_LIBADD="-L$ai_p $CURL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && CURL_SHARED_LIBADD="$ld_runpath_switch$ai_p $CURL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+    
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case curl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcurl $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
+echo "configure:29474: checking for SSL support in libcurl" >&5
+  CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
+  if test "$CURL_SSL" = "SSL"; then
+    echo "$ac_t""yes" 1>&6
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_SSL 1
+EOF
+
+   
+    save_CFLAGS="$CFLAGS"
+    CFLAGS="`$CURL_CONFIG --cflags`"
+   
+    echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
+echo "configure:29487: checking how to run the C preprocessor" >&5
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+    # This must be in double quotes, not single quotes, because CPP may get
+  # substituted into the Makefile and "${CC-cc}" will confuse make.
+  CPP="${CC-cc} -E"
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp.
+  cat > conftest.$ac_ext <<EOF
+#line 29502 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29508: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -E -traditional-cpp"
+  cat > conftest.$ac_ext <<EOF
+#line 29519 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29525: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -nologo -E"
+  cat > conftest.$ac_ext <<EOF
+#line 29536 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29542: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP=/lib/cpp
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+  ac_cv_prog_CPP="$CPP"
+fi
+  CPP="$ac_cv_prog_CPP"
+else
+  ac_cv_prog_CPP="$CPP"
+fi
+echo "$ac_t""$CPP" 1>&6
+
+    echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
+echo "configure:29567: checking for openssl support in libcurl" >&5
+    if test "$cross_compiling" = yes; then
+  
+      echo "$ac_t""no" 1>&6
+    
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29574 "configure"
+#include "confdefs.h"
+
+#include <curl/curl.h>
+
+int main(int argc, char *argv[])
+{
+  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+
+  if (data && data->ssl_version && *data->ssl_version) {
+    const char *ptr = data->ssl_version;
+
+    while(*ptr == ' ') ++ptr;
+    return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
+  }
+  return 1;
+}
+    
+EOF
+if { (eval echo configure:29593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+      echo "$ac_t""yes" 1>&6
+      for ac_hdr in openssl/crypto.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:29601: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29606 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29611: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+        cat >> confdefs.h <<\EOF
+#define HAVE_CURL_OPENSSL 1
+EOF
+
+      
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+      echo "$ac_t""no" 1>&6
+    
+fi
+rm -fr conftest*
+fi
+
+   
+    echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
+echo "configure:29656: checking for gnutls support in libcurl" >&5
+    if test "$cross_compiling" = yes; then
+  
+      echo "$ac_t""no" 1>&6
+    
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29663 "configure"
+#include "confdefs.h"
+
+#include <curl/curl.h>
+
+int main(int argc, char *argv[])
+{
+  curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+  
+  if (data && data->ssl_version && *data->ssl_version) {
+    const char *ptr = data->ssl_version;
+
+    while(*ptr == ' ') ++ptr;
+    return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
+  }
+  return 1;
+}
+
+EOF
+if { (eval echo configure:29682: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+      echo "$ac_t""yes" 1>&6
+      ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
+echo "configure:29688: checking for gcrypt.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 29693 "configure"
+#include "confdefs.h"
+#include <gcrypt.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:29698: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+        cat >> confdefs.h <<\EOF
+#define HAVE_CURL_GNUTLS 1
+EOF
+
+      
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+    
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+      echo "$ac_t""no" 1>&6
+    
+fi
+rm -fr conftest*
+fi
+
+   
+    CFLAGS="$save_CFLAGS"
+  else
+    echo "$ac_t""no" 1>&6
+  fi
+
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for curl_easy_perform in -lcurl""... $ac_c" 1>&6
+echo "configure:29840: checking for curl_easy_perform in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_perform | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 29848 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_perform();
+
+int main() {
+curl_easy_perform()
+; return 0; }
 EOF
-if { (eval echo configure:28777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:29859: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -28909,7 +29991,7 @@ fi
   done
 
   echo $ac_n "checking for curl_version_info in -lcurl""... $ac_c" 1>&6
-echo "configure:28913: checking for curl_version_info in -lcurl" >&5
+echo "configure:29995: checking for curl_version_info in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_version_info | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -28917,7 +29999,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 28921 "configure"
+#line 30003 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -28928,7 +30010,7 @@ int main() {
 curl_version_info()
 ; return 0; }
 EOF
-if { (eval echo configure:28932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:30014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29062,7 +30144,7 @@ fi
   done
 
   echo $ac_n "checking for curl_easy_strerror in -lcurl""... $ac_c" 1>&6
-echo "configure:29066: checking for curl_easy_strerror in -lcurl" >&5
+echo "configure:30148: checking for curl_easy_strerror in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_easy_strerror | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -29070,7 +30152,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 29074 "configure"
+#line 30156 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -29081,7 +30163,7 @@ int main() {
 curl_easy_strerror()
 ; return 0; }
 EOF
-if { (eval echo configure:29085: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:30167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29215,7 +30297,7 @@ fi
   done
 
   echo $ac_n "checking for curl_multi_strerror in -lcurl""... $ac_c" 1>&6
-echo "configure:29219: checking for curl_multi_strerror in -lcurl" >&5
+echo "configure:30301: checking for curl_multi_strerror in -lcurl" >&5
 ac_lib_var=`echo curl'_'curl_multi_strerror | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -29223,7 +30305,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcurl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 29227 "configure"
+#line 30309 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -29234,7 +30316,7 @@ int main() {
 curl_multi_strerror()
 ; return 0; }
 EOF
-if { (eval echo configure:29238: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:30320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -29920,7 +31002,7 @@ if test "$PHP_QDBM" != "no"; then
   done
 
   echo $ac_n "checking for dpopen in -l$LIB""... $ac_c" 1>&6
-echo "configure:29924: checking for dpopen in -l$LIB" >&5
+echo "configure:31006: checking for dpopen in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dpopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -29928,7 +31010,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 29932 "configure"
+#line 31014 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -29939,7 +31021,7 @@ int main() {
 dpopen()
 ; return 0; }
 EOF
-if { (eval echo configure:29943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31025: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -30108,7 +31190,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30112: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31194: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30136,7 +31218,7 @@ if test "$PHP_GDBM" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30140: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31222: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-gdbm with --with-qdbm"; then
     { echo "configure: error: You cannot combine --with-gdbm with --with-qdbm" 1>&2; exit 1; }
   fi
@@ -30255,7 +31337,7 @@ echo "configure:30140: checking for $THI
   done
 
   echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
-echo "configure:30259: checking for gdbm_open in -lgdbm" >&5
+echo "configure:31341: checking for gdbm_open in -lgdbm" >&5
 ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -30263,7 +31345,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgdbm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 30267 "configure"
+#line 31349 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -30274,7 +31356,7 @@ int main() {
 gdbm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:30278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31360: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -30439,7 +31521,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30443: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31525: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30568,7 +31650,7 @@ if test "$PHP_NDBM" != "no"; then
   done
 
   echo $ac_n "checking for dbm_open in -l$LIB""... $ac_c" 1>&6
-echo "configure:30572: checking for dbm_open in -l$LIB" >&5
+echo "configure:31654: checking for dbm_open in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dbm_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -30576,7 +31658,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 30580 "configure"
+#line 31662 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -30587,7 +31669,7 @@ int main() {
 dbm_open()
 ; return 0; }
 EOF
-if { (eval echo configure:30591: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -30756,7 +31838,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:30760: checking for $THIS_FULL_NAME support" >&5
+echo "configure:31842: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -30844,7 +31926,7 @@ if test "$PHP_DB4" != "no"; then
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 30848 "configure"
+#line 31930 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30855,11 +31937,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:30859: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:31941: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 30863 "configure"
+#line 31945 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30896,14 +31978,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB4 major version""... $ac_c" 1>&6
-echo "configure:30900: checking for DB4 major version" >&5
+echo "configure:31982: checking for DB4 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "4" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:30905: checking for DB4 minor version and patch level" >&5
+echo "configure:31987: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30907 "configure"
+#line 31989 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -30929,9 +32011,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:30933: checking if dba can be used as shared extension" >&5
+echo "configure:32015: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 30935 "configure"
+#line 32017 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31088,7 +32170,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31092: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32174: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -31116,7 +32198,7 @@ if test "$PHP_DB3" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31120: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32202: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-db3 with --with-db4"; then
     { echo "configure: error: You cannot combine --with-db3 with --with-db4" 1>&2; exit 1; }
   fi
@@ -31167,7 +32249,7 @@ echo "configure:31120: checking for $THI
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 31171 "configure"
+#line 32253 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31178,11 +32260,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:31182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32264: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 31186 "configure"
+#line 32268 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31219,14 +32301,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB3 major version""... $ac_c" 1>&6
-echo "configure:31223: checking for DB3 major version" >&5
+echo "configure:32305: checking for DB3 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "3" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:31228: checking for DB4 minor version and patch level" >&5
+echo "configure:32310: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31230 "configure"
+#line 32312 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31252,9 +32334,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:31256: checking if dba can be used as shared extension" >&5
+echo "configure:32338: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31258 "configure"
+#line 32340 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31411,7 +32493,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31415: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32497: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -31439,7 +32521,7 @@ if test "$PHP_DB2" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31443: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32525: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-db2 with --with-db3 or --with-db4"; then
     { echo "configure: error: You cannot combine --with-db2 with --with-db3 or --with-db4" 1>&2; exit 1; }
   fi
@@ -31490,7 +32572,7 @@ echo "configure:31443: checking for $THI
   LIBS="-l$LIB $LIBS"
   
         cat > conftest.$ac_ext <<EOF
-#line 31494 "configure"
+#line 32576 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31501,11 +32583,11 @@ int main() {
         
 ; return 0; }
 EOF
-if { (eval echo configure:31505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32587: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
           cat > conftest.$ac_ext <<EOF
-#line 31509 "configure"
+#line 32591 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31542,14 +32624,14 @@ rm -f conftest*
   done
   if test -z "$THIS_LIBS"; then
     echo $ac_n "checking for DB2 major version""... $ac_c" 1>&6
-echo "configure:31546: checking for DB2 major version" >&5
+echo "configure:32628: checking for DB2 major version" >&5
     { echo "configure: error: Header contains different version" 1>&2; exit 1; }
   fi
   if test "2" = "4"; then
     echo $ac_n "checking for DB4 minor version and patch level""... $ac_c" 1>&6
-echo "configure:31551: checking for DB4 minor version and patch level" >&5
+echo "configure:32633: checking for DB4 minor version and patch level" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31553 "configure"
+#line 32635 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31575,9 +32657,9 @@ rm -f conftest*
   fi
   if test "$ext_shared" = "yes"; then
     echo $ac_n "checking if dba can be used as shared extension""... $ac_c" 1>&6
-echo "configure:31579: checking if dba can be used as shared extension" >&5
+echo "configure:32661: checking if dba can be used as shared extension" >&5
     cat > conftest.$ac_ext <<EOF
-#line 31581 "configure"
+#line 32663 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31734,7 +32816,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31738: checking for $THIS_FULL_NAME support" >&5
+echo "configure:32820: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -31754,7 +32836,7 @@ if test "$PHP_DB1" != "no"; then
   unset THIS_INCLUDE THIS_LIBS THIS_LFLAGS THIS_PREFIX THIS_RESULT
 
   echo $ac_n "checking for DB1 in library""... $ac_c" 1>&6
-echo "configure:31758: checking for DB1 in library" >&5
+echo "configure:32840: checking for DB1 in library" >&5
   if test "$HAVE_DB4" = "1"; then
     THIS_VERSION=4
     THIS_LIBS=$DB4_LIBS
@@ -31802,7 +32884,7 @@ EOF
   fi
   echo "$ac_t""$THIS_LIBS" 1>&6
   echo $ac_n "checking for DB1 in header""... $ac_c" 1>&6
-echo "configure:31806: checking for DB1 in header" >&5
+echo "configure:32888: checking for DB1 in header" >&5
   echo "$ac_t""$THIS_INCLUDE" 1>&6
   if test -n "$THIS_INCLUDE"; then
     
@@ -31812,7 +32894,7 @@ echo "configure:31806: checking for DB1
   LIBS="-l$THIS_LIBS $LIBS"
   
       cat > conftest.$ac_ext <<EOF
-#line 31816 "configure"
+#line 32898 "configure"
 #include "confdefs.h"
 
 #include "$THIS_INCLUDE"
@@ -31823,7 +32905,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:31827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:32909: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         cat >> confdefs.h <<EOF
@@ -31973,7 +33055,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:31977: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33059: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32001,7 +33083,7 @@ if test "$PHP_DBM" != "no"; then
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32005: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33087: checking for $THIS_FULL_NAME support" >&5
   if test -n "You cannot combine --with-dbm with --with-qdbm"; then
     { echo "configure: error: You cannot combine --with-dbm with --with-qdbm" 1>&2; exit 1; }
   fi
@@ -32125,7 +33207,7 @@ echo "configure:32005: checking for $THI
   done
 
   echo $ac_n "checking for dbminit in -l$LIB""... $ac_c" 1>&6
-echo "configure:32129: checking for dbminit in -l$LIB" >&5
+echo "configure:33211: checking for dbminit in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'dbminit | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -32133,7 +33215,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 32137 "configure"
+#line 33219 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -32144,7 +33226,7 @@ int main() {
 dbminit()
 ; return 0; }
 EOF
-if { (eval echo configure:32148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:33230: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -32164,7 +33246,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     ext_shared=$save_ext_shared
     
         echo $ac_n "checking for DBM using GDBM""... $ac_c" 1>&6
-echo "configure:32168: checking for DBM using GDBM" >&5
+echo "configure:33250: checking for DBM using GDBM" >&5
         cat >> confdefs.h <<EOF
 #define DBM_INCLUDE_FILE "$THIS_INCLUDE"
 EOF
@@ -32328,7 +33410,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32332: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33414: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32540,7 +33622,7 @@ elif test "$PHP_CDB" != "no"; then
   done
 
   echo $ac_n "checking for cdb_read in -l$LIB""... $ac_c" 1>&6
-echo "configure:32544: checking for cdb_read in -l$LIB" >&5
+echo "configure:33626: checking for cdb_read in -l$LIB" >&5
 ac_lib_var=`echo $LIB'_'cdb_read | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -32548,7 +33630,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 32552 "configure"
+#line 33634 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -32559,7 +33641,7 @@ int main() {
 cdb_read()
 ; return 0; }
 EOF
-if { (eval echo configure:32563: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:33645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -32728,7 +33810,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32732: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33814: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32759,7 +33841,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32763: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33845: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32790,7 +33872,7 @@ fi
     THIS_FULL_NAME="$THIS_NAME"
   fi
   echo $ac_n "checking for $THIS_FULL_NAME support""... $ac_c" 1>&6
-echo "configure:32794: checking for $THIS_FULL_NAME support" >&5
+echo "configure:33876: checking for $THIS_FULL_NAME support" >&5
   if test -n ""; then
     { echo "configure: error: " 1>&2; exit 1; }
   fi
@@ -32805,7 +33887,7 @@ echo "configure:32794: checking for $THI
 
 
 echo $ac_n "checking whether to enable DBA interface""... $ac_c" 1>&6
-echo "configure:32809: checking whether to enable DBA interface" >&5
+echo "configure:33891: checking whether to enable DBA interface" >&5
 if test "$HAVE_DBA" = "1"; then
   if test "$ext_shared" = "yes"; then
     echo "$ac_t""yes, shared" 1>&6
@@ -33132,18 +34214,18 @@ fi
 
 
 
-php_enable_dom=yes
+php_enable_dio=no
 
-echo $ac_n "checking whether to enable DOM support""... $ac_c" 1>&6
-echo "configure:33139: checking whether to enable DOM support" >&5
-# Check whether --enable-dom or --disable-dom was given.
-if test "${enable_dom+set}" = set; then
-  enableval="$enable_dom"
-  PHP_DOM=$enableval
+echo $ac_n "checking whether to enable direct I/O support""... $ac_c" 1>&6
+echo "configure:34221: checking whether to enable direct I/O support" >&5
+# Check whether --enable-dio or --disable-dio was given.
+if test "${enable_dio+set}" = set; then
+  enableval="$enable_dio"
+  PHP_DIO=$enableval
 else
   
-  PHP_DOM=yes
-  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL
+  PHP_DIO=no
+  test "$PHP_ENABLE_ALL" && PHP_DIO=$PHP_ENABLE_ALL
 
 fi
 
@@ -33151,12 +34233,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_DOM in
+case $PHP_DIO in
 shared,*)
-  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
+  PHP_DIO=`echo "$PHP_DIO"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_DOM=yes
+  PHP_DIO=yes
   ;;
 no)
   ext_output=no
@@ -33175,30 +34257,370 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
+if test "$PHP_DIO" != "no"; then
   
-php_with_libxml_dir=no
+  ext_builddir=ext/dio
+  ext_srcdir=$abs_srcdir/ext/dio
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:33184: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_DIO_SHARED=no
+    
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  PHP_LIBXML_DIR=no
   
 
-fi
-
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
 
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC dio"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_DIO_SHARED=yes
+      
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_dio="$shared_objects_dio $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpdio.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(PHPDIO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpdio.so '$ext_builddir'/phpdio.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPDIO, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(PHPDIO_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpdio.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpdio.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dio"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpdio.$suffix: $ext_builddir/phpdio.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpdio.$suffix \$(phplibdir)
+
+$ext_builddir/phpdio.$suffix: \$(shared_objects_dio) \$(PHPDIO_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/dio.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(DIO_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/dio.so '$ext_builddir'/dio.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(DIO, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_dio) $(DIO_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/dio.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/dio.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_dio"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/dio.$suffix: $ext_builddir/dio.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/dio.$suffix \$(phplibdir)
+
+$ext_builddir/dio.$suffix: \$(shared_objects_dio) \$(DIO_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_DIO 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_DIO_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC dio"
+        ;;
+      *)
+        
+  
+  case ext/dio in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/dio"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/dio/"; ac_bdir="ext/dio/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in dio.c dio_common.c dio_posix.c dio_stream_wrappers.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC dio"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=dio
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+php_enable_dom=yes
+
+echo $ac_n "checking whether to enable DOM support""... $ac_c" 1>&6
+echo "configure:34561: checking whether to enable DOM support" >&5
+# Check whether --enable-dom or --disable-dom was given.
+if test "${enable_dom+set}" = set; then
+  enableval="$enable_dom"
+  PHP_DOM=$enableval
+else
+  
+  PHP_DOM=yes
+  test "$PHP_ENABLE_ALL" && PHP_DOM=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_DOM in
+shared,*)
+  PHP_DOM=`echo "$PHP_DOM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_DOM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:34606: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
 
-fi
+
+fi
 
 if test "$PHP_DOM" != "no"; then
 
@@ -33208,7 +34630,7 @@ if test "$PHP_DOM" != "no"; then
 
   
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:33212: checking for xml2-config path" >&5
+echo "configure:34634: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -33366,7 +34788,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:33370: checking whether libxml build works" >&5
+echo "configure:34792: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -33382,7 +34804,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 33386 "configure"
+#line 34808 "configure"
 #include "confdefs.h"
 
     
@@ -33393,7 +34815,7 @@ else
     }
   
 EOF
-if { (eval echo configure:33397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:34819: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -33816,7 +35238,7 @@ fi
 php_with_enchant=no
 
 echo $ac_n "checking for ENCHANT support""... $ac_c" 1>&6
-echo "configure:33820: checking for ENCHANT support" >&5
+echo "configure:35242: checking for ENCHANT support" >&5
 # Check whether --with-enchant or --without-enchant was given.
 if test "${with_enchant+set}" = set; then
   withval="$with_enchant"
@@ -34401,7 +35823,7 @@ EOF
   done
 
   echo $ac_n "checking for enchant_broker_set_param in -lenchant""... $ac_c" 1>&6
-echo "configure:34405: checking for enchant_broker_set_param in -lenchant" >&5
+echo "configure:35827: checking for enchant_broker_set_param in -lenchant" >&5
 ac_lib_var=`echo enchant'_'enchant_broker_set_param | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -34409,7 +35831,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lenchant  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 34413 "configure"
+#line 35835 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -34420,7 +35842,7 @@ int main() {
 enchant_broker_set_param()
 ; return 0; }
 EOF
-if { (eval echo configure:34424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:35846: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -34467,7 +35889,7 @@ fi
 php_enable_exif=no
 
 echo $ac_n "checking whether to enable EXIF (metadata from images) support""... $ac_c" 1>&6
-echo "configure:34471: checking whether to enable EXIF (metadata from images) support" >&5
+echo "configure:35893: checking whether to enable EXIF (metadata from images) support" >&5
 # Check whether --enable-exif or --disable-exif was given.
 if test "${enable_exif+set}" = set; then
   enableval="$enable_exif"
@@ -34811,7 +36233,7 @@ fi
 php_enable_fileinfo=yes
 
 echo $ac_n "checking for fileinfo support""... $ac_c" 1>&6
-echo "configure:34815: checking for fileinfo support" >&5
+echo "configure:36237: checking for fileinfo support" >&5
 # Check whether --enable-fileinfo or --disable-fileinfo was given.
 if test "${enable_fileinfo+set}" = set; then
   enableval="$enable_fileinfo"
@@ -35161,12 +36583,12 @@ EOF
   for ac_func in utimes strndup
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:35165: checking for $ac_func" >&5
+echo "configure:36587: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 35170 "configure"
+#line 36592 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -35189,7 +36611,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:35193: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:36615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -35227,7 +36649,7 @@ fi
 php_enable_filter=yes
 
 echo $ac_n "checking whether to enable input filter support""... $ac_c" 1>&6
-echo "configure:35231: checking whether to enable input filter support" >&5
+echo "configure:36653: checking whether to enable input filter support" >&5
 # Check whether --enable-filter or --disable-filter was given.
 if test "${enable_filter+set}" = set; then
   enableval="$enable_filter"
@@ -35271,7 +36693,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_pcre_dir=no
 
 echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
-echo "configure:35275: checking pcre install prefix" >&5
+echo "configure:36697: checking pcre install prefix" >&5
 # Check whether --with-pcre-dir or --without-pcre-dir was given.
 if test "${with_pcre_dir+set}" = set; then
   withval="$with_pcre_dir"
@@ -35298,7 +36720,7 @@ if test "$PHP_FILTER" != "no"; then
         old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=$INCLUDES
     cat > conftest.$ac_ext <<EOF
-#line 35302 "configure"
+#line 36724 "configure"
 #include "confdefs.h"
 
 #include <main/php_config.h>
@@ -35317,7 +36739,7 @@ else
   rm -rf conftest*
   
       cat > conftest.$ac_ext <<EOF
-#line 35321 "configure"
+#line 36743 "configure"
 #include "confdefs.h"
 
 #include <main/php_config.h>
@@ -35687,7 +37109,7 @@ fi
 php_enable_ftp=no
 
 echo $ac_n "checking whether to enable FTP support""... $ac_c" 1>&6
-echo "configure:35691: checking whether to enable FTP support" >&5
+echo "configure:37113: checking whether to enable FTP support" >&5
 # Check whether --enable-ftp or --disable-ftp was given.
 if test "${enable_ftp+set}" = set; then
   enableval="$enable_ftp"
@@ -35731,7 +37153,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_openssl_dir=no
 
 echo $ac_n "checking OpenSSL dir for FTP""... $ac_c" 1>&6
-echo "configure:35735: checking OpenSSL dir for FTP" >&5
+echo "configure:37157: checking OpenSSL dir for FTP" >&5
 # Check whether --with-openssl-dir or --without-openssl-dir was given.
 if test "${with_openssl_dir+set}" = set; then
   withval="$with_openssl_dir"
@@ -36069,7 +37491,7 @@ EOF
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:36073: checking for $ac_word" >&5
+echo "configure:37495: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -36274,9 +37696,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:36278: checking for OpenSSL version" >&5
+echo "configure:37700: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 36280 "configure"
+#line 37702 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -36431,7 +37853,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:36435: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:37857: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -36439,7 +37861,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 36443 "configure"
+#line 37865 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -36450,7 +37872,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:36454: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:37876: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -36607,7 +38029,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:36611: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:38033: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -36615,7 +38037,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 36619 "configure"
+#line 38041 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -36626,7 +38048,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:36630: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38052: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -36768,7 +38190,7 @@ fi
 php_with_gd=no
 
 echo $ac_n "checking for GD support""... $ac_c" 1>&6
-echo "configure:36772: checking for GD support" >&5
+echo "configure:38194: checking for GD support" >&5
 # Check whether --with-gd or --without-gd was given.
 if test "${with_gd+set}" = set; then
   withval="$with_gd"
@@ -36813,7 +38235,7 @@ if test -z "$PHP_JPEG_DIR"; then
 php_with_jpeg_dir=no
 
 echo $ac_n "checking for the location of libjpeg""... $ac_c" 1>&6
-echo "configure:36817: checking for the location of libjpeg" >&5
+echo "configure:38239: checking for the location of libjpeg" >&5
 # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
 if test "${with_jpeg_dir+set}" = set; then
   withval="$with_jpeg_dir"
@@ -36838,7 +38260,7 @@ if test -z "$PHP_PNG_DIR"; then
 php_with_png_dir=no
 
 echo $ac_n "checking for the location of libpng""... $ac_c" 1>&6
-echo "configure:36842: checking for the location of libpng" >&5
+echo "configure:38264: checking for the location of libpng" >&5
 # Check whether --with-png-dir or --without-png-dir was given.
 if test "${with_png_dir+set}" = set; then
   withval="$with_png_dir"
@@ -36863,7 +38285,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:36867: checking for the location of libz" >&5
+echo "configure:38289: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -36887,7 +38309,7 @@ fi
 php_with_xpm_dir=no
 
 echo $ac_n "checking for the location of libXpm""... $ac_c" 1>&6
-echo "configure:36891: checking for the location of libXpm" >&5
+echo "configure:38313: checking for the location of libXpm" >&5
 # Check whether --with-xpm-dir or --without-xpm-dir was given.
 if test "${with_xpm_dir+set}" = set; then
   withval="$with_xpm_dir"
@@ -36910,7 +38332,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_freetype_dir=no
 
 echo $ac_n "checking for FreeType 2""... $ac_c" 1>&6
-echo "configure:36914: checking for FreeType 2" >&5
+echo "configure:38336: checking for FreeType 2" >&5
 # Check whether --with-freetype-dir or --without-freetype-dir was given.
 if test "${with_freetype_dir+set}" = set; then
   withval="$with_freetype_dir"
@@ -36933,7 +38355,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_t1lib=no
 
 echo $ac_n "checking for T1lib support""... $ac_c" 1>&6
-echo "configure:36937: checking for T1lib support" >&5
+echo "configure:38359: checking for T1lib support" >&5
 # Check whether --with-t1lib or --without-t1lib was given.
 if test "${with_t1lib+set}" = set; then
   withval="$with_t1lib"
@@ -36956,7 +38378,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_gd_native_ttf=no
 
 echo $ac_n "checking whether to enable truetype string function in GD""... $ac_c" 1>&6
-echo "configure:36960: checking whether to enable truetype string function in GD" >&5
+echo "configure:38382: checking whether to enable truetype string function in GD" >&5
 # Check whether --enable-gd-native-ttf or --disable-gd-native-ttf was given.
 if test "${enable_gd_native_ttf+set}" = set; then
   enableval="$enable_gd_native_ttf"
@@ -36979,7 +38401,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_gd_jis_conv=no
 
 echo $ac_n "checking whether to enable JIS-mapped Japanese font support in GD""... $ac_c" 1>&6
-echo "configure:36983: checking whether to enable JIS-mapped Japanese font support in GD" >&5
+echo "configure:38405: checking whether to enable JIS-mapped Japanese font support in GD" >&5
 # Check whether --enable-gd-jis-conv or --disable-gd-jis-conv was given.
 if test "${enable_gd_jis_conv+set}" = set; then
   enableval="$enable_gd_jis_conv"
@@ -37031,12 +38453,12 @@ if test "$PHP_GD" = "yes"; then
   for ac_func in fabsf floorf
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:37035: checking for $ac_func" >&5
+echo "configure:38457: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 37040 "configure"
+#line 38462 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -37059,7 +38481,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:37063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -37231,7 +38653,7 @@ EOF
   done
 
   echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
-echo "configure:37235: checking for jpeg_read_header in -ljpeg" >&5
+echo "configure:38657: checking for jpeg_read_header in -ljpeg" >&5
 ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37239,7 +38661,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ljpeg  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37243 "configure"
+#line 38665 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37250,7 +38672,7 @@ int main() {
 jpeg_read_header()
 ; return 0; }
 EOF
-if { (eval echo configure:37254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38676: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -37528,7 +38950,7 @@ fi
   done
 
   echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
-echo "configure:37532: checking for png_write_image in -lpng" >&5
+echo "configure:38954: checking for png_write_image in -lpng" >&5
 ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37536,7 +38958,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpng  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37540 "configure"
+#line 38962 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37547,7 +38969,7 @@ int main() {
 png_write_image()
 ; return 0; }
 EOF
-if { (eval echo configure:37551: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:38973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -37927,7 +39349,7 @@ fi
   done
 
   echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
-echo "configure:37931: checking for XpmFreeXpmImage in -lXpm" >&5
+echo "configure:39353: checking for XpmFreeXpmImage in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -37935,7 +39357,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lXpm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 37939 "configure"
+#line 39361 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -37946,7 +39368,7 @@ int main() {
 XpmFreeXpmImage()
 ; return 0; }
 EOF
-if { (eval echo configure:37950: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:39372: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -38321,7 +39743,7 @@ fi
   done
 
   echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
-echo "configure:38325: checking for FT_New_Face in -lfreetype" >&5
+echo "configure:39747: checking for FT_New_Face in -lfreetype" >&5
 ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -38329,7 +39751,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfreetype  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 38333 "configure"
+#line 39755 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -38340,7 +39762,7 @@ int main() {
 FT_New_Face()
 ; return 0; }
 EOF
-if { (eval echo configure:38344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:39766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -38657,7 +40079,7 @@ fi
   done
 
   echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
-echo "configure:38661: checking for T1_StrError in -lt1" >&5
+echo "configure:40083: checking for T1_StrError in -lt1" >&5
 ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -38665,7 +40087,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lt1  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 38669 "configure"
+#line 40091 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -38676,7 +40098,7 @@ int main() {
 T1_StrError()
 ; return 0; }
 EOF
-if { (eval echo configure:38680: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40102: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -39119,7 +40541,7 @@ EOF
   done
 
   echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
-echo "configure:39123: checking for jpeg_read_header in -ljpeg" >&5
+echo "configure:40545: checking for jpeg_read_header in -ljpeg" >&5
 ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -39127,7 +40549,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ljpeg  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 39131 "configure"
+#line 40553 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -39138,7 +40560,7 @@ int main() {
 jpeg_read_header()
 ; return 0; }
 EOF
-if { (eval echo configure:39142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40564: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -39416,7 +40838,7 @@ fi
   done
 
   echo $ac_n "checking for png_write_image in -lpng""... $ac_c" 1>&6
-echo "configure:39420: checking for png_write_image in -lpng" >&5
+echo "configure:40842: checking for png_write_image in -lpng" >&5
 ac_lib_var=`echo png'_'png_write_image | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -39424,7 +40846,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpng  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 39428 "configure"
+#line 40850 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -39435,7 +40857,7 @@ int main() {
 png_write_image()
 ; return 0; }
 EOF
-if { (eval echo configure:39439: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:40861: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -39815,7 +41237,7 @@ fi
   done
 
   echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
-echo "configure:39819: checking for XpmFreeXpmImage in -lXpm" >&5
+echo "configure:41241: checking for XpmFreeXpmImage in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -39823,7 +41245,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lXpm  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 39827 "configure"
+#line 41249 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -39834,7 +41256,7 @@ int main() {
 XpmFreeXpmImage()
 ; return 0; }
 EOF
-if { (eval echo configure:39838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40209,7 +41631,7 @@ fi
   done
 
   echo $ac_n "checking for FT_New_Face in -lfreetype""... $ac_c" 1>&6
-echo "configure:40213: checking for FT_New_Face in -lfreetype" >&5
+echo "configure:41635: checking for FT_New_Face in -lfreetype" >&5
 ac_lib_var=`echo freetype'_'FT_New_Face | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40217,7 +41639,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfreetype  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40221 "configure"
+#line 41643 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40228,7 +41650,7 @@ int main() {
 FT_New_Face()
 ; return 0; }
 EOF
-if { (eval echo configure:40232: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41654: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40545,7 +41967,7 @@ fi
   done
 
   echo $ac_n "checking for T1_StrError in -lt1""... $ac_c" 1>&6
-echo "configure:40549: checking for T1_StrError in -lt1" >&5
+echo "configure:41971: checking for T1_StrError in -lt1" >&5
 ac_lib_var=`echo t1'_'T1_StrError | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40553,7 +41975,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lt1  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40557 "configure"
+#line 41979 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40564,7 +41986,7 @@ int main() {
 T1_StrError()
 ; return 0; }
 EOF
-if { (eval echo configure:40568: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:41990: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -40939,7 +42361,7 @@ EOF
   done
 
   echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
-echo "configure:40943: checking for gdImageString16 in -lgd" >&5
+echo "configure:42365: checking for gdImageString16 in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -40947,7 +42369,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 40951 "configure"
+#line 42373 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -40958,7 +42380,7 @@ int main() {
 gdImageString16()
 ; return 0; }
 EOF
-if { (eval echo configure:40962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42384: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41087,7 +42509,7 @@ fi
   done
 
   echo $ac_n "checking for gdImagePaletteCopy in -lgd""... $ac_c" 1>&6
-echo "configure:41091: checking for gdImagePaletteCopy in -lgd" >&5
+echo "configure:42513: checking for gdImagePaletteCopy in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImagePaletteCopy | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41095,7 +42517,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41099 "configure"
+#line 42521 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41106,7 +42528,7 @@ int main() {
 gdImagePaletteCopy()
 ; return 0; }
 EOF
-if { (eval echo configure:41110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42532: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41235,7 +42657,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
-echo "configure:41239: checking for gdImageCreateFromPng in -lgd" >&5
+echo "configure:42661: checking for gdImageCreateFromPng in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41243,7 +42665,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41247 "configure"
+#line 42669 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41254,7 +42676,7 @@ int main() {
 gdImageCreateFromPng()
 ; return 0; }
 EOF
-if { (eval echo configure:41258: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42680: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41383,7 +42805,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
-echo "configure:41387: checking for gdImageCreateFromGif in -lgd" >&5
+echo "configure:42809: checking for gdImageCreateFromGif in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41391,7 +42813,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41395 "configure"
+#line 42817 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41402,7 +42824,7 @@ int main() {
 gdImageCreateFromGif()
 ; return 0; }
 EOF
-if { (eval echo configure:41406: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42828: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41531,7 +42953,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageGif in -lgd""... $ac_c" 1>&6
-echo "configure:41535: checking for gdImageGif in -lgd" >&5
+echo "configure:42957: checking for gdImageGif in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageGif | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41539,7 +42961,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41543 "configure"
+#line 42965 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41550,7 +42972,7 @@ int main() {
 gdImageGif()
 ; return 0; }
 EOF
-if { (eval echo configure:41554: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:42976: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41679,7 +43101,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
-echo "configure:41683: checking for gdImageWBMP in -lgd" >&5
+echo "configure:43105: checking for gdImageWBMP in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41687,7 +43109,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41691 "configure"
+#line 43113 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41698,7 +43120,7 @@ int main() {
 gdImageWBMP()
 ; return 0; }
 EOF
-if { (eval echo configure:41702: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43124: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41827,7 +43249,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
-echo "configure:41831: checking for gdImageCreateFromJpeg in -lgd" >&5
+echo "configure:43253: checking for gdImageCreateFromJpeg in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41835,7 +43257,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41839 "configure"
+#line 43261 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41846,7 +43268,7 @@ int main() {
 gdImageCreateFromJpeg()
 ; return 0; }
 EOF
-if { (eval echo configure:41850: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43272: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -41975,7 +43397,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
-echo "configure:41979: checking for gdImageCreateFromXpm in -lgd" >&5
+echo "configure:43401: checking for gdImageCreateFromXpm in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -41983,7 +43405,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 41987 "configure"
+#line 43409 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -41994,7 +43416,7 @@ int main() {
 gdImageCreateFromXpm()
 ; return 0; }
 EOF
-if { (eval echo configure:41998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42123,7 +43545,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateFromGd2 in -lgd""... $ac_c" 1>&6
-echo "configure:42127: checking for gdImageCreateFromGd2 in -lgd" >&5
+echo "configure:43549: checking for gdImageCreateFromGd2 in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateFromGd2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42131,7 +43553,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42135 "configure"
+#line 43557 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42142,7 +43564,7 @@ int main() {
 gdImageCreateFromGd2()
 ; return 0; }
 EOF
-if { (eval echo configure:42146: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43568: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42271,7 +43693,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreateTrueColor in -lgd""... $ac_c" 1>&6
-echo "configure:42275: checking for gdImageCreateTrueColor in -lgd" >&5
+echo "configure:43697: checking for gdImageCreateTrueColor in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreateTrueColor | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42279,7 +43701,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42283 "configure"
+#line 43705 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42290,7 +43712,7 @@ int main() {
 gdImageCreateTrueColor()
 ; return 0; }
 EOF
-if { (eval echo configure:42294: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42419,7 +43841,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageSetTile in -lgd""... $ac_c" 1>&6
-echo "configure:42423: checking for gdImageSetTile in -lgd" >&5
+echo "configure:43845: checking for gdImageSetTile in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageSetTile | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42427,7 +43849,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42431 "configure"
+#line 43853 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42438,7 +43860,7 @@ int main() {
 gdImageSetTile()
 ; return 0; }
 EOF
-if { (eval echo configure:42442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:43864: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42567,7 +43989,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageEllipse in -lgd""... $ac_c" 1>&6
-echo "configure:42571: checking for gdImageEllipse in -lgd" >&5
+echo "configure:43993: checking for gdImageEllipse in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageEllipse | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42575,7 +43997,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42579 "configure"
+#line 44001 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42586,7 +44008,7 @@ int main() {
 gdImageEllipse()
 ; return 0; }
 EOF
-if { (eval echo configure:42590: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42715,7 +44137,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageSetBrush in -lgd""... $ac_c" 1>&6
-echo "configure:42719: checking for gdImageSetBrush in -lgd" >&5
+echo "configure:44141: checking for gdImageSetBrush in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageSetBrush | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42723,7 +44145,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42727 "configure"
+#line 44149 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42734,7 +44156,7 @@ int main() {
 gdImageSetBrush()
 ; return 0; }
 EOF
-if { (eval echo configure:42738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44160: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -42863,7 +44285,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringTTF in -lgd""... $ac_c" 1>&6
-echo "configure:42867: checking for gdImageStringTTF in -lgd" >&5
+echo "configure:44289: checking for gdImageStringTTF in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringTTF | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -42871,7 +44293,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 42875 "configure"
+#line 44297 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -42882,7 +44304,7 @@ int main() {
 gdImageStringTTF()
 ; return 0; }
 EOF
-if { (eval echo configure:42886: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43011,7 +44433,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringFT in -lgd""... $ac_c" 1>&6
-echo "configure:43015: checking for gdImageStringFT in -lgd" >&5
+echo "configure:44437: checking for gdImageStringFT in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringFT | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43019,7 +44441,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43023 "configure"
+#line 44445 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43030,7 +44452,7 @@ int main() {
 gdImageStringFT()
 ; return 0; }
 EOF
-if { (eval echo configure:43034: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43159,7 +44581,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageStringFTEx in -lgd""... $ac_c" 1>&6
-echo "configure:43163: checking for gdImageStringFTEx in -lgd" >&5
+echo "configure:44585: checking for gdImageStringFTEx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageStringFTEx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43167,7 +44589,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43171 "configure"
+#line 44593 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43178,7 +44600,7 @@ int main() {
 gdImageStringFTEx()
 ; return 0; }
 EOF
-if { (eval echo configure:43182: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43307,7 +44729,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageColorClosestHWB in -lgd""... $ac_c" 1>&6
-echo "configure:43311: checking for gdImageColorClosestHWB in -lgd" >&5
+echo "configure:44733: checking for gdImageColorClosestHWB in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageColorClosestHWB | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43315,7 +44737,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43319 "configure"
+#line 44741 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43326,7 +44748,7 @@ int main() {
 gdImageColorClosestHWB()
 ; return 0; }
 EOF
-if { (eval echo configure:43330: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44752: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43455,7 +44877,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
-echo "configure:43459: checking for gdImageColorResolve in -lgd" >&5
+echo "configure:44881: checking for gdImageColorResolve in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43463,7 +44885,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43467 "configure"
+#line 44889 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43474,7 +44896,7 @@ int main() {
 gdImageColorResolve()
 ; return 0; }
 EOF
-if { (eval echo configure:43478: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:44900: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43603,7 +45025,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageGifCtx in -lgd""... $ac_c" 1>&6
-echo "configure:43607: checking for gdImageGifCtx in -lgd" >&5
+echo "configure:45029: checking for gdImageGifCtx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageGifCtx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43611,7 +45033,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43615 "configure"
+#line 45037 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43622,7 +45044,7 @@ int main() {
 gdImageGifCtx()
 ; return 0; }
 EOF
-if { (eval echo configure:43626: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43751,7 +45173,7 @@ fi
   done
 
   echo $ac_n "checking for gdCacheCreate in -lgd""... $ac_c" 1>&6
-echo "configure:43755: checking for gdCacheCreate in -lgd" >&5
+echo "configure:45177: checking for gdCacheCreate in -lgd" >&5
 ac_lib_var=`echo gd'_'gdCacheCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43759,7 +45181,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43763 "configure"
+#line 45185 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43770,7 +45192,7 @@ int main() {
 gdCacheCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:43774: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -43899,7 +45321,7 @@ fi
   done
 
   echo $ac_n "checking for gdFontCacheShutdown in -lgd""... $ac_c" 1>&6
-echo "configure:43903: checking for gdFontCacheShutdown in -lgd" >&5
+echo "configure:45325: checking for gdFontCacheShutdown in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFontCacheShutdown | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -43907,7 +45329,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 43911 "configure"
+#line 45333 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -43918,7 +45340,7 @@ int main() {
 gdFontCacheShutdown()
 ; return 0; }
 EOF
-if { (eval echo configure:43922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44047,7 +45469,7 @@ fi
   done
 
   echo $ac_n "checking for gdFreeFontCache in -lgd""... $ac_c" 1>&6
-echo "configure:44051: checking for gdFreeFontCache in -lgd" >&5
+echo "configure:45473: checking for gdFreeFontCache in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFreeFontCache | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44055,7 +45477,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44059 "configure"
+#line 45481 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44066,7 +45488,7 @@ int main() {
 gdFreeFontCache()
 ; return 0; }
 EOF
-if { (eval echo configure:44070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44195,7 +45617,7 @@ fi
   done
 
   echo $ac_n "checking for gdFontCacheMutexSetup in -lgd""... $ac_c" 1>&6
-echo "configure:44199: checking for gdFontCacheMutexSetup in -lgd" >&5
+echo "configure:45621: checking for gdFontCacheMutexSetup in -lgd" >&5
 ac_lib_var=`echo gd'_'gdFontCacheMutexSetup | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44203,7 +45625,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44207 "configure"
+#line 45629 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44214,7 +45636,7 @@ int main() {
 gdFontCacheMutexSetup()
 ; return 0; }
 EOF
-if { (eval echo configure:44218: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45640: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44343,7 +45765,7 @@ fi
   done
 
   echo $ac_n "checking for gdNewDynamicCtxEx in -lgd""... $ac_c" 1>&6
-echo "configure:44347: checking for gdNewDynamicCtxEx in -lgd" >&5
+echo "configure:45769: checking for gdNewDynamicCtxEx in -lgd" >&5
 ac_lib_var=`echo gd'_'gdNewDynamicCtxEx | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44351,7 +45773,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44355 "configure"
+#line 45777 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44362,7 +45784,7 @@ int main() {
 gdNewDynamicCtxEx()
 ; return 0; }
 EOF
-if { (eval echo configure:44366: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:45788: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -44417,7 +45839,7 @@ fi
         old_CPPFLAGS=$CPPFLAGS
   CPPFLAGS=-I$GD_INCLUDE
   cat > conftest.$ac_ext <<EOF
-#line 44421 "configure"
+#line 45843 "configure"
 #include "confdefs.h"
 
 #include <gd.h>
@@ -44431,7 +45853,7 @@ ctx->gd_free = 1;
   
 ; return 0; }
 EOF
-if { (eval echo configure:44435: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:45857: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
     cat >> confdefs.h <<\EOF
@@ -44762,7 +46184,7 @@ EOF
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 44766 "configure"
+#line 46188 "configure"
 #include "confdefs.h"
 
     char foobar () {}
@@ -44773,7 +46195,7 @@ else
     }
   
 EOF
-if { (eval echo configure:44777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:46199: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -44924,7 +46346,7 @@ fi
   done
 
   echo $ac_n "checking for gdImageCreate in -lgd""... $ac_c" 1>&6
-echo "configure:44928: checking for gdImageCreate in -lgd" >&5
+echo "configure:46350: checking for gdImageCreate in -lgd" >&5
 ac_lib_var=`echo gd'_'gdImageCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -44932,7 +46354,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 44936 "configure"
+#line 46358 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -44943,7 +46365,7 @@ int main() {
 gdImageCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:44947: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46369: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45008,7 +46430,7 @@ fi
 php_with_gettext=no
 
 echo $ac_n "checking for GNU gettext support""... $ac_c" 1>&6
-echo "configure:45012: checking for GNU gettext support" >&5
+echo "configure:46434: checking for GNU gettext support" >&5
 # Check whether --with-gettext or --without-gettext was given.
 if test "${with_gettext+set}" = set; then
   withval="$with_gettext"
@@ -45063,7 +46485,7 @@ if test "$PHP_GETTEXT" != "no"; then
   O_LDFLAGS=$LDFLAGS
   LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
   echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
-echo "configure:45067: checking for bindtextdomain in -lintl" >&5
+echo "configure:46489: checking for bindtextdomain in -lintl" >&5
 ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45071,7 +46493,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lintl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45075 "configure"
+#line 46497 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45082,7 +46504,7 @@ int main() {
 bindtextdomain()
 ; return 0; }
 EOF
-if { (eval echo configure:45086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46508: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45104,7 +46526,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for bindtextdomain in -lc""... $ac_c" 1>&6
-echo "configure:45108: checking for bindtextdomain in -lc" >&5
+echo "configure:46530: checking for bindtextdomain in -lc" >&5
 ac_lib_var=`echo c'_'bindtextdomain | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45112,7 +46534,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45116 "configure"
+#line 46538 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45123,7 +46545,7 @@ int main() {
 bindtextdomain()
 ; return 0; }
 EOF
-if { (eval echo configure:45127: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:46549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45587,7 +47009,7 @@ EOF
 
 
   echo $ac_n "checking for ngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45591: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:47013: checking for ngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'ngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45595,7 +47017,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45599 "configure"
+#line 47021 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45606,7 +47028,7 @@ int main() {
 ngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47032: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45630,7 +47052,7 @@ else
 fi
 
   echo $ac_n "checking for dngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45634: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:47056: checking for dngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45638,7 +47060,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45642 "configure"
+#line 47064 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45649,7 +47071,7 @@ int main() {
 dngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45673,7 +47095,7 @@ else
 fi
 
   echo $ac_n "checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45677: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:47099: checking for dcngettext in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'dcngettext | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45681,7 +47103,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45685 "configure"
+#line 47107 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45692,7 +47114,7 @@ int main() {
 dcngettext()
 ; return 0; }
 EOF
-if { (eval echo configure:45696: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47118: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45716,7 +47138,7 @@ else
 fi
 
   echo $ac_n "checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB""... $ac_c" 1>&6
-echo "configure:45720: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
+echo "configure:47142: checking for bind_textdomain_codeset in -l$GETTEXT_CHECK_IN_LIB" >&5
 ac_lib_var=`echo $GETTEXT_CHECK_IN_LIB'_'bind_textdomain_codeset | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45724,7 +47146,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$GETTEXT_CHECK_IN_LIB  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45728 "configure"
+#line 47150 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45735,7 +47157,7 @@ int main() {
 bind_textdomain_codeset()
 ; return 0; }
 EOF
-if { (eval echo configure:45739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -45766,7 +47188,7 @@ fi
 php_with_gmp=no
 
 echo $ac_n "checking for GNU MP support""... $ac_c" 1>&6
-echo "configure:45770: checking for GNU MP support" >&5
+echo "configure:47192: checking for GNU MP support" >&5
 # Check whether --with-gmp or --without-gmp was given.
 if test "${with_gmp+set}" = set; then
   withval="$with_gmp"
@@ -45914,7 +47336,7 @@ if test "$PHP_GMP" != "no"; then
   done
 
   echo $ac_n "checking for __gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
-echo "configure:45918: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
+echo "configure:47340: checking for __gmp_randinit_lc_2exp_size in -lgmp" >&5
 ac_lib_var=`echo gmp'_'__gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -45922,7 +47344,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgmp  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 45926 "configure"
+#line 47348 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -45933,7 +47355,7 @@ int main() {
 __gmp_randinit_lc_2exp_size()
 ; return 0; }
 EOF
-if { (eval echo configure:45937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -46058,7 +47480,7 @@ else
   done
 
   echo $ac_n "checking for gmp_randinit_lc_2exp_size in -lgmp""... $ac_c" 1>&6
-echo "configure:46062: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
+echo "configure:47484: checking for gmp_randinit_lc_2exp_size in -lgmp" >&5
 ac_lib_var=`echo gmp'_'gmp_randinit_lc_2exp_size | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -46066,7 +47488,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgmp  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 46070 "configure"
+#line 47492 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -46077,7 +47499,7 @@ int main() {
 gmp_randinit_lc_2exp_size()
 ; return 0; }
 EOF
-if { (eval echo configure:46081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:47503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -46549,7 +47971,7 @@ fi
 php_with_mhash=no
 
 echo $ac_n "checking for mhash support""... $ac_c" 1>&6
-echo "configure:46553: checking for mhash support" >&5
+echo "configure:47975: checking for mhash support" >&5
 # Check whether --with-mhash or --without-mhash was given.
 if test "${with_mhash+set}" = set; then
   withval="$with_mhash"
@@ -46593,7 +48015,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_hash=yes
 
 echo $ac_n "checking whether to enable hash support""... $ac_c" 1>&6
-echo "configure:46597: checking whether to enable hash support" >&5
+echo "configure:48019: checking whether to enable hash support" >&5
 # Check whether --enable-hash or --disable-hash was given.
 if test "${enable_hash+set}" = set; then
   enableval="$enable_hash"
@@ -46651,7 +48073,7 @@ EOF
 
 
   echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:46655: checking whether byte ordering is bigendian" >&5
+echo "configure:48077: checking whether byte ordering is bigendian" >&5
 if eval "test \"`echo '$''{'ac_cv_c_bigendian_php'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46661,7 +48083,7 @@ else
   ac_cv_c_bigendian_php=unknown
 else
   cat > conftest.$ac_ext <<EOF
-#line 46665 "configure"
+#line 48087 "configure"
 #include "confdefs.h"
 
 int main(void)
@@ -46677,7 +48099,7 @@ int main(void)
 }
   
 EOF
-if { (eval echo configure:46681: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_bigendian_php=yes
 else
@@ -46702,7 +48124,7 @@ EOF
 
 
   echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:46706: checking size of short" >&5
+echo "configure:48128: checking size of short" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46710,9 +48132,10 @@ else
   ac_cv_sizeof_short=2
 else
   cat > conftest.$ac_ext <<EOF
-#line 46714 "configure"
+#line 48136 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -46721,7 +48144,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:46725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_short=`cat conftestval`
 else
@@ -46741,7 +48164,7 @@ EOF
 
 
   echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:46745: checking size of int" >&5
+echo "configure:48168: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46749,9 +48172,10 @@ else
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 46753 "configure"
+#line 48176 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -46760,7 +48184,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:46764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -46780,7 +48204,7 @@ EOF
 
 
   echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:46784: checking size of long" >&5
+echo "configure:48208: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46788,9 +48212,10 @@ else
   ac_cv_sizeof_long=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 46792 "configure"
+#line 48216 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -46799,7 +48224,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:46803: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48228: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -46819,7 +48244,7 @@ EOF
 
 
   echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:46823: checking size of long long" >&5
+echo "configure:48248: checking size of long long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -46827,9 +48252,10 @@ else
   ac_cv_sizeof_long_long=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 46831 "configure"
+#line 48256 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -46838,7 +48264,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:46842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:48268: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long=`cat conftestval`
 else
@@ -47184,10 +48610,13 @@ fi
 
 
 
+
+
+
 php_with_iconv=yes
 
 echo $ac_n "checking for iconv support""... $ac_c" 1>&6
-echo "configure:47191: checking for iconv support" >&5
+echo "configure:48620: checking for iconv support" >&5
 # Check whether --with-iconv or --without-iconv was given.
 if test "${with_iconv+set}" = set; then
   withval="$with_iconv"
@@ -47248,12 +48677,12 @@ if test "$PHP_ICONV" != "no"; then
 
         if test "$PHP_ICONV" = "yes"; then
     echo $ac_n "checking for iconv""... $ac_c" 1>&6
-echo "configure:47252: checking for iconv" >&5
+echo "configure:48681: checking for iconv" >&5
 if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 47257 "configure"
+#line 48686 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char iconv(); below.  */
@@ -47276,7 +48705,7 @@ iconv();
 
 ; return 0; }
 EOF
-if { (eval echo configure:47280: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_iconv=yes"
 else
@@ -47297,12 +48726,12 @@ else
   echo "$ac_t""no" 1>&6
 
       echo $ac_n "checking for libiconv""... $ac_c" 1>&6
-echo "configure:47301: checking for libiconv" >&5
+echo "configure:48730: checking for libiconv" >&5
 if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 47306 "configure"
+#line 48735 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char libiconv(); below.  */
@@ -47325,7 +48754,7 @@ libiconv();
 
 ; return 0; }
 EOF
-if { (eval echo configure:47329: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48758: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_libiconv=yes"
 else
@@ -47481,7 +48910,7 @@ EOF
   done
 
   echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:47485: checking for libiconv in -l$iconv_lib_name" >&5
+echo "configure:48914: checking for libiconv in -l$iconv_lib_name" >&5
 ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -47489,7 +48918,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$iconv_lib_name  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 47493 "configure"
+#line 48922 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -47500,7 +48929,7 @@ int main() {
 libiconv()
 ; return 0; }
 EOF
-if { (eval echo configure:47504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:48933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -47641,7 +49070,7 @@ else
   done
 
   echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:47645: checking for iconv in -l$iconv_lib_name" >&5
+echo "configure:49074: checking for iconv in -l$iconv_lib_name" >&5
 ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -47649,7 +49078,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$iconv_lib_name  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 47653 "configure"
+#line 49082 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -47660,7 +49089,7 @@ int main() {
 iconv()
 ; return 0; }
 EOF
-if { (eval echo configure:47664: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:49093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -47871,16 +49300,16 @@ else
     fi 
 
     echo $ac_n "checking if iconv is glibc's""... $ac_c" 1>&6
-echo "configure:47875: checking if iconv is glibc's" >&5
+echo "configure:49304: checking if iconv is glibc's" >&5
     cat > conftest.$ac_ext <<EOF
-#line 47877 "configure"
+#line 49306 "configure"
 #include "confdefs.h"
 #include <gnu/libc-version.h>
 int main() {
 gnu_get_libc_version();
 ; return 0; }
 EOF
-if { (eval echo configure:47884: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:49313: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
       echo "$ac_t""yes" 1>&6
@@ -47898,7 +49327,7 @@ rm -f conftest*
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if using GNU libiconv""... $ac_c" 1>&6
-echo "configure:47902: checking if using GNU libiconv" >&5
+echo "configure:49331: checking if using GNU libiconv" >&5
       php_iconv_old_ld="$LDFLAGS"
       LDFLAGS="-liconv $LDFLAGS"
       if test "$cross_compiling" = yes; then
@@ -47908,7 +49337,7 @@ echo "configure:47902: checking if using
       
 else
   cat > conftest.$ac_ext <<EOF
-#line 47912 "configure"
+#line 49341 "configure"
 #include "confdefs.h"
 
 #include <$PHP_ICONV_H_PATH>
@@ -47918,7 +49347,7 @@ int main() {
 }
       
 EOF
-if { (eval echo configure:47922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:49351: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
         echo "$ac_t""yes" 1>&6
@@ -47940,16 +49369,16 @@ fi
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if iconv is Konstantin Chuguev's""... $ac_c" 1>&6
-echo "configure:47944: checking if iconv is Konstantin Chuguev's" >&5
+echo "configure:49373: checking if iconv is Konstantin Chuguev's" >&5
       cat > conftest.$ac_ext <<EOF
-#line 47946 "configure"
+#line 49375 "configure"
 #include "confdefs.h"
 #include <iconv.h>
 int main() {
 iconv_ccs_init(NULL, NULL);
 ; return 0; }
 EOF
-if { (eval echo configure:47953: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:49382: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         echo "$ac_t""yes" 1>&6
@@ -47968,18 +49397,18 @@ rm -f conftest*
 
     if test -z "$iconv_impl_name"; then
       echo $ac_n "checking if using IBM iconv""... $ac_c" 1>&6
-echo "configure:47972: checking if using IBM iconv" >&5
+echo "configure:49401: checking if using IBM iconv" >&5
       php_iconv_old_ld="$LDFLAGS"
       LDFLAGS="-liconv $LDFLAGS"
       cat > conftest.$ac_ext <<EOF
-#line 47976 "configure"
+#line 49405 "configure"
 #include "confdefs.h"
 #include <iconv.h>
 int main() {
 cstoccsid("");
 ; return 0; }
 EOF
-if { (eval echo configure:47983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:49412: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         echo "$ac_t""yes" 1>&6
@@ -48165,7 +49594,7 @@ EOF
     esac
 
     echo $ac_n "checking if iconv supports errno""... $ac_c" 1>&6
-echo "configure:48169: checking if iconv supports errno" >&5
+echo "configure:49598: checking if iconv supports errno" >&5
     if test "$cross_compiling" = yes; then
   
       echo "$ac_t""no" 1>&6
@@ -48179,7 +49608,7 @@ EOF
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 48183 "configure"
+#line 49612 "configure"
 #include "confdefs.h"
 
 #include <$PHP_ICONV_H_PATH>
@@ -48200,7 +49629,7 @@ int main() {
 }
     
 EOF
-if { (eval echo configure:48204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:49633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""yes" 1>&6
@@ -48232,9 +49661,9 @@ fi
 
 
     echo $ac_n "checking if your cpp allows macro usage in include lines""... $ac_c" 1>&6
-echo "configure:48236: checking if your cpp allows macro usage in include lines" >&5
+echo "configure:49665: checking if your cpp allows macro usage in include lines" >&5
     cat > conftest.$ac_ext <<EOF
-#line 48238 "configure"
+#line 49667 "configure"
 #include "confdefs.h"
 
 #define FOO <$PHP_ICONV_H_PATH>
@@ -48244,7 +49673,7 @@ int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:48248: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:49677: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       echo "$ac_t""yes" 1>&6
@@ -48600,7 +50029,7 @@ fi
 php_with_imap=no
 
 echo $ac_n "checking for IMAP support""... $ac_c" 1>&6
-echo "configure:48604: checking for IMAP support" >&5
+echo "configure:50033: checking for IMAP support" >&5
 # Check whether --with-imap or --without-imap was given.
 if test "${with_imap+set}" = set; then
   withval="$with_imap"
@@ -48644,7 +50073,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_kerberos=no
 
 echo $ac_n "checking for IMAP Kerberos support""... $ac_c" 1>&6
-echo "configure:48648: checking for IMAP Kerberos support" >&5
+echo "configure:50077: checking for IMAP Kerberos support" >&5
 # Check whether --with-kerberos or --without-kerberos was given.
 if test "${with_kerberos+set}" = set; then
   withval="$with_kerberos"
@@ -48667,7 +50096,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_imap_ssl=no
 
 echo $ac_n "checking for IMAP SSL support""... $ac_c" 1>&6
-echo "configure:48671: checking for IMAP SSL support" >&5
+echo "configure:50100: checking for IMAP SSL support" >&5
 # Check whether --with-imap-ssl or --without-imap-ssl was given.
 if test "${with_imap_ssl+set}" = set; then
   withval="$with_imap_ssl"
@@ -49071,7 +50500,7 @@ EOF
     done
 
         cat > conftest.$ac_ext <<EOF
-#line 49075 "configure"
+#line 50504 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/mail.h>
 EOF
@@ -49091,12 +50520,12 @@ rm -f conftest*
         old_CFLAGS=$CFLAGS
     CFLAGS="-I$IMAP_INC_DIR"
     echo $ac_n "checking for utf8_mime2text signature""... $ac_c" 1>&6
-echo "configure:49095: checking for utf8_mime2text signature" >&5
+echo "configure:50524: checking for utf8_mime2text signature" >&5
 if eval "test \"`echo '$''{'ac_cv_utf8_mime2text'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 49100 "configure"
+#line 50529 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -49109,7 +50538,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:49113: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:50542: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
         ac_cv_utf8_mime2text=old
@@ -49138,12 +50567,12 @@ EOF
     old_CFLAGS=$CFLAGS
     CFLAGS="-I$IMAP_INC_DIR"
     echo $ac_n "checking for U8T_DECOMPOSE""... $ac_c" 1>&6
-echo "configure:49142: checking for U8T_DECOMPOSE" >&5
+echo "configure:50571: checking for U8T_DECOMPOSE" >&5
 if eval "test \"`echo '$''{'ac_cv_u8t_canonical'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 49147 "configure"
+#line 50576 "configure"
 #include "confdefs.h"
 
 #include <c-client.h>
@@ -49154,7 +50583,7 @@ int main() {
       
 ; return 0; }
 EOF
-if { (eval echo configure:49158: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:50587: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
          ac_cv_u8t_decompose=yes
@@ -49184,7 +50613,7 @@ echo "$ac_t""$ac_cv_u8t_canonical" 1>&6
         old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$IMAP_INC_DIR
     cat > conftest.$ac_ext <<EOF
-#line 49188 "configure"
+#line 50617 "configure"
 #include "confdefs.h"
 
 #include "imap4r1.h"
@@ -49303,7 +50732,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for pam_start in -lpam""... $ac_c" 1>&6
-echo "configure:49307: checking for pam_start in -lpam" >&5
+echo "configure:50736: checking for pam_start in -lpam" >&5
 ac_lib_var=`echo pam'_'pam_start | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -49311,7 +50740,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpam  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 49315 "configure"
+#line 50744 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -49322,7 +50751,7 @@ int main() {
 pam_start()
 ; return 0; }
 EOF
-if { (eval echo configure:49326: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:50755: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -49477,7 +50906,7 @@ fi
   done
 
   echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:49481: checking for crypt in -lcrypt" >&5
+echo "configure:50910: checking for crypt in -lcrypt" >&5
 ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -49485,7 +50914,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 49489 "configure"
+#line 50918 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -49496,7 +50925,7 @@ int main() {
 crypt()
 ; return 0; }
 EOF
-if { (eval echo configure:49500: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:50929: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -49700,7 +51129,7 @@ fi
     # Extract the first word of "krb5-config", so it can be a program name with args.
 set dummy krb5-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:49704: checking for $ac_word" >&5
+echo "configure:51133: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_KRB5_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -50069,7 +51498,7 @@ else
 
   else
     cat > conftest.$ac_ext <<EOF
-#line 50073 "configure"
+#line 51502 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/linkage.h>
 EOF
@@ -50110,7 +51539,7 @@ rm -f conftest*
     # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:50114: checking for $ac_word" >&5
+echo "configure:51543: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -50315,9 +51744,9 @@ fi
     old_CPPFLAGS=$CPPFLAGS
     CPPFLAGS=-I$OPENSSL_INCDIR
     echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:50319: checking for OpenSSL version" >&5
+echo "configure:51748: checking for OpenSSL version" >&5
     cat > conftest.$ac_ext <<EOF
-#line 50321 "configure"
+#line 51750 "configure"
 #include "confdefs.h"
 
 #include <openssl/opensslv.h>
@@ -50472,7 +51901,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:50476: checking for CRYPTO_free in -lcrypto" >&5
+echo "configure:51905: checking for CRYPTO_free in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50480,7 +51909,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50484 "configure"
+#line 51913 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50491,7 +51920,7 @@ int main() {
 CRYPTO_free()
 ; return 0; }
 EOF
-if { (eval echo configure:50495: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:51924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -50648,7 +52077,7 @@ fi
   done
 
   echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:50652: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+echo "configure:52081: checking for SSL_CTX_set_ssl_version in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -50656,7 +52085,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 50660 "configure"
+#line 52089 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -50667,7 +52096,7 @@ int main() {
 SSL_CTX_set_ssl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:50671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52100: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -50809,7 +52238,7 @@ else
 
   elif test -f "$IMAP_INC_DIR/linkage.c"; then
     cat > conftest.$ac_ext <<EOF
-#line 50813 "configure"
+#line 52242 "configure"
 #include "confdefs.h"
 #include <$IMAP_INC_DIR/linkage.c>
 EOF
@@ -50840,7 +52269,7 @@ rm -f conftest*
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50844 "configure"
+#line 52273 "configure"
 #include "confdefs.h"
 
     
@@ -50873,7 +52302,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50877: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:52306: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50909,7 +52338,7 @@ fi
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50913 "configure"
+#line 52342 "configure"
 #include "confdefs.h"
 
     
@@ -50942,7 +52371,7 @@ else
     }
   
 EOF
-if { (eval echo configure:50946: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:52375: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -50969,7 +52398,7 @@ fi
 
 
     echo $ac_n "checking whether rfc822_output_address_list function present""... $ac_c" 1>&6
-echo "configure:50973: checking whether rfc822_output_address_list function present" >&5
+echo "configure:52402: checking whether rfc822_output_address_list function present" >&5
     
   old_LIBS=$LIBS
   LIBS="
@@ -50981,7 +52410,7 @@ echo "configure:50973: checking whether
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 50985 "configure"
+#line 52414 "configure"
 #include "confdefs.h"
 
     
@@ -51017,7 +52446,7 @@ else
     }
   
 EOF
-if { (eval echo configure:51021: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:52450: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -51046,7 +52475,7 @@ fi
 
 
     echo $ac_n "checking whether build with IMAP works""... $ac_c" 1>&6
-echo "configure:51050: checking whether build with IMAP works" >&5
+echo "configure:52479: checking whether build with IMAP works" >&5
     
   
   old_LIBS=$LIBS
@@ -51057,7 +52486,7 @@ echo "configure:51050: checking whether
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 51061 "configure"
+#line 52490 "configure"
 #include "confdefs.h"
 
     
@@ -51090,7 +52519,7 @@ else
     }
   
 EOF
-if { (eval echo configure:51094: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:52523: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -51122,7 +52551,7 @@ fi
 php_with_interbase=no
 
 echo $ac_n "checking for InterBase support""... $ac_c" 1>&6
-echo "configure:51126: checking for InterBase support" >&5
+echo "configure:52555: checking for InterBase support" >&5
 # Check whether --with-interbase or --without-interbase was given.
 if test "${with_interbase+set}" = set; then
   withval="$with_interbase"
@@ -51269,7 +52698,7 @@ if test "$PHP_INTERBASE" != "no"; then
   done
 
   echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
-echo "configure:51273: checking for isc_detach_database in -lfbclient" >&5
+echo "configure:52702: checking for isc_detach_database in -lfbclient" >&5
 ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -51277,7 +52706,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfbclient  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 51281 "configure"
+#line 52710 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -51288,7 +52717,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:51292: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -51415,7 +52844,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
-echo "configure:51419: checking for isc_detach_database in -lgds" >&5
+echo "configure:52848: checking for isc_detach_database in -lgds" >&5
 ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -51423,7 +52852,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgds  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 51427 "configure"
+#line 52856 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -51434,7 +52863,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:51438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:52867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -51561,7 +52990,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
-echo "configure:51565: checking for isc_detach_database in -lib_util" >&5
+echo "configure:52994: checking for isc_detach_database in -lib_util" >&5
 ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -51569,7 +52998,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lib_util  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 51573 "configure"
+#line 53002 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -51580,7 +53009,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:51584: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:53013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -52057,7 +53486,7 @@ fi
 php_enable_intl=no
 
 echo $ac_n "checking whether to enable internationalization support""... $ac_c" 1>&6
-echo "configure:52061: checking whether to enable internationalization support" >&5
+echo "configure:53490: checking whether to enable internationalization support" >&5
 # Check whether --enable-intl or --disable-intl was given.
 if test "${enable_intl+set}" = set; then
   enableval="$enable_intl"
@@ -52129,7 +53558,7 @@ ext_output=$PHP_ICU_DIR
         # Extract the first word of "icu-config", so it can be a program name with args.
 set dummy icu-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:52133: checking for $ac_word" >&5
+echo "configure:53562: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_ICU_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -52167,7 +53596,7 @@ fi
   fi
 
   echo $ac_n "checking for location of ICU headers and libraries""... $ac_c" 1>&6
-echo "configure:52171: checking for location of ICU headers and libraries" >&5
+echo "configure:53600: checking for location of ICU headers and libraries" >&5
 
     icu_install_prefix=`$ICU_CONFIG --prefix 2> /dev/null`
   if test "$?" != "0" || test -z "$icu_install_prefix"; then
@@ -52177,7 +53606,7 @@ echo "configure:52171: checking for loca
     echo "$ac_t""$icu_install_prefix" 1>&6
 
         echo $ac_n "checking for ICU 3.4 or greater""... $ac_c" 1>&6
-echo "configure:52181: checking for ICU 3.4 or greater" >&5
+echo "configure:53610: checking for ICU 3.4 or greater" >&5
     icu_version_full=`$ICU_CONFIG --version`
     ac_IFS=$IFS
     IFS="."
@@ -52334,7 +53763,7 @@ do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:52338: checking for $ac_word" >&5
+echo "configure:53767: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -52366,7 +53795,7 @@ test -n "$CXX" || CXX="gcc"
 
 
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:52370: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
+echo "configure:53799: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
 
 ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -52377,12 +53806,12 @@ cross_compiling=$ac_cv_prog_cxx_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 52381 "configure"
+#line 53810 "configure"
 #include "confdefs.h"
 
 int main(){return(0);}
 EOF
-if { (eval echo configure:52386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:53815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cxx_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -52408,12 +53837,12 @@ if test $ac_cv_prog_cxx_works = no; then
   { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:52412: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:53841: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
 cross_compiling=$ac_cv_prog_cxx_cross
 
 echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
-echo "configure:52417: checking whether we are using GNU C++" >&5
+echo "configure:53846: checking whether we are using GNU C++" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -52422,7 +53851,7 @@ else
   yes;
 #endif
 EOF
-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:52426: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:53855: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gxx=yes
 else
   ac_cv_prog_gxx=no
@@ -52441,7 +53870,7 @@ ac_test_CXXFLAGS="${CXXFLAGS+set}"
 ac_save_CXXFLAGS="$CXXFLAGS"
 CXXFLAGS=
 echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
-echo "configure:52445: checking whether ${CXX-g++} accepts -g" >&5
+echo "configure:53874: checking whether ${CXX-g++} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -52473,7 +53902,7 @@ else
 fi
 
     echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
-echo "configure:52477: checking how to run the C++ preprocessor" >&5
+echo "configure:53906: checking how to run the C++ preprocessor" >&5
 if test -z "$CXXCPP"; then
 if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -52486,12 +53915,12 @@ ac_link='${CXX-g++} -o conftest${ac_exee
 cross_compiling=$ac_cv_prog_cxx_cross
   CXXCPP="${CXX-g++} -E"
   cat > conftest.$ac_ext <<EOF
-#line 52490 "configure"
+#line 53919 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:52495: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:53924: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -53049,7 +54478,7 @@ fi
 php_enable_json=yes
 
 echo $ac_n "checking whether to enable JavaScript Object Serialization support""... $ac_c" 1>&6
-echo "configure:53053: checking whether to enable JavaScript Object Serialization support" >&5
+echo "configure:54482: checking whether to enable JavaScript Object Serialization support" >&5
 # Check whether --enable-json or --disable-json was given.
 if test "${enable_json+set}" = set; then
   enableval="$enable_json"
@@ -53095,12 +54524,12 @@ if test "$PHP_JSON" != "no"; then
 EOF
 
   echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:53099: checking for ANSI C header files" >&5
+echo "configure:54528: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 53104 "configure"
+#line 54533 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -53108,7 +54537,7 @@ else
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:53112: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:54541: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -53125,7 +54554,7 @@ rm -f conftest*
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 53129 "configure"
+#line 54558 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -53143,7 +54572,7 @@ fi
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 53147 "configure"
+#line 54576 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -53164,7 +54593,7 @@ if test "$cross_compiling" = yes; then
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 53168 "configure"
+#line 54597 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -53175,7 +54604,7 @@ if (XOR (islower (i), ISLOWER (i)) || to
 exit (0); }
 
 EOF
-if { (eval echo configure:53179: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:54608: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -53525,7 +54954,7 @@ fi
 php_with_ldap=no
 
 echo $ac_n "checking for LDAP support""... $ac_c" 1>&6
-echo "configure:53529: checking for LDAP support" >&5
+echo "configure:54958: checking for LDAP support" >&5
 # Check whether --with-ldap or --without-ldap was given.
 if test "${with_ldap+set}" = set; then
   withval="$with_ldap"
@@ -53569,7 +54998,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_ldap_sasl=no
 
 echo $ac_n "checking for LDAP Cyrus SASL support""... $ac_c" 1>&6
-echo "configure:53573: checking for LDAP Cyrus SASL support" >&5
+echo "configure:55002: checking for LDAP Cyrus SASL support" >&5
 # Check whether --with-ldap-sasl or --without-ldap-sasl was given.
 if test "${with_ldap_sasl+set}" = set; then
   withval="$with_ldap_sasl"
@@ -55911,19 +57340,19 @@ EOF
   LIBS="$LIBS $LDAP_SHARED_LIBADD"
 
     echo $ac_n "checking for 3 arg ldap_set_rebind_proc""... $ac_c" 1>&6
-echo "configure:55915: checking for 3 arg ldap_set_rebind_proc" >&5
+echo "configure:57344: checking for 3 arg ldap_set_rebind_proc" >&5
 if eval "test \"`echo '$''{'ac_cv_3arg_setrebindproc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 55920 "configure"
+#line 57349 "configure"
 #include "confdefs.h"
 #include <ldap.h>
 int main() {
 ldap_set_rebind_proc(0,0,0)
 ; return 0; }
 EOF
-if { (eval echo configure:55927: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:57356: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_3arg_setrebindproc=yes
 else
@@ -55946,12 +57375,12 @@ EOF
       for ac_func in ldap_parse_result ldap_parse_reference ldap_start_tls_s
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:55950: checking for $ac_func" >&5
+echo "configure:57379: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 55955 "configure"
+#line 57384 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -55974,7 +57403,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:55978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:57407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -56136,7 +57565,7 @@ EOF
   done
 
   echo $ac_n "checking for sasl_version in -lsasl2""... $ac_c" 1>&6
-echo "configure:56140: checking for sasl_version in -lsasl2" >&5
+echo "configure:57569: checking for sasl_version in -lsasl2" >&5
 ac_lib_var=`echo sasl2'_'sasl_version | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -56144,7 +57573,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsasl2  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 56148 "configure"
+#line 57577 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -56155,7 +57584,7 @@ int main() {
 sasl_version()
 ; return 0; }
 EOF
-if { (eval echo configure:56159: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:57588: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -56324,12 +57753,12 @@ fi
   fi
 
         echo $ac_n "checking for ldap_bind_s""... $ac_c" 1>&6
-echo "configure:56328: checking for ldap_bind_s" >&5
+echo "configure:57757: checking for ldap_bind_s" >&5
 if eval "test \"`echo '$''{'ac_cv_func_ldap_bind_s'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 56333 "configure"
+#line 57762 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char ldap_bind_s(); below.  */
@@ -56352,7 +57781,7 @@ ldap_bind_s();
 
 ; return 0; }
 EOF
-if { (eval echo configure:56356: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:57785: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_ldap_bind_s=yes"
 else
@@ -56381,39 +57810,18 @@ fi
 
 
 
+php_with_libevent=no
 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-php_enable_mbstring=no
-
-echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
-echo "configure:56409: checking whether to enable multibyte string support" >&5
-# Check whether --enable-mbstring or --disable-mbstring was given.
-if test "${enable_mbstring+set}" = set; then
-  enableval="$enable_mbstring"
-  PHP_MBSTRING=$enableval
+echo $ac_n "checking for libevent support""... $ac_c" 1>&6
+echo "configure:57817: checking for libevent support" >&5
+# Check whether --with-libevent or --without-libevent was given.
+if test "${with_libevent+set}" = set; then
+  withval="$with_libevent"
+  PHP_LIBEVENT=$withval
 else
   
-  PHP_MBSTRING=no
-  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL
+  PHP_LIBEVENT=no
+  test "$PHP_ENABLE_ALL" && PHP_LIBEVENT=$PHP_ENABLE_ALL
 
 fi
 
@@ -56421,12 +57829,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_MBSTRING in
+case $PHP_LIBEVENT in
 shared,*)
-  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
+  PHP_LIBEVENT=`echo "$PHP_LIBEVENT"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_MBSTRING=yes
+  PHP_LIBEVENT=yes
   ;;
 no)
   ext_output=no
@@ -56445,720 +57853,881 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+if test "$PHP_LIBEVENT" != "no"; then
+  SEARCH_PATH="/usr /usr/local"
+  SEARCH_FOR="/include/event.h"
+
+  if test "$PHP_LIBEVENT" = "yes"; then
+    echo $ac_n "checking for libevent headers in default path""... $ac_c" 1>&6
+echo "configure:57863: checking for libevent headers in default path" >&5
+    for i in $SEARCH_PATH ; do
+      if test -r $i/$SEARCH_FOR; then
+        LIBEVENT_DIR=$i
+        echo "$ac_t""found in $i" 1>&6
+      fi
+    done
+  else
+    echo $ac_n "checking for libevent headers in $PHP_LIBEVENT""... $ac_c" 1>&6
+echo "configure:57872: checking for libevent headers in $PHP_LIBEVENT" >&5
+    if test -r $PHP_LIBEVENT/$SEARCH_FOR; then
+      LIBEVENT_DIR=$PHP_LIBEVENT
+      echo "$ac_t""found" 1>&6
+    fi
+  fi
 
-php_enable_mbregex=yes
+  if test -z "$LIBEVENT_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Cannot find libevent headers" 1>&2; exit 1; }
+  fi
 
-echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
-echo "configure:56453: checking whether to enable multibyte regex support" >&5
-# Check whether --enable-mbregex or --disable-mbregex was given.
-if test "${enable_mbregex+set}" = set; then
-  enableval="$enable_mbregex"
-  PHP_MBREGEX=$enableval
-else
-  
-  PHP_MBREGEX=yes
   
+  if test "$LIBEVENT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$LIBEVENT_DIR/include" || echo "$LIBEVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/include
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/include\"`"
+  fi
 
-fi
-
-
-ext_output=$PHP_MBREGEX
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_enable_mbregex_backtrack=yes
-
-echo $ac_n "checking whether to check multibyte regex backtrack""... $ac_c" 1>&6
-echo "configure:56476: checking whether to check multibyte regex backtrack" >&5
-# Check whether --enable-mbregex_backtrack or --disable-mbregex_backtrack was given.
-if test "${enable_mbregex_backtrack+set}" = set; then
-  enableval="$enable_mbregex_backtrack"
-  PHP_MBREGEX_BACKTRACK=$enableval
-else
+    
   
-  PHP_MBREGEX_BACKTRACK=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-fi
-
-
-ext_output=$PHP_MBREGEX_BACKTRACK
-echo "$ac_t""$ext_output" 1>&6
-
-
+  fi
 
 
+  LIBNAME=event
+  LIBSYMBOL=event_base_new
 
-php_with_libmbfl=no
+  if test "x$PHP_LIBDIR" = "x"; then
+    PHP_LIBDIR=lib
+  fi
 
-echo $ac_n "checking for external libmbfl""... $ac_c" 1>&6
-echo "configure:56499: checking for external libmbfl" >&5
-# Check whether --with-libmbfl or --without-libmbfl was given.
-if test "${with_libmbfl+set}" = set; then
-  withval="$with_libmbfl"
-  PHP_LIBMBFL=$withval
-else
   
-  PHP_LIBMBFL=no
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$LIBEVENT_DIR/$PHP_LIBDIR 
+  "
   
-
-fi
-
-
-ext_output=$PHP_LIBMBFL
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_onig=no
-
-echo $ac_n "checking for external oniguruma""... $ac_c" 1>&6
-echo "configure:56522: checking for external oniguruma" >&5
-# Check whether --with-onig or --without-onig was given.
-if test "${with_onig+set}" = set; then
-  withval="$with_onig"
-  PHP_ONIG=$withval
-else
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-  PHP_ONIG=no
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-fi
-
-
-ext_output=$PHP_ONIG
-echo "$ac_t""$ext_output" 1>&6
-
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
+    fi
+   ;;
+  esac
 
-if test "$PHP_MBSTRING" != "no"; then  
-  cat >> confdefs.h <<\EOF
-#define HAVE_MBSTRING 1
-EOF
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-  if test "$PHP_MBREGEX" != "no"; then
+      fi
     
-  if test "$PHP_MBREGEX" = "yes"; then
-    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
-                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then
-        cat >> confdefs.h <<\EOF
-#define USE_COMBINATION_EXPLOSION_CHECK 1
-EOF
+  fi
 
-      fi
+    ;;
+    esac
+  done
 
-      echo $ac_n "checking for variable length prototypes and stdarg.h""... $ac_c" 1>&6
-echo "configure:56563: checking for variable length prototypes and stdarg.h" >&5
-if eval "test \"`echo '$''{'php_cv_mbstring_stdarg'+set}'`\" = set"; then
+  echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
+echo "configure:58021: checking for $LIBSYMBOL in -l$LIBNAME" >&5
+ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-        if test "$cross_compiling" = yes; then
-  
-                    case $host_alias in
-          *netware*)
-          php_cv_mbstring_stdarg=yes
-          ;;
-          *)
-          php_cv_mbstring_stdarg=no
-          ;;
-          esac
-        
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56581 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-l$LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 58029 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $LIBSYMBOL();
 
-#include <stdarg.h>
-int foo(int x, ...) {
-	va_list va;
-	va_start(va, x);
-	va_arg(va, int);
-	va_arg(va, char *);
-	va_arg(va, double);
-	return 0;
-}
-int main() { return foo(10, "", 3.14); }
-        
-EOF
-if { (eval echo configure:56596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  php_cv_mbstring_stdarg=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  php_cv_mbstring_stdarg=no
-fi
-rm -fr conftest*
-fi
-
-      
-fi
-
-echo "$ac_t""$php_cv_mbstring_stdarg" 1>&6
-
-      for ac_hdr in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:56617: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56622 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
+int main() {
+$LIBSYMBOL()
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:56627: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:58040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+LIBS="$ac_save_LIBS"
 
-      echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:56654: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56662 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(int));
-  exit(0);
-}
-EOF
-if { (eval echo configure:56673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_int=0
-fi
-rm -fr conftest*
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
 
-fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
+  if test "$ext_shared" = "yes"; then
+    LIBEVENT_SHARED_LIBADD="-l$LIBNAME $LIBEVENT_SHARED_LIBADD"
+    if test -n "$LIBEVENT_DIR/$PHP_LIBDIR"; then
+      
+  if test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEVENT_DIR/$PHP_LIBDIR" || echo "$LIBEVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LIBEVENT_SHARED_LIBADD="-L$ai_p $LIBEVENT_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && LIBEVENT_SHARED_LIBADD="$ld_runpath_switch$ai_p $LIBEVENT_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      echo $ac_n "checking size of short""... $ac_c" 1>&6
-echo "configure:56693: checking size of short" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_short=2
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56701 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(short));
-  exit(0);
-}
-EOF
-if { (eval echo configure:56712: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_short=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_short=0
-fi
-rm -fr conftest*
-fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_short" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_SHORT $ac_cv_sizeof_short
-EOF
+      fi
+    
+  fi
 
+    fi
+  else
+    
 
-      echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:56732: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56740 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long));
-  exit(0);
-}
-EOF
-if { (eval echo configure:56751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long=0
-fi
-rm -fr conftest*
-fi
+  if test -n "$LIBEVENT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEVENT_DIR/$PHP_LIBDIR" || echo "$LIBEVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEVENT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-      echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:56771: checking for working const" >&5
-if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56776 "configure"
-#include "confdefs.h"
+    
+  fi
 
-int main() {
+  fi
+  
+  
+  case $LIBNAME in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$LIBNAME $LIBS" 
+   ;;
+  esac
 
-/* Ultrix mips cc rejects this.  */
-typedef int charset[2]; const charset x;
-/* SunOS 4.1.1 cc rejects this.  */
-char const *const *ccp;
-char **p;
-/* NEC SVR4.0.2 mips cc rejects this.  */
-struct point {int x, y;};
-static struct point const zero = {0,0};
-/* AIX XL C 1.02.0.0 rejects this.
-   It does not let you subtract one const X* pointer from another in an arm
-   of an if-expression whose if-part is not a constant expression */
-const char *g = "string";
-ccp = &g + (g ? g-g : 0);
-/* HPUX 7.0 cc rejects these. */
-++ccp;
-p = (char**) ccp;
-ccp = (char const *const *) p;
-{ /* SCO 3.2v4 cc rejects this.  */
-  char *t;
-  char const *s = 0 ? (char *) 0 : (char const *) 0;
 
-  *t++ = 0;
-}
-{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
-  int x[] = {25, 17};
-  const int *foo = &x[0];
-  ++foo;
-}
-{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
-  typedef const int *iptr;
-  iptr p = 0;
-  ++p;
-}
-{ /* AIX XL C 1.02.0.0 rejects this saying
-     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
-  struct s { int j; const int *ap[3]; };
-  struct s *b; b->j = 5;
-}
-{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-  const int foo = 10;
-}
 
-; return 0; }
-EOF
-if { (eval echo configure:56825: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_c_const=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_c_const=no
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_c_const" 1>&6
-if test $ac_cv_c_const = no; then
-  cat >> confdefs.h <<\EOF
-#define const 
-EOF
+  fi
 
-fi
 
-      echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:56846: checking whether time.h and sys/time.h may both be included" >&5
-if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56851 "configure"
-#include "confdefs.h"
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
-int main() {
-struct tm *tp;
-; return 0; }
-EOF
-if { (eval echo configure:56860: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_header_time=yes
+  
+  
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_time=no
-fi
-rm -f conftest*
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$LIBNAME_$LIBSYMBOL
+    
+    { echo "configure: error: wrong libevent version {1.4.+ is required} or lib not found" 1>&2; exit 1; }
+  
+  
 fi
 
-echo "$ac_t""$ac_cv_header_time" 1>&6
-if test $ac_cv_header_time = yes; then
-  cat >> confdefs.h <<\EOF
-#define TIME_WITH_SYS_TIME 1
-EOF
 
-fi
- 
-      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
-# for constant arguments.  Useless!
-echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:56883: checking for working alloca.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56888 "configure"
-#include "confdefs.h"
-#include <alloca.h>
-int main() {
-char *p = alloca(2 * sizeof(int));
-; return 0; }
-EOF
-if { (eval echo configure:56895: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_header_alloca_h=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_alloca_h=no
-fi
-rm -f conftest*
-fi
+  
+  am_i_shared=$PHP_LIBEVENT_SHARED
+  is_it_shared=$PHP_SOCKETS_SHARED
+  is_it_enabled=$PHP_SOCKETS
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension libevent to build statically, but it
+depends on extension sockets, which you've configured to build shared.
+You either need to build libevent shared or build sockets statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension libevent, which depends on extension sockets,
+but you've either not enabled sockets, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBEVENT_SHARED_LIBADD"
 
-echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
-if test $ac_cv_header_alloca_h = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ALLOCA_H 1
-EOF
+  
+  ext_builddir=ext/libevent
+  ext_srcdir=$abs_srcdir/ext/libevent
 
-fi
+  ac_extra=
 
-echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:56916: checking for alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56921 "configure"
-#include "confdefs.h"
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_LIBEVENT_SHARED=no
+    
+  
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-#ifdef __GNUC__
-# define alloca __builtin_alloca
-#else
-# ifdef _MSC_VER
-#  include <malloc.h>
-#  define alloca _alloca
-# else
-#  if HAVE_ALLOCA_H
-#   include <alloca.h>
-#  else
-#   ifdef _AIX
- #pragma alloca
-#   else
-#    ifndef alloca /* predefined by HP cc +Olibcalls */
-char *alloca ();
-#    endif
-#   endif
-#  endif
-# endif
-#endif
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-int main() {
-char *p = (char *) alloca(1);
-; return 0; }
-EOF
-if { (eval echo configure:56949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_func_alloca_works=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_func_alloca_works=no
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
-if test $ac_cv_func_alloca_works = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ALLOCA 1
-EOF
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-if test $ac_cv_func_alloca_works = no; then
-  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
-  # that cause trouble.  Some versions do not even contain alloca or
-  # contain a buggy version.  If you still want to use their alloca,
-  # use ar to extract alloca.o from them instead of compiling alloca.c.
-  ALLOCA=alloca.${ac_objext}
-  cat >> confdefs.h <<\EOF
-#define C_ALLOCA 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
 
-echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:56981: checking whether alloca needs Cray hooks" >&5
-if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 56986 "configure"
-#include "confdefs.h"
-#if defined(CRAY) && ! defined(CRAY2)
-webecray
-#else
-wenotbecray
-#endif
+    EXT_STATIC="$EXT_STATIC libevent"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC libevent"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_LIBEVENT_SHARED=yes
+      
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "webecray" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_os_cray=yes
-else
-  rm -rf conftest*
-  ac_cv_os_cray=no
-fi
-rm -f conftest*
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-fi
 
-echo "$ac_t""$ac_cv_os_cray" 1>&6
-if test $ac_cv_os_cray = yes; then
-for ac_func in _getb67 GETB67 getb67; do
-  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:57011: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 57016 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_libevent="$shared_objects_libevent $ac_bdir$ac_obj.lo"
 
-int main() {
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phplibevent.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(PHPLIBEVENT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phplibevent.so '$ext_builddir'/phplibevent.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPLIBEVENT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(PHPLIBEVENT_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phplibevent.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phplibevent.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libevent"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phplibevent.$suffix: $ext_builddir/phplibevent.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phplibevent.$suffix \$(phplibdir)
+
+$ext_builddir/phplibevent.$suffix: \$(shared_objects_libevent) \$(PHPLIBEVENT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-; return 0; }
 EOF
-if { (eval echo configure:57039: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<EOF
-#define CRAY_STACKSEG_END $ac_func
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/libevent.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(LIBEVENT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/libevent.so '$ext_builddir'/libevent.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(LIBEVENT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_libevent) $(LIBEVENT_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/libevent.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/libevent.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_libevent"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/libevent.$suffix: $ext_builddir/libevent.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/libevent.$suffix \$(phplibdir)
+
+$ext_builddir/libevent.$suffix: \$(shared_objects_libevent) \$(LIBEVENT_SHARED_DEPENDENCIES)
+	$link_cmd
+
 EOF
 
-  break
-else
-  echo "$ac_t""no" 1>&6
-fi
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_LIBEVENT 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_LIBEVENT_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC libevent"
+        ;;
+      *)
+        
+  
+  case ext/libevent in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/libevent"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/libevent/"; ac_bdir="ext/libevent/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in libevent.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC libevent"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=libevent
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
 
-done
 fi
 
-echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:57066: checking stack direction for C alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+php_enable_mbstring=no
+
+echo $ac_n "checking whether to enable multibyte string support""... $ac_c" 1>&6
+echo "configure:58513: checking whether to enable multibyte string support" >&5
+# Check whether --enable-mbstring or --disable-mbstring was given.
+if test "${enable_mbstring+set}" = set; then
+  enableval="$enable_mbstring"
+  PHP_MBSTRING=$enableval
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_c_stack_direction=0
+  
+  PHP_MBSTRING=no
+  test "$PHP_ENABLE_ALL" && PHP_MBSTRING=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_MBSTRING in
+shared,*)
+  PHP_MBSTRING=`echo "$PHP_MBSTRING"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_MBSTRING=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_enable_mbregex=yes
+
+echo $ac_n "checking whether to enable multibyte regex support""... $ac_c" 1>&6
+echo "configure:58557: checking whether to enable multibyte regex support" >&5
+# Check whether --enable-mbregex or --disable-mbregex was given.
+if test "${enable_mbregex+set}" = set; then
+  enableval="$enable_mbregex"
+  PHP_MBREGEX=$enableval
 else
-  cat > conftest.$ac_ext <<EOF
-#line 57074 "configure"
-#include "confdefs.h"
-find_stack_direction ()
-{
-  static char *addr = 0;
-  auto char dummy;
-  if (addr == 0)
-    {
-      addr = &dummy;
-      return find_stack_direction ();
-    }
-  else
-    return (&dummy > addr) ? 1 : -1;
-}
-main ()
-{
-  exit (find_stack_direction() < 0);
-}
-EOF
-if { (eval echo configure:57093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_c_stack_direction=1
+  
+  PHP_MBREGEX=yes
+  
+
+fi
+
+
+ext_output=$PHP_MBREGEX
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_enable_mbregex_backtrack=yes
+
+echo $ac_n "checking whether to check multibyte regex backtrack""... $ac_c" 1>&6
+echo "configure:58580: checking whether to check multibyte regex backtrack" >&5
+# Check whether --enable-mbregex_backtrack or --disable-mbregex_backtrack was given.
+if test "${enable_mbregex_backtrack+set}" = set; then
+  enableval="$enable_mbregex_backtrack"
+  PHP_MBREGEX_BACKTRACK=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_stack_direction=-1
+  
+  PHP_MBREGEX_BACKTRACK=yes
+  
+
 fi
-rm -fr conftest*
+
+
+ext_output=$PHP_MBREGEX_BACKTRACK
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_libmbfl=no
+
+echo $ac_n "checking for external libmbfl""... $ac_c" 1>&6
+echo "configure:58603: checking for external libmbfl" >&5
+# Check whether --with-libmbfl or --without-libmbfl was given.
+if test "${with_libmbfl+set}" = set; then
+  withval="$with_libmbfl"
+  PHP_LIBMBFL=$withval
+else
+  
+  PHP_LIBMBFL=no
+  
+
 fi
 
+
+ext_output=$PHP_LIBMBFL
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_onig=no
+
+echo $ac_n "checking for external oniguruma""... $ac_c" 1>&6
+echo "configure:58626: checking for external oniguruma" >&5
+# Check whether --with-onig or --without-onig was given.
+if test "${with_onig+set}" = set; then
+  withval="$with_onig"
+  PHP_ONIG=$withval
+else
+  
+  PHP_ONIG=no
+  
+
 fi
 
-echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
-cat >> confdefs.h <<EOF
-#define STACK_DIRECTION $ac_cv_c_stack_direction
+
+ext_output=$PHP_ONIG
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_MBSTRING" != "no"; then  
+  cat >> confdefs.h <<\EOF
+#define HAVE_MBSTRING 1
 EOF
 
-fi
 
-      echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:57115: checking for 8-bit clean memcmp" >&5
-if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
+  
+  PHP_MBSTRING_BASE_SOURCES="$PHP_MBSTRING_BASE_SOURCES mbstring.c php_unicode.c mb_gpc.c"
+
+
+  if test "$PHP_MBREGEX" != "no"; then
+    
+  if test "$PHP_MBREGEX" = "yes"; then
+    if test "$PHP_ONIG" = "yes" || test "$PHP_ONIG" = "no"; then
+                        if test "$PHP_MBREGEX_BACKTRACK" != "no"; then
+        cat >> confdefs.h <<\EOF
+#define USE_COMBINATION_EXPLOSION_CHECK 1
+EOF
+
+      fi
+
+      echo $ac_n "checking for variable length prototypes and stdarg.h""... $ac_c" 1>&6
+echo "configure:58667: checking for variable length prototypes and stdarg.h" >&5
+if eval "test \"`echo '$''{'php_cv_mbstring_stdarg'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_func_memcmp_clean=no
+  
+        if test "$cross_compiling" = yes; then
+  
+                    case $host_alias in
+          *netware*)
+          php_cv_mbstring_stdarg=yes
+          ;;
+          *)
+          php_cv_mbstring_stdarg=no
+          ;;
+          esac
+        
 else
   cat > conftest.$ac_ext <<EOF
-#line 57123 "configure"
+#line 58685 "configure"
 #include "confdefs.h"
 
-main()
-{
-  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
-  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
+#include <stdarg.h>
+int foo(int x, ...) {
+	va_list va;
+	va_start(va, x);
+	va_arg(va, int);
+	va_arg(va, char *);
+	va_arg(va, double);
+	return 0;
 }
-
+int main() { return foo(10, "", 3.14); }
+        
 EOF
-if { (eval echo configure:57133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:58700: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  ac_cv_func_memcmp_clean=yes
+  php_cv_mbstring_stdarg=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_func_memcmp_clean=no
+  php_cv_mbstring_stdarg=no
 fi
 rm -fr conftest*
 fi
 
+      
 fi
 
-echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
-test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
+echo "$ac_t""$php_cv_mbstring_stdarg" 1>&6
 
-      ac_safe=`echo "stdarg.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for stdarg.h""... $ac_c" 1>&6
-echo "configure:57152: checking for stdarg.h" >&5
+      for ac_hdr in stdlib.h string.h strings.h unistd.h sys/time.h sys/times.h stdarg.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:58721: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 57157 "configure"
+#line 58726 "configure"
 #include "confdefs.h"
-#include <stdarg.h>
+#include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:57162: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:58731: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -57174,322 +58743,860 @@ rm -f conftest*
 fi
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-        cat >> confdefs.h <<\EOF
-#define HAVE_STDARG_PROTOTYPES 1
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
 EOF
-
-      
+ 
 else
   echo "$ac_t""no" 1>&6
 fi
+done
 
-      cat >> confdefs.h <<\EOF
-#define PHP_ONIG_BUNDLED 1
-EOF
-
-      cat >> confdefs.h <<\EOF
-#define HAVE_ONIG 1
-EOF
- 
-      
-  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"
-
-      
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"
-
-      
-  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"
-
-      
-  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"
+      echo $ac_n "checking size of int""... $ac_c" 1>&6
+echo "configure:58758: checking size of int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58766 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_int=0
+fi
+rm -fr conftest*
+fi
 
-      
-  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"
+fi
+echo "$ac_t""$ac_cv_sizeof_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_INT $ac_cv_sizeof_int
+EOF
 
-      
-  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
-        oniguruma/regcomp.c
-        oniguruma/regerror.c
-        oniguruma/regexec.c
-        oniguruma/reggnu.c
-        oniguruma/regparse.c
-        oniguruma/regenc.c
-        oniguruma/regext.c
-        oniguruma/regsyntax.c
-        oniguruma/regtrav.c
-        oniguruma/regversion.c
-        oniguruma/st.c
-        oniguruma/enc/unicode.c
-        oniguruma/enc/ascii.c
-        oniguruma/enc/utf8.c
-        oniguruma/enc/euc_jp.c
-        oniguruma/enc/euc_tw.c
-        oniguruma/enc/euc_kr.c
-        oniguruma/enc/sjis.c
-        oniguruma/enc/iso8859_1.c
-        oniguruma/enc/iso8859_2.c
-        oniguruma/enc/iso8859_3.c
-        oniguruma/enc/iso8859_4.c
-        oniguruma/enc/iso8859_5.c
-        oniguruma/enc/iso8859_6.c
-        oniguruma/enc/iso8859_7.c
-        oniguruma/enc/iso8859_8.c
-        oniguruma/enc/iso8859_9.c
-        oniguruma/enc/iso8859_10.c
-        oniguruma/enc/iso8859_11.c
-        oniguruma/enc/iso8859_13.c
-        oniguruma/enc/iso8859_14.c
-        oniguruma/enc/iso8859_15.c
-        oniguruma/enc/iso8859_16.c
-        oniguruma/enc/koi8.c
-        oniguruma/enc/koi8_r.c
-        oniguruma/enc/big5.c
-        oniguruma/enc/utf16_be.c
-        oniguruma/enc/utf16_le.c
-        oniguruma/enc/utf32_be.c
-        oniguruma/enc/utf32_le.c
-      "
 
-      
-  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"
+      echo $ac_n "checking size of short""... $ac_c" 1>&6
+echo "configure:58798: checking size of short" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_short'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_short=2
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58806 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(short));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_short=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_short=0
+fi
+rm -fr conftest*
+fi
 
-    else
-                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
-        { echo "configure: error: oniguruma.h not found in $PHP_ONIG/include" 1>&2; exit 1; }
-      fi
-      
-  if test "$PHP_ONIG/include" != "/usr/include"; then
-    
-  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/include
-  else
-    
-    ep_dir="`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/include\"`"
-  fi
+fi
+echo "$ac_t""$ac_cv_sizeof_short" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_SHORT $ac_cv_sizeof_short
+EOF
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+      echo $ac_n "checking size of long""... $ac_c" 1>&6
+echo "configure:58838: checking size of long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58846 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long));
+  exit(0);
+}
+EOF
+if { (eval echo configure:58858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long=0
+fi
+rm -fr conftest*
+fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG $ac_cv_sizeof_long
+EOF
 
-      
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        -L$PHP_ONIG/$PHP_LIBDIR
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      echo $ac_n "checking for working const""... $ac_c" 1>&6
+echo "configure:58878: checking for working const" >&5
+if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58883 "configure"
+#include "confdefs.h"
 
+int main() {
 
-    fi
-   ;;
-  esac
+/* Ultrix mips cc rejects this.  */
+typedef int charset[2]; const charset x;
+/* SunOS 4.1.1 cc rejects this.  */
+char const *const *ccp;
+char **p;
+/* NEC SVR4.0.2 mips cc rejects this.  */
+struct point {int x, y;};
+static struct point const zero = {0,0};
+/* AIX XL C 1.02.0.0 rejects this.
+   It does not let you subtract one const X* pointer from another in an arm
+   of an if-expression whose if-part is not a constant expression */
+const char *g = "string";
+ccp = &g + (g ? g-g : 0);
+/* HPUX 7.0 cc rejects these. */
+++ccp;
+p = (char**) ccp;
+ccp = (char const *const *) p;
+{ /* SCO 3.2v4 cc rejects this.  */
+  char *t;
+  char const *s = 0 ? (char *) 0 : (char const *) 0;
 
+  *t++ = 0;
+}
+{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
+  int x[] = {25, 17};
+  const int *foo = &x[0];
+  ++foo;
+}
+{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
+  typedef const int *iptr;
+  iptr p = 0;
+  ++p;
+}
+{ /* AIX XL C 1.02.0.0 rejects this saying
+     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
+  struct s { int j; const int *ap[3]; };
+  struct s *b; b->j = 5;
+}
+{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
+  const int foo = 10;
+}
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+; return 0; }
+EOF
+if { (eval echo configure:58932: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_const=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_c_const=no
+fi
+rm -f conftest*
+fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+echo "$ac_t""$ac_cv_c_const" 1>&6
+if test $ac_cv_c_const = no; then
+  cat >> confdefs.h <<\EOF
+#define const 
+EOF
 
+fi
 
-      fi
-    
-  fi
+      echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
+echo "configure:58953: checking whether time.h and sys/time.h may both be included" >&5
+if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 58958 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/time.h>
+#include <time.h>
+int main() {
+struct tm *tp;
+; return 0; }
+EOF
+if { (eval echo configure:58967: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_header_time=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_time=no
+fi
+rm -f conftest*
+fi
 
-    ;;
-    esac
-  done
+echo "$ac_t""$ac_cv_header_time" 1>&6
+if test $ac_cv_header_time = yes; then
+  cat >> confdefs.h <<\EOF
+#define TIME_WITH_SYS_TIME 1
+EOF
 
-  echo $ac_n "checking for onig_init in -lonig""... $ac_c" 1>&6
-echo "configure:57392: checking for onig_init in -lonig" >&5
-ac_lib_var=`echo onig'_'onig_init | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+fi
+ 
+      # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
+# for constant arguments.  Useless!
+echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
+echo "configure:58990: checking for working alloca.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lonig  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 57400 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 58995 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char onig_init();
-
+#include <alloca.h>
 int main() {
-onig_init()
+char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:57411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:59002: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  ac_cv_header_alloca_h=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  ac_cv_header_alloca_h=no
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
+fi
+
+echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
+if test $ac_cv_header_alloca_h = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA_H 1
+EOF
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-        
 
-  if test "$ext_shared" = "yes"; then
-    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
-    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
-      
-  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
-  fi
+echo $ac_n "checking for alloca""... $ac_c" 1>&6
+echo "configure:59023: checking for alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59028 "configure"
+#include "confdefs.h"
 
-    
-      if test "$ext_shared" = "yes"; then
-        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+#ifdef __GNUC__
+# define alloca __builtin_alloca
+#else
+# ifdef _MSC_VER
+#  include <malloc.h>
+#  define alloca _alloca
+# else
+#  if HAVE_ALLOCA_H
+#   include <alloca.h>
+#  else
+#   ifdef _AIX
+ #pragma alloca
+#   else
+#    ifndef alloca /* predefined by HP cc +Olibcalls */
+char *alloca ();
+#    endif
+#   endif
+#  endif
+# endif
+#endif
 
+int main() {
+char *p = (char *) alloca(1);
+; return 0; }
+EOF
+if { (eval echo configure:59056: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  ac_cv_func_alloca_works=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_func_alloca_works=no
+fi
+rm -f conftest*
+fi
 
-      fi
-    
-  fi
+echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
+if test $ac_cv_func_alloca_works = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ALLOCA 1
+EOF
 
-    fi
-  else
-    
+fi
 
-  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
-    
-  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ONIG/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
-  fi
+if test $ac_cv_func_alloca_works = no; then
+  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
+  # that cause trouble.  Some versions do not even contain alloca or
+  # contain a buggy version.  If you still want to use their alloca,
+  # use ar to extract alloca.o from them instead of compiling alloca.c.
+  ALLOCA=alloca.${ac_objext}
+  cat >> confdefs.h <<\EOF
+#define C_ALLOCA 1
+EOF
 
-    
-      
-  
+
+echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
+echo "configure:59088: checking whether alloca needs Cray hooks" >&5
+if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59093 "configure"
+#include "confdefs.h"
+#if defined(CRAY) && ! defined(CRAY2)
+webecray
+#else
+wenotbecray
+#endif
+
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "webecray" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_os_cray=yes
+else
+  rm -rf conftest*
+  ac_cv_os_cray=no
+fi
+rm -f conftest*
+
+fi
+
+echo "$ac_t""$ac_cv_os_cray" 1>&6
+if test $ac_cv_os_cray = yes; then
+for ac_func in _getb67 GETB67 getb67; do
+  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:59118: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59123 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:59146: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<EOF
+#define CRAY_STACKSEG_END $ac_func
+EOF
+
+  break
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+done
+fi
+
+echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
+echo "configure:59173: checking stack direction for C alloca" >&5
+if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_c_stack_direction=0
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59181 "configure"
+#include "confdefs.h"
+find_stack_direction ()
+{
+  static char *addr = 0;
+  auto char dummy;
+  if (addr == 0)
+    {
+      addr = &dummy;
+      return find_stack_direction ();
+    }
+  else
+    return (&dummy > addr) ? 1 : -1;
+}
+main ()
+{
+  exit (find_stack_direction() < 0);
+}
+EOF
+if { (eval echo configure:59200: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_c_stack_direction=1
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_c_stack_direction=-1
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
+cat >> confdefs.h <<EOF
+#define STACK_DIRECTION $ac_cv_c_stack_direction
+EOF
+
+fi
+
+      echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
+echo "configure:59222: checking for 8-bit clean memcmp" >&5
+if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_func_memcmp_clean=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59230 "configure"
+#include "confdefs.h"
+
+main()
+{
+  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
+  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
+}
+
+EOF
+if { (eval echo configure:59240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_func_memcmp_clean=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_func_memcmp_clean=no
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
+test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"
+
+      ac_safe=`echo "stdarg.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for stdarg.h""... $ac_c" 1>&6
+echo "configure:59259: checking for stdarg.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 59264 "configure"
+#include "confdefs.h"
+#include <stdarg.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:59269: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+        cat >> confdefs.h <<\EOF
+#define HAVE_STDARG_PROTOTYPES 1
+EOF
+
+      
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+      cat >> confdefs.h <<\EOF
+#define PHP_ONIG_BUNDLED 1
+EOF
+
+      cat >> confdefs.h <<\EOF
+#define HAVE_ONIG 1
+EOF
+ 
+      
+  PHP_MBSTRING_CFLAGS="$PHP_MBSTRING_CFLAGS -DNOT_RUBY"
+
+      
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma"
+
+      
+  PHP_MBSTRING_EXTRA_BUILD_DIRS="$PHP_MBSTRING_EXTRA_BUILD_DIRS oniguruma/enc"
+
+      
+  PHP_MBSTRING_EXTRA_INCLUDES="$PHP_MBSTRING_EXTRA_INCLUDES oniguruma"
+
+      
+  PHP_MBSTRING_EXTRA_CONFIG_HEADERS="$PHP_MBSTRING_EXTRA_CONFIG_HEADERS oniguruma/config.h"
+
+      
+  PHP_MBSTRING_SOURCES="$PHP_MBSTRING_SOURCES 
+        oniguruma/regcomp.c
+        oniguruma/regerror.c
+        oniguruma/regexec.c
+        oniguruma/reggnu.c
+        oniguruma/regparse.c
+        oniguruma/regenc.c
+        oniguruma/regext.c
+        oniguruma/regsyntax.c
+        oniguruma/regtrav.c
+        oniguruma/regversion.c
+        oniguruma/st.c
+        oniguruma/enc/unicode.c
+        oniguruma/enc/ascii.c
+        oniguruma/enc/utf8.c
+        oniguruma/enc/euc_jp.c
+        oniguruma/enc/euc_tw.c
+        oniguruma/enc/euc_kr.c
+        oniguruma/enc/sjis.c
+        oniguruma/enc/iso8859_1.c
+        oniguruma/enc/iso8859_2.c
+        oniguruma/enc/iso8859_3.c
+        oniguruma/enc/iso8859_4.c
+        oniguruma/enc/iso8859_5.c
+        oniguruma/enc/iso8859_6.c
+        oniguruma/enc/iso8859_7.c
+        oniguruma/enc/iso8859_8.c
+        oniguruma/enc/iso8859_9.c
+        oniguruma/enc/iso8859_10.c
+        oniguruma/enc/iso8859_11.c
+        oniguruma/enc/iso8859_13.c
+        oniguruma/enc/iso8859_14.c
+        oniguruma/enc/iso8859_15.c
+        oniguruma/enc/iso8859_16.c
+        oniguruma/enc/koi8.c
+        oniguruma/enc/koi8_r.c
+        oniguruma/enc/big5.c
+        oniguruma/enc/utf16_be.c
+        oniguruma/enc/utf16_le.c
+        oniguruma/enc/utf32_be.c
+        oniguruma/enc/utf32_le.c
+      "
+
+      
+  PHP_MBSTRING_INSTALL_HEADERS="$PHP_MBSTRING_INSTALL_HEADERS oniguruma/oniguruma.h"
+
+    else
+                        if test ! -f "$PHP_ONIG/include/oniguruma.h"; then
+        { echo "configure: error: oniguruma.h not found in $PHP_ONIG/include" 1>&2; exit 1; }
+      fi
+      
+  if test "$PHP_ONIG/include" != "/usr/include"; then
+    
+  if test -z "$PHP_ONIG/include" || echo "$PHP_ONIG/include" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/include
+  else
+    
+    ep_dir="`echo $PHP_ONIG/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+      
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+        -L$PHP_ONIG/$PHP_LIBDIR
+      "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for onig_init in -lonig""... $ac_c" 1>&6
+echo "configure:59499: checking for onig_init in -lonig" >&5
+ac_lib_var=`echo onig'_'onig_init | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lonig  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 59507 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char onig_init();
+
+int main() {
+onig_init()
+; return 0; }
+EOF
+if { (eval echo configure:59518: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+        
+
+  if test "$ext_shared" = "yes"; then
+    MBSTRING_SHARED_LIBADD="-lonig $MBSTRING_SHARED_LIBADD"
+    if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
+      
+  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        MBSTRING_SHARED_LIBADD="-L$ai_p $MBSTRING_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && MBSTRING_SHARED_LIBADD="$ld_runpath_switch$ai_p $MBSTRING_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PHP_ONIG/$PHP_LIBDIR"; then
+    
+  if test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ONIG/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ONIG/$PHP_LIBDIR" || echo "$PHP_ONIG/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ONIG/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ONIG/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ONIG/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
@@ -57633,9 +59740,9 @@ fi
   done
 
       echo $ac_n "checking if oniguruma has an invalid entry for KOI8 encoding""... $ac_c" 1>&6
-echo "configure:57637: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
+echo "configure:59744: checking if oniguruma has an invalid entry for KOI8 encoding" >&5
       cat > conftest.$ac_ext <<EOF
-#line 57639 "configure"
+#line 59746 "configure"
 #include "confdefs.h"
 
 #include <oniguruma.h>
@@ -57646,7 +59753,7 @@ return (int)(ONIG_ENCODING_KOI8 + 1);
       
 ; return 0; }
 EOF
-if { (eval echo configure:57650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:59757: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   
         echo "$ac_t""no" 1>&6
@@ -57944,7 +60051,7 @@ EOF
   done
 
   echo $ac_n "checking for mbfl_buffer_converter_new in -lmbfl""... $ac_c" 1>&6
-echo "configure:57948: checking for mbfl_buffer_converter_new in -lmbfl" >&5
+echo "configure:60055: checking for mbfl_buffer_converter_new in -lmbfl" >&5
 ac_lib_var=`echo mbfl'_'mbfl_buffer_converter_new | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -57952,7 +60059,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lmbfl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 57956 "configure"
+#line 60063 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -57963,7 +60070,7 @@ int main() {
 mbfl_buffer_converter_new()
 ; return 0; }
 EOF
-if { (eval echo configure:57967: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:60074: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -58600,7 +60707,7 @@ fi
 php_with_mcrypt=no
 
 echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
-echo "configure:58604: checking for mcrypt support" >&5
+echo "configure:60711: checking for mcrypt support" >&5
 # Check whether --with-mcrypt or --without-mcrypt was given.
 if test "${with_mcrypt+set}" = set; then
   withval="$with_mcrypt"
@@ -58653,9 +60760,9 @@ if test "$PHP_MCRYPT" != "no"; then
   old_CPPFLAGS=$CPPFLAGS
   CPPFLAGS=-I$MCRYPT_DIR/include
   echo $ac_n "checking for libmcrypt version""... $ac_c" 1>&6
-echo "configure:58657: checking for libmcrypt version" >&5
+echo "configure:60764: checking for libmcrypt version" >&5
   cat > conftest.$ac_ext <<EOF
-#line 58659 "configure"
+#line 60766 "configure"
 #include "confdefs.h"
 
 #include <mcrypt.h>
@@ -58779,7 +60886,7 @@ rm -f conftest*
   done
 
   echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
-echo "configure:58783: checking for mcrypt_module_open in -lmcrypt" >&5
+echo "configure:60890: checking for mcrypt_module_open in -lmcrypt" >&5
 ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -58787,7 +60894,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lmcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 58791 "configure"
+#line 60898 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -58798,7 +60905,7 @@ int main() {
 mcrypt_module_open()
 ; return 0; }
 EOF
-if { (eval echo configure:58802: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:60909: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -58951,7 +61058,7 @@ else
   done
 
   echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
-echo "configure:58955: checking for mcrypt_module_open in -lmcrypt" >&5
+echo "configure:61062: checking for mcrypt_module_open in -lmcrypt" >&5
 ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -58959,7 +61066,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lmcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 58963 "configure"
+#line 61070 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -58970,7 +61077,7 @@ int main() {
 mcrypt_module_open()
 ; return 0; }
 EOF
-if { (eval echo configure:58974: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:61081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -59443,7 +61550,7 @@ fi
 php_with_mssql=no
 
 echo $ac_n "checking for MSSQL support via FreeTDS""... $ac_c" 1>&6
-echo "configure:59447: checking for MSSQL support via FreeTDS" >&5
+echo "configure:61554: checking for MSSQL support via FreeTDS" >&5
 # Check whether --with-mssql or --without-mssql was given.
 if test "${with_mssql+set}" = set; then
   withval="$with_mssql"
@@ -59941,7 +62048,7 @@ EOF
   fi
 
   echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:59945: checking for dnet_addr in -ldnet_stub" >&5
+echo "configure:62052: checking for dnet_addr in -ldnet_stub" >&5
 ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -59949,7 +62056,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 59953 "configure"
+#line 62060 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -59960,7 +62067,7 @@ int main() {
 dnet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:59964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:62071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -60104,7 +62211,7 @@ fi
 php_with_mysql=no
 
 echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
-echo "configure:60108: checking for MySQL support" >&5
+echo "configure:62215: checking for MySQL support" >&5
 # Check whether --with-mysql or --without-mysql was given.
 if test "${with_mysql+set}" = set; then
   withval="$with_mysql"
@@ -60148,7 +62255,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_with_mysql_sock=no
 
 echo $ac_n "checking for specified location of the MySQL UNIX socket""... $ac_c" 1>&6
-echo "configure:60152: checking for specified location of the MySQL UNIX socket" >&5
+echo "configure:62259: checking for specified location of the MySQL UNIX socket" >&5
 # Check whether --with-mysql-sock or --without-mysql-sock was given.
 if test "${with_mysql_sock+set}" = set; then
   withval="$with_mysql_sock"
@@ -60172,7 +62279,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:60176: checking for the location of libz" >&5
+echo "configure:62283: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -60346,7 +62453,7 @@ Note that the MySQL client library is no
   done
 
   echo $ac_n "checking for mysql_close in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:60350: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
+echo "configure:62457: checking for mysql_close in -l$MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_close | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -60354,7 +62461,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 60358 "configure"
+#line 62465 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -60365,7 +62472,7 @@ int main() {
 mysql_close()
 ; return 0; }
 EOF
-if { (eval echo configure:60369: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:62476: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -60588,7 +62695,7 @@ else
   done
 
   echo $ac_n "checking for mysql_error in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:60592: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
+echo "configure:62699: checking for mysql_error in -l$MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_error | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -60596,7 +62703,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 60600 "configure"
+#line 62707 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -60607,7 +62714,7 @@ int main() {
 mysql_error()
 ; return 0; }
 EOF
-if { (eval echo configure:60611: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:62718: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -60762,7 +62869,7 @@ fi
   done
 
   echo $ac_n "checking for mysql_errno in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:60766: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
+echo "configure:62873: checking for mysql_errno in -l$MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $MYSQL_LIBNAME'_'mysql_errno | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -60770,7 +62877,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 60774 "configure"
+#line 62881 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -60781,7 +62888,7 @@ int main() {
 mysql_errno()
 ; return 0; }
 EOF
-if { (eval echo configure:60785: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:62892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -60975,7 +63082,7 @@ fi
 
 if test "$PHP_MYSQL" != "no"; then
   echo $ac_n "checking for MySQL UNIX socket location""... $ac_c" 1>&6
-echo "configure:60979: checking for MySQL UNIX socket location" >&5
+echo "configure:63086: checking for MySQL UNIX socket location" >&5
   if test "$PHP_MYSQL_SOCK" != "no" && test "$PHP_MYSQL_SOCK" != "yes"; then
     MYSQL_SOCK=$PHP_MYSQL_SOCK
     cat >> confdefs.h <<EOF
@@ -61348,7 +63455,7 @@ fi
 php_with_mysqli=no
 
 echo $ac_n "checking for MySQLi support""... $ac_c" 1>&6
-echo "configure:61352: checking for MySQLi support" >&5
+echo "configure:63459: checking for MySQLi support" >&5
 # Check whether --with-mysqli or --without-mysqli was given.
 if test "${with_mysqli+set}" = set; then
   withval="$with_mysqli"
@@ -61392,7 +63499,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_embedded_mysqli=no
 
 echo $ac_n "checking whether to enable embedded MySQLi support""... $ac_c" 1>&6
-echo "configure:61396: checking whether to enable embedded MySQLi support" >&5
+echo "configure:63503: checking whether to enable embedded MySQLi support" >&5
 # Check whether --enable-embedded_mysqli or --disable-embedded_mysqli was given.
 if test "${enable_embedded_mysqli+set}" = set; then
   enableval="$enable_embedded_mysqli"
@@ -61543,7 +63650,7 @@ EOF
   done
 
   echo $ac_n "checking for mysql_set_server_option in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61547: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
+echo "configure:63654: checking for mysql_set_server_option in -l$MYSQL_LIB_NAME" >&5
 ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_server_option | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -61551,7 +63658,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIB_NAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 61555 "configure"
+#line 63662 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -61562,7 +63669,7 @@ int main() {
 mysql_set_server_option()
 ; return 0; }
 EOF
-if { (eval echo configure:61566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:63673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -61810,7 +63917,7 @@ EOF
   done
 
   echo $ac_n "checking for mysql_set_character_set in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61814: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
+echo "configure:63921: checking for mysql_set_character_set in -l$MYSQL_LIB_NAME" >&5
 ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_set_character_set | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -61818,7 +63925,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIB_NAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 61822 "configure"
+#line 63929 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -61829,7 +63936,7 @@ int main() {
 mysql_set_character_set()
 ; return 0; }
 EOF
-if { (eval echo configure:61833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:63940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -61973,7 +64080,7 @@ fi
   done
 
   echo $ac_n "checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME""... $ac_c" 1>&6
-echo "configure:61977: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
+echo "configure:64084: checking for mysql_stmt_next_result in -l$MYSQL_LIB_NAME" >&5
 ac_lib_var=`echo $MYSQL_LIB_NAME'_'mysql_stmt_next_result | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -61981,7 +64088,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIB_NAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 61985 "configure"
+#line 64092 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -61992,7 +64099,7 @@ int main() {
 mysql_stmt_next_result()
 ; return 0; }
 EOF
-if { (eval echo configure:61996: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:64103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -62395,7 +64502,7 @@ fi
 php_with_oci8=no
 
 echo $ac_n "checking for Oracle Database OCI8 support""... $ac_c" 1>&6
-echo "configure:62399: checking for Oracle Database OCI8 support" >&5
+echo "configure:64506: checking for Oracle Database OCI8 support" >&5
 # Check whether --with-oci8 or --without-oci8 was given.
 if test "${with_oci8+set}" = set; then
   withval="$with_oci8"
@@ -62443,7 +64550,7 @@ if test "$PHP_OCI8" != "no"; then
 
   
   echo $ac_n "checking PHP version""... $ac_c" 1>&6
-echo "configure:62447: checking PHP version" >&5
+echo "configure:64554: checking PHP version" >&5
 
   tmp_version=$PHP_VERSION
   if test -z "$tmp_version"; then
@@ -62475,7 +64582,7 @@ echo "configure:62447: checking PHP vers
 
   
   echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:62479: checking size of long int" >&5
+echo "configure:64586: checking size of long int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -62483,9 +64590,10 @@ else
   ac_cv_sizeof_long_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 62487 "configure"
+#line 64594 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -62494,7 +64602,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:62498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:64606: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_int=`cat conftestval`
 else
@@ -62514,7 +64622,7 @@ EOF
 
 
   echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
-echo "configure:62518: checking checking if we're on a 64-bit platform" >&5
+echo "configure:64626: checking checking if we're on a 64-bit platform" >&5
   if test "$ac_cv_sizeof_long_int" = "4"; then
     echo "$ac_t""no" 1>&6
     PHP_OCI8_OH_LIBDIR=lib32 
@@ -62558,7 +64666,7 @@ echo "configure:62518: checking checking
   if test "$PHP_OCI8_INSTANT_CLIENT" = "no"; then
             
     echo $ac_n "checking Oracle ORACLE_HOME install directory""... $ac_c" 1>&6
-echo "configure:62562: checking Oracle ORACLE_HOME install directory" >&5
+echo "configure:64670: checking Oracle ORACLE_HOME install directory" >&5
 
     if test "$PHP_OCI8" = "yes"; then
       OCI8_DIR=$ORACLE_HOME
@@ -62569,7 +64677,7 @@ echo "configure:62562: checking Oracle O
 
     
   echo $ac_n "checking ORACLE_HOME library validity""... $ac_c" 1>&6
-echo "configure:62573: checking ORACLE_HOME library validity" >&5
+echo "configure:64681: checking ORACLE_HOME library validity" >&5
   if test ! -d "$OCI8_DIR"; then
     { echo "configure: error: ${OCI8_DIR} is not a directory" 1>&2; exit 1; }
   fi
@@ -62910,7 +65018,7 @@ echo "configure:62573: checking ORACLE_H
 
     
   echo $ac_n "checking Oracle library version compatibility""... $ac_c" 1>&6
-echo "configure:62914: checking Oracle library version compatibility" >&5
+echo "configure:65022: checking Oracle library version compatibility" >&5
   OCI8_LCS_BASE=$OCI8_DIR/$OCI8_LIB_DIR/libclntsh.$SHLIB_SUFFIX_NAME
   OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | tail -1`  # Oracle 10g, 11g etc
   if test -s "$OCI8_DIR/orainst/unix.rgs"; then
@@ -63040,7 +65148,7 @@ echo "configure:62914: checking Oracle l
   done
 
   echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:63044: checking for OCIEnvNlsCreate in -lclntsh" >&5
+echo "configure:65152: checking for OCIEnvNlsCreate in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -63048,7 +65156,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 63052 "configure"
+#line 65160 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -63059,7 +65167,7 @@ int main() {
 OCIEnvNlsCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:63063: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:65171: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -63492,7 +65600,7 @@ EOF
   else
             
     echo $ac_n "checking Oracle Instant Client directory""... $ac_c" 1>&6
-echo "configure:63496: checking Oracle Instant Client directory" >&5
+echo "configure:65604: checking Oracle Instant Client directory" >&5
 
     if test "$PHP_OCI8_INSTANT_CLIENT" = "yes"; then
                                     PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client${PHP_OCI8_IC_LIBDIR_SUFFIX}/lib/libclntsh.* 2> /dev/null | tail -1 | $PHP_OCI8_SED -e 's#/libclntsh[^/]*##'`
@@ -63505,7 +65613,7 @@ echo "configure:63496: checking Oracle I
     OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT
 
     echo $ac_n "checking Oracle Instant Client SDK header directory""... $ac_c" 1>&6
-echo "configure:63509: checking Oracle Instant Client SDK header directory" >&5
+echo "configure:65617: checking Oracle Instant Client SDK header directory" >&5
 
         OCISDKRPMINC=`echo "$PHP_OCI8_INSTANT_CLIENT" | $PHP_OCI8_SED -e 's!^/usr/lib/oracle/\(.*\)/client\('${PHP_OCI8_IC_LIBDIR_SUFFIX}'\)*/lib/*$!/usr/include/oracle/\1/client\2!'`
 
@@ -63714,7 +65822,7 @@ echo "configure:63509: checking Oracle I
 
     
   echo $ac_n "checking Oracle Instant Client library version compatibility""... $ac_c" 1>&6
-echo "configure:63718: checking Oracle Instant Client library version compatibility" >&5
+echo "configure:65826: checking Oracle Instant Client library version compatibility" >&5
   OCI8_LCS_BASE=$PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME
   OCI8_LCS=`ls $OCI8_LCS_BASE.*.1 2> /dev/null | tail -1`  # Oracle 10g, 11g etc
   OCI8_NNZ=`ls $PHP_OCI8_INSTANT_CLIENT/libnnz*.$SHLIB_SUFFIX_NAME 2> /dev/null | tail -1`
@@ -64175,7 +66283,7 @@ esac
 
   if test "$PHP_ADABAS" != "no"; then
     echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
-echo "configure:64179: checking for Adabas support" >&5
+echo "configure:66287: checking for Adabas support" >&5
     if test "$PHP_ADABAS" = "yes"; then
       PHP_ADABAS=/usr/local
     fi
@@ -64378,7 +66486,7 @@ esac
 
   if test "$PHP_SAPDB" != "no"; then
     echo $ac_n "checking for SAP DB support""... $ac_c" 1>&6
-echo "configure:64382: checking for SAP DB support" >&5
+echo "configure:66490: checking for SAP DB support" >&5
     if test "$PHP_SAPDB" = "yes"; then
       PHP_SAPDB=/usr/local
     fi
@@ -64511,7 +66619,7 @@ esac
 
   if test "$PHP_SOLID" != "no"; then
     echo $ac_n "checking for Solid support""... $ac_c" 1>&6
-echo "configure:64515: checking for Solid support" >&5
+echo "configure:66623: checking for Solid support" >&5
     if test "$PHP_SOLID" = "yes"; then
       PHP_SOLID=/usr/local/solid
     fi
@@ -64538,7 +66646,7 @@ EOF
     echo "$ac_t""$ext_output" 1>&6
     
   echo $ac_n "checking Solid library file""... $ac_c" 1>&6
-echo "configure:64542: checking Solid library file" >&5  
+echo "configure:66650: checking Solid library file" >&5  
   ac_solid_uname_r=`uname -r 2>/dev/null`
   ac_solid_uname_s=`uname -s 2>/dev/null`
   case $ac_solid_uname_s in
@@ -64659,7 +66767,7 @@ esac
 
   if test "$PHP_IBM_DB2" != "no"; then
     echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
-echo "configure:64663: checking for IBM DB2 support" >&5
+echo "configure:66771: checking for IBM DB2 support" >&5
     if test "$PHP_IBM_DB2" = "yes"; then
       ODBC_INCDIR=/home/db2inst1/sqllib/include
       ODBC_LIBDIR=/home/db2inst1/sqllib/lib
@@ -64690,7 +66798,7 @@ fi
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 64694 "configure"
+#line 66802 "configure"
 #include "confdefs.h"
 
     
@@ -64701,7 +66809,7 @@ else
     }
   
 EOF
-if { (eval echo configure:64705: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:66813: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -64782,7 +66890,7 @@ esac
 
   if test "$PHP_ODBCROUTER" != "no"; then
     echo $ac_n "checking for ODBCRouter.com support""... $ac_c" 1>&6
-echo "configure:64786: checking for ODBCRouter.com support" >&5
+echo "configure:66894: checking for ODBCRouter.com support" >&5
     if test "$PHP_ODBCROUTER" = "yes"; then
       PHP_ODBCROUTER=/usr
     fi
@@ -64846,7 +66954,7 @@ esac
 
   if test "$PHP_EMPRESS" != "no"; then
     echo $ac_n "checking for Empress support""... $ac_c" 1>&6
-echo "configure:64850: checking for Empress support" >&5
+echo "configure:66958: checking for Empress support" >&5
     if test "$PHP_EMPRESS" = "yes"; then
       ODBC_INCDIR=$EMPRESSPATH/include/odbc
       ODBC_LIBDIR=$EMPRESSPATH/shlib
@@ -64864,7 +66972,7 @@ EOF
     echo "$ac_t""$ext_output" 1>&6
     
   echo $ac_n "checking Empress library file""... $ac_c" 1>&6
-echo "configure:64868: checking Empress library file" >&5
+echo "configure:66976: checking Empress library file" >&5
   ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
   if test ! -f $ODBC_LIBS; then
     ODBC_LIBS=`echo $ODBC_LIBDIR/libempodbccl.so | cut -d' ' -f1`
@@ -64920,7 +67028,7 @@ esac
 
   if test "$PHP_EMPRESS_BCS" != "no"; then
     echo $ac_n "checking for Empress local access support""... $ac_c" 1>&6
-echo "configure:64924: checking for Empress local access support" >&5
+echo "configure:67032: checking for Empress local access support" >&5
     if test "$PHP_EMPRESS_BCS" = "yes"; then
       ODBC_INCDIR=$EMPRESSPATH/include/odbc
       ODBC_LIBDIR=$EMPRESSPATH/shlib
@@ -64954,7 +67062,7 @@ EOF
     echo "$ac_t""$ext_output" 1>&6
     
   echo $ac_n "checking Empress local access library file""... $ac_c" 1>&6
-echo "configure:64958: checking Empress local access library file" >&5
+echo "configure:67066: checking Empress local access library file" >&5
   ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
   if test ! -f $ODBCBCS_LIBS; then
     ODBCBCS_LIBS=`echo $ODBC_LIBDIR/libempodbcbcs.a | cut -d' ' -f1`
@@ -65010,7 +67118,7 @@ esac
   
   if test "$PHP_BIRDSTEP" != "no"; then
     echo $ac_n "checking for Birdstep support""... $ac_c" 1>&6
-echo "configure:65014: checking for Birdstep support" >&5
+echo "configure:67122: checking for Birdstep support" >&5
     if test "$PHP_BIRDSTEP" = "yes"; then
         ODBC_INCDIR=/usr/local/birdstep/include
         ODBC_LIBDIR=/usr/local/birdstep/lib
@@ -65122,7 +67230,7 @@ esac
 
   if test "$PHP_CUSTOM_ODBC" != "no"; then
     echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
-echo "configure:65126: checking for a custom ODBC support" >&5
+echo "configure:67234: checking for a custom ODBC support" >&5
     if test "$PHP_CUSTOM_ODBC" = "yes"; then
       PHP_CUSTOM_ODBC=/usr/local
     fi
@@ -65186,7 +67294,7 @@ esac
 
   if test "$PHP_IODBC" != "no"; then
     echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
-echo "configure:65190: checking for iODBC support" >&5
+echo "configure:67298: checking for iODBC support" >&5
     if test "$PHP_IODBC" = "yes"; then
       PHP_IODBC=/usr/local
     fi
@@ -65332,7 +67440,7 @@ esac
 
   if test "$PHP_ESOOB" != "no"; then
     echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
-echo "configure:65336: checking for Easysoft ODBC-ODBC Bridge support" >&5
+echo "configure:67444: checking for Easysoft ODBC-ODBC Bridge support" >&5
     if test "$PHP_ESOOB" = "yes"; then
       PHP_ESOOB=/usr/local/easysoft/oob/client
     fi
@@ -65396,7 +67504,7 @@ esac
 
   if test "$PHP_UNIXODBC" != "no"; then
     echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
-echo "configure:65400: checking for unixODBC support" >&5
+echo "configure:67508: checking for unixODBC support" >&5
     if test "$PHP_UNIXODBC" = "yes"; then
       PHP_UNIXODBC=/usr/local
     fi
@@ -65465,7 +67573,7 @@ esac
 
   if test "$PHP_DBMAKER" != "no"; then
     echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
-echo "configure:65469: checking for DBMaker support" >&5
+echo "configure:67577: checking for DBMaker support" >&5
     if test "$PHP_DBMAKER" = "yes"; then
       # find dbmaker's home directory
       DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | $AWK -F: '{print $6}'`
@@ -66027,7 +68135,7 @@ fi
 php_enable_pcntl=no
 
 echo $ac_n "checking whether to enable pcntl support""... $ac_c" 1>&6
-echo "configure:66031: checking whether to enable pcntl support" >&5
+echo "configure:68139: checking whether to enable pcntl support" >&5
 # Check whether --enable-pcntl or --disable-pcntl was given.
 if test "${enable_pcntl+set}" = set; then
   enableval="$enable_pcntl"
@@ -66071,12 +68179,12 @@ if test "$PHP_PCNTL" != "no"; then
   for ac_func in fork
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:66075: checking for $ac_func" >&5
+echo "configure:68183: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 66080 "configure"
+#line 68188 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -66099,7 +68207,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:66103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:68211: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -66130,12 +68238,12 @@ done
   for ac_func in waitpid
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:66134: checking for $ac_func" >&5
+echo "configure:68242: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 66139 "configure"
+#line 68247 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -66158,7 +68266,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:66162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:68270: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -66189,12 +68297,12 @@ done
   for ac_func in sigaction
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:66193: checking for $ac_func" >&5
+echo "configure:68301: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 66198 "configure"
+#line 68306 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -66217,7 +68325,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:66221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:68329: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -66248,12 +68356,12 @@ done
   for ac_func in getpriority setpriority wait3 sigprocmask sigwaitinfo sigtimedwait
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:66252: checking for $ac_func" >&5
+echo "configure:68360: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 66257 "configure"
+#line 68365 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -66276,7 +68384,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:66280: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:68388: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -66601,7 +68709,7 @@ fi
 php_enable_pdo=yes
 
 echo $ac_n "checking whether to enable PDO support""... $ac_c" 1>&6
-echo "configure:66605: checking whether to enable PDO support" >&5
+echo "configure:68713: checking whether to enable PDO support" >&5
 # Check whether --enable-pdo or --disable-pdo was given.
 if test "${enable_pdo+set}" = set; then
   enableval="$enable_pdo"
@@ -67035,7 +69143,7 @@ fi
 php_with_pdo_dblib=no
 
 echo $ac_n "checking for PDO_DBLIB support via FreeTDS""... $ac_c" 1>&6
-echo "configure:67039: checking for PDO_DBLIB support via FreeTDS" >&5
+echo "configure:69147: checking for PDO_DBLIB support via FreeTDS" >&5
 # Check whether --with-pdo-dblib or --without-pdo-dblib was given.
 if test "${with_pdo_dblib+set}" = set; then
   withval="$with_pdo_dblib"
@@ -67252,13 +69360,13 @@ if test "$PHP_PDO_DBLIB" != "no"; then
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:67256: checking for PDO includes" >&5
+echo "configure:69364: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:67262: checking for PDO includes" >&5
+echo "configure:69370: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -67572,7 +69680,7 @@ EOF
   fi
 
   echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:67576: checking for dnet_addr in -ldnet_stub" >&5
+echo "configure:69684: checking for dnet_addr in -ldnet_stub" >&5
 ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -67580,7 +69688,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 67584 "configure"
+#line 69692 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -67591,7 +69699,7 @@ int main() {
 dnet_addr()
 ; return 0; }
 EOF
-if { (eval echo configure:67595: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:69703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -67752,7 +69860,7 @@ fi
 php_with_pdo_firebird=no
 
 echo $ac_n "checking for Firebird support for PDO""... $ac_c" 1>&6
-echo "configure:67756: checking for Firebird support for PDO" >&5
+echo "configure:69864: checking for Firebird support for PDO" >&5
 # Check whether --with-pdo-firebird or --without-pdo-firebird was given.
 if test "${with_pdo_firebird+set}" = set; then
   withval="$with_pdo_firebird"
@@ -67906,7 +70014,7 @@ if test "$PHP_PDO_FIREBIRD" != "no"; the
   done
 
   echo $ac_n "checking for isc_detach_database in -lfbclient""... $ac_c" 1>&6
-echo "configure:67910: checking for isc_detach_database in -lfbclient" >&5
+echo "configure:70018: checking for isc_detach_database in -lfbclient" >&5
 ac_lib_var=`echo fbclient'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -67914,7 +70022,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lfbclient  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 67918 "configure"
+#line 70026 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -67925,7 +70033,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:67929: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:70037: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -68052,7 +70160,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lgds""... $ac_c" 1>&6
-echo "configure:68056: checking for isc_detach_database in -lgds" >&5
+echo "configure:70164: checking for isc_detach_database in -lgds" >&5
 ac_lib_var=`echo gds'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -68060,7 +70168,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lgds  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 68064 "configure"
+#line 70172 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -68071,7 +70179,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:68075: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:70183: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -68198,7 +70306,7 @@ else
   done
 
   echo $ac_n "checking for isc_detach_database in -lib_util""... $ac_c" 1>&6
-echo "configure:68202: checking for isc_detach_database in -lib_util" >&5
+echo "configure:70310: checking for isc_detach_database in -lib_util" >&5
 ac_lib_var=`echo ib_util'_'isc_detach_database | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -68206,7 +70314,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lib_util  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 68210 "configure"
+#line 70318 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -68217,7 +70325,7 @@ int main() {
 isc_detach_database()
 ; return 0; }
 EOF
-if { (eval echo configure:68221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:70329: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -68262,13 +70370,13 @@ fi
  
   
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:68266: checking for PDO includes" >&5
+echo "configure:70374: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:68272: checking for PDO includes" >&5
+echo "configure:70380: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -68740,7 +70848,7 @@ fi
 php_with_pdo_mysql=no
 
 echo $ac_n "checking for MySQL support for PDO""... $ac_c" 1>&6
-echo "configure:68744: checking for MySQL support for PDO" >&5
+echo "configure:70852: checking for MySQL support for PDO" >&5
 # Check whether --with-pdo-mysql or --without-pdo-mysql was given.
 if test "${with_pdo_mysql+set}" = set; then
   withval="$with_pdo_mysql"
@@ -68785,7 +70893,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:68789: checking for the location of libz" >&5
+echo "configure:70897: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -68849,14 +70957,14 @@ EOF
 
 
     echo $ac_n "checking for mysql_config""... $ac_c" 1>&6
-echo "configure:68853: checking for mysql_config" >&5
+echo "configure:70961: checking for mysql_config" >&5
     if test -n "$PDO_MYSQL_CONFIG"; then
       echo "$ac_t""$PDO_MYSQL_CONFIG" 1>&6
       if test "x$SED" = "x"; then
         # Extract the first word of "sed", so it can be a program name with args.
 set dummy sed; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:68860: checking for $ac_word" >&5
+echo "configure:70968: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_SED'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -68900,7 +71008,7 @@ fi
     elif test -n "$PDO_MYSQL_DIR"; then
       echo "$ac_t""not found" 1>&6
       echo $ac_n "checking for mysql install under $PDO_MYSQL_DIR""... $ac_c" 1>&6
-echo "configure:68904: checking for mysql install under $PDO_MYSQL_DIR" >&5
+echo "configure:71012: checking for mysql install under $PDO_MYSQL_DIR" >&5
       if test -r $PDO_MYSQL_DIR/include/mysql; then
         PDO_MYSQL_INC_DIR=$PDO_MYSQL_DIR/include/mysql
       else
@@ -69054,7 +71162,7 @@ echo "configure:68904: checking for mysq
   done
 
   echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:69058: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+echo "configure:71166: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -69062,7 +71170,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 69066 "configure"
+#line 71174 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -69073,7 +71181,7 @@ int main() {
 mysql_query()
 ; return 0; }
 EOF
-if { (eval echo configure:69077: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:71185: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -69426,7 +71534,7 @@ else
   done
 
   echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:69430: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+echo "configure:71538: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -69434,7 +71542,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 69438 "configure"
+#line 71546 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -69445,7 +71553,7 @@ int main() {
 mysql_query()
 ; return 0; }
 EOF
-if { (eval echo configure:69449: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:71557: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -69600,7 +71708,7 @@ fi
   done
 
   echo $ac_n "checking for mysql_query in -l$PDO_MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:69604: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
+echo "configure:71712: checking for mysql_query in -l$PDO_MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $PDO_MYSQL_LIBNAME'_'mysql_query | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -69608,7 +71716,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$PDO_MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 69612 "configure"
+#line 71720 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -69619,7 +71727,7 @@ int main() {
 mysql_query()
 ; return 0; }
 EOF
-if { (eval echo configure:69623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:71731: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -69793,12 +71901,12 @@ fi
     for ac_func in mysql_commit mysql_stmt_prepare mysql_next_result mysql_sqlstate
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:69797: checking for $ac_func" >&5
+echo "configure:71905: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 69802 "configure"
+#line 71910 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -69821,7 +71929,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:69825: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:71933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -69851,13 +71959,13 @@ done
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:69855: checking for PDO includes" >&5
+echo "configure:71963: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:69861: checking for PDO includes" >&5
+echo "configure:71969: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -70242,7 +72350,7 @@ SUPPORTED_LIB_VERS="9.0 10.1 11.1"  # Th
 php_with_pdo_oci=no
 
 echo $ac_n "checking Oracle OCI support for PDO""... $ac_c" 1>&6
-echo "configure:70246: checking Oracle OCI support for PDO" >&5
+echo "configure:72354: checking Oracle OCI support for PDO" >&5
 # Check whether --with-pdo-oci or --without-pdo-oci was given.
 if test "${with_pdo_oci+set}" = set; then
   withval="$with_pdo_oci"
@@ -70289,7 +72397,7 @@ if test "$PHP_PDO_OCI" != "no"; then
   fi
 
   echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
-echo "configure:70293: checking Oracle Install-Dir" >&5
+echo "configure:72401: checking Oracle Install-Dir" >&5
   if test "$PHP_PDO_OCI" = "yes" || test -z "$PHP_PDO_OCI"; then
     PDO_OCI_DIR=$ORACLE_HOME
   else
@@ -70298,7 +72406,7 @@ echo "configure:70293: checking Oracle I
   echo "$ac_t""$PHP_PDO_OCI" 1>&6
 
   echo $ac_n "checking if that is sane""... $ac_c" 1>&6
-echo "configure:70302: checking if that is sane" >&5
+echo "configure:72410: checking if that is sane" >&5
   if test -z "$PDO_OCI_DIR"; then
     { echo "configure: error: 
 You need to tell me where to find your Oracle Instant Client SDK, or set ORACLE_HOME.
@@ -70309,7 +72417,7 @@ You need to tell me where to find your O
 
   if test "instantclient" = "`echo $PDO_OCI_DIR | cut -d, -f1`" ; then
     echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:70313: checking size of long int" >&5
+echo "configure:72421: checking size of long int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -70317,9 +72425,10 @@ else
   ac_cv_sizeof_long_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 70321 "configure"
+#line 72429 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -70328,7 +72437,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:70332: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:72441: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_int=`cat conftestval`
 else
@@ -70362,7 +72471,7 @@ EOF
       fi
     fi
     echo $ac_n "checking for oci.h""... $ac_c" 1>&6
-echo "configure:70366: checking for oci.h" >&5
+echo "configure:72475: checking for oci.h" >&5
     if test -f $PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR/oci.h ; then
       
   if test "$PDO_OCI_IC_PREFIX/include/oracle/$PDO_OCI_IC_VERS/$PDO_OCI_CLIENT_DIR" != "/usr/include"; then
@@ -70511,7 +72620,7 @@ echo "configure:70366: checking for oci.
   else
     
   echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:70515: checking size of long int" >&5
+echo "configure:72624: checking size of long int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -70519,9 +72628,10 @@ else
   ac_cv_sizeof_long_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 70523 "configure"
+#line 72632 "configure"
 #include "confdefs.h"
 #include <stdio.h>
+#include <sys/types.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
@@ -70530,7 +72640,7 @@ main()
   exit(0);
 }
 EOF
-if { (eval echo configure:70534: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:72644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_int=`cat conftestval`
 else
@@ -70550,7 +72660,7 @@ EOF
 
 
   echo $ac_n "checking if we're on a 64-bit platform""... $ac_c" 1>&6
-echo "configure:70554: checking if we're on a 64-bit platform" >&5
+echo "configure:72664: checking if we're on a 64-bit platform" >&5
   if test "$ac_cv_sizeof_long_int" = "4" ; then
     echo "$ac_t""no" 1>&6
     TMP_PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib32"
@@ -70560,7 +72670,7 @@ echo "configure:70554: checking if we're
   fi
 
   echo $ac_n "checking OCI8 libraries dir""... $ac_c" 1>&6
-echo "configure:70564: checking OCI8 libraries dir" >&5
+echo "configure:72674: checking OCI8 libraries dir" >&5
   if test -d "$PDO_OCI_DIR/lib" && test ! -d "$PDO_OCI_DIR/lib32"; then
     PDO_OCI_LIB_DIR="$PDO_OCI_DIR/lib"
   elif test ! -d "$PDO_OCI_DIR/lib" && test -d "$PDO_OCI_DIR/lib32"; then
@@ -70927,7 +73037,7 @@ echo "configure:70564: checking OCI8 lib
     fi
     
   echo $ac_n "checking Oracle version""... $ac_c" 1>&6
-echo "configure:70931: checking Oracle version" >&5
+echo "configure:73041: checking Oracle version" >&5
   for OCI_VER in $SUPPORTED_LIB_VERS; do
     if test -f $PDO_OCI_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.$OCI_VER; then
       PDO_OCI_VERSION="$OCI_VER"
@@ -71109,7 +73219,7 @@ echo "configure:70931: checking Oracle v
   done
 
   echo $ac_n "checking for OCIEnvCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:71113: checking for OCIEnvCreate in -lclntsh" >&5
+echo "configure:73223: checking for OCIEnvCreate in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCIEnvCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71117,7 +73227,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71121 "configure"
+#line 73231 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71128,7 +73238,7 @@ int main() {
 OCIEnvCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:71132: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73242: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71262,7 +73372,7 @@ fi
   done
 
   echo $ac_n "checking for OCIEnvNlsCreate in -lclntsh""... $ac_c" 1>&6
-echo "configure:71266: checking for OCIEnvNlsCreate in -lclntsh" >&5
+echo "configure:73376: checking for OCIEnvNlsCreate in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCIEnvNlsCreate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71270,7 +73380,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71274 "configure"
+#line 73384 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71281,7 +73391,7 @@ int main() {
 OCIEnvNlsCreate()
 ; return 0; }
 EOF
-if { (eval echo configure:71285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73395: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71415,7 +73525,7 @@ fi
   done
 
   echo $ac_n "checking for OCILobIsTemporary in -lclntsh""... $ac_c" 1>&6
-echo "configure:71419: checking for OCILobIsTemporary in -lclntsh" >&5
+echo "configure:73529: checking for OCILobIsTemporary in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71423,7 +73533,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71427 "configure"
+#line 73537 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71434,7 +73544,7 @@ int main() {
 OCILobIsTemporary()
 ; return 0; }
 EOF
-if { (eval echo configure:71438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71564,7 +73674,7 @@ else
   done
 
   echo $ac_n "checking for OCILobIsTemporary in -locijdbc8""... $ac_c" 1>&6
-echo "configure:71568: checking for OCILobIsTemporary in -locijdbc8" >&5
+echo "configure:73678: checking for OCILobIsTemporary in -locijdbc8" >&5
 ac_lib_var=`echo ocijdbc8'_'OCILobIsTemporary | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71572,7 +73682,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-locijdbc8  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71576 "configure"
+#line 73686 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71583,7 +73693,7 @@ int main() {
 OCILobIsTemporary()
 ; return 0; }
 EOF
-if { (eval echo configure:71587: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73697: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71744,7 +73854,7 @@ fi
   done
 
   echo $ac_n "checking for OCICollAssign in -lclntsh""... $ac_c" 1>&6
-echo "configure:71748: checking for OCICollAssign in -lclntsh" >&5
+echo "configure:73858: checking for OCICollAssign in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCICollAssign | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71752,7 +73862,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71756 "configure"
+#line 73866 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71763,7 +73873,7 @@ int main() {
 OCICollAssign()
 ; return 0; }
 EOF
-if { (eval echo configure:71767: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:73877: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71897,7 +74007,7 @@ fi
   done
 
   echo $ac_n "checking for OCIStmtFetch2 in -lclntsh""... $ac_c" 1>&6
-echo "configure:71901: checking for OCIStmtFetch2 in -lclntsh" >&5
+echo "configure:74011: checking for OCIStmtFetch2 in -lclntsh" >&5
 ac_lib_var=`echo clntsh'_'OCIStmtFetch2 | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -71905,7 +74015,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lclntsh  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 71909 "configure"
+#line 74019 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -71916,7 +74026,7 @@ int main() {
 OCIStmtFetch2()
 ; return 0; }
 EOF
-if { (eval echo configure:71920: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:74030: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -71955,13 +74065,13 @@ fi
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71959: checking for PDO includes" >&5
+echo "configure:74069: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:71965: checking for PDO includes" >&5
+echo "configure:74075: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -72329,7 +74439,7 @@ fi
 php_with_pdo_odbc=no
 
 echo $ac_n "checking for ODBC v3 support for PDO""... $ac_c" 1>&6
-echo "configure:72333: checking for ODBC v3 support for PDO" >&5
+echo "configure:74443: checking for ODBC v3 support for PDO" >&5
 # Check whether --with-pdo-odbc or --without-pdo-odbc was given.
 if test "${with_pdo_odbc+set}" = set; then
   withval="$with_pdo_odbc"
@@ -72381,13 +74491,13 @@ if test "$PHP_PDO_ODBC" != "no"; then
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:72385: checking for PDO includes" >&5
+echo "configure:74495: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:72391: checking for PDO includes" >&5
+echo "configure:74501: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -72408,7 +74518,7 @@ echo "$ac_t""$pdo_inc_path" 1>&6
   
 
   echo $ac_n "checking for selected PDO ODBC flavour""... $ac_c" 1>&6
-echo "configure:72412: checking for selected PDO ODBC flavour" >&5
+echo "configure:74522: checking for selected PDO ODBC flavour" >&5
 
   pdo_odbc_flavour="`echo $PHP_PDO_ODBC | cut -d, -f1`"
   pdo_odbc_dir="`echo $PHP_PDO_ODBC | cut -d, -f2`"
@@ -72487,7 +74597,7 @@ echo "configure:72412: checking for sele
 
   
   echo $ac_n "checking for odbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72491: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74601: checking for odbc.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/odbc.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72501,7 +74611,7 @@ EOF
 
   
   echo $ac_n "checking for odbcsdk.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72505: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74615: checking for odbcsdk.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/odbcsdk.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72515,7 +74625,7 @@ EOF
 
   
   echo $ac_n "checking for iodbc.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72519: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74629: checking for iodbc.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/iodbc.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72529,7 +74639,7 @@ EOF
 
   
   echo $ac_n "checking for sqlunix.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72533: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74643: checking for sqlunix.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sqlunix.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72543,7 +74653,7 @@ EOF
 
   
   echo $ac_n "checking for sqltypes.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72547: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74657: checking for sqltypes.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sqltypes.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72557,7 +74667,7 @@ EOF
 
   
   echo $ac_n "checking for sqlucode.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72561: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74671: checking for sqlucode.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sqlucode.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72571,7 +74681,7 @@ EOF
 
   
   echo $ac_n "checking for sql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72575: checking for sql.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74685: checking for sql.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sql.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72585,7 +74695,7 @@ EOF
 
   
   echo $ac_n "checking for isql.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72589: checking for isql.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74699: checking for isql.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/isql.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72599,7 +74709,7 @@ EOF
 
   
   echo $ac_n "checking for sqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72603: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74713: checking for sqlext.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sqlext.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72613,7 +74723,7 @@ EOF
 
   
   echo $ac_n "checking for isqlext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72617: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74727: checking for isqlext.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/isqlext.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72627,7 +74737,7 @@ EOF
 
   
   echo $ac_n "checking for udbcext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72631: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74741: checking for udbcext.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/udbcext.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72641,7 +74751,7 @@ EOF
 
   
   echo $ac_n "checking for sqlcli1.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72645: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74755: checking for sqlcli1.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/sqlcli1.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72655,7 +74765,7 @@ EOF
 
   
   echo $ac_n "checking for LibraryManager.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72659: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74769: checking for LibraryManager.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/LibraryManager.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72669,7 +74779,7 @@ EOF
 
   
   echo $ac_n "checking for cli0core.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72673: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74783: checking for cli0core.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/cli0core.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72683,7 +74793,7 @@ EOF
 
   
   echo $ac_n "checking for cli0ext.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72687: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74797: checking for cli0ext.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/cli0ext.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72697,7 +74807,7 @@ EOF
 
   
   echo $ac_n "checking for cli0cli.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72701: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74811: checking for cli0cli.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/cli0cli.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72711,7 +74821,7 @@ EOF
 
   
   echo $ac_n "checking for cli0defs.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72715: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74825: checking for cli0defs.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/cli0defs.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72725,7 +74835,7 @@ EOF
 
   
   echo $ac_n "checking for cli0env.h in $PDO_ODBC_INCDIR""... $ac_c" 1>&6
-echo "configure:72729: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
+echo "configure:74839: checking for cli0env.h in $PDO_ODBC_INCDIR" >&5
   if test -f "$PDO_ODBC_INCDIR/cli0env.h"; then
     php_pdo_have_header=yes
     cat >> confdefs.h <<\EOF
@@ -72931,7 +75041,7 @@ EOF
   done
 
   echo $ac_n "checking for SQLBindCol in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
-echo "configure:72935: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
+echo "configure:75045: checking for SQLBindCol in -l$pdo_odbc_def_lib" >&5
 ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLBindCol | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -72939,7 +75049,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$pdo_odbc_def_lib  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 72943 "configure"
+#line 75053 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -72950,7 +75060,7 @@ int main() {
 SQLBindCol()
 ; return 0; }
 EOF
-if { (eval echo configure:72954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75064: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73065,7 +75175,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   done
 
   echo $ac_n "checking for SQLAllocHandle in -l$pdo_odbc_def_lib""... $ac_c" 1>&6
-echo "configure:73069: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
+echo "configure:75179: checking for SQLAllocHandle in -l$pdo_odbc_def_lib" >&5
 ac_lib_var=`echo $pdo_odbc_def_lib'_'SQLAllocHandle | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73073,7 +75183,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$pdo_odbc_def_lib  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73077 "configure"
+#line 75187 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73084,7 +75194,7 @@ int main() {
 SQLAllocHandle()
 ; return 0; }
 EOF
-if { (eval echo configure:73088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73458,7 +75568,7 @@ fi
 php_with_pdo_pgsql=no
 
 echo $ac_n "checking for PostgreSQL support for PDO""... $ac_c" 1>&6
-echo "configure:73462: checking for PostgreSQL support for PDO" >&5
+echo "configure:75572: checking for PostgreSQL support for PDO" >&5
 # Check whether --with-pdo-pgsql or --without-pdo-pgsql was given.
 if test "${with_pdo_pgsql+set}" = set; then
   withval="$with_pdo_pgsql"
@@ -73517,7 +75627,7 @@ if test "$PHP_PDO_PGSQL" != "no"; then
 
 
   echo $ac_n "checking for pg_config""... $ac_c" 1>&6
-echo "configure:73521: checking for pg_config" >&5
+echo "configure:75631: checking for pg_config" >&5
   for i in $PHP_PDO_PGSQL $PHP_PDO_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
     if test -x $i/pg_config; then
       PG_CONFIG="$i/pg_config"
@@ -73581,14 +75691,14 @@ EOF
 
 
   echo $ac_n "checking for openssl dependencies""... $ac_c" 1>&6
-echo "configure:73585: checking for openssl dependencies" >&5
+echo "configure:75695: checking for openssl dependencies" >&5
   grep openssl $PGSQL_INCLUDE/libpq-fe.h >/dev/null 2>&1
   if test $? -eq 0 ; then
     echo "$ac_t""yes" 1>&6
         # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:73592: checking for $ac_word" >&5
+echo "configure:75702: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -73632,7 +75742,7 @@ fi
   old_LDFLAGS=$LDFLAGS
   LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
   echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
-echo "configure:73636: checking for PQparameterStatus in -lpq" >&5
+echo "configure:75746: checking for PQparameterStatus in -lpq" >&5
 ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73640,7 +75750,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73644 "configure"
+#line 75754 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73651,7 +75761,7 @@ int main() {
 PQparameterStatus()
 ; return 0; }
 EOF
-if { (eval echo configure:73655: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75765: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73680,7 +75790,7 @@ fi
 
 
   echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
-echo "configure:73684: checking for PQprepare in -lpq" >&5
+echo "configure:75794: checking for PQprepare in -lpq" >&5
 ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73688,7 +75798,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73692 "configure"
+#line 75802 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73699,7 +75809,7 @@ int main() {
 PQprepare()
 ; return 0; }
 EOF
-if { (eval echo configure:73703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75813: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73723,7 +75833,7 @@ else
 fi
 
   echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
-echo "configure:73727: checking for PQescapeStringConn in -lpq" >&5
+echo "configure:75837: checking for PQescapeStringConn in -lpq" >&5
 ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73731,7 +75841,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73735 "configure"
+#line 75845 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73742,7 +75852,7 @@ int main() {
 PQescapeStringConn()
 ; return 0; }
 EOF
-if { (eval echo configure:73746: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73766,7 +75876,7 @@ else
 fi
 
   echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
-echo "configure:73770: checking for PQescapeByteaConn in -lpq" >&5
+echo "configure:75880: checking for PQescapeByteaConn in -lpq" >&5
 ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73774,7 +75884,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73778 "configure"
+#line 75888 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73785,7 +75895,7 @@ int main() {
 PQescapeByteaConn()
 ; return 0; }
 EOF
-if { (eval echo configure:73789: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75899: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73810,7 +75920,7 @@ fi
 
 
   echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
-echo "configure:73814: checking for pg_encoding_to_char in -lpq" >&5
+echo "configure:75924: checking for pg_encoding_to_char in -lpq" >&5
 ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -73818,7 +75928,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 73822 "configure"
+#line 75932 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -73829,7 +75939,7 @@ int main() {
 pg_encoding_to_char()
 ; return 0; }
 EOF
-if { (eval echo configure:73833: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:75943: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -73993,13 +76103,13 @@ fi
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:73997: checking for PDO includes" >&5
+echo "configure:76107: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:74003: checking for PDO includes" >&5
+echo "configure:76113: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -74339,7 +76449,7 @@ fi
 php_with_pdo_sqlite=$PHP_PDO
 
 echo $ac_n "checking for sqlite 3 support for PDO""... $ac_c" 1>&6
-echo "configure:74343: checking for sqlite 3 support for PDO" >&5
+echo "configure:76453: checking for sqlite 3 support for PDO" >&5
 # Check whether --with-pdo-sqlite or --without-pdo-sqlite was given.
 if test "${with_pdo_sqlite+set}" = set; then
   withval="$with_pdo_sqlite"
@@ -74388,13 +76498,13 @@ if test "$PHP_PDO_SQLITE" != "no"; then
   
     
   echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:74392: checking for PDO includes" >&5
+echo "configure:76502: checking for PDO includes" >&5
 if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:74398: checking for PDO includes" >&5
+echo "configure:76508: checking for PDO includes" >&5
     if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
       pdo_inc_path=$abs_srcdir/ext
     elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
@@ -74423,7 +76533,7 @@ echo "$ac_t""$pdo_inc_path" 1>&6
       PDO_SQLITE_DIR=$PHP_PDO_SQLITE
     else # search default path list
       echo $ac_n "checking for sqlite3 files in default path""... $ac_c" 1>&6
-echo "configure:74427: checking for sqlite3 files in default path" >&5
+echo "configure:76537: checking for sqlite3 files in default path" >&5
       for i in $SEARCH_PATH ; do
         if test -r $i/$SEARCH_FOR; then
           PDO_SQLITE_DIR=$i
@@ -74569,7 +76679,7 @@ echo "configure:74427: checking for sqli
   done
 
   echo $ac_n "checking for $LIBSYMBOL in -l$LIBNAME""... $ac_c" 1>&6
-echo "configure:74573: checking for $LIBSYMBOL in -l$LIBNAME" >&5
+echo "configure:76683: checking for $LIBSYMBOL in -l$LIBNAME" >&5
 ac_lib_var=`echo $LIBNAME'_'$LIBSYMBOL | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -74577,7 +76687,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 74581 "configure"
+#line 76691 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -74588,7 +76698,7 @@ int main() {
 $LIBSYMBOL()
 ; return 0; }
 EOF
-if { (eval echo configure:74592: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:76702: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -74818,7 +76928,7 @@ fi
   done
 
   echo $ac_n "checking for sqlite3_key in -lsqlite3""... $ac_c" 1>&6
-echo "configure:74822: checking for sqlite3_key in -lsqlite3" >&5
+echo "configure:76932: checking for sqlite3_key in -lsqlite3" >&5
 ac_lib_var=`echo sqlite3'_'sqlite3_key | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -74826,7 +76936,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsqlite3  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 74830 "configure"
+#line 76940 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -74837,7 +76947,7 @@ int main() {
 sqlite3_key()
 ; return 0; }
 EOF
-if { (eval echo configure:74841: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:76951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75578,12 +77688,12 @@ but you've either not enabled sqlite3, o
       for ac_func in usleep nanosleep
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:75582: checking for $ac_func" >&5
+echo "configure:77692: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 75587 "configure"
+#line 77697 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -75606,7 +77716,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:75610: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:77720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -75634,17 +77744,17 @@ done
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:75638: checking for $ac_hdr" >&5
+echo "configure:77748: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 75643 "configure"
+#line 77753 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:75648: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:77758: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -75768,7 +77878,7 @@ done
   done
 
   echo $ac_n "checking for fdatasync in -lrt""... $ac_c" 1>&6
-echo "configure:75772: checking for fdatasync in -lrt" >&5
+echo "configure:77882: checking for fdatasync in -lrt" >&5
 ac_lib_var=`echo rt'_'fdatasync | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -75776,7 +77886,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lrt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 75780 "configure"
+#line 77890 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -75787,7 +77897,7 @@ int main() {
 fdatasync()
 ; return 0; }
 EOF
-if { (eval echo configure:75791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:77901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -75868,7 +77978,7 @@ fi
 php_with_pgsql=no
 
 echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
-echo "configure:75872: checking for PostgreSQL support" >&5
+echo "configure:77982: checking for PostgreSQL support" >&5
 # Check whether --with-pgsql or --without-pgsql was given.
 if test "${with_pgsql+set}" = set; then
   withval="$with_pgsql"
@@ -75922,7 +78032,7 @@ if test "$PHP_PGSQL" != "no"; then
 
 
   echo $ac_n "checking for pg_config""... $ac_c" 1>&6
-echo "configure:75926: checking for pg_config" >&5
+echo "configure:78036: checking for pg_config" >&5
   for i in $PHP_PGSQL $PHP_PGSQL/bin /usr/local/pgsql/bin /usr/local/bin /usr/bin ""; do
 	if test -x $i/pg_config; then
       PG_CONFIG="$i/pg_config"
@@ -75990,7 +78100,7 @@ EOF
   old_LDFLAGS=$LDFLAGS
   LDFLAGS="-L$PGSQL_LIBDIR $LDFLAGS"
   echo $ac_n "checking for PQescapeString in -lpq""... $ac_c" 1>&6
-echo "configure:75994: checking for PQescapeString in -lpq" >&5
+echo "configure:78104: checking for PQescapeString in -lpq" >&5
 ac_lib_var=`echo pq'_'PQescapeString | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -75998,7 +78108,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76002 "configure"
+#line 78112 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76009,7 +78119,7 @@ int main() {
 PQescapeString()
 ; return 0; }
 EOF
-if { (eval echo configure:76013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76033,7 +78143,7 @@ else
 fi
 
   echo $ac_n "checking for PQunescapeBytea in -lpq""... $ac_c" 1>&6
-echo "configure:76037: checking for PQunescapeBytea in -lpq" >&5
+echo "configure:78147: checking for PQunescapeBytea in -lpq" >&5
 ac_lib_var=`echo pq'_'PQunescapeBytea | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76041,7 +78151,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76045 "configure"
+#line 78155 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76052,7 +78162,7 @@ int main() {
 PQunescapeBytea()
 ; return 0; }
 EOF
-if { (eval echo configure:76056: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78166: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76076,7 +78186,7 @@ else
 fi
 
   echo $ac_n "checking for PQsetnonblocking in -lpq""... $ac_c" 1>&6
-echo "configure:76080: checking for PQsetnonblocking in -lpq" >&5
+echo "configure:78190: checking for PQsetnonblocking in -lpq" >&5
 ac_lib_var=`echo pq'_'PQsetnonblocking | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76084,7 +78194,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76088 "configure"
+#line 78198 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76095,7 +78205,7 @@ int main() {
 PQsetnonblocking()
 ; return 0; }
 EOF
-if { (eval echo configure:76099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76119,7 +78229,7 @@ else
 fi
 
   echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
-echo "configure:76123: checking for PQcmdTuples in -lpq" >&5
+echo "configure:78233: checking for PQcmdTuples in -lpq" >&5
 ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76127,7 +78237,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76131 "configure"
+#line 78241 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76138,7 +78248,7 @@ int main() {
 PQcmdTuples()
 ; return 0; }
 EOF
-if { (eval echo configure:76142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76162,7 +78272,7 @@ else
 fi
 
   echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
-echo "configure:76166: checking for PQoidValue in -lpq" >&5
+echo "configure:78276: checking for PQoidValue in -lpq" >&5
 ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76170,7 +78280,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76174 "configure"
+#line 78284 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76181,7 +78291,7 @@ int main() {
 PQoidValue()
 ; return 0; }
 EOF
-if { (eval echo configure:76185: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76205,7 +78315,7 @@ else
 fi
 
   echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
-echo "configure:76209: checking for PQclientEncoding in -lpq" >&5
+echo "configure:78319: checking for PQclientEncoding in -lpq" >&5
 ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76213,7 +78323,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76217 "configure"
+#line 78327 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76224,7 +78334,7 @@ int main() {
 PQclientEncoding()
 ; return 0; }
 EOF
-if { (eval echo configure:76228: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78338: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76248,7 +78358,7 @@ else
 fi
 
   echo $ac_n "checking for PQparameterStatus in -lpq""... $ac_c" 1>&6
-echo "configure:76252: checking for PQparameterStatus in -lpq" >&5
+echo "configure:78362: checking for PQparameterStatus in -lpq" >&5
 ac_lib_var=`echo pq'_'PQparameterStatus | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76256,7 +78366,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76260 "configure"
+#line 78370 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76267,7 +78377,7 @@ int main() {
 PQparameterStatus()
 ; return 0; }
 EOF
-if { (eval echo configure:76271: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76291,7 +78401,7 @@ else
 fi
 
   echo $ac_n "checking for PQprotocolVersion in -lpq""... $ac_c" 1>&6
-echo "configure:76295: checking for PQprotocolVersion in -lpq" >&5
+echo "configure:78405: checking for PQprotocolVersion in -lpq" >&5
 ac_lib_var=`echo pq'_'PQprotocolVersion | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76299,7 +78409,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76303 "configure"
+#line 78413 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76310,7 +78420,7 @@ int main() {
 PQprotocolVersion()
 ; return 0; }
 EOF
-if { (eval echo configure:76314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76334,7 +78444,7 @@ else
 fi
 
   echo $ac_n "checking for PQtransactionStatus in -lpq""... $ac_c" 1>&6
-echo "configure:76338: checking for PQtransactionStatus in -lpq" >&5
+echo "configure:78448: checking for PQtransactionStatus in -lpq" >&5
 ac_lib_var=`echo pq'_'PQtransactionStatus | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76342,7 +78452,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76346 "configure"
+#line 78456 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76353,7 +78463,7 @@ int main() {
 PQtransactionStatus()
 ; return 0; }
 EOF
-if { (eval echo configure:76357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78467: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76377,7 +78487,7 @@ else
 fi
 
   echo $ac_n "checking for PQexecParams in -lpq""... $ac_c" 1>&6
-echo "configure:76381: checking for PQexecParams in -lpq" >&5
+echo "configure:78491: checking for PQexecParams in -lpq" >&5
 ac_lib_var=`echo pq'_'PQexecParams | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -76385,7 +78495,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lpq  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 76389 "configure"
+#line 78499 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -76396,7 +78506,7 @@ int main() {
 PQexecParams()
 ; return 0; }
 EOF
-if { (eval echo configure:76400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:78510: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -76415,891 +78525,2169 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 #define HAVE_PQEXECPARAMS 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
+echo "configure:78534: checking for PQprepare in -lpq" >&5
+ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78542 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQprepare();
+
+int main() {
+PQprepare()
+; return 0; }
+EOF
+if { (eval echo configure:78553: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPREPARE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQexecPrepared in -lpq""... $ac_c" 1>&6
+echo "configure:78577: checking for PQexecPrepared in -lpq" >&5
+ac_lib_var=`echo pq'_'PQexecPrepared | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78585 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQexecPrepared();
+
+int main() {
+PQexecPrepared()
+; return 0; }
+EOF
+if { (eval echo configure:78596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQEXECPREPARED 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQresultErrorField in -lpq""... $ac_c" 1>&6
+echo "configure:78620: checking for PQresultErrorField in -lpq" >&5
+ac_lib_var=`echo pq'_'PQresultErrorField | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78628 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQresultErrorField();
+
+int main() {
+PQresultErrorField()
+; return 0; }
+EOF
+if { (eval echo configure:78639: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQRESULTERRORFIELD 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendQueryParams in -lpq""... $ac_c" 1>&6
+echo "configure:78663: checking for PQsendQueryParams in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendQueryParams | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78671 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendQueryParams();
+
+int main() {
+PQsendQueryParams()
+; return 0; }
+EOF
+if { (eval echo configure:78682: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDQUERYPARAMS 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendPrepare in -lpq""... $ac_c" 1>&6
+echo "configure:78706: checking for PQsendPrepare in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendPrepare | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78714 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendPrepare();
+
+int main() {
+PQsendPrepare()
+; return 0; }
+EOF
+if { (eval echo configure:78725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDPREPARE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsendQueryPrepared in -lpq""... $ac_c" 1>&6
+echo "configure:78749: checking for PQsendQueryPrepared in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsendQueryPrepared | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78757 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsendQueryPrepared();
+
+int main() {
+PQsendQueryPrepared()
+; return 0; }
+EOF
+if { (eval echo configure:78768: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSENDQUERYPREPARED 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQputCopyData in -lpq""... $ac_c" 1>&6
+echo "configure:78792: checking for PQputCopyData in -lpq" >&5
+ac_lib_var=`echo pq'_'PQputCopyData | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78800 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQputCopyData();
+
+int main() {
+PQputCopyData()
+; return 0; }
+EOF
+if { (eval echo configure:78811: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPUTCOPYDATA 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQputCopyEnd in -lpq""... $ac_c" 1>&6
+echo "configure:78835: checking for PQputCopyEnd in -lpq" >&5
+ac_lib_var=`echo pq'_'PQputCopyEnd | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78843 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQputCopyEnd();
+
+int main() {
+PQputCopyEnd()
+; return 0; }
+EOF
+if { (eval echo configure:78854: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQPUTCOPYEND 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQgetCopyData in -lpq""... $ac_c" 1>&6
+echo "configure:78878: checking for PQgetCopyData in -lpq" >&5
+ac_lib_var=`echo pq'_'PQgetCopyData | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78886 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQgetCopyData();
+
+int main() {
+PQgetCopyData()
+; return 0; }
+EOF
+if { (eval echo configure:78897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQGETCOPYDATA 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQfreemem in -lpq""... $ac_c" 1>&6
+echo "configure:78921: checking for PQfreemem in -lpq" >&5
+ac_lib_var=`echo pq'_'PQfreemem | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78929 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQfreemem();
+
+int main() {
+PQfreemem()
+; return 0; }
+EOF
+if { (eval echo configure:78940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQFREEMEM 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQsetErrorVerbosity in -lpq""... $ac_c" 1>&6
+echo "configure:78964: checking for PQsetErrorVerbosity in -lpq" >&5
+ac_lib_var=`echo pq'_'PQsetErrorVerbosity | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 78972 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQsetErrorVerbosity();
+
+int main() {
+PQsetErrorVerbosity()
+; return 0; }
+EOF
+if { (eval echo configure:78983: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQSETERRORVERBOSITY 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQftable in -lpq""... $ac_c" 1>&6
+echo "configure:79007: checking for PQftable in -lpq" >&5
+ac_lib_var=`echo pq'_'PQftable | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79015 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQftable();
+
+int main() {
+PQftable()
+; return 0; }
+EOF
+if { (eval echo configure:79026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQFTABLE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
+echo "configure:79050: checking for PQescapeStringConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79058 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeStringConn();
+
+int main() {
+PQescapeStringConn()
+; return 0; }
+EOF
+if { (eval echo configure:79069: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
+echo "configure:79093: checking for PQescapeByteaConn in -lpq" >&5
+ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79101 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char PQescapeByteaConn();
+
+int main() {
+PQescapeByteaConn()
+; return 0; }
+EOF
+if { (eval echo configure:79112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PQESCAPE_BYTEA_CONN 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
+echo "configure:79136: checking for pg_encoding_to_char in -lpq" >&5
+ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79144 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char pg_encoding_to_char();
+
+int main() {
+pg_encoding_to_char()
+; return 0; }
+EOF
+if { (eval echo configure:79155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for lo_create in -lpq""... $ac_c" 1>&6
+echo "configure:79179: checking for lo_create in -lpq" >&5
+ac_lib_var=`echo pq'_'lo_create | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79187 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char lo_create();
+
+int main() {
+lo_create()
+; return 0; }
+EOF
+if { (eval echo configure:79198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PG_LO_CREATE 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  echo $ac_n "checking for lo_import_with_oid in -lpq""... $ac_c" 1>&6
+echo "configure:79222: checking for lo_import_with_oid in -lpq" >&5
+ac_lib_var=`echo pq'_'lo_import_with_oid | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lpq  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 79230 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char lo_import_with_oid();
+
+int main() {
+lo_import_with_oid()
+; return 0; }
+EOF
+if { (eval echo configure:79241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_PG_LO_IMPORT_WITH_OID 1
+EOF
+
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  LIBS=$old_LIBS
+  LDFLAGS=$old_LDFLAGS
+
+  
+
+  if test "$ext_shared" = "yes"; then
+    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
+    if test -n "$PGSQL_LIBDIR"; then
+      
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PGSQL_LIBDIR"; then
+    
+  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_LIBDIR
+  else
+    
+    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case pq in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpq $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"
+
+
+  
+  if test "$PGSQL_INCLUDE" != "/usr/include"; then
+    
+  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
+    ai_p=$PGSQL_INCLUDE
+  else
+    
+    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+
+  
+  ext_builddir=ext/pgsql
+  ext_srcdir=$abs_srcdir/ext/pgsql
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PGSQL_SHARED=no
+    
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC pgsql"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PGSQL_SHARED=yes
+      
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)
+
+$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PGSQL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)
+
+$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PGSQL 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PGSQL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC pgsql"
+        ;;
+      *)
+        
+  
+  case ext/pgsql in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pgsql.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pgsql
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+
+
+php_enable_phar=yes
+
+echo $ac_n "checking for phar archive support""... $ac_c" 1>&6
+echo "configure:79701: checking for phar archive support" >&5
+# Check whether --enable-phar or --disable-phar was given.
+if test "${enable_phar+set}" = set; then
+  enableval="$enable_phar"
+  PHP_PHAR=$enableval
+else
+  
+  PHP_PHAR=yes
+  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PHAR in
+shared,*)
+  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PHAR=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_PHAR" != "no"; then
+  
+  ext_builddir=ext/phar
+  ext_srcdir=$abs_srcdir/ext/phar
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_PHAR_SHARED=no
+    
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC phar"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_PHAR_SHARED=yes
+      
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPHAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)
+
+$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHAR, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)
+
+$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_PHAR 1
+EOF
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_PHAR_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC phar"
+        ;;
+      *)
+        
+  
+  case ext/phar in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=phar
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+  echo $ac_n "checking for phar openssl support""... $ac_c" 1>&6
+echo "configure:80035: checking for phar openssl support" >&5
+  if test "$PHP_HASH_SHARED" != "yes"; then
+    if test "$PHP_HASH" != "no"; then
+      cat >> confdefs.h <<\EOF
+#define PHAR_HASH_OK 1
+EOF
+
+    fi
+  else
+    echo "configure: warning: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" 1>&2
+  fi
+  if test "$PHP_OPENSSL_SHARED" = "yes"; then
+    echo "$ac_t""no (shared openssl)" 1>&6
+  else
+    if test "$PHP_OPENSSL" = "yes"; then
+      echo "$ac_t""yes" 1>&6
+      cat >> confdefs.h <<\EOF
+#define PHAR_HAVE_OPENSSL 1
+EOF
+
+    else
+      echo "$ac_t""no" 1>&6
+    fi
+  fi
+  
+  am_i_shared=$PHP_PHAR_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension phar to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build phar shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension phar, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  am_i_shared=$PHP_PHAR_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension phar to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build phar shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension phar, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+
 fi
 
-  echo $ac_n "checking for PQprepare in -lpq""... $ac_c" 1>&6
-echo "configure:76424: checking for PQprepare in -lpq" >&5
-ac_lib_var=`echo pq'_'PQprepare | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76432 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQprepare();
 
-int main() {
-PQprepare()
-; return 0; }
-EOF
-if { (eval echo configure:76443: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPREPARE 1
-EOF
+php_enable_posix=yes
 
+echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
+echo "configure:80110: checking whether to enable POSIX-like functions" >&5
+# Check whether --enable-posix or --disable-posix was given.
+if test "${enable_posix+set}" = set; then
+  enableval="$enable_posix"
+  PHP_POSIX=$enableval
 else
-  echo "$ac_t""no" 1>&6
+  
+  PHP_POSIX=yes
+  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL
+
 fi
 
-  echo $ac_n "checking for PQexecPrepared in -lpq""... $ac_c" 1>&6
-echo "configure:76467: checking for PQexecPrepared in -lpq" >&5
-ac_lib_var=`echo pq'_'PQexecPrepared | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76475 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQexecPrepared();
 
-int main() {
-PQexecPrepared()
-; return 0; }
-EOF
-if { (eval echo configure:76486: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQEXECPREPARED 1
-EOF
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_POSIX in
+shared,*)
+  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_POSIX=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQresultErrorField in -lpq""... $ac_c" 1>&6
-echo "configure:76510: checking for PQresultErrorField in -lpq" >&5
-ac_lib_var=`echo pq'_'PQresultErrorField | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76518 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQresultErrorField();
 
-int main() {
-PQresultErrorField()
-; return 0; }
-EOF
-if { (eval echo configure:76529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+echo "$ac_t""$ext_output" 1>&6
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+
+
+if test "$PHP_POSIX" = "yes"; then
   cat >> confdefs.h <<\EOF
-#define HAVE_PQRESULTERRORFIELD 1
+#define HAVE_POSIX 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  
+  ext_builddir=ext/posix
+  ext_srcdir=$abs_srcdir/ext/posix
 
-  echo $ac_n "checking for PQsendQueryParams in -lpq""... $ac_c" 1>&6
-echo "configure:76553: checking for PQsendQueryParams in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendQueryParams | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76561 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendQueryParams();
+  ac_extra=
 
-int main() {
-PQsendQueryParams()
-; return 0; }
-EOF
-if { (eval echo configure:76572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_POSIX_SHARED=no
+    
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDQUERYPARAMS 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQsendPrepare in -lpq""... $ac_c" 1>&6
-echo "configure:76596: checking for PQsendPrepare in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendPrepare | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76604 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendPrepare();
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-PQsendPrepare()
-; return 0; }
-EOF
-if { (eval echo configure:76615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDPREPARE 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQsendQueryPrepared in -lpq""... $ac_c" 1>&6
-echo "configure:76639: checking for PQsendQueryPrepared in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsendQueryPrepared | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76647 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsendQueryPrepared();
+    EXT_STATIC="$EXT_STATIC posix"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_POSIX_SHARED=yes
+      
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
-PQsendQueryPrepared()
-; return 0; }
-EOF
-if { (eval echo configure:76658: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSENDQUERYPREPARED 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for PQputCopyData in -lpq""... $ac_c" 1>&6
-echo "configure:76682: checking for PQputCopyData in -lpq" >&5
-ac_lib_var=`echo pq'_'PQputCopyData | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76690 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQputCopyData();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-PQputCopyData()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:76701: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPUTCOPYDATA 1
-EOF
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPOSIX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
+      ;;
+  esac
 
-  echo $ac_n "checking for PQputCopyEnd in -lpq""... $ac_c" 1>&6
-echo "configure:76725: checking for PQputCopyEnd in -lpq" >&5
-ac_lib_var=`echo pq'_'PQputCopyEnd | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76733 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQputCopyEnd();
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
 
-int main() {
-PQputCopyEnd()
-; return 0; }
-EOF
-if { (eval echo configure:76744: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)
+
+$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
+	$link_cmd
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQPUTCOPYEND 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-  echo $ac_n "checking for PQgetCopyData in -lpq""... $ac_c" 1>&6
-echo "configure:76768: checking for PQgetCopyData in -lpq" >&5
-ac_lib_var=`echo pq'_'PQgetCopyData | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76776 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQgetCopyData();
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(POSIX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)
+
+$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-PQgetCopyData()
-; return 0; }
 EOF
-if { (eval echo configure:76787: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQGETCOPYDATA 1
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_POSIX 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_POSIX_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-  echo $ac_n "checking for PQfreemem in -lpq""... $ac_c" 1>&6
-echo "configure:76811: checking for PQfreemem in -lpq" >&5
-ac_lib_var=`echo pq'_'PQfreemem | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76819 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQfreemem();
 
-int main() {
-PQfreemem()
-; return 0; }
-EOF
-if { (eval echo configure:76830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQFREEMEM 1
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQsetErrorVerbosity in -lpq""... $ac_c" 1>&6
-echo "configure:76854: checking for PQsetErrorVerbosity in -lpq" >&5
-ac_lib_var=`echo pq'_'PQsetErrorVerbosity | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76862 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQsetErrorVerbosity();
+        EXT_STATIC="$EXT_STATIC posix"
+        ;;
+      *)
+        
+  
+  case ext/posix in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-int main() {
-PQsetErrorVerbosity()
-; return 0; }
-EOF
-if { (eval echo configure:76873: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQSETERRORVERBOSITY 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+  old_IFS=$IFS
+  for ac_src in posix.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for PQftable in -lpq""... $ac_c" 1>&6
-echo "configure:76897: checking for PQftable in -lpq" >&5
-ac_lib_var=`echo pq'_'PQftable | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76905 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQftable();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-PQftable()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:76916: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQFTABLE 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-  echo $ac_n "checking for PQescapeStringConn in -lpq""... $ac_c" 1>&6
-echo "configure:76940: checking for PQescapeStringConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeStringConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76948 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeStringConn();
 
-int main() {
-PQescapeStringConn()
-; return 0; }
-EOF
-if { (eval echo configure:76959: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=posix
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_CONN 1
-EOF
+  fi
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for PQescapeByteaConn in -lpq""... $ac_c" 1>&6
-echo "configure:76983: checking for PQescapeByteaConn in -lpq" >&5
-ac_lib_var=`echo pq'_'PQescapeByteaConn | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  for ac_hdr in sys/mkdev.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:80452: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 76991 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 80457 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char PQescapeByteaConn();
-
-int main() {
-PQescapeByteaConn()
-; return 0; }
+#include <$ac_hdr>
 EOF
-if { (eval echo configure:77002: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:80462: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PQESCAPE_BYTEA_CONN 1
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
 EOF
-
+ 
 else
   echo "$ac_t""no" 1>&6
 fi
+done
 
-  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
-echo "configure:77026: checking for pg_encoding_to_char in -lpq" >&5
-ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+
+  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:80492: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 77034 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 80497 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char pg_encoding_to_char();
+char $ac_func();
 
 int main() {
-pg_encoding_to_char()
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:77045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:80520: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_func_$ac_func=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
 EOF
-
+ 
 else
   echo "$ac_t""no" 1>&6
 fi
+done
 
-  echo $ac_n "checking for lo_create in -lpq""... $ac_c" 1>&6
-echo "configure:77069: checking for lo_create in -lpq" >&5
-ac_lib_var=`echo pq'_'lo_create | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+  echo $ac_n "checking for working ttyname_r() implementation""... $ac_c" 1>&6
+echo "configure:80546: checking for working ttyname_r() implementation" >&5
+  if test "$cross_compiling" = yes; then
+  
+    echo "$ac_t""no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" 1>&6
+  
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 77077 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 80553 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char lo_create();
 
-int main() {
-lo_create()
-; return 0; }
+#include <unistd.h>
+
+int main(int argc, char *argv[])
+{
+	char buf[64];
+
+	return ttyname_r(0, buf, 64) ? 1 : 0;
+}
+  
 EOF
-if { (eval echo configure:77088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+if { (eval echo configure:80566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    echo "$ac_t""yes" 1>&6
+    cat >> confdefs.h <<\EOF
+#define HAVE_TTYNAME_R 1
+EOF
+
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  rm -fr conftest*
+  
+    echo "$ac_t""no, posix_ttyname() will be thread-unsafe" 1>&6
+  
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
+rm -fr conftest*
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PG_LO_CREATE 1
-EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
 
-  echo $ac_n "checking for lo_import_with_oid in -lpq""... $ac_c" 1>&6
-echo "configure:77112: checking for lo_import_with_oid in -lpq" >&5
-ac_lib_var=`echo pq'_'lo_import_with_oid | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "checking for utsname.domainname""... $ac_c" 1>&6
+echo "configure:80588: checking for utsname.domainname" >&5
+if eval "test \"`echo '$''{'ac_cv_have_utsname_domainname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lpq  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 77120 "configure"
+  
+    cat > conftest.$ac_ext <<EOF
+#line 80594 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char lo_import_with_oid();
 
+      #define _GNU_SOURCE
+      #include <sys/utsname.h>
+    
 int main() {
-lo_import_with_oid()
+
+      return sizeof(((struct utsname *)0)->domainname);
+    
 ; return 0; }
 EOF
-if { (eval echo configure:77131: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:80606: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  
+      ac_cv_have_utsname_domainname=yes
+    
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define HAVE_PG_LO_IMPORT_WITH_OID 1
-EOF
-
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  LIBS=$old_LIBS
-  LDFLAGS=$old_LDFLAGS
-
-  
-
-  if test "$ext_shared" = "yes"; then
-    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
-    if test -n "$PGSQL_LIBDIR"; then
-      
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
-  else
-    
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        PGSQL_SHARED_LIBADD="-L$ai_p $PGSQL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PGSQL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PGSQL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+      ac_cv_have_utsname_domainname=no
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+fi
+rm -f conftest*
   
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
+fi
 
-  if test -n "$PGSQL_LIBDIR"; then
-    
-  if test "$PGSQL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PGSQL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_LIBDIR
-  else
-    
-    ep_dir="`echo $PGSQL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
-  fi
+echo "$ac_t""$ac_cv_have_utsname_domainname" 1>&6
+  if test "$ac_cv_have_utsname_domainname" = yes; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_UTSNAME_DOMAINNAME 1
+EOF
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
   fi
+fi
 
 
-    
-  fi
 
-  fi
-  
-  
-  case pq in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lpq $LIBS" 
-   ;;
-  esac
+php_with_pspell=no
 
+echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
+echo "configure:80637: checking for PSPELL support" >&5
+# Check whether --with-pspell or --without-pspell was given.
+if test "${with_pspell+set}" = set; then
+  withval="$with_pspell"
+  PHP_PSPELL=$withval
+else
+  
+  PHP_PSPELL=no
+  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL
 
+fi
 
 
-  fi
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_PSPELL in
+shared,*)
+  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_PSPELL=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"
 
 
-  
-  if test "$PGSQL_INCLUDE" != "/usr/include"; then
-    
-  if test -z "$PGSQL_INCLUDE" || echo "$PGSQL_INCLUDE" | grep '^/' >/dev/null ; then
-    ai_p=$PGSQL_INCLUDE
-  else
-    
-    ep_dir="`echo $PGSQL_INCLUDE|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PGSQL_INCLUDE\"`"
-  fi
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
 
 
-  
-  ext_builddir=ext/pgsql
-  ext_srcdir=$abs_srcdir/ext/pgsql
+if test "$PHP_PSPELL" != "no"; then
+	
+  ext_builddir=ext/pspell
+  ext_srcdir=$abs_srcdir/ext/pspell
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PGSQL_SHARED=no
+    PHP_PSPELL_SHARED=no
     
   
-  case ext/pgsql in
+  case ext/pspell in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77314,7 +80702,7 @@ fi
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in pspell.c; do
   
       IFS=.
       set $ac_src
@@ -77337,18 +80725,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pgsql"
+    EXT_STATIC="$EXT_STATIC pspell"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PGSQL_SHARED=yes
+      PHP_PSPELL_SHARED=yes
       
-  case ext/pgsql in
+  case ext/pspell in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77363,14 +80751,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in pspell.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pgsql="$shared_objects_pgsql $ac_bdir$ac_obj.lo"
+      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -77393,31 +80781,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppgsql.so '$ext_builddir'/phppgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPSPELL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PHPPGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppgsql.$suffix: $ext_builddir/phppgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppgsql.$suffix \$(phplibdir)
+\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)
 
-$ext_builddir/phppgsql.$suffix: \$(shared_objects_pgsql) \$(PHPPGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77430,31 +80818,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pgsql.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pgsql.so '$ext_builddir'/pgsql.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PGSQL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PSPELL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pgsql) $(PGSQL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pgsql.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pgsql.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pgsql"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pgsql.$suffix: $ext_builddir/pgsql.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pgsql.$suffix \$(phplibdir)
+\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)
 
-$ext_builddir/pgsql.$suffix: \$(shared_objects_pgsql) \$(PGSQL_SHARED_DEPENDENCIES)
+$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -77462,22 +80850,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PGSQL 1
+#define COMPILE_DL_PSPELL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PGSQL_SHARED=no
+    PHP_PSPELL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pgsql in
+  case ext/pspell in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -77492,7 +80880,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  for ac_src in pspell.c; do
   
       IFS=.
       set $ac_src
@@ -77515,87 +80903,533 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pgsql"
+        EXT_STATIC="$EXT_STATIC pspell"
         ;;
       *)
         
   
-  case ext/pgsql in
+  case ext/pspell in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pgsql"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pgsql/"; ac_bdir="ext/pgsql/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in pspell.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=pspell
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+	if test "$PHP_PSPELL" != "yes"; then
+	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
+	else
+	    PSPELL_SEARCH_DIRS="/usr/local /usr"
+	fi
+	for i in $PSPELL_SEARCH_DIRS; do
+		if test -f $i/include/pspell/pspell.h; then
+			PSPELL_DIR=$i
+			PSPELL_INCDIR=$i/include/pspell
+		elif test -f $i/include/pspell.h; then
+			PSPELL_DIR=$i
+			PSPELL_INCDIR=$i/include
+		fi
+	done
+
+	if test -z "$PSPELL_DIR"; then
+		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
+	fi
+
+	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR
+
+	
+
+  if test "$ext_shared" = "yes"; then
+    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
+    if test -n "$PSPELL_LIBDIR"; then
+      
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PSPELL_LIBDIR"; then
+    
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case pspell in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lpspell $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+		-L$PSPELL_LIBDIR
+	"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
   esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for new_aspell_config in -laspell""... $ac_c" 1>&6
+echo "configure:81187: checking for new_aspell_config in -laspell" >&5
+ac_lib_var=`echo aspell'_'new_aspell_config | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-laspell  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 81195 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char new_aspell_config();
+
+int main() {
+new_aspell_config()
+; return 0; }
+EOF
+if { (eval echo configure:81206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+		
+
+  if test "$ext_shared" = "yes"; then
+    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
+    if test -n "$PSPELL_LIBDIR"; then
+      
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PSPELL_LIBDIR"; then
+    
+  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_LIBDIR
+  else
+    
+    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+  fi
+
+    
+      
+  
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in pgsql.c; do
+  fi
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case aspell in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-laspell $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pgsql"
   fi
+
+
+	
   
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_aspell_new_aspell_config
+    
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pgsql
+	
+  if test "$PSPELL_INCDIR" != "/usr/include"; then
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PSPELL_INCDIR
+  else
+    
+    ep_dir="`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
   fi
 
+	
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"
+
+	cat >> confdefs.h <<\EOF
+#define HAVE_PSPELL 1
+EOF
+
 fi
 
 
 
+php_with_libedit=no
 
+echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
+echo "configure:81380: checking for libedit readline replacement" >&5
+# Check whether --with-libedit or --without-libedit was given.
+if test "${with_libedit+set}" = set; then
+  withval="$with_libedit"
+  PHP_LIBEDIT=$withval
+else
+  
+  PHP_LIBEDIT=no
+  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL
 
-php_enable_phar=yes
+fi
 
-echo $ac_n "checking for phar archive support""... $ac_c" 1>&6
-echo "configure:77591: checking for phar archive support" >&5
-# Check whether --enable-phar or --disable-phar was given.
-if test "${enable_phar+set}" = set; then
-  enableval="$enable_phar"
-  PHP_PHAR=$enableval
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_LIBEDIT in
+shared,*)
+  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_LIBEDIT=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_LIBEDIT" = "no"; then
+  
+php_with_readline=no
+
+echo $ac_n "checking for readline support""... $ac_c" 1>&6
+echo "configure:81425: checking for readline support" >&5
+# Check whether --with-readline or --without-readline was given.
+if test "${with_readline+set}" = set; then
+  withval="$with_readline"
+  PHP_READLINE=$withval
 else
   
-  PHP_PHAR=yes
-  test "$PHP_ENABLE_ALL" && PHP_PHAR=$PHP_ENABLE_ALL
+  PHP_READLINE=no
+  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL
 
 fi
 
@@ -77603,12 +81437,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_PHAR in
+case $PHP_READLINE in
 shared,*)
-  PHP_PHAR=`echo "$PHP_PHAR"|$SED 's/^shared,//'`
+  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_PHAR=yes
+  PHP_READLINE=yes
   ;;
 no)
   ext_output=no
@@ -77626,764 +81460,1178 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
+else
+    php_with_readline=no
+fi
+
+if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
+  for i in $PHP_READLINE /usr/local /usr; do
+    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
+  done
+
+  if test -z "$READLINE_DIR"; then
+    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
+  fi
 
-if test "$PHP_PHAR" != "no"; then
   
-  ext_builddir=ext/phar
-  ext_srcdir=$abs_srcdir/ext/phar
+  if test "$READLINE_DIR/include" != "/usr/include"; then
+    
+  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/include
+  else
+    
+    ep_dir="`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
+  fi
 
-  ac_extra=
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PHAR_SHARED=no
+  fi
+
+
+  PHP_READLINE_LIBS=""
+  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
+echo "configure:81511: checking for tgetent in -lncurses" >&5
+ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lncurses  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 81519 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tgetent();
+
+int main() {
+tgetent()
+; return 0; }
+EOF
+if { (eval echo configure:81530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
     
   
-  case ext/phar in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lncurses $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
   esac
+
+
+    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
+echo "configure:81575: checking for tgetent in -ltermcap" >&5
+ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ltermcap  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 81583 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tgetent();
+
+int main() {
+tgetent()
+; return 0; }
+EOF
+if { (eval echo configure:81594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
+    else
+      
   
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltermcap $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"
+    
+else
+  echo "$ac_t""no" 1>&6
+fi
+
   
+fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
+echo "configure:81741: checking for readline in -lreadline" >&5
+ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lreadline  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 81749 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char readline();
+
+int main() {
+readline()
+; return 0; }
+EOF
+if { (eval echo configure:81760: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+
+  if test "$ext_shared" = "yes"; then
+    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
+    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+      
+  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
 
+      fi
+    
+  fi
 
-    EXT_STATIC="$EXT_STATIC phar"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PHAR_SHARED=yes
+    
+
+  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+    
+  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
       
-  case ext/phar in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+  fi
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_phar="$shared_objects_phar $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  
+  case readline in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lreadline $LIBS" 
+   ;;
+  esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpphar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpphar.so '$ext_builddir'/phpphar.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPHAR, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHPPHAR_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpphar.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpphar.$suffix"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpphar.$suffix: $ext_builddir/phpphar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpphar.$suffix \$(phplibdir)
 
-$ext_builddir/phpphar.$suffix: \$(shared_objects_phar) \$(PHPPHAR_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_readline
+    
+    { echo "configure: error: readline library not found" 1>&2; exit 1; }
+  
+  
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phar.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phar.so '$ext_builddir'/phar.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHAR, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_phar) $(PHAR_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phar.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phar.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_phar"
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phar.$suffix: $ext_builddir/phar.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phar.$suffix \$(phplibdir)
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-$ext_builddir/phar.$suffix: \$(shared_objects_phar) \$(PHAR_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+    fi
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_PHAR 1
-EOF
 
-    fi
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PHAR_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
         
   
-  case ext/phar in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+      fi
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    ;;
+    esac
+  done
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  echo $ac_n "checking for rl_pending_input in -lreadline""... $ac_c" 1>&6
+echo "configure:81989: checking for rl_pending_input in -lreadline" >&5
+ac_lib_var=`echo readline'_'rl_pending_input | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lreadline  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 81997 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char rl_pending_input();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+rl_pending_input()
+; return 0; }
 EOF
-  done
-
+if { (eval echo configure:82008: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-        EXT_STATIC="$EXT_STATIC phar"
-        ;;
-      *)
-        
-  
-  case ext/phar in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/phar"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/phar/"; ac_bdir="ext/phar/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in util.c tar.c zip.c stream.c func_interceptors.c dirstream.c phar.c phar_object.c phar_path_check.c; do
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_rl_pending_input
+    
+    { echo "configure: error: invalid readline installation detected. Try --with-libedit instead." 1>&2; exit 1; }
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+fi
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC phar"
-  fi
   
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=phar
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-  fi
+    fi
+   ;;
+  esac
 
-  echo $ac_n "checking for phar openssl support""... $ac_c" 1>&6
-echo "configure:77925: checking for phar openssl support" >&5
-  if test "$PHP_HASH_SHARED" != "yes"; then
-    if test "$PHP_HASH" != "no"; then
-      cat >> confdefs.h <<\EOF
-#define PHAR_HASH_OK 1
-EOF
 
-    fi
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    echo "configure: warning: Phar: sha256/sha512 signature support disabled if ext/hash is built shared" 1>&2
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  if test "$PHP_OPENSSL_SHARED" = "yes"; then
-    echo "$ac_t""no (shared openssl)" 1>&6
-  else
-    if test "$PHP_OPENSSL" = "yes"; then
-      echo "$ac_t""yes" 1>&6
-      cat >> confdefs.h <<\EOF
-#define PHAR_HAVE_OPENSSL 1
-EOF
 
-    else
-      echo "$ac_t""no" 1>&6
-    fi
-  fi
-  
-  am_i_shared=$PHP_PHAR_SHARED
-  is_it_shared=$PHP_HASH_SHARED
-  is_it_enabled=$PHP_HASH
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension phar to build statically, but it
-depends on extension hash, which you've configured to build shared.
-You either need to build phar shared or build hash statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension phar, which depends on extension hash,
-but you've either not enabled hash, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-  am_i_shared=$PHP_PHAR_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension phar to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build phar shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension phar, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
-
-fi
+  fi
 
 
+      fi
+    
+  fi
 
-php_enable_posix=yes
+    ;;
+    esac
+  done
 
-echo $ac_n "checking whether to enable POSIX-like functions""... $ac_c" 1>&6
-echo "configure:78000: checking whether to enable POSIX-like functions" >&5
-# Check whether --enable-posix or --disable-posix was given.
-if test "${enable_posix+set}" = set; then
-  enableval="$enable_posix"
-  PHP_POSIX=$enableval
+  echo $ac_n "checking for rl_callback_read_char in -lreadline""... $ac_c" 1>&6
+echo "configure:82139: checking for rl_callback_read_char in -lreadline" >&5
+ac_lib_var=`echo readline'_'rl_callback_read_char | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_POSIX=yes
-  test "$PHP_ENABLE_ALL" && PHP_POSIX=$PHP_ENABLE_ALL
+  ac_save_LIBS="$LIBS"
+LIBS="-lreadline  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 82147 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char rl_callback_read_char();
 
+int main() {
+rl_callback_read_char()
+; return 0; }
+EOF
+if { (eval echo configure:82158: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_RL_CALLBACK_READ_CHAR 1
+EOF
 
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_POSIX in
-shared,*)
-  PHP_POSIX=`echo "$PHP_POSIX"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_POSIX=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_readline_rl_callback_read_char
+    
+  
+fi
 
 
-echo "$ac_t""$ext_output" 1>&6
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBREADLINE 1
+EOF
 
 
+elif test "$PHP_LIBEDIT" != "no"; then
 
+  for i in $PHP_LIBEDIT /usr/local /usr; do
+    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
+  done
 
-if test "$PHP_POSIX" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_POSIX 1
-EOF
+  if test -z "$LIBEDIT_DIR"; then
+    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
+  fi
 
   
-  ext_builddir=ext/posix
-  ext_srcdir=$abs_srcdir/ext/posix
-
-  ac_extra=
+  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/include
+  else
+    
+    ep_dir="`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_POSIX_SHARED=no
     
   
-  case ext/posix in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+  fi
 
-  old_IFS=$IFS
-  for ac_src in posix.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
+echo "configure:82242: checking for tgetent in -lncurses" >&5
+ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lncurses  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 82250 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tgetent();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+tgetent()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:82261: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case ncurses in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lncurses $LIBS" 
+   ;;
+  esac
 
 
-    EXT_STATIC="$EXT_STATIC posix"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_POSIX_SHARED=yes
-      
-  case ext/posix in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
+
+
   
-  
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
+echo "configure:82305: checking for tgetent in -ltermcap" >&5
+ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ltermcap  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 82313 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tgetent();
 
+int main() {
+tgetent()
+; return 0; }
+EOF
+if { (eval echo configure:82324: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  old_IFS=$IFS
-  for ac_src in posix.c; do
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
       
-      shared_objects_posix="$shared_objects_posix $ac_bdir$ac_obj.lo"
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
+    else
+      
+  
+  case termcap in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltermcap $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpposix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpposix.so '$ext_builddir'/phpposix.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPOSIX, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(PHPPOSIX_SHARED_LIBADD)'
-      ;;
-  esac
+    
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpposix.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpposix.$suffix"
-  fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpposix.$suffix: $ext_builddir/phpposix.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpposix.$suffix \$(phplibdir)
 
-$ext_builddir/phpposix.$suffix: \$(shared_objects_posix) \$(PHPPOSIX_SHARED_DEPENDENCIES)
-	$link_cmd
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    -L$READLINE_DIR/$PHP_LIBDIR 
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-EOF
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/posix.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/posix.so '$ext_builddir'/posix.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(POSIX, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_posix) $(POSIX_SHARED_LIBADD)'
-      ;;
+    fi
+   ;;
   esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/posix.$suffix"
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/posix.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_posix"
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/posix.$suffix: $ext_builddir/posix.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/posix.$suffix \$(phplibdir)
 
-$ext_builddir/posix.$suffix: \$(shared_objects_posix) \$(POSIX_SHARED_DEPENDENCIES)
-	$link_cmd
+      fi
+    
+  fi
 
-EOF
+    ;;
+    esac
+  done
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_POSIX 1
+  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
+echo "configure:82470: checking for readline in -ledit" >&5
+ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ledit  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 82478 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char readline();
+
+int main() {
+readline()
+; return 0; }
 EOF
+if { (eval echo configure:82489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    
+
+  if test "$ext_shared" = "yes"; then
+    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
+    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
+      
+  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_POSIX_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/posix in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    
+      if test "$ext_shared" = "yes"; then
+        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
+      else
+        
   
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in posix.c; do
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+      fi
+    
+  fi
 
+    fi
+  else
+    
 
-        EXT_STATIC="$EXT_STATIC posix"
-        ;;
-      *)
-        
+  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
   
-  case ext/posix in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/posix"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/posix/"; ac_bdir="ext/posix/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in posix.c; do
+  fi
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case edit in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ledit $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC posix"
   fi
+
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
+else
+  echo "$ac_t""no" 1>&6
 
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=posix
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_edit_readline
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
+    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
+  
+  
+fi
 
 
-  for ac_hdr in sys/mkdev.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:78342: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 78347 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:78352: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBEDIT 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
+fi
 
-  for ac_func in seteuid setegid setsid getsid setpgid getpgid ctermid mkfifo mknod getrlimit getlogin getgroups makedev initgroups getpwuid_r getgrgid_r
+if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
+  for ac_func in rl_completion_matches
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:78382: checking for $ac_func" >&5
+echo "configure:82630: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 78387 "configure"
+#line 82635 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -78406,7 +82654,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:78410: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:82658: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -78430,154 +82678,20 @@ else
 fi
 done
 
-
-  echo $ac_n "checking for working ttyname_r() implementation""... $ac_c" 1>&6
-echo "configure:78436: checking for working ttyname_r() implementation" >&5
-  if test "$cross_compiling" = yes; then
-  
-    echo "$ac_t""no, cannot detect working ttyname_r() when cross compiling. posix_ttyname() will be thread-unsafe" 1>&6
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 78443 "configure"
-#include "confdefs.h"
-
-#include <unistd.h>
-
-int main(int argc, char *argv[])
-{
-	char buf[64];
-
-	return ttyname_r(0, buf, 64) ? 1 : 0;
-}
-  
-EOF
-if { (eval echo configure:78456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    echo "$ac_t""yes" 1>&6
-    cat >> confdefs.h <<\EOF
-#define HAVE_TTYNAME_R 1
-EOF
-
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    echo "$ac_t""no, posix_ttyname() will be thread-unsafe" 1>&6
-  
-fi
-rm -fr conftest*
-fi
-
-
-  echo $ac_n "checking for utsname.domainname""... $ac_c" 1>&6
-echo "configure:78478: checking for utsname.domainname" >&5
-if eval "test \"`echo '$''{'ac_cv_have_utsname_domainname'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    cat > conftest.$ac_ext <<EOF
-#line 78484 "configure"
-#include "confdefs.h"
-
-      #define _GNU_SOURCE
-      #include <sys/utsname.h>
-    
-int main() {
-
-      return sizeof(((struct utsname *)0)->domainname);
-    
-; return 0; }
-EOF
-if { (eval echo configure:78496: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-      ac_cv_have_utsname_domainname=yes
-    
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-      ac_cv_have_utsname_domainname=no
-    
-fi
-rm -f conftest*
-  
-fi
-
-echo "$ac_t""$ac_cv_have_utsname_domainname" 1>&6
-  if test "$ac_cv_have_utsname_domainname" = yes; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_UTSNAME_DOMAINNAME 1
-EOF
-
-  fi
-fi
-
-
-
-php_with_pspell=no
-
-echo $ac_n "checking for PSPELL support""... $ac_c" 1>&6
-echo "configure:78527: checking for PSPELL support" >&5
-# Check whether --with-pspell or --without-pspell was given.
-if test "${with_pspell+set}" = set; then
-  withval="$with_pspell"
-  PHP_PSPELL=$withval
-else
   
-  PHP_PSPELL=no
-  test "$PHP_ENABLE_ALL" && PHP_PSPELL=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_PSPELL in
-shared,*)
-  PHP_PSPELL=`echo "$PHP_PSPELL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_PSPELL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_PSPELL" != "no"; then
-	
-  ext_builddir=ext/pspell
-  ext_srcdir=$abs_srcdir/ext/pspell
+  ext_builddir=ext/readline
+  ext_srcdir=$abs_srcdir/ext/readline
 
   ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_PSPELL_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
+    PHP_READLINE_SHARED=no
     
   
-  case ext/pspell in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78592,7 +82706,7 @@ if test "$PHP_PSPELL" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -78615,18 +82729,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC pspell"
+    EXT_STATIC="$EXT_STATIC readline"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_PSPELL_SHARED=yes
+      PHP_READLINE_SHARED=yes
       
-  case ext/pspell in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78641,14 +82755,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_pspell="$shared_objects_pspell $ac_bdir$ac_obj.lo"
+      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -78671,31 +82785,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phppspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phppspell.so '$ext_builddir'/phppspell.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPPSPELL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREADLINE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PHPPSPELL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phppspell.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phppspell.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phppspell.$suffix: $ext_builddir/phppspell.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phppspell.$suffix \$(phplibdir)
+\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)
 
-$ext_builddir/phppspell.$suffix: \$(shared_objects_pspell) \$(PHPPSPELL_SHARED_DEPENDENCIES)
+$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -78708,31 +82822,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/pspell.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/pspell.so '$ext_builddir'/pspell.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PSPELL, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(READLINE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_pspell) $(PSPELL_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/pspell.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/pspell.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_pspell"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/pspell.$suffix: $ext_builddir/pspell.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/pspell.$suffix \$(phplibdir)
+\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)
 
-$ext_builddir/pspell.$suffix: \$(shared_objects_pspell) \$(PSPELL_SHARED_DEPENDENCIES)
+$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -78740,22 +82854,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_PSPELL 1
+#define COMPILE_DL_READLINE 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_PSPELL_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
+    PHP_READLINE_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/pspell in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78770,7 +82884,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -78793,15 +82907,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC pspell"
+        EXT_STATIC="$EXT_STATIC readline"
         ;;
       *)
         
   
-  case ext/pspell in
+  case ext/readline in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/pspell"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/pspell/"; ac_bdir="ext/pspell/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -78816,7 +82930,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in pspell.c; do
+  for ac_src in readline.c; do
   
       IFS=.
       set $ac_src
@@ -78841,7 +82955,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC pspell"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
   fi
   
   
@@ -78850,136 +82964,93 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=pspell
+    PHP_PECL_EXTENSION=readline
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-	if test "$PHP_PSPELL" != "yes"; then
-	    PSPELL_SEARCH_DIRS=$PHP_PSPELL
-	else
-	    PSPELL_SEARCH_DIRS="/usr/local /usr"
-	fi
-	for i in $PSPELL_SEARCH_DIRS; do
-		if test -f $i/include/pspell/pspell.h; then
-			PSPELL_DIR=$i
-			PSPELL_INCDIR=$i/include/pspell
-		elif test -f $i/include/pspell.h; then
-			PSPELL_DIR=$i
-			PSPELL_INCDIR=$i/include
-		fi
-	done
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"
 
-	if test -z "$PSPELL_DIR"; then
-		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
-	fi
+fi
 
-	PSPELL_LIBDIR=$PSPELL_DIR/$PHP_LIBDIR
 
-	
 
-  if test "$ext_shared" = "yes"; then
-    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
-    if test -n "$PSPELL_LIBDIR"; then
-      
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
-  else
-    
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
-  fi
+php_with_recode=no
 
-    
-      if test "$ext_shared" = "yes"; then
-        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+echo $ac_n "checking for recode support""... $ac_c" 1>&6
+echo "configure:82984: checking for recode support" >&5
+# Check whether --with-recode or --without-recode was given.
+if test "${with_recode+set}" = set; then
+  withval="$with_recode"
+  PHP_RECODE=$withval
+else
   
-  fi
-
+  PHP_RECODE=no
+  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL
 
-      fi
-    
-  fi
+fi
 
-    fi
-  else
-    
 
-  if test -n "$PSPELL_LIBDIR"; then
-    
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
-  else
-    
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
-  fi
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_RECODE in
+shared,*)
+  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_RECODE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-    
-  fi
 
-  fi
-  
-  
-  case pspell in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lpspell $LIBS" 
-   ;;
-  esac
+echo "$ac_t""$ext_output" 1>&6
 
 
 
 
-  fi
+if test "$PHP_RECODE" != "no"; then
+  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"
 
+  for i in $RECODE_LIST; do
+    if test -f $i/include/recode.h; then
+      RECODE_DIR=$i
+      RECODE_INC=include
+      RECODE_LIB=$PHP_LIBDIR
+    fi
+    if test -f $i/include/recode/recode.h; then
+      RECODE_DIR=$i
+      RECODE_INC=include/recode
+      RECODE_LIB=$PHP_LIBDIR/recode
+    fi
+    if test -f $i/recode/include/recode.h; then
+      RECODE_DIR=$i/recode
+      RECODE_INC=include
+      RECODE_LIB=$PHP_LIBDIR
+    fi
+    test -n "$RECODE_DIR" && break
+  done
 
+  if test -z "$RECODE_DIR"; then
+    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
+  fi
 
-		
+  
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-		-L$PSPELL_LIBDIR
-	"
+    -L$RECODE_DIR/$RECODE_LIB
+  "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -79072,27 +83143,27 @@ EOF
     esac
   done
 
-  echo $ac_n "checking for new_aspell_config in -laspell""... $ac_c" 1>&6
-echo "configure:79077: checking for new_aspell_config in -laspell" >&5
-ac_lib_var=`echo aspell'_'new_aspell_config | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
+echo "configure:83148: checking for recode_format_table in -lrecode" >&5
+ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-laspell  $LIBS"
+LIBS="-lrecode  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 79085 "configure"
+#line 83156 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char new_aspell_config();
+char recode_format_table();
 
 int main() {
-new_aspell_config()
+recode_format_table()
 ; return 0; }
 EOF
-if { (eval echo configure:79096: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:83167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -79111,28 +83182,28 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-		
+    
 
   if test "$ext_shared" = "yes"; then
-    PSPELL_SHARED_LIBADD="-laspell $PSPELL_SHARED_LIBADD"
-    if test -n "$PSPELL_LIBDIR"; then
+    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
+    if test -n "$RECODE_DIR/$RECODE_LIB"; then
       
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
     
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
   else
     
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        PSPELL_SHARED_LIBADD="-L$ai_p $PSPELL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && PSPELL_SHARED_LIBADD="$ld_runpath_switch$ai_p $PSPELL_SHARED_LIBADD"
+        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
       else
         
   
@@ -79158,451 +83229,22 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   else
     
 
-  if test -n "$PSPELL_LIBDIR"; then
-    
-  if test "$PSPELL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PSPELL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_LIBDIR
-  else
-    
-    ep_dir="`echo $PSPELL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case aspell in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-laspell $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-	
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_aspell_new_aspell_config
-    
-  
-fi
-
-
-	
-  if test "$PSPELL_INCDIR" != "/usr/include"; then
-    
-  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PSPELL_INCDIR
-  else
-    
-    ep_dir="`echo $PSPELL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+  if test -n "$RECODE_DIR/$RECODE_LIB"; then
     
-  fi
-
-  fi
-
-	
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"
-
-	cat >> confdefs.h <<\EOF
-#define HAVE_PSPELL 1
-EOF
-
-fi
-
-
-
-php_with_libedit=no
-
-echo $ac_n "checking for libedit readline replacement""... $ac_c" 1>&6
-echo "configure:79270: checking for libedit readline replacement" >&5
-# Check whether --with-libedit or --without-libedit was given.
-if test "${with_libedit+set}" = set; then
-  withval="$with_libedit"
-  PHP_LIBEDIT=$withval
-else
-  
-  PHP_LIBEDIT=no
-  test "$PHP_ENABLE_ALL" && PHP_LIBEDIT=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_LIBEDIT in
-shared,*)
-  PHP_LIBEDIT=`echo "$PHP_LIBEDIT"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_LIBEDIT=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_LIBEDIT" = "no"; then
-  
-php_with_readline=no
-
-echo $ac_n "checking for readline support""... $ac_c" 1>&6
-echo "configure:79315: checking for readline support" >&5
-# Check whether --with-readline or --without-readline was given.
-if test "${with_readline+set}" = set; then
-  withval="$with_readline"
-  PHP_READLINE=$withval
-else
-  
-  PHP_READLINE=no
-  test "$PHP_ENABLE_ALL" && PHP_READLINE=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_READLINE in
-shared,*)
-  PHP_READLINE=`echo "$PHP_READLINE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_READLINE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-else
-    php_with_readline=no
-fi
-
-if test "$PHP_READLINE" && test "$PHP_READLINE" != "no"; then
-  for i in $PHP_READLINE /usr/local /usr; do
-    test -f $i/include/readline/readline.h && READLINE_DIR=$i && break
-  done
-
-  if test -z "$READLINE_DIR"; then
-    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
-  fi
-
-  
-  if test "$READLINE_DIR/include" != "/usr/include"; then
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
     
-  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/include
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
   else
     
-    ep_dir="`echo $READLINE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
   fi
 
-
-  PHP_READLINE_LIBS=""
-  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
-echo "configure:79401: checking for tgetent in -lncurses" >&5
-ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lncurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79409 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:79420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    
-  
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
-    else
-      
-  
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lncurses $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    PHP_READLINE_LIBS="$PHP_READLINE_LIBS -lncurses"
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
-echo "configure:79465: checking for tgetent in -ltermcap" >&5
-ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltermcap  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79473 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
-
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:79484: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-      
-  
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
-    else
-      
-  
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltermcap $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-      PHP_READLINE_LIBS="$PHP_READLINE_LIBS -ltermcap"
     
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  
-fi
-
-
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -79618,75 +83260,75 @@ fi
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
+  
+  
+  case recode in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lrecode $LIBS" 
+   ;;
+  esac
 
-  echo $ac_n "checking for readline in -lreadline""... $ac_c" 1>&6
-echo "configure:79631: checking for readline in -lreadline" >&5
-ac_lib_var=`echo readline'_'readline | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+
+
+  fi
+
+
+  
+  
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79639 "configure"
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_recode_recode_format_table
+    
+    old_LDFLAGS=$LDFLAGS
+    old_LIBS=$LIBS
+    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
+    LIBS="$LIBS -lrecode"
+    cat > conftest.$ac_ext <<EOF
+#line 83297 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char readline();
 
+char *program_name;
+    
 int main() {
-readline()
+
+recode_format_table();
+    
 ; return 0; }
 EOF
-if { (eval echo configure:79650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+if { (eval echo configure:83308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
+      
 
   if test "$ext_shared" = "yes"; then
-    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
-    if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
+    if test -n "$RECODE_DIR/$RECODE_LIB"; then
       
-  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
     
-  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
   else
     
-    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
+        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
       else
         
   
@@ -79712,18 +83354,18 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   else
     
 
-  if test -n "$READLINE_DIR/$PHP_LIBDIR"; then
+  if test -n "$RECODE_DIR/$RECODE_LIB"; then
     
-  if test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$READLINE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
     
-  if test -z "$READLINE_DIR/$PHP_LIBDIR" || echo "$READLINE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$READLINE_DIR/$PHP_LIBDIR
+  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_LIB
   else
     
-    ep_dir="`echo $READLINE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$READLINE_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
   fi
 
     
@@ -79749,10 +83391,10 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
   
   
-  case readline in
+  case recode in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lreadline $LIBS" 
+      DLIBS="-lrecode $DLIBS" 
    ;;
   esac
 
@@ -79762,826 +83404,1022 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
   fi
 
 
-  
-  
-else
-  echo "$ac_t""no" 1>&6
+      cat >> confdefs.h <<\EOF
+#define HAVE_BROKEN_RECODE 1
+EOF
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_readline
     
-    { echo "configure: error: readline library not found" 1>&2; exit 1; }
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
+    
+fi
+rm -f conftest*
+    LIBS=$old_LIBS
+    LDFLAGS=$old_LDFLAGS
   
   
 fi
 
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBRECODE 1
+EOF
+
   
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
+  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
+    
+  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
+    ai_p=$RECODE_DIR/$RECODE_INC
+  else
+    
+    ep_dir="`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
+  fi
+
+    
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
       else
-        
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"
+
+  for ac_hdr in stdbool.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:83471: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 83476 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:83481: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+  ext_builddir=ext/recode
+  ext_srcdir=$abs_srcdir/ext/recode
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_RECODE_SHARED=no
+    
+  
+  case ext/recode in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in recode.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC recode"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_RECODE_SHARED=yes
       
+  case ext/recode in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in recode.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
+      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPRECODE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
+  fi
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)
+
+$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(RECODE, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)
+
+$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_RECODE 1
+EOF
 
     fi
-   ;;
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_RECODE_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/recode in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  old_IFS=$IFS
+  for ac_src in recode.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC recode"
+        ;;
+      *)
         
   
+  case ext/recode in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in recode.c; do
   
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
   fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
 
-      fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=recode
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-    ;;
-    esac
-  done
+fi
 
-  echo $ac_n "checking for rl_pending_input in -lreadline""... $ac_c" 1>&6
-echo "configure:79879: checking for rl_pending_input in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_pending_input | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 79887 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_pending_input();
 
-int main() {
-rl_pending_input()
-; return 0; }
+cat >> confdefs.h <<\EOF
+#define HAVE_REFLECTION 1
 EOF
-if { (eval echo configure:79898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_rl_pending_input
-    
-    { echo "configure: error: invalid readline installation detected. Try --with-libedit instead." 1>&2; exit 1; }
-  
-  
-fi
+  ext_builddir=ext/reflection
+  ext_srcdir=$abs_srcdir/ext/reflection
 
+  ac_extra=
 
+  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
+    PHP_REFLECTION_SHARED=no
+    
   
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR $PHP_READLINE_LIBS
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  case ext/reflection in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_reflection.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    EXT_STATIC="$EXT_STATIC reflection"
+    if test "no" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
+    fi
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    if test "no" = "shared" || test "no" = "yes"; then
+      PHP_REFLECTION_SHARED=yes
+      
+  case ext/reflection in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in php_reflection.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for rl_callback_read_char in -lreadline""... $ac_c" 1>&6
-echo "configure:80029: checking for rl_callback_read_char in -lreadline" >&5
-ac_lib_var=`echo readline'_'rl_callback_read_char | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lreadline  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 80037 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char rl_callback_read_char();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-rl_callback_read_char()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:80048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    cat >> confdefs.h <<\EOF
-#define HAVE_RL_CALLBACK_READ_CHAR 1
-EOF
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-  
-  
-else
-  echo "$ac_t""no" 1>&6
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREFLECTION, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
+      ;;
+  esac
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_readline_rl_callback_read_char
-    
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
+  fi
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBREADLINE 1
-EOF
+$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
+	$link_cmd
 
+EOF
 
-elif test "$PHP_LIBEDIT" != "no"; then
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-  for i in $PHP_LIBEDIT /usr/local /usr; do
-    test -f $i/include/editline/readline.h && LIBEDIT_DIR=$i && break
-  done
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(REFLECTION, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
+      ;;
+  esac
 
-  if test -z "$LIBEDIT_DIR"; then
-    { echo "configure: error: Please reinstall libedit - I cannot find readline.h" 1>&2; exit 1; }
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
   fi
-
   
-  if test "$LIBEDIT_DIR/include" != "/usr/include"; then
-    
-  if test -z "$LIBEDIT_DIR/include" || echo "$LIBEDIT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/include
-  else
-    
-    ep_dir="`echo $LIBEDIT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/include\"`"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)
+
+$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_REFLECTION 1
+EOF
+
+    fi
   fi
 
-    
+  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
+    PHP_REFLECTION_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/reflection in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
-echo "configure:80132: checking for tgetent in -lncurses" >&5
-ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lncurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 80140 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
+  old_IFS=$IFS
+  for ac_src in php_reflection.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-int main() {
-tgetent()
-; return 0; }
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:80151: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+        EXT_STATIC="$EXT_STATIC reflection"
+        ;;
+      *)
+        
   
-    
+  case ext/reflection in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD" 
-    else
-      
   
-  case ncurses in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lncurses $LIBS" 
-   ;;
-  esac
-
 
-    fi
-   ;;
-  esac
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in php_reflection.c; do
   
-else
-  echo "$ac_t""no" 1>&6
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
-echo "configure:80195: checking for tgetent in -ltermcap" >&5
-ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltermcap  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 80203 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgetent();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-tgetent()
-; return 0; }
-EOF
-if { (eval echo configure:80214: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
+  fi
   
-      
   
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD" 
-    else
-      
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  case termcap in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltermcap $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=reflection
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  fi
 
-    
-else
-  echo "$ac_t""no" 1>&6
-fi
 
+
+
+php_enable_session=yes
+
+echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
+echo "configure:84104: checking whether to enable PHP sessions" >&5
+# Check whether --enable-session or --disable-session was given.
+if test "${enable_session+set}" = set; then
+  enableval="$enable_session"
+  PHP_SESSION=$enableval
+else
   
+  PHP_SESSION=yes
+  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL
+
 fi
 
 
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$READLINE_DIR/$PHP_LIBDIR 
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SESSION in
+shared,*)
+  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SESSION=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-    fi
-   ;;
-  esac
 
+echo "$ac_t""$ext_output" 1>&6
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
 
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+php_with_mm=no
 
-  echo $ac_n "checking for readline in -ledit""... $ac_c" 1>&6
-echo "configure:80360: checking for readline in -ledit" >&5
-ac_lib_var=`echo edit'_'readline | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo $ac_n "checking for mm support""... $ac_c" 1>&6
+echo "configure:84148: checking for mm support" >&5
+# Check whether --with-mm or --without-mm was given.
+if test "${with_mm+set}" = set; then
+  withval="$with_mm"
+  PHP_MM=$withval
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-ledit  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 80368 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char readline();
+  
+  PHP_MM=no
+  
 
-int main() {
-readline()
-; return 0; }
-EOF
-if { (eval echo configure:80379: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
 
-  if test "$ext_shared" = "yes"; then
-    READLINE_SHARED_LIBADD="-ledit $READLINE_SHARED_LIBADD"
-    if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
-      
-  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
-  fi
+ext_output=$PHP_MM
+echo "$ac_t""$ext_output" 1>&6
 
-    
-      if test "$ext_shared" = "yes"; then
-        READLINE_SHARED_LIBADD="-L$ai_p $READLINE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && READLINE_SHARED_LIBADD="$ld_runpath_switch$ai_p $READLINE_SHARED_LIBADD"
-      else
-        
-  
+
+
+
+if test "$PHP_SESSION" != "no"; then
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
+echo "configure:84170: checking whether pwrite works" >&5
+if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  if test "$cross_compiling" = yes; then
   
-  fi
-
+    ac_cv_pwrite=no
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 84182 "configure"
+#include "confdefs.h"
 
-      fi
-    
-  fi
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
 
-    fi
-  else
-    
+    main() {
+    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
 
-  if test -n "$LIBEDIT_DIR/$PHP_LIBDIR"; then
-    
-  if test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$LIBEDIT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$LIBEDIT_DIR/$PHP_LIBDIR" || echo "$LIBEDIT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$LIBEDIT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $LIBEDIT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$LIBEDIT_DIR/$PHP_LIBDIR\"`"
-  fi
+    if (fd < 0) exit(1);
+    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
 
-    
-      
   
+EOF
+if { (eval echo configure:84203: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    ac_cv_pwrite=yes
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  fi
-
+    ac_cv_pwrite=no
+  
+fi
+rm -fr conftest*
+fi
 
-    
-  fi
 
-  fi
+    if test "$ac_cv_pwrite" = "no"; then
+      
+  if test "$cross_compiling" = yes; then
   
+    ac_cv_pwrite=no
   
-  case edit in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ledit $LIBS" 
-   ;;
-  esac
-
-
+else
+  cat > conftest.$ac_ext <<EOF
+#line 84228 "configure"
+#include "confdefs.h"
 
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
+ssize_t pwrite(int, void *, size_t, off64_t);
+    main() {
+    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
 
-  fi
+    if (fd < 0) exit(1);
+    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
 
   
+EOF
+if { (eval echo configure:84249: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
+    ac_cv_pwrite=yes
   
 else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_edit_readline
-    
-    { echo "configure: error: edit library required by readline not found" 1>&2; exit 1; }
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
+    ac_cv_pwrite=no
   
 fi
+rm -fr conftest*
+fi
 
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBEDIT 1
+      if test "$ac_cv_pwrite" = "yes"; then
+        ac_cv_pwrite=64
+      fi
+    fi
+  
+fi
+
+echo "$ac_t""$ac_cv_pwrite" 1>&6
+
+  if test "$ac_cv_pwrite" != "no"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_PWRITE 1
 EOF
 
-fi
+    if test "$ac_cv_pwrite" = "64"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_PWRITE_64 1
+EOF
 
-if test "$PHP_READLINE" != "no" || test "$PHP_LIBEDIT" != "no"; then
-  for ac_func in rl_completion_matches
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:80520: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+    fi
+  fi  
+
+  
+  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
+echo "configure:84290: checking whether pread works" >&5
+if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
+  
+    
+  echo test > conftest_in
+  if test "$cross_compiling" = yes; then
+  
+    ac_cv_pread=no
+  
+else
   cat > conftest.$ac_ext <<EOF
-#line 80525 "configure"
+#line 84303 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
 
-; return 0; }
+    main() {
+    char buf[3]; 
+    int fd = open("conftest_in", O_RDONLY);
+    if (fd < 0) exit(1);
+    if (pread(fd, buf, 2, 0) != 2) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
+  
 EOF
-if { (eval echo configure:80548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+if { (eval echo configure:84323: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_cv_pread=yes
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  rm -fr conftest*
+  
+    ac_cv_pread=no
+  
 fi
-rm -f conftest*
+rm -fr conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  rm -f conftest_in
+
+    if test "$ac_cv_pread" = "no"; then
+      
+  echo test > conftest_in
+  if test "$cross_compiling" = yes; then
+  
+    ac_cv_pread=no
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 84350 "configure"
+#include "confdefs.h"
+
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
+#include <unistd.h>
+#include <errno.h>
+ssize_t pread(int, void *, size_t, off64_t);
+    main() {
+    char buf[3]; 
+    int fd = open("conftest_in", O_RDONLY);
+    if (fd < 0) exit(1);
+    if (pread(fd, buf, 2, 0) != 2) exit(1);
+    /* Linux glibc breakage until 2.2.5 */
+    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
+    exit(0);
+    }
+  
 EOF
- 
+if { (eval echo configure:84370: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_cv_pread=yes
+  
 else
-  echo "$ac_t""no" 1>&6
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    ac_cv_pread=no
+  
+fi
+rm -fr conftest*
 fi
-done
 
+  rm -f conftest_in
+
+      if test "$ac_cv_pread" = "yes"; then
+        ac_cv_pread=64
+      fi
+    fi
   
-  ext_builddir=ext/readline
-  ext_srcdir=$abs_srcdir/ext/readline
+fi
+
+echo "$ac_t""$ac_cv_pread" 1>&6
+
+  if test "$ac_cv_pread" != "no"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_PREAD 1
+EOF
+
+    if test "$ac_cv_pread" = "64"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_PREAD_64 1
+EOF
+
+    fi
+  fi  
+
+  
+  ext_builddir=ext/session
+  ext_srcdir=$abs_srcdir/ext/session
 
   ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" != "cli"; then
-    PHP_READLINE_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SESSION_SHARED=no
     
   
-  case ext/readline in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80596,7 +84434,7 @@ done
 
 
   old_IFS=$IFS
-  for ac_src in readline.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -80619,18 +84457,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC readline"
+    EXT_STATIC="$EXT_STATIC session"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_READLINE_SHARED=yes
+      PHP_SESSION_SHARED=yes
       
-  case ext/readline in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80645,14 +84483,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in readline.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_readline="$shared_objects_readline $ac_bdir$ac_obj.lo"
+      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -80675,31 +84513,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreadline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreadline.so '$ext_builddir'/phpreadline.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREADLINE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSESSION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(PHPREADLINE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreadline.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreadline.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpreadline.$suffix: $ext_builddir/phpreadline.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreadline.$suffix \$(phplibdir)
+\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)
 
-$ext_builddir/phpreadline.$suffix: \$(shared_objects_readline) \$(PHPREADLINE_SHARED_DEPENDENCIES)
+$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -80712,31 +84550,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/readline.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/readline.so '$ext_builddir'/readline.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(READLINE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SESSION, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_readline) $(READLINE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/readline.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/readline.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_readline"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/readline.$suffix: $ext_builddir/readline.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/readline.$suffix \$(phplibdir)
+\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)
 
-$ext_builddir/readline.$suffix: \$(shared_objects_readline) \$(READLINE_SHARED_DEPENDENCIES)
+$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -80744,22 +84582,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_READLINE 1
+#define COMPILE_DL_SESSION 1
 EOF
 
     fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "cli" = "cli"; then
-    PHP_READLINE_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SESSION_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/readline in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80774,7 +84612,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in readline.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -80797,15 +84635,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC readline"
+        EXT_STATIC="$EXT_STATIC session"
         ;;
       *)
         
   
-  case ext/readline in
+  case ext/session in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/readline"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/readline/"; ac_bdir="ext/readline/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -80820,7 +84658,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in readline.c; do
+  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
   
       IFS=.
       set $ac_src
@@ -80845,7 +84683,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC readline"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
   fi
   
   
@@ -80854,371 +84692,110 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=readline
+    PHP_PECL_EXTENSION=session
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"
-
-fi
-
-
-
-php_with_recode=no
-
-echo $ac_n "checking for recode support""... $ac_c" 1>&6
-echo "configure:80874: checking for recode support" >&5
-# Check whether --with-recode or --without-recode was given.
-if test "${with_recode+set}" = set; then
-  withval="$with_recode"
-  PHP_RECODE=$withval
-else
-  
-  PHP_RECODE=no
-  test "$PHP_ENABLE_ALL" && PHP_RECODE=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_RECODE in
-shared,*)
-  PHP_RECODE=`echo "$PHP_RECODE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_RECODE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_RECODE" != "no"; then
-  RECODE_LIST="$PHP_RECODE /usr/local /usr /opt"
-
-  for i in $RECODE_LIST; do
-    if test -f $i/include/recode.h; then
-      RECODE_DIR=$i
-      RECODE_INC=include
-      RECODE_LIB=$PHP_LIBDIR
-    fi
-    if test -f $i/include/recode/recode.h; then
-      RECODE_DIR=$i
-      RECODE_INC=include/recode
-      RECODE_LIB=$PHP_LIBDIR/recode
-    fi
-    if test -f $i/recode/include/recode.h; then
-      RECODE_DIR=$i/recode
-      RECODE_INC=include
-      RECODE_LIB=$PHP_LIBDIR
-    fi
-    test -n "$RECODE_DIR" && break
-  done
-
-  if test -z "$RECODE_DIR"; then
-    { echo "configure: error: Can not find recode.h anywhere under $RECODE_LIST." 1>&2; exit 1; }
-  fi
-
-  
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    -L$RECODE_DIR/$RECODE_LIB
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  am_i_shared=$PHP_SESSION_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension session to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build session shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
   fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension session, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  am_i_shared=$PHP_SESSION_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension session to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build session shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
   fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for recode_format_table in -lrecode""... $ac_c" 1>&6
-echo "configure:81038: checking for recode_format_table in -lrecode" >&5
-ac_lib_var=`echo recode'_'recode_format_table | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lrecode  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 81046 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char recode_format_table();
-
-int main() {
-recode_format_table()
-; return 0; }
-EOF
-if { (eval echo configure:81057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-    
-
-  if test "$ext_shared" = "yes"; then
-    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
-    if test -n "$RECODE_DIR/$RECODE_LIB"; then
-      
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
-    
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
-  else
-    
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension session, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
-      else
-        
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"
+
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$RECODE_DIR/$RECODE_LIB"; then
-    
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
-    
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
-  else
-    
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
-  fi
-
-    
+    header_path=ext/session
+    for header_file in php_session.h mod_files.h mod_user.h; do
+      hp_hf="$header_path/$header_file"
       
   
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+    eval "INSTALLHEADERS$unique=set"
     
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
   fi
 
-  fi
-  
+    done 
   
-  case recode in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lrecode $LIBS" 
-   ;;
-  esac
 
+  cat >> confdefs.h <<\EOF
+#define HAVE_PHP_SESSION 1
+EOF
 
+fi
 
+if test "$PHP_MM" != "no"; then
+  for i in $PHP_MM /usr/local /usr; do
+    test -f "$i/include/mm.h" && MM_DIR=$i && break
+  done
 
+  if test -z "$MM_DIR" ; then
+    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
   fi
-
-
   
   
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_recode_recode_format_table
-    
-    old_LDFLAGS=$LDFLAGS
-    old_LIBS=$LIBS
-    LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
-    LIBS="$LIBS -lrecode"
-    cat > conftest.$ac_ext <<EOF
-#line 81187 "configure"
-#include "confdefs.h"
-
-char *program_name;
-    
-int main() {
-
-recode_format_table();
-    
-; return 0; }
-EOF
-if { (eval echo configure:81198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  
-      
 
   if test "$ext_shared" = "yes"; then
-    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
-    if test -n "$RECODE_DIR/$RECODE_LIB"; then
+    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
+    if test -n "$MM_DIR/$PHP_LIBDIR"; then
       
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        RECODE_SHARED_LIBADD="-L$ai_p $RECODE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && RECODE_SHARED_LIBADD="$ld_runpath_switch$ai_p $RECODE_SHARED_LIBADD"
+        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
       else
         
   
@@ -81244,18 +84821,18 @@ if { (eval echo configure:81198: \"$ac_l
   else
     
 
-  if test -n "$RECODE_DIR/$RECODE_LIB"; then
+  if test -n "$MM_DIR/$PHP_LIBDIR"; then
     
-  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/$PHP_LIBDIR" && test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
+  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_LIB
+  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -81277,59 +84854,34 @@ if { (eval echo configure:81198: \"$ac_l
 
     
   fi
-
-  fi
-  
-  
-  case recode in
-  c|c_r|pthread*) ;;
-  *) 
-      DLIBS="-lrecode $DLIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-      cat >> confdefs.h <<\EOF
-#define HAVE_BROKEN_RECODE 1
-EOF
-
-    
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-      { echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }
-    
-fi
-rm -f conftest*
-    LIBS=$old_LIBS
-    LDFLAGS=$old_LDFLAGS
+
+  fi
   
   
-fi
+  case mm in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lmm $LIBS" 
+   ;;
+  esac
 
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBRECODE 1
-EOF
+
+
+  fi
+
 
   
-  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
+  if test "$MM_DIR/include" != "/usr/include"; then
     
-  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
-    ai_p=$RECODE_DIR/$RECODE_INC
+  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$MM_DIR/include
   else
     
-    ep_dir="`echo $RECODE_DIR/$RECODE_INC|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
+    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
   fi
 
     
@@ -81351,62 +84903,92 @@ EOF
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"
+  
+    for header_file in ext/session/mod_mm.h; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
-  for ac_hdr in stdbool.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:81361: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 81366 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
+    done 
+  
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_LIBMM 1
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:81371: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+
+
+php_enable_shmop=no
+
+echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
+echo "configure:84934: checking whether to enable shmop support" >&5
+# Check whether --enable-shmop or --disable-shmop was given.
+if test "${enable_shmop+set}" = set; then
+  enableval="$enable_shmop"
+  PHP_SHMOP=$enableval
 else
-  echo "$ac_t""no" 1>&6
+  
+  PHP_SHMOP=no
+  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL
+
 fi
-done
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SHMOP in
+shared,*)
+  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SHMOP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SHMOP" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_SHMOP 1
+EOF
 
   
-  ext_builddir=ext/recode
-  ext_srcdir=$abs_srcdir/ext/recode
+  ext_builddir=ext/shmop
+  ext_srcdir=$abs_srcdir/ext/shmop
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_RECODE_SHARED=no
+    PHP_SHMOP_SHARED=no
     
   
-  case ext/recode in
+  case ext/shmop in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81421,7 +85003,7 @@ done
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in shmop.c; do
   
       IFS=.
       set $ac_src
@@ -81444,18 +85026,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC recode"
+    EXT_STATIC="$EXT_STATIC shmop"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_RECODE_SHARED=yes
+      PHP_SHMOP_SHARED=yes
       
-  case ext/recode in
+  case ext/shmop in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81470,14 +85052,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in shmop.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_recode="$shared_objects_recode $ac_bdir$ac_obj.lo"
+      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -81500,31 +85082,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phprecode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phprecode.so '$ext_builddir'/phprecode.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPRECODE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSHMOP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(PHPRECODE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phprecode.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phprecode.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phprecode.$suffix: $ext_builddir/phprecode.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phprecode.$suffix \$(phplibdir)
+\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)
 
-$ext_builddir/phprecode.$suffix: \$(shared_objects_recode) \$(PHPRECODE_SHARED_DEPENDENCIES)
+$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81537,31 +85119,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/recode.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/recode.so '$ext_builddir'/recode.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(RECODE, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SHMOP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_recode) $(RECODE_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/recode.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/recode.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_recode"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/recode.$suffix: $ext_builddir/recode.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/recode.$suffix \$(phplibdir)
+\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)
 
-$ext_builddir/recode.$suffix: \$(shared_objects_recode) \$(RECODE_SHARED_DEPENDENCIES)
+$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81569,22 +85151,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_RECODE 1
+#define COMPILE_DL_SHMOP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_RECODE_SHARED=no
+    PHP_SHMOP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/recode in
+  case ext/shmop in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81599,7 +85181,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in shmop.c; do
   
       IFS=.
       set $ac_src
@@ -81622,15 +85204,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC recode"
+        EXT_STATIC="$EXT_STATIC shmop"
         ;;
       *)
         
   
-  case ext/recode in
+  case ext/shmop in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/recode"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/recode/"; ac_bdir="ext/recode/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81645,7 +85227,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in recode.c; do
+  for ac_src in shmop.c; do
   
       IFS=.
       set $ac_src
@@ -81670,7 +85252,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC recode"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
   fi
   
   
@@ -81679,7 +85261,7 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=recode
+    PHP_PECL_EXTENSION=shmop
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
@@ -81688,24 +85270,321 @@ EOF
 fi
 
 
-cat >> confdefs.h <<\EOF
-#define HAVE_REFLECTION 1
+
+php_enable_simplexml=yes
+
+echo $ac_n "checking whether to enable SimpleXML support""... $ac_c" 1>&6
+echo "configure:85278: checking whether to enable SimpleXML support" >&5
+# Check whether --enable-simplexml or --disable-simplexml was given.
+if test "${enable_simplexml+set}" = set; then
+  enableval="$enable_simplexml"
+  PHP_SIMPLEXML=$enableval
+else
+  
+  PHP_SIMPLEXML=yes
+  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SIMPLEXML in
+shared,*)
+  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SIMPLEXML=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:85323: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+fi
+
+if test "$PHP_SIMPLEXML" != "no"; then
+
+  if test "$PHP_LIBXML" = "no"; then   
+    { echo "configure: error: SimpleXML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
+  fi
+
+  
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:85351: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:85509: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $SIMPLEXML_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 85525 "configure"
+#include "confdefs.h"
+
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
+EOF
+if { (eval echo configure:85536: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
+fi
+
+
+      
+fi
+
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
 
+      fi
+      
+    cat >> confdefs.h <<\EOF
+#define HAVE_SIMPLEXML 1
+EOF
 
-  ext_builddir=ext/reflection
-  ext_srcdir=$abs_srcdir/ext/reflection
+    
+  ext_builddir=ext/simplexml
+  ext_srcdir=$abs_srcdir/ext/simplexml
 
   ac_extra=
 
-  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
-    PHP_REFLECTION_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SIMPLEXML_SHARED=no
     
   
-  case ext/reflection in
+  case ext/simplexml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81720,7 +85599,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in simplexml.c sxe.c; do
   
       IFS=.
       set $ac_src
@@ -81743,18 +85622,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC reflection"
-    if test "no" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
+    EXT_STATIC="$EXT_STATIC simplexml"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
     fi
   else
-    if test "no" = "shared" || test "no" = "yes"; then
-      PHP_REFLECTION_SHARED=yes
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SIMPLEXML_SHARED=yes
       
-  case ext/reflection in
+  case ext/simplexml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81769,14 +85648,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in simplexml.c sxe.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_reflection="$shared_objects_reflection $ac_bdir$ac_obj.lo"
+      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -81799,31 +85678,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpreflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpreflection.so '$ext_builddir'/phpreflection.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPREFLECTION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSIMPLEXML, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(PHPREFLECTION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpreflection.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpreflection.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpreflection.$suffix: $ext_builddir/phpreflection.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpreflection.$suffix \$(phplibdir)
+\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)
 
-$ext_builddir/phpreflection.$suffix: \$(shared_objects_reflection) \$(PHPREFLECTION_SHARED_DEPENDENCIES)
+$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81836,31 +85715,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/reflection.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/reflection.so '$ext_builddir'/reflection.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(REFLECTION, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SIMPLEXML, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_reflection) $(REFLECTION_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/reflection.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/reflection.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_reflection"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/reflection.$suffix: $ext_builddir/reflection.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/reflection.$suffix \$(phplibdir)
+\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)
 
-$ext_builddir/reflection.$suffix: \$(shared_objects_reflection) \$(REFLECTION_SHARED_DEPENDENCIES)
+$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -81868,22 +85747,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_REFLECTION 1
+#define COMPILE_DL_SIMPLEXML 1
 EOF
 
     fi
   fi
 
-  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
-    PHP_REFLECTION_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SIMPLEXML_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/reflection in
+  case ext/simplexml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81898,7 +85777,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_reflection.c; do
+  for ac_src in simplexml.c sxe.c; do
   
       IFS=.
       set $ac_src
@@ -81921,15 +85800,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC reflection"
+        EXT_STATIC="$EXT_STATIC simplexml"
         ;;
       *)
         
   
-  case ext/reflection in
+  case ext/simplexml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/reflection"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/reflection/"; ac_bdir="ext/reflection/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -81943,749 +85822,1299 @@ EOF
   b_lo=$php_lo
 
 
-  old_IFS=$IFS
-  for ac_src in php_reflection.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  old_IFS=$IFS
+  for ac_src in simplexml.c sxe.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=simplexml
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"
+
+  
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
+  
+  fi
+
+  
+  am_i_shared=$PHP_SIMPLEXML_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension simplexml to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build simplexml shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension simplexml, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  am_i_shared=$PHP_SIMPLEXML_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension simplexml to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build simplexml shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension simplexml, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+fi
+
+
+
+php_with_snmp=no
+
+echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
+echo "configure:85924: checking for SNMP support" >&5
+# Check whether --with-snmp or --without-snmp was given.
+if test "${with_snmp+set}" = set; then
+  withval="$with_snmp"
+  PHP_SNMP=$withval
+else
+  
+  PHP_SNMP=no
+  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SNMP in
+shared,*)
+  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SNMP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_openssl_dir=no
+
+echo $ac_n "checking OpenSSL dir for SNMP""... $ac_c" 1>&6
+echo "configure:85968: checking OpenSSL dir for SNMP" >&5
+# Check whether --with-openssl-dir or --without-openssl-dir was given.
+if test "${with_openssl_dir+set}" = set; then
+  withval="$with_openssl_dir"
+  PHP_OPENSSL_DIR=$withval
+else
+  
+  PHP_OPENSSL_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_OPENSSL_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_enable_ucd_snmp_hack=no
+
+echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
+echo "configure:85991: checking whether to enable UCD SNMP hack" >&5
+# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
+if test "${enable_ucd_snmp_hack+set}" = set; then
+  enableval="$enable_ucd_snmp_hack"
+  PHP_UCD_SNMP_HACK=$enableval
+else
+  
+  PHP_UCD_SNMP_HACK=no
+  
+
+fi
+
+
+ext_output=$PHP_UCD_SNMP_HACK
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SNMP" != "no"; then
+
+        if test "$PHP_SNMP" = "yes"; then
+    # Extract the first word of "net-snmp-config", so it can be a program name with args.
+set dummy net-snmp-config; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:86016: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  case "$SNMP_CONFIG" in
+  /*)
+  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
+  ;;
+  ?:/*)			 
+  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
+  ;;
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="/usr/local/bin:$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  ;;
+esac
+fi
+SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
+if test -n "$SNMP_CONFIG"; then
+  echo "$ac_t""$SNMP_CONFIG" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  else
+    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
+  fi
+
+  if test -x "$SNMP_CONFIG"; then
+    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
+    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
+    SNMP_PREFIX=`$SNMP_CONFIG --prefix`
+
+    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
+      
+  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
+    
+  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
+    ai_p=${SNMP_PREFIX}/include
+  else
+    
+    ep_dir="`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+      
+  for ac_i in $SNMP_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+      cat >> confdefs.h <<\EOF
+#define HAVE_NET_SNMP 1
+EOF
+
+      SNMP_LIBNAME=netsnmp
+    else
+      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
+    fi
+  else 
+
+            
+    if test "$PHP_SNMP" = "yes"; then
+      for i in /usr/include /usr/local/include; do
+        test -f $i/snmp.h                       && SNMP_INCDIR=$i
+        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
+        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
+        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
+      done
+      for i in /usr/$PHP_LIBDIR /usr/snmp/lib /usr/local/$PHP_LIBDIR /usr/local/lib /usr/local/snmp/lib; do
+        test -f $i/libsnmp.a || test -f $i/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i
+      done
+    else
+      SNMP_INCDIR=$PHP_SNMP/include
+      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
+      SNMP_LIBDIR=$PHP_SNMP/lib
+    fi
+
+    if test -z "$SNMP_INCDIR"; then
+      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
+    elif test -z "$SNMP_LIBDIR"; then
+      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
+    fi
+
+    old_CPPFLAGS=$CPPFLAGS
+    CPPFLAGS=-I$SNMP_INCDIR
+    for ac_hdr in default_store.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:86217: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 86222 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:86227: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+    if test "$ac_cv_header_default_store_h" = "yes"; then
+      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
+echo "configure:86255: checking for OpenSSL support in SNMP libraries" >&5
+      cat > conftest.$ac_ext <<EOF
+#line 86257 "configure"
+#include "confdefs.h"
+
+#include <ucd-snmp-config.h>
+#if USE_OPENSSL
+        yes
+#endif
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
 EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC reflection"
-  fi
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
+        SNMP_SSL=yes
+      
+else
+  rm -rf conftest*
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+        SNMP_SSL=no
+      
+fi
+rm -f conftest*
+
+    fi
+    CPPFLAGS=$old_CPPFLAGS
+    echo "$ac_t""$SNMP_SSL" 1>&6
   
+    if test "$SNMP_SSL" = "yes"; then
+      if test "$PHP_OPENSSL_DIR" != "no"; then
+        PHP_OPENSSL=$PHP_OPENSSL_DIR
+      fi
+      
+      if test "$PHP_OPENSSL" = "no"; then
+        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 
 
+        Add --with-openssl-dir=DIR to your configure line." 1>&2; exit 1; }
+      else
+        
+  found_openssl=no
+  unset OPENSSL_INCDIR
+  unset OPENSSL_LIBDIR
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=reflection
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
+  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no
 
+    if test "$PHP_OPENSSL" != "no"; then
+    PHP_OPENSSL_DIR=$PHP_OPENSSL
+  elif test "$PHP_IMAP_SSL" != "no"; then
+    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
   fi
 
-
-
-
-php_enable_session=yes
-
-echo $ac_n "checking whether to enable PHP sessions""... $ac_c" 1>&6
-echo "configure:81994: checking whether to enable PHP sessions" >&5
-# Check whether --enable-session or --disable-session was given.
-if test "${enable_session+set}" = set; then
-  enableval="$enable_session"
-  PHP_SESSION=$enableval
+    if test -z "$PKG_CONFIG"; then
+    # Extract the first word of "pkg-config", so it can be a program name with args.
+set dummy pkg-config; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:86312: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_SESSION=yes
-  test "$PHP_ENABLE_ALL" && PHP_SESSION=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SESSION in
-shared,*)
-  PHP_SESSION=`echo "$PHP_SESSION"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SESSION=yes
+  case "$PKG_CONFIG" in
+  /*)
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
   ;;
-no)
-  ext_output=no
-  ext_shared=no
+  ?:/*)			 
+  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
   ;;
-*)
-  ext_output=yes
-  ext_shared=no
+  *)
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do 
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
   ;;
 esac
+fi
+PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
+if test -n "$PKG_CONFIG"; then
+  echo "$ac_t""$PKG_CONFIG" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+  fi
 
+    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
+    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
+      found_openssl=yes
+      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
+      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
+      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
+    else
+      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
+    fi
 
-echo "$ac_t""$ext_output" 1>&6
+    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
+      
+  for ac_i in $OPENSSL_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
+    fi
+   ;;
+  esac
 
 
-php_with_mm=no
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-echo $ac_n "checking for mm support""... $ac_c" 1>&6
-echo "configure:82038: checking for mm support" >&5
-# Check whether --with-mm or --without-mm was given.
-if test "${with_mm+set}" = set; then
-  withval="$with_mm"
-  PHP_MM=$withval
-else
+    
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
+      else
+        
   
-  PHP_MM=no
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-fi
-
-
-ext_output=$PHP_MM
-echo "$ac_t""$ext_output" 1>&6
 
+      fi
+    
+  fi
 
+    ;;
+    esac
+  done
 
+      
+  for ac_i in $OPENSSL_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-if test "$PHP_SESSION" != "no"; then
-  
-  echo $ac_n "checking whether pwrite works""... $ac_c" 1>&6
-echo "configure:82060: checking whether pwrite works" >&5
-if eval "test \"`echo '$''{'ac_cv_pwrite'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
     
-  if test "$cross_compiling" = yes; then
   
-    ac_cv_pwrite=no
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-else
-  cat > conftest.$ac_ext <<EOF
-#line 82072 "configure"
-#include "confdefs.h"
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
+  fi
 
-    main() {
-    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
+    ;;
+    esac
+  done
 
-    if (fd < 0) exit(1);
-    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
+    fi
+  fi
 
+    if test "$found_openssl" = "no"; then
   
+    if test "$PHP_OPENSSL_DIR" = "yes"; then
+      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
+    fi
+
+    for i in $PHP_OPENSSL_DIR; do
+      if test -r $i/include/openssl/evp.h; then
+        OPENSSL_INCDIR=$i/include
+      fi
+      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
+        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
+      fi
+      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
+    done
+
+    if test -z "$OPENSSL_INCDIR"; then
+      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
+    fi
+
+    if test -z "$OPENSSL_LIBDIR"; then
+      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
+    fi
+
+    old_CPPFLAGS=$CPPFLAGS
+    CPPFLAGS=-I$OPENSSL_INCDIR
+    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
+echo "configure:86517: checking for OpenSSL version" >&5
+    cat > conftest.$ac_ext <<EOF
+#line 86519 "configure"
+#include "confdefs.h"
+
+#include <openssl/opensslv.h>
+#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
+  yes
+#endif
+    
 EOF
-if { (eval echo configure:82093: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    ac_cv_pwrite=yes
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
   
+      echo "$ac_t"">= 0.9.6" 1>&6
+    
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    ac_cv_pwrite=no
+  rm -rf conftest*
   
+      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
+    
 fi
-rm -fr conftest*
-fi
+rm -f conftest*
 
+    CPPFLAGS=$old_CPPFLAGS
 
-    if test "$ac_cv_pwrite" = "no"; then
-      
-  if test "$cross_compiling" = yes; then
+    
+  if test "$OPENSSL_INCDIR" != "/usr/include"; then
+    
+  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$OPENSSL_INCDIR
+  else
+    
+    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
+  fi
+
+    
   
-    ac_cv_pwrite=no
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-else
-  cat > conftest.$ac_ext <<EOF
-#line 82118 "configure"
-#include "confdefs.h"
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
-ssize_t pwrite(int, void *, size_t, off64_t);
-    main() {
-    int fd = open("conftest_in", O_WRONLY|O_CREAT, 0600);
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-    if (fd < 0) exit(1);
-    if (pwrite(fd, "text", 4, 0) != 4) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pwrite(fd, "text", 4, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
+  fi
 
   
-EOF
-if { (eval echo configure:82139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$OPENSSL_LIBDIR
+    "
   
-    ac_cv_pwrite=yes
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
-    ac_cv_pwrite=no
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-fi
-rm -fr conftest*
-fi
-
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-      if test "$ac_cv_pwrite" = "yes"; then
-        ac_cv_pwrite=64
       fi
-    fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-fi
-
-echo "$ac_t""$ac_cv_pwrite" 1>&6
-
-  if test "$ac_cv_pwrite" != "no"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_PWRITE 1
-EOF
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-    if test "$ac_cv_pwrite" = "64"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_PWRITE_64 1
-EOF
 
     fi
-  fi  
-
-  
-  echo $ac_n "checking whether pread works""... $ac_c" 1>&6
-echo "configure:82180: checking whether pread works" >&5
-if eval "test \"`echo '$''{'ac_cv_pread'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-    
-  echo test > conftest_in
-  if test "$cross_compiling" = yes; then
-  
-    ac_cv_pread=no
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 82193 "configure"
-#include "confdefs.h"
+   ;;
+  esac
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
 
-    main() {
-    char buf[3]; 
-    int fd = open("conftest_in", O_RDONLY);
-    if (fd < 0) exit(1);
-    if (pread(fd, buf, 2, 0) != 2) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
-  
-EOF
-if { (eval echo configure:82213: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-    ac_cv_pread=yes
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-    ac_cv_pread=no
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-fi
-rm -fr conftest*
-fi
+  fi
 
-  rm -f conftest_in
 
-    if test "$ac_cv_pread" = "no"; then
-      
-  echo test > conftest_in
-  if test "$cross_compiling" = yes; then
-  
-    ac_cv_pread=no
-  
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
+echo "configure:86674: checking for CRYPTO_free in -lcrypto" >&5
+ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 82240 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lcrypto  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86682 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char CRYPTO_free();
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <errno.h>
-ssize_t pread(int, void *, size_t, off64_t);
-    main() {
-    char buf[3]; 
-    int fd = open("conftest_in", O_RDONLY);
-    if (fd < 0) exit(1);
-    if (pread(fd, buf, 2, 0) != 2) exit(1);
-    /* Linux glibc breakage until 2.2.5 */
-    if (pread(fd, buf, 2, -1) != -1 || errno != EINVAL) exit(1);
-    exit(0);
-    }
-  
+int main() {
+CRYPTO_free()
+; return 0; }
 EOF
-if { (eval echo configure:82260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    ac_cv_pread=yes
-  
+if { (eval echo configure:86693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    ac_cv_pread=no
-  
-fi
-rm -fr conftest*
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  rm -f conftest_in
-
-      if test "$ac_cv_pread" = "yes"; then
-        ac_cv_pread=64
-      fi
-    fi
-  
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
+    else
+      
+  
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcrypto $LIBS" 
+   ;;
+  esac
 
-echo "$ac_t""$ac_cv_pread" 1>&6
 
-  if test "$ac_cv_pread" != "no"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_PREAD 1
-EOF
+    fi
+   ;;
+  esac
 
-    if test "$ac_cv_pread" = "64"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_PREAD_64 1
-EOF
 
-    fi
-  fi  
+    
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_crypto_CRYPTO_free
+    
+      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
+    
   
-  ext_builddir=ext/session
-  ext_srcdir=$abs_srcdir/ext/session
+fi
 
-  ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SESSION_SHARED=no
+    old_LIBS=$LIBS
+    LIBS="$LIBS -lcrypto"
     
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+      -L$OPENSSL_LIBDIR
+    "
   
-  case ext/session in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-    EXT_STATIC="$EXT_STATIC session"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC session"
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SESSION_SHARED=yes
-      
-  case ext/session in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
 
-  old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-      shared_objects_session="$shared_objects_session $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsession.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsession.so '$ext_builddir'/phpsession.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSESSION, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(PHPSESSION_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsession.$suffix"
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsession.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsession.$suffix: $ext_builddir/phpsession.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsession.$suffix \$(phplibdir)
 
-$ext_builddir/phpsession.$suffix: \$(shared_objects_session) \$(PHPSESSION_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/session.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/session.so '$ext_builddir'/session.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SESSION, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_session) $(SESSION_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/session.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/session.$suffix"
+      fi
+    
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_session"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/session.$suffix: $ext_builddir/session.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/session.$suffix \$(phplibdir)
 
-$ext_builddir/session.$suffix: \$(shared_objects_session) \$(SESSION_SHARED_DEPENDENCIES)
-	$link_cmd
+    ;;
+    esac
+  done
 
-EOF
+  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
+echo "configure:86850: checking for SSL_CTX_set_ssl_version in -lssl" >&5
+ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lssl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 86858 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char SSL_CTX_set_ssl_version();
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SESSION 1
+int main() {
+SSL_CTX_set_ssl_version()
+; return 0; }
 EOF
+if { (eval echo configure:86869: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SESSION_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/session in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      found_openssl=yes
+    
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
+    
+      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
+    
+  
+fi
 
-  old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+    LIBS=$old_LIBS
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case ssl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lssl $SNMP_SHARED_LIBADD" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC session"
-        ;;
-      *)
-        
   
-  case ext/session in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/session"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/session/"; ac_bdir="ext/session/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case ssl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lssl $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+
+    fi
+   ;;
+  esac
 
 
-  old_IFS=$IFS
-  for ac_src in session.c mod_files.c mod_mm.c mod_user.c; do
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case crypto in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcrypto $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC session"
+
+    
+  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$OPENSSL_LIBDIR
+  else
+    
+    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=session
+      fi
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
-  
-  am_i_shared=$PHP_SESSION_SHARED
-  is_it_shared=$PHP_HASH_SHARED
-  is_it_enabled=$PHP_HASH
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension session to build statically, but it
-depends on extension hash, which you've configured to build shared.
-You either need to build session shared or build hash statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension session, which depends on extension hash,
-but you've either not enabled hash, or have disabled it.
-" 1>&2; exit 1; }
   fi
+
+  if test "$found_openssl" = "yes"; then
+    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
   
-  
-  am_i_shared=$PHP_SESSION_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension session to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build session shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension session, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
+
+:
+else 
+          { echo "configure: error: SNMP: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
+        
   fi
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"
 
+      fi
+    fi
+
+    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
+echo "configure:87005: checking for kstat_read in -lkstat" >&5
+ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lkstat  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 87013 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char kstat_read();
+
+int main() {
+kstat_read()
+; return 0; }
+EOF
+if { (eval echo configure:87024: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+   
   
-  
-    header_path=ext/session
-    for header_file in php_session.h mod_files.h mod_user.h; do
-      hp_hf="$header_path/$header_file"
+  case kstat in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
+    else
       
   
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
+  case kstat in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lkstat $LIBS" 
+   ;;
+  esac
 
-    done 
-  
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_PHP_SESSION 1
-EOF
+    fi
+   ;;
+  esac
 
+ 
+else
+  echo "$ac_t""no" 1>&6
 fi
 
-if test "$PHP_MM" != "no"; then
-  for i in $PHP_MM /usr/local /usr; do
-    test -f "$i/include/mm.h" && MM_DIR=$i && break
-  done
-
-  if test -z "$MM_DIR" ; then
-    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
+    
+  if test "$SNMP_INCDIR" != "/usr/include"; then
+    
+  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_INCDIR
+  else
+    
+    ep_dir="`echo $SNMP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
   fi
+
+    
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    
 
   if test "$ext_shared" = "yes"; then
-    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
-    if test -n "$MM_DIR/$PHP_LIBDIR"; then
+    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
+    if test -n "$SNMP_LIBDIR"; then
       
-  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/$PHP_LIBDIR
+  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_LIBDIR
   else
     
-    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        SESSION_SHARED_LIBADD="-L$ai_p $SESSION_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SESSION_SHARED_LIBADD="$ld_runpath_switch$ai_p $SESSION_SHARED_LIBADD"
+        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
       else
         
   
@@ -82711,18 +87140,18 @@ if test "$PHP_MM" != "no"; then
   else
     
 
-  if test -n "$MM_DIR/$PHP_LIBDIR"; then
+  if test -n "$SNMP_LIBDIR"; then
     
-  if test "$MM_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MM_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$MM_DIR/$PHP_LIBDIR" || echo "$MM_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/$PHP_LIBDIR
+  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SNMP_LIBDIR
   else
     
-    ep_dir="`echo $MM_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
   fi
 
     
@@ -82748,10 +87177,10 @@ if test "$PHP_MM" != "no"; then
   fi
   
   
-  case mm in
+  case snmp in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lmm $LIBS" 
+      LIBS="-lsnmp $LIBS" 
    ;;
   esac
 
@@ -82761,124 +87190,338 @@ if test "$PHP_MM" != "no"; then
   fi
 
 
+    SNMP_LIBNAME=snmp
+  fi
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $SNMP_SHARED_LIBADD
+  "
   
-  if test "$MM_DIR/include" != "/usr/include"; then
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$MM_DIR/include
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $MM_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
+    eval "LIBPATH$unique=set"
     
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
       fi
     
   fi
 
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for snmp_parse_oid in -l$SNMP_LIBNAME""... $ac_c" 1>&6
+echo "configure:87295: checking for snmp_parse_oid in -l$SNMP_LIBNAME" >&5
+ac_lib_var=`echo $SNMP_LIBNAME'_'snmp_parse_oid | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$SNMP_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 87303 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char snmp_parse_oid();
+
+int main() {
+snmp_parse_oid()
+; return 0; }
+EOF
+if { (eval echo configure:87314: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_SNMP_PARSE_OID 1
+EOF
+
+  
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$SNMP_LIBNAME_snmp_parse_oid
+    
+  
+fi
+
+
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+    $SNMP_SHARED_LIBADD
+  "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
-    for header_file in ext/session/mod_mm.h; do
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
+    eval "LIBPATH$unique=set"
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-    done 
-  
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_LIBMM 1
-EOF
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
+echo "configure:87448: checking for init_snmp in -l$SNMP_LIBNAME" >&5
+ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$SNMP_LIBNAME  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 87456 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char init_snmp();
 
+int main() {
+init_snmp()
+; return 0; }
+EOF
+if { (eval echo configure:87467: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+    cat >> confdefs.h <<\EOF
+#define HAVE_SNMP 1
+EOF
 
-php_enable_shmop=no
-
-echo $ac_n "checking whether to enable shmop support""... $ac_c" 1>&6
-echo "configure:82824: checking whether to enable shmop support" >&5
-# Check whether --enable-shmop or --disable-shmop was given.
-if test "${enable_shmop+set}" = set; then
-  enableval="$enable_shmop"
-  PHP_SHMOP=$enableval
-else
   
-  PHP_SHMOP=no
-  test "$PHP_ENABLE_ALL" && PHP_SHMOP=$PHP_ENABLE_ALL
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp
+    
+    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
+  
+  
 fi
 
 
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SHMOP in
-shared,*)
-  PHP_SHMOP=`echo "$PHP_SHMOP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SHMOP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SHMOP" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_SHMOP 1
+  if test "$PHP_UCD_SNMP_HACK" = "yes" ; then
+    cat >> confdefs.h <<\EOF
+#define UCD_SNMP_HACK 1
 EOF
 
+  fi
   
-  ext_builddir=ext/shmop
-  ext_srcdir=$abs_srcdir/ext/shmop
+  
+  ext_builddir=ext/snmp
+  ext_srcdir=$abs_srcdir/ext/snmp
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SHMOP_SHARED=no
+    PHP_SNMP_SHARED=no
     
   
-  case ext/shmop in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82893,7 +87536,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -82916,18 +87559,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC shmop"
+    EXT_STATIC="$EXT_STATIC snmp"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SHMOP_SHARED=yes
+      PHP_SNMP_SHARED=yes
       
-  case ext/shmop in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -82942,14 +87585,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_shmop="$shared_objects_shmop $ac_bdir$ac_obj.lo"
+      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -82972,31 +87615,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpshmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpshmop.so '$ext_builddir'/phpshmop.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSHMOP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSNMP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(PHPSHMOP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpshmop.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpshmop.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpshmop.$suffix: $ext_builddir/phpshmop.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpshmop.$suffix \$(phplibdir)
+\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)
 
-$ext_builddir/phpshmop.$suffix: \$(shared_objects_shmop) \$(PHPSHMOP_SHARED_DEPENDENCIES)
+$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -83009,31 +87652,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/shmop.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/shmop.so '$ext_builddir'/shmop.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SHMOP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SNMP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_shmop) $(SHMOP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/shmop.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/shmop.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_shmop"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/shmop.$suffix: $ext_builddir/shmop.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/shmop.$suffix \$(phplibdir)
+\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)
 
-$ext_builddir/shmop.$suffix: \$(shared_objects_shmop) \$(SHMOP_SHARED_DEPENDENCIES)
+$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -83041,22 +87684,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SHMOP 1
+#define COMPILE_DL_SNMP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SHMOP_SHARED=no
+    PHP_SNMP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/shmop in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83071,7 +87714,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -83094,15 +87737,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC shmop"
+        EXT_STATIC="$EXT_STATIC snmp"
         ;;
       *)
         
   
-  case ext/shmop in
+  case ext/snmp in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/shmop"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/shmop/"; ac_bdir="ext/shmop/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83117,7 +87760,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in shmop.c; do
+  for ac_src in snmp.c; do
   
       IFS=.
       set $ac_src
@@ -83142,7 +87785,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC shmop"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
   fi
   
   
@@ -83151,28 +87794,31 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=shmop
+    PHP_PECL_EXTENSION=snmp
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"
+
 fi
 
 
 
-php_enable_simplexml=yes
+php_enable_soap=no
 
-echo $ac_n "checking whether to enable SimpleXML support""... $ac_c" 1>&6
-echo "configure:83168: checking whether to enable SimpleXML support" >&5
-# Check whether --enable-simplexml or --disable-simplexml was given.
-if test "${enable_simplexml+set}" = set; then
-  enableval="$enable_simplexml"
-  PHP_SIMPLEXML=$enableval
+echo $ac_n "checking whether to enable SOAP support""... $ac_c" 1>&6
+echo "configure:87814: checking whether to enable SOAP support" >&5
+# Check whether --enable-soap or --disable-soap was given.
+if test "${enable_soap+set}" = set; then
+  enableval="$enable_soap"
+  PHP_SOAP=$enableval
 else
   
-  PHP_SIMPLEXML=yes
-  test "$PHP_ENABLE_ALL" && PHP_SIMPLEXML=$PHP_ENABLE_ALL
+  PHP_SOAP=no
+  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL
 
 fi
 
@@ -83180,12 +87826,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_SIMPLEXML in
+case $PHP_SOAP in
 shared,*)
-  PHP_SIMPLEXML=`echo "$PHP_SIMPLEXML"|$SED 's/^shared,//'`
+  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_SIMPLEXML=yes
+  PHP_SOAP=yes
   ;;
 no)
   ext_output=no
@@ -83209,7 +87855,7 @@ if test -z "$PHP_LIBXML_DIR"; then
 php_with_libxml_dir=no
 
 echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:83213: checking libxml2 install dir" >&5
+echo "configure:87859: checking libxml2 install dir" >&5
 # Check whether --with-libxml-dir or --without-libxml-dir was given.
 if test "${with_libxml_dir+set}" = set; then
   withval="$with_libxml_dir"
@@ -83229,15 +87875,15 @@ echo "$ac_t""$ext_output" 1>&6
 
 fi
 
-if test "$PHP_SIMPLEXML" != "no"; then
+if test "$PHP_SOAP" != "no"; then
 
   if test "$PHP_LIBXML" = "no"; then   
-    { echo "configure: error: SimpleXML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
+    { echo "configure: error: SOAP extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
   fi
 
   
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:83241: checking for xml2-config path" >&5
+echo "configure:87887: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -83269,7 +87915,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -pthread"
+        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
       else
         
   
@@ -83291,7 +87937,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="$SIMPLEXML_SHARED_LIBADD -l$ac_ii" 
+        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -83326,8 +87972,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        SIMPLEXML_SHARED_LIBADD="-L$ai_p $SIMPLEXML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SIMPLEXML_SHARED_LIBADD="$ld_runpath_switch$ai_p $SIMPLEXML_SHARED_LIBADD"
+        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
       else
         
   
@@ -83395,7 +88041,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:83399: checking whether libxml build works" >&5
+echo "configure:88045: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -83403,7 +88049,7 @@ else
         
   old_LIBS=$LIBS
   LIBS="
-          $SIMPLEXML_SHARED_LIBADD
+          $SOAP_SHARED_LIBADD
          $LIBS"
   if test "$cross_compiling" = yes; then
   
@@ -83411,7 +88057,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 83415 "configure"
+#line 88061 "configure"
 #include "confdefs.h"
 
     
@@ -83422,7 +88068,7 @@ else
     }
   
 EOF
-if { (eval echo configure:83426: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:88072: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -83458,23 +88104,23 @@ EOF
       fi
       
     cat >> confdefs.h <<\EOF
-#define HAVE_SIMPLEXML 1
+#define HAVE_SOAP 1
 EOF
 
     
-  ext_builddir=ext/simplexml
-  ext_srcdir=$abs_srcdir/ext/simplexml
+  ext_builddir=ext/soap
+  ext_srcdir=$abs_srcdir/ext/soap
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SIMPLEXML_SHARED=no
+    PHP_SOAP_SHARED=no
     
   
-  case ext/simplexml in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83489,7 +88135,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -83512,18 +88158,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC simplexml"
+    EXT_STATIC="$EXT_STATIC soap"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SIMPLEXML_SHARED=yes
+      PHP_SOAP_SHARED=yes
       
-  case ext/simplexml in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83538,14 +88184,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_simplexml="$shared_objects_simplexml $ac_bdir$ac_obj.lo"
+      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -83568,31 +88214,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsimplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsimplexml.so '$ext_builddir'/phpsimplexml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSIMPLEXML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOAP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(PHPSIMPLEXML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsimplexml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsimplexml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsimplexml.$suffix: $ext_builddir/phpsimplexml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsimplexml.$suffix \$(phplibdir)
+\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)
 
-$ext_builddir/phpsimplexml.$suffix: \$(shared_objects_simplexml) \$(PHPSIMPLEXML_SHARED_DEPENDENCIES)
+$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -83605,31 +88251,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/simplexml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/simplexml.so '$ext_builddir'/simplexml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SIMPLEXML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOAP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_simplexml) $(SIMPLEXML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/simplexml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/simplexml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_simplexml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/simplexml.$suffix: $ext_builddir/simplexml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/simplexml.$suffix \$(phplibdir)
+\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)
 
-$ext_builddir/simplexml.$suffix: \$(shared_objects_simplexml) \$(SIMPLEXML_SHARED_DEPENDENCIES)
+$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -83637,22 +88283,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SIMPLEXML 1
+#define COMPILE_DL_SOAP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SIMPLEXML_SHARED=no
+    PHP_SOAP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/simplexml in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83667,7 +88313,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -83690,15 +88336,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC simplexml"
+        EXT_STATIC="$EXT_STATIC soap"
         ;;
       *)
         
   
-  case ext/simplexml in
+  case ext/soap in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/simplexml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/simplexml/"; ac_bdir="ext/simplexml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -83713,7 +88359,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in simplexml.c sxe.c; do
+  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
   
       IFS=.
       set $ac_src
@@ -83738,382 +88384,189 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC simplexml"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
   fi
   
   
     BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=simplexml
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SIMPLEXML_SHARED_LIBADD"
-
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
-  fi
-
-  
-  am_i_shared=$PHP_SIMPLEXML_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension simplexml to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build simplexml shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension simplexml, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  am_i_shared=$PHP_SIMPLEXML_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension simplexml to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build simplexml shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension simplexml, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-fi
-
-
-
-php_with_snmp=no
-
-echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
-echo "configure:83814: checking for SNMP support" >&5
-# Check whether --with-snmp or --without-snmp was given.
-if test "${with_snmp+set}" = set; then
-  withval="$with_snmp"
-  PHP_SNMP=$withval
-else
-  
-  PHP_SNMP=no
-  test "$PHP_ENABLE_ALL" && PHP_SNMP=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SNMP in
-shared,*)
-  PHP_SNMP=`echo "$PHP_SNMP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SNMP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_with_openssl_dir=no
-
-echo $ac_n "checking OpenSSL dir for SNMP""... $ac_c" 1>&6
-echo "configure:83858: checking OpenSSL dir for SNMP" >&5
-# Check whether --with-openssl-dir or --without-openssl-dir was given.
-if test "${with_openssl_dir+set}" = set; then
-  withval="$with_openssl_dir"
-  PHP_OPENSSL_DIR=$withval
-else
-  
-  PHP_OPENSSL_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_OPENSSL_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-
-php_enable_ucd_snmp_hack=no
-
-echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
-echo "configure:83881: checking whether to enable UCD SNMP hack" >&5
-# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
-if test "${enable_ucd_snmp_hack+set}" = set; then
-  enableval="$enable_ucd_snmp_hack"
-  PHP_UCD_SNMP_HACK=$enableval
-else
-  
-  PHP_UCD_SNMP_HACK=no
-  
-
-fi
-
-
-ext_output=$PHP_UCD_SNMP_HACK
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SNMP" != "no"; then
-
-        if test "$PHP_SNMP" = "yes"; then
-    # Extract the first word of "net-snmp-config", so it can be a program name with args.
-set dummy net-snmp-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:83906: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_SNMP_CONFIG'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$SNMP_CONFIG" in
-  /*)
-  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_SNMP_CONFIG="$SNMP_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="/usr/local/bin:$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_SNMP_CONFIG="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  ;;
-esac
-fi
-SNMP_CONFIG="$ac_cv_path_SNMP_CONFIG"
-if test -n "$SNMP_CONFIG"; then
-  echo "$ac_t""$SNMP_CONFIG" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-  else
-    SNMP_CONFIG="$PHP_SNMP/bin/net-snmp-config"
-  fi
-
-  if test -x "$SNMP_CONFIG"; then
-    SNMP_LIBS=`$SNMP_CONFIG --netsnmp-libs`
-    SNMP_LIBS="$SNMP_LIBS `$SNMP_CONFIG --external-libs`"
-    SNMP_PREFIX=`$SNMP_CONFIG --prefix`
-
-    if test -n "$SNMP_LIBS" && test -n "$SNMP_PREFIX"; then
-      
-  if test "${SNMP_PREFIX}/include" != "/usr/include"; then
-    
-  if test -z "${SNMP_PREFIX}/include" || echo "${SNMP_PREFIX}/include" | grep '^/' >/dev/null ; then
-    ai_p=${SNMP_PREFIX}/include
-  else
-    
-    ep_dir="`echo $SNMP_PREFIX/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"${SNMP_PREFIX}/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=soap
     
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-      
-  for ac_i in $SNMP_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
     else
-      
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  fi
 
+fi
 
-    fi
-   ;;
-  esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+php_enable_sockets=no
 
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
+echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
+echo "configure:88422: checking whether to enable sockets support" >&5
+# Check whether --enable-sockets or --disable-sockets was given.
+if test "${enable_sockets+set}" = set; then
+  enableval="$enable_sockets"
+  PHP_SOCKETS=$enableval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_SOCKETS=no
+  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SOCKETS in
+shared,*)
+  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SOCKETS=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SOCKETS" != "no"; then
+    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
+echo "configure:88464: checking for struct cmsghdr" >&5
+if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    cat > conftest.$ac_ext <<EOF
+#line 88470 "configure"
+#include "confdefs.h"
+
+#include <sys/types.h>
+#include <sys/socket.h>
+int main() {
+struct cmsghdr s; s
+; return 0; }
+EOF
+if { (eval echo configure:88479: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_cmsghdr=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_cmsghdr=no
+fi
+rm -f conftest*
   
-  fi
+fi
 
+echo "$ac_t""$ac_cv_cmsghdr" 1>&6
 
-      fi
-    
-  fi
+  if test "$ac_cv_cmsghdr" = yes; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_CMSGHDR 1
+EOF
 
-    ;;
-    esac
-  done
+  fi 
 
-      cat >> confdefs.h <<\EOF
-#define HAVE_NET_SNMP 1
-EOF
+  for ac_func in hstrerror socketpair
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:88504: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 88509 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-      SNMP_LIBNAME=netsnmp
-    else
-      { echo "configure: error: Could not find the required paths. Please check your net-snmp installation." 1>&2; exit 1; }
-    fi
-  else 
+int main() {
 
-            
-    if test "$PHP_SNMP" = "yes"; then
-      for i in /usr/include /usr/local/include; do
-        test -f $i/snmp.h                       && SNMP_INCDIR=$i
-        test -f $i/ucd-snmp/snmp.h              && SNMP_INCDIR=$i/ucd-snmp
-        test -f $i/snmp/snmp.h                  && SNMP_INCDIR=$i/snmp
-        test -f $i/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=$i/snmp/include/ucd-snmp
-      done
-      for i in /usr/$PHP_LIBDIR /usr/snmp/lib /usr/local/$PHP_LIBDIR /usr/local/lib /usr/local/snmp/lib; do
-        test -f $i/libsnmp.a || test -f $i/libsnmp.$SHLIB_SUFFIX_NAME && SNMP_LIBDIR=$i
-      done
-    else
-      SNMP_INCDIR=$PHP_SNMP/include
-      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$PHP_SNMP/include/ucd-snmp
-      SNMP_LIBDIR=$PHP_SNMP/lib
-    fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
-    if test -z "$SNMP_INCDIR"; then
-      { echo "configure: error: snmp.h not found. Check your SNMP installation." 1>&2; exit 1; }
-    elif test -z "$SNMP_LIBDIR"; then
-      { echo "configure: error: libsnmp not found. Check your SNMP installation." 1>&2; exit 1; }
-    fi
+; return 0; }
+EOF
+if { (eval echo configure:88532: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
-    old_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS=-I$SNMP_INCDIR
-    for ac_hdr in default_store.h
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:84107: checking for $ac_hdr" >&5
+echo "configure:88560: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 84112 "configure"
+#line 88565 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:84117: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:88570: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -84139,955 +88592,865 @@ else
 fi
 done
 
-    if test "$ac_cv_header_default_store_h" = "yes"; then
-      echo $ac_n "checking for OpenSSL support in SNMP libraries""... $ac_c" 1>&6
-echo "configure:84145: checking for OpenSSL support in SNMP libraries" >&5
-      cat > conftest.$ac_ext <<EOF
-#line 84147 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 88597 "configure"
 #include "confdefs.h"
 
-#include <ucd-snmp-config.h>
-#if USE_OPENSSL
-        yes
-#endif
-      
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
+#include <sys/types.h>
+#include <sys/socket.h>
   
-        SNMP_SSL=yes
-      
+int main() {
+static struct msghdr tp; int n = (int) tp.msg_flags; return n
+; return 0; }
+EOF
+if { (eval echo configure:88607: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  :
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
+  cat >> confdefs.h <<\EOF
+#define MISSING_MSGHDR_MSGFLAGS 1
+EOF
+
   
-        SNMP_SSL=no
-      
 fi
 rm -f conftest*
+  cat >> confdefs.h <<\EOF
+#define HAVE_SOCKETS 1
+EOF
+
+
+  
+  ext_builddir=ext/sockets
+  ext_srcdir=$abs_srcdir/ext/sockets
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SOCKETS_SHARED=no
+    
+  
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
+
+    EXT_STATIC="$EXT_STATIC sockets"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
     fi
-    CPPFLAGS=$old_CPPFLAGS
-    echo "$ac_t""$SNMP_SSL" 1>&6
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SOCKETS_SHARED=yes
+      
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    if test "$SNMP_SSL" = "yes"; then
-      if test "$PHP_OPENSSL_DIR" != "no"; then
-        PHP_OPENSSL=$PHP_OPENSSL_DIR
-      fi
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-      if test "$PHP_OPENSSL" = "no"; then
-        { echo "configure: error: The UCD-SNMP in this system is built with SSL support. 
+      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"
 
-        Add --with-openssl-dir=DIR to your configure line." 1>&2; exit 1; }
-      else
-        
-  found_openssl=no
-  unset OPENSSL_INCDIR
-  unset OPENSSL_LIBDIR
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    test -z "$PHP_OPENSSL" && PHP_OPENSSL=no
-  test -z "$PHP_IMAP_SSL" && PHP_IMAP_SSL=no
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-    if test "$PHP_OPENSSL" != "no"; then
-    PHP_OPENSSL_DIR=$PHP_OPENSSL
-  elif test "$PHP_IMAP_SSL" != "no"; then
-    PHP_OPENSSL_DIR=$PHP_IMAP_SSL
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOCKETS, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)
+
+$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOCKETS, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)
+
+$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SOCKETS 1
+EOF
 
-    if test -z "$PKG_CONFIG"; then
-    # Extract the first word of "pkg-config", so it can be a program name with args.
-set dummy pkg-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:84202: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_PKG_CONFIG'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  case "$PKG_CONFIG" in
-  /*)
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a path.
-  ;;
-  ?:/*)			 
-  ac_cv_path_PKG_CONFIG="$PKG_CONFIG" # Let the user override the test with a dos path.
-  ;;
-  *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_PKG_CONFIG="$ac_dir/$ac_word"
-      break
     fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
-  ;;
-esac
-fi
-PKG_CONFIG="$ac_cv_path_PKG_CONFIG"
-if test -n "$PKG_CONFIG"; then
-  echo "$ac_t""$PKG_CONFIG" 1>&6
-else
-  echo "$ac_t""no" 1>&6
-fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SOCKETS_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-  fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-    if test "$PHP_OPENSSL_DIR" = "yes" && test -x "$PKG_CONFIG" && $PKG_CONFIG --exists openssl; then
-    if $PKG_CONFIG --atleast-version=0.9.6 openssl; then
-      found_openssl=yes
-      OPENSSL_LIBS=`$PKG_CONFIG --libs openssl`
-      OPENSSL_INCS=`$PKG_CONFIG --cflags-only-I openssl`
-      OPENSSL_INCDIR=`$PKG_CONFIG --variable=includedir openssl`
-    else
-      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
-    fi
 
-    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  for ac_i in $OPENSSL_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -pthread"
-      else
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC sockets"
+        ;;
+      *)
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/sockets in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sockets.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
-      fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sockets
     
-  fi
-
-    ;;
-    esac
-  done
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-      
-  for ac_i in $OPENSSL_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+    header_path=ext/sockets/
+    for header_file in php_sockets.h; do
+      hp_hf="$header_path/$header_file"
+      
+  
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
+    eval "INSTALLHEADERS$unique=set"
     
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
   fi
 
-  fi
-
-    ;;
-    esac
-  done
-
-    fi
-  fi
-
-    if test "$found_openssl" = "no"; then
+    done 
   
-    if test "$PHP_OPENSSL_DIR" = "yes"; then
-      PHP_OPENSSL_DIR="/usr/local/ssl /usr/local /usr /usr/local/openssl"
-    fi
-
-    for i in $PHP_OPENSSL_DIR; do
-      if test -r $i/include/openssl/evp.h; then
-        OPENSSL_INCDIR=$i/include
-      fi
-      if test -r $i/$PHP_LIBDIR/libssl.a -o -r $i/$PHP_LIBDIR/libssl.$SHLIB_SUFFIX_NAME; then
-        OPENSSL_LIBDIR=$i/$PHP_LIBDIR
-      fi
-      test -n "$OPENSSL_INCDIR" && test -n "$OPENSSL_LIBDIR" && break
-    done
 
-    if test -z "$OPENSSL_INCDIR"; then
-      { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
-    fi
+fi
 
-    if test -z "$OPENSSL_LIBDIR"; then
-      { echo "configure: error: Cannot find OpenSSL's libraries" 1>&2; exit 1; }
-    fi
 
-    old_CPPFLAGS=$CPPFLAGS
-    CPPFLAGS=-I$OPENSSL_INCDIR
-    echo $ac_n "checking for OpenSSL version""... $ac_c" 1>&6
-echo "configure:84407: checking for OpenSSL version" >&5
-    cat > conftest.$ac_ext <<EOF
-#line 84409 "configure"
+  echo $ac_n "checking whether zend_object_value is packed""... $ac_c" 1>&6
+echo "configure:88941: checking whether zend_object_value is packed" >&5
+  old_CPPFLAGS=$CPPFLAGS
+  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
+  if test "$cross_compiling" = yes; then
+  
+    ac_result=0
+    echo "$ac_t""no" 1>&6
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 88951 "configure"
 #include "confdefs.h"
 
-#include <openssl/opensslv.h>
-#if OPENSSL_VERSION_NUMBER >= 0x0090600fL
-  yes
-#endif
-    
+#include "Zend/zend_types.h"
+int main(int argc, char **argv) {
+	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
+}
+  
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
+if { (eval echo configure:88960: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    ac_result=1
+    echo "$ac_t""yes" 1>&6
   
-      echo "$ac_t"">= 0.9.6" 1>&6
-    
 else
-  rm -rf conftest*
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    ac_result=0
+    echo "$ac_t""no" 1>&6
   
-      { echo "configure: error: OpenSSL version 0.9.6 or greater required." 1>&2; exit 1; }
-    
 fi
-rm -f conftest*
-
-    CPPFLAGS=$old_CPPFLAGS
+rm -fr conftest*
+fi
 
-    
-  if test "$OPENSSL_INCDIR" != "/usr/include"; then
-    
-  if test -z "$OPENSSL_INCDIR" || echo "$OPENSSL_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$OPENSSL_INCDIR
-  else
-    
-    ep_dir="`echo $OPENSSL_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OPENSSL_INCDIR\"`"
-  fi
+  CPPFLAGS=$old_CPPFLAGS
+  cat >> confdefs.h <<EOF
+#define HAVE_PACKED_OBJECT_VALUE $ac_result
+EOF
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  cat >> confdefs.h <<\EOF
+#define HAVE_SPL 1
+EOF
+ 
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  ext_builddir=ext/spl
+  ext_srcdir=$abs_srcdir/ext/spl
 
-  fi
+  ac_extra=
 
-  
+  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
+    PHP_SPL_SHARED=no
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$OPENSSL_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
+  case ext/spl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    EXT_STATIC="$EXT_STATIC spl"
+    if test "no" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
+    fi
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    if test "no" = "shared" || test "no" = "yes"; then
+      PHP_SPL_SHARED=yes
+      
+  case ext/spl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for CRYPTO_free in -lcrypto""... $ac_c" 1>&6
-echo "configure:84564: checking for CRYPTO_free in -lcrypto" >&5
-ac_lib_var=`echo crypto'_'CRYPTO_free | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lcrypto  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 84572 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char CRYPTO_free();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-CRYPTO_free()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:84583: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case crypto in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
-    else
-      
-  
-  case crypto in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcrypto $LIBS" 
-   ;;
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSPL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
 
-    fi
-   ;;
-  esac
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)
 
+$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    
-  
-else
-  echo "$ac_t""no" 1>&6
+EOF
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_crypto_CRYPTO_free
-    
-      { echo "configure: error: libcrypto not found!" 1>&2; exit 1; }
-    
-  
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SPL, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
+      ;;
+  esac
 
-    old_LIBS=$LIBS
-    LIBS="$LIBS -lcrypto"
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$OPENSSL_LIBDIR
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
   fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)
 
-    fi
-   ;;
-  esac
+$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
+	$link_cmd
 
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SPL 1
+EOF
+
+    fi
   fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
+  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
+    PHP_SPL_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
         
   
+  case ext/spl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for SSL_CTX_set_ssl_version in -lssl""... $ac_c" 1>&6
-echo "configure:84740: checking for SSL_CTX_set_ssl_version in -lssl" >&5
-ac_lib_var=`echo ssl'_'SSL_CTX_set_ssl_version | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lssl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 84748 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char SSL_CTX_set_ssl_version();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-SSL_CTX_set_ssl_version()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:84759: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      found_openssl=yes
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_ssl_SSL_CTX_set_ssl_version
-    
-      { echo "configure: error: libssl not found!" 1>&2; exit 1; }
-    
+        EXT_STATIC="$EXT_STATIC spl"
+        ;;
+      *)
+        
   
-fi
-
-    LIBS=$old_LIBS
-    
+  case ext/spl in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case ssl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lssl $SNMP_SHARED_LIBADD" 
-    else
-      
   
-  case ssl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lssl $LIBS" 
-   ;;
-  esac
-
 
-    fi
-   ;;
-  esac
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    
+  old_IFS=$IFS
+  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
-  case crypto in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lcrypto $SNMP_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case crypto in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcrypto $LIBS" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=spl
     
-  if test "$OPENSSL_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$OPENSSL_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$OPENSSL_LIBDIR" || echo "$OPENSSL_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$OPENSSL_LIBDIR
-  else
-    
-    ep_dir="`echo $OPENSSL_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$OPENSSL_LIBDIR\"`"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
   
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    header_path=ext/spl
+    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
+      hp_hf="$header_path/$header_file"
+      
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INSTALLHEADERS$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
   fi
 
+    done 
+  
 
-      fi
-    
+  
+  am_i_shared=$PHP_SPL_SHARED
+  is_it_shared=$PHP_PCRE_SHARED
+  is_it_enabled=$PHP_PCRE
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension spl to build statically, but it
+depends on extension pcre, which you've configured to build shared.
+You either need to build spl shared or build pcre statically for the
+build to be successful.
+" 1>&2; exit 1; }
   fi
-
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension spl, which depends on extension pcre,
+but you've either not enabled pcre, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
-  if test "$found_openssl" = "yes"; then
-    OPENSSL_INCDIR_OPT=-I$OPENSSL_INCDIR
   
 
-:
-else 
-          { echo "configure: error: SNMP: OpenSSL check failed. Please check config.log for more information." 1>&2; exit 1; }
-        
-  fi
 
-      fi
-    fi
 
-    echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
-echo "configure:84895: checking for kstat_read in -lkstat" >&5
-ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lkstat  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 84903 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char kstat_read();
+php_with_sqlite=yes
 
-int main() {
-kstat_read()
-; return 0; }
-EOF
-if { (eval echo configure:84914: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+echo $ac_n "checking for sqlite support""... $ac_c" 1>&6
+echo "configure:89324: checking for sqlite support" >&5
+# Check whether --with-sqlite or --without-sqlite was given.
+if test "${with_sqlite+set}" = set; then
+  withval="$with_sqlite"
+  PHP_SQLITE=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-   
-  
-  case kstat in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-lkstat $SNMP_SHARED_LIBADD" 
-    else
-      
   
-  case kstat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lkstat $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
+  PHP_SQLITE=yes
+  test "$PHP_ENABLE_ALL" && PHP_SQLITE=$PHP_ENABLE_ALL
 
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
-    
-  if test "$SNMP_INCDIR" != "/usr/include"; then
-    
-  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_INCDIR
-  else
-    
-    ep_dir="`echo $SNMP_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
-  fi
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
 
-  fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SQLITE in
+shared,*)
+  PHP_SQLITE=`echo "$PHP_SQLITE"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SQLITE=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-    
 
-  if test "$ext_shared" = "yes"; then
-    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
-    if test -n "$SNMP_LIBDIR"; then
-      
-  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_LIBDIR
-  else
-    
-    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        SNMP_SHARED_LIBADD="-L$ai_p $SNMP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SNMP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SNMP_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
+echo "$ac_t""$ext_output" 1>&6
+
 
 
-      fi
-    
-  fi
 
-    fi
-  else
-    
 
-  if test -n "$SNMP_LIBDIR"; then
-    
-  if test "$SNMP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SNMP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SNMP_LIBDIR
-  else
-    
-    ep_dir="`echo $SNMP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
-  fi
+php_enable_sqlite_utf8=no
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+echo $ac_n "checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)""... $ac_c" 1>&6
+echo "configure:89368: checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)" >&5
+# Check whether --enable-sqlite-utf8 or --disable-sqlite-utf8 was given.
+if test "${enable_sqlite_utf8+set}" = set; then
+  enableval="$enable_sqlite_utf8"
+  PHP_SQLITE_UTF8=$enableval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_SQLITE_UTF8=no
   
-  fi
 
+fi
 
-    
-  fi
 
-  fi
-  
-  
-  case snmp in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsnmp $LIBS" 
-   ;;
-  esac
+ext_output=$PHP_SQLITE_UTF8
+echo "$ac_t""$ext_output" 1>&6
 
 
 
 
-  fi
 
 
-    SNMP_LIBNAME=snmp
+
+
+
+if test "$PHP_SQLITE" != "no"; then
+  if test "$PHP_PDO" != "no"; then
+    
+  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:89396: checking for PDO includes" >&5
+if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
+echo "configure:89402: checking for PDO includes" >&5
+    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$abs_srcdir/ext
+    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
+      pdo_inc_path=$prefix/include/php/ext
+    fi
+  
+fi
+
+echo "$ac_t""$pdo_inc_path" 1>&6
+  if test -n "$pdo_inc_path"; then
+:
+  else
+echo "configure: warning: Cannot find php_pdo_driver.h." 1>&2
   fi
 
+    if test -n "$pdo_inc_path"; then
+      cat >> confdefs.h <<\EOF
+#define PHP_SQLITE2_HAVE_PDO 1
+EOF
+
+      pdo_inc_path="-I$pdo_inc_path"
+    fi
+  fi  
+
+  if test "$PHP_SQLITE" != "yes"; then
+    SEARCH_PATH="/usr/local /usr"
+    SEARCH_FOR="/include/sqlite.h"
+    if test -r $PHP_SQLITE/; then # path given as parameter
+      SQLITE_DIR=$PHP_SQLITE
+    else # search default path list
+      echo $ac_n "checking for sqlite files in default path""... $ac_c" 1>&6
+echo "configure:89436: checking for sqlite files in default path" >&5
+      for i in $SEARCH_PATH ; do
+        if test -r $i/$SEARCH_FOR; then
+          SQLITE_DIR=$i
+          echo "$ac_t""found in $i" 1>&6
+        fi
+      done
+    fi
+  
+    if test -z "$SQLITE_DIR"; then
+      echo "$ac_t""not found" 1>&6
+      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
+    fi
+
     
   save_old_LDFLAGS=$LDFLAGS
   ac_stuff="
-    $SNMP_SHARED_LIBADD
-  "
+      -L$SQLITE_DIR/$PHP_LIBDIR -lm
+    "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -85180,27 +89543,27 @@ fi
     esac
   done
 
-  echo $ac_n "checking for snmp_parse_oid in -l$SNMP_LIBNAME""... $ac_c" 1>&6
-echo "configure:85185: checking for snmp_parse_oid in -l$SNMP_LIBNAME" >&5
-ac_lib_var=`echo $SNMP_LIBNAME'_'snmp_parse_oid | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for sqlite_open in -lsqlite""... $ac_c" 1>&6
+echo "configure:89548: checking for sqlite_open in -lsqlite" >&5
+ac_lib_var=`echo sqlite'_'sqlite_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$SNMP_LIBNAME  $LIBS"
+LIBS="-lsqlite  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 85193 "configure"
+#line 89556 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char snmp_parse_oid();
+char sqlite_open();
 
 int main() {
-snmp_parse_oid()
+sqlite_open()
 ; return 0; }
 EOF
-if { (eval echo configure:85204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:89567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -85219,97 +89582,69 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-    cat >> confdefs.h <<\EOF
-#define HAVE_SNMP_PARSE_OID 1
-EOF
-
-  
-  
-else
-  echo "$ac_t""no" 1>&6
+      
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$SNMP_LIBNAME_snmp_parse_oid
+  if test "$ext_shared" = "yes"; then
+    SQLITE_SHARED_LIBADD="-lsqlite $SQLITE_SHARED_LIBADD"
+    if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
+      
+  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  
-fi
-
+  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
+  fi
 
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-    $SNMP_SHARED_LIBADD
-  "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        SQLITE_SHARED_LIBADD="-L$ai_p $SQLITE_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE_SHARED_LIBADD"
       else
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+      fi
+    
+  fi
 
     fi
-   ;;
-  esac
-
+  else
+    
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+      
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -85325,93 +89660,171 @@ fi
   fi
 
 
-      fi
     
   fi
 
-    ;;
-    esac
-  done
+  fi
+  
+  
+  case sqlite in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsqlite $LIBS" 
+   ;;
+  esac
 
-  echo $ac_n "checking for init_snmp in -l$SNMP_LIBNAME""... $ac_c" 1>&6
-echo "configure:85338: checking for init_snmp in -l$SNMP_LIBNAME" >&5
-ac_lib_var=`echo $SNMP_LIBNAME'_'init_snmp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-l$SNMP_LIBNAME  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 85346 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char init_snmp();
 
-int main() {
-init_snmp()
-; return 0; }
-EOF
-if { (eval echo configure:85357: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+
+  fi
+
+
+      
+  if test "$SQLITE_DIR/include" != "/usr/include"; then
     
-    cat >> confdefs.h <<\EOF
-#define HAVE_SNMP 1
-EOF
+  if test -z "$SQLITE_DIR/include" || echo "$SQLITE_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$SQLITE_DIR/include
+  else
+    
+    ep_dir="`echo $SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/include\"`"
+  fi
 
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_$SNMP_LIBNAME_init_snmp
+    unset ac_cv_lib_sqlite_sqlite_open
+    
+      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
     
-    { echo "configure: error: SNMP sanity check failed. Please check config.log for more information." 1>&2; exit 1; }
-  
   
 fi
 
+    SQLITE_MODULE_TYPE=external
+    PHP_SQLITE_CFLAGS=$pdo_inc_path
+    sqlite_extra_sources="libsqlite/src/encode.c"
+  else
+    # use bundled library
+    
+  # we only support certain lemon versions
+  lemon_version_list="1.0"
 
-  if test "$PHP_UCD_SNMP_HACK" = "yes" ; then
-    cat >> confdefs.h <<\EOF
-#define UCD_SNMP_HACK 1
-EOF
+  # Extract the first word of "lemon", so it can be a program name with args.
+set dummy lemon; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:89740: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_LEMON'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$LEMON"; then
+  ac_cv_prog_LEMON="$LEMON" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_LEMON="lemon"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+fi
+fi
+LEMON="$ac_cv_prog_LEMON"
+if test -n "$LEMON"; then
+  echo "$ac_t""$LEMON" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
+  if test "$LEMON"; then
+    echo $ac_n "checking for lemon version""... $ac_c" 1>&6
+echo "configure:89768: checking for lemon version" >&5
+if eval "test \"`echo '$''{'php_cv_lemon_version'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+      lemon_version=`$LEMON -x 2>/dev/null | $SED -e 's/^.* //'`
+      php_cv_lemon_version=invalid
+      for lemon_check_version in $lemon_version_list; do
+        if test "$lemon_version" = "$lemon_check_version"; then
+          php_cv_lemon_version="$lemon_check_version (ok)"
+        fi
+      done
+    
+fi
 
+echo "$ac_t""$php_cv_lemon_version" 1>&6
+  else
+    lemon_version=none
   fi
+  case $php_cv_lemon_version in
+    ""|invalid)
+      lemon_msg="lemon versions supported for regeneration of libsqlite parsers: $lemon_version_list (found: $lemon_version)."
+      echo "configure: warning: $lemon_msg" 1>&2
+      LEMON="exit 0;"
+      ;;
+  esac
   
+  PHP_VAR_SUBST="$PHP_VAR_SUBST LEMON"
+
+
+    SQLITE_MODULE_TYPE=builtin
+    PHP_SQLITE_CFLAGS="-I@ext_srcdir@/libsqlite/src -I@ext_builddir@/libsqlite/src $pdo_inc_path"
+    sqlite_extra_sources="libsqlite/src/opcodes.c \
+        libsqlite/src/parse.c libsqlite/src/encode.c \
+        libsqlite/src/auth.c libsqlite/src/btree.c libsqlite/src/build.c \
+        libsqlite/src/delete.c libsqlite/src/expr.c libsqlite/src/func.c \
+        libsqlite/src/hash.c libsqlite/src/insert.c libsqlite/src/main.c \
+        libsqlite/src/os.c libsqlite/src/pager.c \
+        libsqlite/src/printf.c libsqlite/src/random.c \
+        libsqlite/src/select.c libsqlite/src/table.c libsqlite/src/tokenize.c \
+        libsqlite/src/update.c libsqlite/src/util.c libsqlite/src/vdbe.c \
+        libsqlite/src/attach.c libsqlite/src/btree_rb.c libsqlite/src/pragma.c \
+        libsqlite/src/vacuum.c libsqlite/src/copy.c \
+        libsqlite/src/vdbeaux.c libsqlite/src/date.c \
+        libsqlite/src/where.c libsqlite/src/trigger.c"
+  fi
+        sqlite_sources="sqlite.c sess_sqlite.c pdo_sqlite2.c $sqlite_extra_sources" 
   
-  ext_builddir=ext/snmp
-  ext_srcdir=$abs_srcdir/ext/snmp
+  ext_builddir=ext/sqlite
+  ext_srcdir=$abs_srcdir/ext/sqlite
 
-  ac_extra=
+  ac_extra=`echo "$PHP_SQLITE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SNMP_SHARED=no
+    PHP_SQLITE_SHARED=no
     
   
-  case ext/snmp in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -85426,7 +89839,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in snmp.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -85449,18 +89862,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC snmp"
+    EXT_STATIC="$EXT_STATIC sqlite"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SNMP_SHARED=yes
+      PHP_SQLITE_SHARED=yes
       
-  case ext/snmp in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -85475,14 +89888,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in snmp.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_snmp="$shared_objects_snmp $ac_bdir$ac_obj.lo"
+      shared_objects_sqlite="$shared_objects_sqlite $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -85505,31 +89918,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsnmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsnmp.so '$ext_builddir'/phpsnmp.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite.so '$ext_builddir'/phpsqlite.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSNMP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(PHPSNMP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsnmp.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsnmp.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsnmp.$suffix: $ext_builddir/phpsnmp.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsnmp.$suffix \$(phplibdir)
+\$(phplibdir)/phpsqlite.$suffix: $ext_builddir/phpsqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite.$suffix \$(phplibdir)
 
-$ext_builddir/phpsnmp.$suffix: \$(shared_objects_snmp) \$(PHPSNMP_SHARED_DEPENDENCIES)
+$ext_builddir/phpsqlite.$suffix: \$(shared_objects_sqlite) \$(PHPSQLITE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -85542,31 +89955,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/snmp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/snmp.so '$ext_builddir'/snmp.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite.so '$ext_builddir'/sqlite.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SNMP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_snmp) $(SNMP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/snmp.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/snmp.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_snmp"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/snmp.$suffix: $ext_builddir/snmp.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/snmp.$suffix \$(phplibdir)
+\$(phplibdir)/sqlite.$suffix: $ext_builddir/sqlite.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite.$suffix \$(phplibdir)
 
-$ext_builddir/snmp.$suffix: \$(shared_objects_snmp) \$(SNMP_SHARED_DEPENDENCIES)
+$ext_builddir/sqlite.$suffix: \$(shared_objects_sqlite) \$(SQLITE_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -85574,22 +89987,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SNMP 1
+#define COMPILE_DL_SQLITE 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SNMP_SHARED=no
+    PHP_SQLITE_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/snmp in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -85604,7 +90017,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in snmp.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -85627,15 +90040,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC snmp"
+        EXT_STATIC="$EXT_STATIC sqlite"
         ;;
       *)
         
   
-  case ext/snmp in
+  case ext/sqlite in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/snmp"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/snmp/"; ac_bdir="ext/snmp/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -85650,7 +90063,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in snmp.c; do
+  for ac_src in $sqlite_sources; do
   
       IFS=.
       set $ac_src
@@ -85675,7 +90088,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC snmp"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
   fi
   
   
@@ -85684,557 +90097,841 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=snmp
+    PHP_PECL_EXTENSION=sqlite
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"
+  am_i_shared=$PHP_SQLITE_SHARED
+  is_it_shared=$PHP_SPL_SHARED
+  is_it_enabled=$PHP_SPL
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension sqlite to build statically, but it
+depends on extension spl, which you've configured to build shared.
+You either need to build sqlite shared or build spl statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension sqlite, which depends on extension spl,
+but you've either not enabled spl, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  am_i_shared=$PHP_SQLITE_SHARED
+  is_it_shared=$PHP_PDO_SHARED
+  is_it_enabled=$PHP_PDO
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension sqlite to build statically, but it
+depends on extension pdo, which you've configured to build shared.
+You either need to build sqlite shared or build pdo statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension sqlite, which depends on extension pdo,
+but you've either not enabled pdo, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
 
-fi
+  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_SHARED_LIBADD"
 
+  
+  
+    for header_file in $ext_builddir/libsqlite/src/sqlite.h; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
 
-php_enable_soap=no
+    done 
+  
 
-echo $ac_n "checking whether to enable SOAP support""... $ac_c" 1>&6
-echo "configure:85704: checking whether to enable SOAP support" >&5
-# Check whether --enable-soap or --disable-soap was given.
-if test "${enable_soap+set}" = set; then
-  enableval="$enable_soap"
-  PHP_SOAP=$enableval
-else
   
-  PHP_SOAP=no
-  test "$PHP_ENABLE_ALL" && PHP_SOAP=$PHP_ENABLE_ALL
+  if test "$SQLITE_MODULE_TYPE" = "builtin"; then
+    
+  
+    $php_shtool mkdir -p $ext_builddir/libsqlite/src
+  
 
+    echo $ac_n "checking size of char *""... $ac_c" 1>&6
+echo "configure:90181: checking size of char *" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_char_p=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90189 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(char *));
+  exit(0);
+}
+EOF
+if { (eval echo configure:90201: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_char_p=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_char_p=0
+fi
+rm -fr conftest*
 fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_char_p" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_CHAR_P $ac_cv_sizeof_char_p
+EOF
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SOAP in
-shared,*)
-  PHP_SOAP=`echo "$PHP_SOAP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SOAP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    cat >> confdefs.h <<\EOF
+#define SQLITE_PTR_SZ SIZEOF_CHAR_P
+EOF
 
+                if test "$PHP_SQLITE_UTF8" = "yes"; then
+      SQLITE_ENCODING="UTF8"
+      cat >> confdefs.h <<\EOF
+#define SQLITE_UTF8 1
+EOF
 
+    else
+      SQLITE_ENCODING="ISO8859"
+    fi
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_ENCODING"
 
-echo "$ac_t""$ext_output" 1>&6
 
+    SQLITE_VERSION=`cat $ext_srcdir/libsqlite/VERSION`
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_VERSION"
 
 
+    sed -e s/--VERS--/$SQLITE_VERSION/ -e s/--ENCODING--/$SQLITE_ENCODING/ $ext_srcdir/libsqlite/src/sqlite.h.in > $ext_builddir/libsqlite/src/sqlite.h
 
-if test -z "$PHP_LIBXML_DIR"; then
+    if test "$ext_shared" = "no" || test "$ext_srcdir" != "$abs_srcdir"; then
+      echo '#include <php_config.h>' > $ext_builddir/libsqlite/src/config.h
+    else
+      echo "#include \"$abs_builddir/config.h\"" > $ext_builddir/libsqlite/src/config.h
+    fi
+    
+    cat >> $ext_builddir/libsqlite/src/config.h <<EOF
+#if ZTS
+# define THREADSAFE 1
+#endif
+#if !ZEND_DEBUG
+# define NDEBUG
+#endif
+EOF
+  fi
   
-php_with_libxml_dir=no
+  for ac_func in usleep nanosleep
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:90263: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90268 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:85749: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:90291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+  for ac_hdr in time.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:90319: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90324 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:90329: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+fi
+
+
+
+echo $ac_n "checking whether flush should be called explicitly after a buffered io""... $ac_c" 1>&6
+echo "configure:90360: checking whether flush should be called explicitly after a buffered io" >&5
+if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  PHP_LIBXML_DIR=no
+if test "$cross_compiling" = yes; then
+  
+  ac_cv_flush_io=no
+
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90371 "configure"
+#include "confdefs.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+
+int main(int argc, char **argv)
+{
+	char *filename = tmpnam(NULL);
+	char buffer[64];
+	int result = 0;
+	
+	FILE *fp = fopen(filename, "wb");
+	if (NULL == fp)
+		return 0;
+	fputs("line 1\n", fp);
+	fputs("line 2\n", fp);
+	fclose(fp);
+	
+	fp = fopen(filename, "rb+");
+	if (NULL == fp)
+		return 0;
+	fgets(buffer, sizeof(buffer), fp);
+	fputs("line 3\n", fp);
+	rewind(fp);
+	fgets(buffer, sizeof(buffer), fp);
+	if (0 != strcmp(buffer, "line 1\n"))
+		result = 1;
+	fgets(buffer, sizeof(buffer), fp);
+	if (0 != strcmp(buffer, "line 3\n"))
+		result = 1;
+	fclose(fp);
+	unlink(filename);
+
+	exit(result);
+}
+
+EOF
+if { (eval echo configure:90409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_flush_io=no
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
+  ac_cv_flush_io=yes
 
 fi
+rm -fr conftest*
+fi
 
+fi
 
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
+echo "$ac_t""$ac_cv_flush_io" 1>&6
+if test "$ac_cv_flush_io" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_FLUSHIO 1
+EOF
 
+fi
 
+if test "$ac_cv_func_crypt" = "no"; then
+  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
+echo "configure:90437: checking for crypt in -lcrypt" >&5
+ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcrypt  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 90445 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char crypt();
 
+int main() {
+crypt()
+; return 0; }
+EOF
+if { (eval echo configure:90456: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test "$PHP_SOAP" != "no"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LIBS="-lcrypt $LIBS -lcrypt"
+    cat >> confdefs.h <<\EOF
+#define HAVE_CRYPT 1
+EOF
 
-  if test "$PHP_LIBXML" = "no"; then   
-    { echo "configure: error: SOAP extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }                
-  fi
+  
+else
+  echo "$ac_t""no" 1>&6
+fi
 
+fi
   
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:85777: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
+echo "configure:90485: checking for standard DES crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
+  if test "$cross_compiling" = yes; then
+  
+  ac_cv_crypt_des=yes
 
-fi
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90496 "configure"
+#include "confdefs.h"
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -pthread"
-      else
-        
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_crypt_des=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+  ac_cv_crypt_des=no
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_crypt_des" 1>&6
+
+echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
+echo "configure:90536: checking for extended DES crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="$SOAP_SHARED_LIBADD -l$ac_ii" 
-    else
-      
+  if test "$cross_compiling" = yes; then
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
+  ac_cv_crypt_ext_des=no
 
-    fi
-   ;;
-  esac
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90547 "configure"
+#include "confdefs.h"
 
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
 
-    
-      if test "$ext_shared" = "yes"; then
-        SOAP_SHARED_LIBADD="-L$ai_p $SOAP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SOAP_SHARED_LIBADD="$ld_runpath_switch$ai_p $SOAP_SHARED_LIBADD"
-      else
-        
+main() {
+#if HAVE_CRYPT
+  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
+#else
+  exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
+  ac_cv_crypt_ext_des=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_crypt_ext_des=no
+
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
+
+echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
+echo "configure:90587: checking for MD5 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+if test "$cross_compiling" = yes; then
   
-  fi
+  ac_cv_crypt_md5=no
 
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90598 "configure"
+#include "confdefs.h"
 
-      fi
-    
-  fi
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-    ;;
-    esac
-  done
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
 
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
+main() {
+#if HAVE_CRYPT
+    char salt[15], answer[40];
 
-    
+    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
+    salt[3]='r'; salt[4]='a'; salt[5]='s';
+    salt[6]='m'; salt[7]='u'; salt[8]='s';
+    salt[9]='l'; salt[10]='e'; salt[11]='$';
+    salt[12]='\0';
+    strcpy(answer,salt);
+    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
+    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90626: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  ac_cv_crypt_md5=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  ac_cv_crypt_md5=no
 
-  fi
+fi
+rm -fr conftest*
+fi
 
-    ;;
-    esac
-  done
+fi
 
+echo "$ac_t""$ac_cv_crypt_md5" 1>&6
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:85935: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
+echo "configure:90647: checking for Blowfish crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $SOAP_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
+if test "$cross_compiling" = yes; then
   
+  ac_cv_crypt_blowfish=no
+
 else
   cat > conftest.$ac_ext <<EOF
-#line 85951 "configure"
+#line 90658 "configure"
 #include "confdefs.h"
 
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[70];
     
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
+    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
+    strcat(salt,"rasmuslerd............");
+    strcpy(answer,salt);
+    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
+    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
+#else
+	exit(0);
+#endif
+}
 EOF
-if { (eval echo configure:85962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:90683: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
+  ac_cv_crypt_blowfish=yes
+
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
+  ac_cv_crypt_blowfish=no
+
 fi
 rm -fr conftest*
 fi
 
-
-      
 fi
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
+echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
 
-      fi
-      
-    cat >> confdefs.h <<\EOF
-#define HAVE_SOAP 1
-EOF
+echo $ac_n "checking for SHA512 crypt""... $ac_c" 1>&6
+echo "configure:90704: checking for SHA512 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_SHA512'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+if test "$cross_compiling" = yes; then
+  
+  ac_cv_crypt_SHA512=no
 
-    
-  ext_builddir=ext/soap
-  ext_srcdir=$abs_srcdir/ext/soap
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90715 "configure"
+#include "confdefs.h"
 
-  ac_extra=
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SOAP_SHARED=no
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
+
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[80];
     
+    salt[0]='$'; salt[1]='6'; salt[2]='$'; salt[3]='$'; salt[4]='b'; salt[5]='a'; salt[6]='r'; salt[7]='\0';
+    strcpy(answer, salt);
+    strcpy(&answer[29],"$6$$QMXjqd7rHQZPQ1yHsXkQqC1FBzDiVfTHXL.LaeDAeVV.IzMaV9VU4MQ8kPuZa2SOP1A0RPm772EaFYjpEJtdu.");
+    exit (strcmp((char *)crypt("foo",salt),answer));
+#else
+	exit(0);
+#endif
+}
+EOF
+if { (eval echo configure:90739: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
   
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+  ac_cv_crypt_SHA512=yes
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  ac_cv_crypt_SHA512=no
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
+rm -fr conftest*
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+fi
 
+echo "$ac_t""$ac_cv_crypt_SHA512" 1>&6
 
-    EXT_STATIC="$EXT_STATIC soap"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SOAP_SHARED=yes
-      
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+echo $ac_n "checking for SHA256 crypt""... $ac_c" 1>&6
+echo "configure:90760: checking for SHA256 crypt" >&5
+if eval "test \"`echo '$''{'ac_cv_crypt_SHA256'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
+if test "$cross_compiling" = yes; then
   
+  ac_cv_crypt_SHA256=no
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
+else
+  cat > conftest.$ac_ext <<EOF
+#line 90771 "configure"
+#include "confdefs.h"
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_soap="$shared_objects_soap $ac_bdir$ac_obj.lo"
+#if HAVE_UNISTD_H
+#include <unistd.h>
+#endif
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+#if HAVE_CRYPT_H
+#include <crypt.h>
+#endif
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+main() {
+#if HAVE_CRYPT
+    char salt[30], answer[80];
+    salt[0]='$'; salt[1]='5'; salt[2]='$'; salt[3]='$'; salt[4]='s'; salt[5]='a'; salt[6]='l'; salt[7]='t';  salt[8]='s'; salt[9]='t'; salt[10]='r'; salt[11]='i'; salt[12]='n'; salt[13]='g'; salt[14]='\0';    
+    strcat(salt,"");
+    strcpy(answer, salt);
+    strcpy(&answer[29], "$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5");
+    exit (strcmp((char *)crypt("foo",salt),answer));
+#else
+	exit(0);
+#endif
+}
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsoap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsoap.so '$ext_builddir'/phpsoap.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOAP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(PHPSOAP_SHARED_LIBADD)'
-      ;;
-  esac
+if { (eval echo configure:90795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_crypt_SHA256=yes
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsoap.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsoap.$suffix"
-  fi
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
+  ac_cv_crypt_SHA256=no
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsoap.$suffix: $ext_builddir/phpsoap.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsoap.$suffix \$(phplibdir)
+fi
+rm -fr conftest*
+fi
 
-$ext_builddir/phpsoap.$suffix: \$(shared_objects_soap) \$(PHPSOAP_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
 
-EOF
+echo "$ac_t""$ac_cv_crypt_SHA256" 1>&6
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/soap.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/soap.so '$ext_builddir'/soap.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOAP, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_soap) $(SOAP_SHARED_LIBADD)'
-      ;;
-  esac
+if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/soap.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/soap.$suffix"
-  fi
+        echo $ac_n "checking whether the compiler supports __alignof__""... $ac_c" 1>&6
+echo "configure:90819: checking whether the compiler supports __alignof__" >&5
+if eval "test \"`echo '$''{'ac_cv_alignof_exists'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_soap"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/soap.$suffix: $ext_builddir/soap.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/soap.$suffix \$(phplibdir)
+  cat > conftest.$ac_ext <<EOF
+#line 90825 "configure"
+#include "confdefs.h"
 
-$ext_builddir/soap.$suffix: \$(shared_objects_soap) \$(SOAP_SHARED_DEPENDENCIES)
-	$link_cmd
+  
+int main() {
 
+    int align = __alignof__(int);
+  
+; return 0; }
 EOF
+if { (eval echo configure:90835: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+    ac_cv_alignof_exists=yes
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+    ac_cv_alignof_exists=no
+  
+fi
+rm -f conftest*
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SOAP 1
+echo "$ac_t""$ac_cv_alignof_exists" 1>&6
+  if test "$ac_cv_alignof_exists" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_ALIGNOF 1
 EOF
 
-    fi
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SOAP_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
+        echo $ac_n "checking whether the compiler supports aligned attribute""... $ac_c" 1>&6
+echo "configure:90860: checking whether the compiler supports aligned attribute" >&5
+if eval "test \"`echo '$''{'ac_cv_attribute_aligned'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  case ext/soap in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  cat > conftest.$ac_ext <<EOF
+#line 90866 "configure"
+#include "confdefs.h"
+
+  
+int main() {
+
+    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));
+  
+; return 0; }
+EOF
+if { (eval echo configure:90876: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+    ac_cv_attribute_aligned=yes
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
   
+    ac_cv_attribute_aligned=no
   
+fi
+rm -f conftest*
+fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+echo "$ac_t""$ac_cv_attribute_aligned" 1>&6
+  if test "$ac_cv_attribute_aligned" = "yes"; then
+    cat >> confdefs.h <<\EOF
+#define HAVE_ATTRIBUTE_ALIGNED 1
+EOF
 
+  fi
+    
 
-  old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  cat >> confdefs.h <<EOF
+#define PHP_USE_PHP_CRYPT_R 1
+EOF
+
+  cat >> confdefs.h <<EOF
+#define PHP_STD_DES_CRYPT 1
+EOF
+
+  cat >> confdefs.h <<EOF
+#define PHP_BLOWFISH_CRYPT 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  cat >> confdefs.h <<EOF
+#define PHP_EXT_DES_CRYPT 1
+EOF
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  cat >> confdefs.h <<EOF
+#define PHP_MD5_CRYPT 1
+EOF
+
+  cat >> confdefs.h <<EOF
+#define PHP_SHA512_CRYPT 1
+EOF
+
+  cat >> confdefs.h <<EOF
+#define PHP_SHA256_CRYPT 1
 EOF
-  done
 
 
-        EXT_STATIC="$EXT_STATIC soap"
-        ;;
-      *)
-        
   
-  case ext/soap in
+  
+  case ext/standard in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/soap"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/soap/"; ac_bdir="ext/soap/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -86249,20 +90946,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in soap.c php_encoding.c php_http.c php_packet_soap.c php_schema.c php_sdl.c php_xml.c; do
+  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -86272,130 +90969,94 @@ EOF
   done
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC soap"
+else
+  if test "$ac_cv_crypt_des" = "yes"; then
+    ac_result=1
+    ac_crypt_des=1
+  else
+    ac_result=0
+    ac_crypt_des=0
   fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
+  cat >> confdefs.h <<EOF
+#define PHP_STD_DES_CRYPT $ac_result
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=soap
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  if test "$ac_cv_crypt_blowfish" = "yes"; then
+    ac_result=1
+    ac_crypt_blowfish=1
+  else
+    ac_result=0
+    ac_crypt_blowfish=0
   fi
+  cat >> confdefs.h <<EOF
+#define PHP_BLOWFISH_CRYPT $ac_result
+EOF
 
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SOAP_SHARED_LIBADD"
 
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
+  if test "$ac_cv_crypt_ext_des" = "yes"; then
+    ac_result=1
+    ac_crypt_edes=1
+  else
+    ac_result=0
+    ac_crypt_edes=0
   fi
+  cat >> confdefs.h <<EOF
+#define PHP_EXT_DES_CRYPT $ac_result
+EOF
 
-fi
-
-
-
-php_enable_sockets=no
 
-echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
-echo "configure:86312: checking whether to enable sockets support" >&5
-# Check whether --enable-sockets or --disable-sockets was given.
-if test "${enable_sockets+set}" = set; then
-  enableval="$enable_sockets"
-  PHP_SOCKETS=$enableval
-else
+  if test "$ac_cv_crypt_md5" = "yes"; then
+    ac_result=1
+    ac_crypt_md5=1
+  else
+    ac_result=0
+    ac_crypt_md5=0
+  fi
+  cat >> confdefs.h <<EOF
+#define PHP_MD5_CRYPT $ac_result
+EOF
   
-  PHP_SOCKETS=no
-  test "$PHP_ENABLE_ALL" && PHP_SOCKETS=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SOCKETS in
-shared,*)
-  PHP_SOCKETS=`echo "$PHP_SOCKETS"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SOCKETS=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_SOCKETS" != "no"; then
-    echo $ac_n "checking for struct cmsghdr""... $ac_c" 1>&6
-echo "configure:86354: checking for struct cmsghdr" >&5
-if eval "test \"`echo '$''{'ac_cv_cmsghdr'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-    cat > conftest.$ac_ext <<EOF
-#line 86360 "configure"
-#include "confdefs.h"
+  if test "$ac_cv_crypt_sha512" = "yes"; then
+    ac_result=1
+    ac_crypt_sha512=1
+  else
+    ac_result=0
+    ac_crypt_sha512=0
+  fi
+  cat >> confdefs.h <<EOF
+#define PHP_SHA512_CRYPT $ac_result
+EOF
 
-#include <sys/types.h>
-#include <sys/socket.h>
-int main() {
-struct cmsghdr s; s
-; return 0; }
+
+  if test "$ac_cv_crypt_sha256" = "yes"; then
+    ac_result=1
+    ac_crypt_sha256=1
+  else
+    ac_result=0
+    ac_crypt_sha256=0
+  fi
+  cat >> confdefs.h <<EOF
+#define PHP_SHA256_CRYPT $ac_result
 EOF
-if { (eval echo configure:86369: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  ac_cv_cmsghdr=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_cmsghdr=no
-fi
-rm -f conftest*
-  
-fi
 
-echo "$ac_t""$ac_cv_cmsghdr" 1>&6
 
-  if test "$ac_cv_cmsghdr" = yes; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_CMSGHDR 1
+  cat >> confdefs.h <<EOF
+#define PHP_USE_PHP_CRYPT_R 0
 EOF
 
-  fi 
+fi
 
-  for ac_func in hstrerror socketpair
+for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:86394: checking for $ac_func" >&5
+echo "configure:91055: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 86399 "configure"
+#line 91060 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -86418,7 +91079,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:86422: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:91083: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -86442,1018 +91103,1372 @@ else
 fi
 done
 
-  for ac_hdr in netdb.h netinet/tcp.h sys/un.h errno.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:86450: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
+echo "configure:91108: checking for working fnmatch" >&5
+if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
+  # Some versions of Solaris or SCO have a broken fnmatch function.
+# So we run a test program.  If we are cross-compiling, take no chance.
+# Thanks to John Oleynick and Franc,ois Pinard for this test.
+if test "$cross_compiling" = yes; then
+  ac_cv_func_fnmatch_works=no
+else
   cat > conftest.$ac_ext <<EOF
-#line 86455 "configure"
+#line 91119 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+main() { exit (fnmatch ("a*", "abc", 0) != 0); }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:86460: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+if { (eval echo configure:91123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_func_fnmatch_works=yes
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  rm -fr conftest*
+  ac_cv_func_fnmatch_works=no
 fi
-rm -f conftest*
+rm -fr conftest*
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+
+fi
+
+echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
+if test $ac_cv_func_fnmatch_works = yes; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_FNMATCH 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
+
 fi
-done
+	
+
 
+for ac_func in fork CreateProcess
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:91150: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   cat > conftest.$ac_ext <<EOF
-#line 86487 "configure"
+#line 91155 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-#include <sys/types.h>
-#include <sys/socket.h>
-  
 int main() {
-static struct msghdr tp; int n = (int) tp.msg_flags; return n
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:86497: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  :
+if { (eval echo configure:91178: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  cat >> confdefs.h <<\EOF
-#define MISSING_MSGHDR_MSGFLAGS 1
-EOF
-
-  
+  eval "ac_cv_func_$ac_func=no"
 fi
 rm -f conftest*
-  cat >> confdefs.h <<\EOF
-#define HAVE_SOCKETS 1
-EOF
-
-
-  
-  ext_builddir=ext/sockets
-  ext_srcdir=$abs_srcdir/ext/sockets
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SOCKETS_SHARED=no
-    
-  
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC sockets"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SOCKETS_SHARED=yes
-      
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_sockets="$shared_objects_sockets $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsockets.so '$ext_builddir'/phpsockets.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSOCKETS, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(PHPSOCKETS_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsockets.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsockets.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
+ 
+  php_can_support_proc_open=yes
+  break
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsockets.$suffix: $ext_builddir/phpsockets.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsockets.$suffix \$(phplibdir)
+else
+  echo "$ac_t""no" 1>&6
+php_can_support_proc_open=no
 
-$ext_builddir/phpsockets.$suffix: \$(shared_objects_sockets) \$(PHPSOCKETS_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
+done
 
+echo $ac_n "checking if your OS can spawn processes with inherited handles""... $ac_c" 1>&6
+echo "configure:91208: checking if your OS can spawn processes with inherited handles" >&5
+if test "$php_can_support_proc_open" = "yes"; then
+  echo "$ac_t""yes" 1>&6
+  cat >> confdefs.h <<\EOF
+#define PHP_CAN_SUPPORT_PROC_OPEN 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sockets.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sockets.so '$ext_builddir'/sockets.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SOCKETS, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sockets) $(SOCKETS_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sockets.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sockets.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sockets"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sockets.$suffix: $ext_builddir/sockets.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sockets.$suffix \$(phplibdir)
-
-$ext_builddir/sockets.$suffix: \$(shared_objects_sockets) \$(SOCKETS_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SOCKETS 1
+if test "$PHP_SAPI" = "cgi" || test "$PHP_SAPI" = "cli" || test "$PHP_SAPI" = "embed"; then
+  cat >> confdefs.h <<\EOF
+#define ENABLE_CHROOT_FUNC 1
 EOF
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SOCKETS_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
+  unset ac_cv_func_res_nsearch
+  unset ac_cv_func___res_nsearch
+  unset found
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  echo $ac_n "checking for res_nsearch""... $ac_c" 1>&6
+echo "configure:91232: checking for res_nsearch" >&5
+if eval "test \"`echo '$''{'ac_cv_func_res_nsearch'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91237 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char res_nsearch(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+int main() {
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_res_nsearch) || defined (__stub___res_nsearch)
+choke me
+#else
+res_nsearch();
+#endif
+
+; return 0; }
 EOF
-  done
+if { (eval echo configure:91260: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_res_nsearch=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_res_nsearch=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'res_nsearch`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __res_nsearch""... $ac_c" 1>&6
+echo "configure:91278: checking for __res_nsearch" >&5
+if eval "test \"`echo '$''{'ac_cv_func___res_nsearch'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91283 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __res_nsearch(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-        EXT_STATIC="$EXT_STATIC sockets"
-        ;;
-      *)
-        
-  
-  case ext/sockets in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sockets"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sockets/"; ac_bdir="ext/sockets/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+int main() {
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___res_nsearch) || defined (__stub_____res_nsearch)
+choke me
+#else
+__res_nsearch();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:91306: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___res_nsearch=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___res_nsearch=no"
+fi
+rm -f conftest*
+fi
 
-  old_IFS=$IFS
-  for ac_src in sockets.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+if eval "test \"`echo '$ac_cv_func_'__res_nsearch`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
 EOF
-  done
-
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sockets"
-  fi
-  
+    ac_cv_func_res_nsearch=yes
+  ;;
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+    *) 
   
+  unset ac_cv_lib_resolv_res_nsearch
+  unset ac_cv_lib_resolv___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lresolv""... $ac_c" 1>&6
+echo "configure:91344: checking for res_nsearch in -lresolv" >&5
+ac_lib_var=`echo resolv'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91352 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
+int main() {
+res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91363: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sockets
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  fi
+    echo $ac_n "checking for __res_nsearch in -lresolv""... $ac_c" 1>&6
+echo "configure:91383: checking for __res_nsearch in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91391 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-  
-  
-    header_path=ext/sockets/
-    for header_file in php_sockets.h; do
-      hp_hf="$header_path/$header_file"
-      
-  
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
+int main() {
+__res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91402: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    done 
-  
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
+  
 fi
 
 
-  echo $ac_n "checking whether zend_object_value is packed""... $ac_c" 1>&6
-echo "configure:86831: checking whether zend_object_value is packed" >&5
-  old_CPPFLAGS=$CPPFLAGS
-  CPPFLAGS="$INCLUDES -I$abs_srcdir $CPPFLAGS"
-  if test "$cross_compiling" = yes; then
-  
-    ac_result=0
-    echo "$ac_t""no" 1>&6
-  
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 86841 "configure"
+#line 91434 "configure"
 #include "confdefs.h"
-
-#include "Zend/zend_types.h"
-int main(int argc, char **argv) {
-	return ((sizeof(zend_object_handle) + sizeof(zend_object_handlers*)) == sizeof(zend_object_value)) ? 0 : 1;
-}
-  
+main() { return (0); }
 EOF
-if { (eval echo configure:86850: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:91438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  
-    ac_result=1
-    echo "$ac_t""yes" 1>&6
-  
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  
-    ac_result=0
-    echo "$ac_t""no" 1>&6
-  
+  found=no
 fi
 rm -fr conftest*
 fi
 
-  CPPFLAGS=$old_CPPFLAGS
-  cat >> confdefs.h <<EOF
-#define HAVE_PACKED_OBJECT_VALUE $ac_result
-EOF
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_SPL 1
-EOF
- 
-  
-  ext_builddir=ext/spl
-  ext_srcdir=$abs_srcdir/ext/spl
-
-  ac_extra=
+    LIBS=$ac_libs
+  fi
 
-  if test "no" != "shared" && test "no" != "yes" && test "" != "cli"; then
-    PHP_SPL_SHARED=no
+  if test "$found" = "yes"; then
     
   
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+    ac_cv_func_res_nsearch=yes
+  else
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  unset ac_cv_lib_bind_res_nsearch
+  unset ac_cv_lib_bind___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lbind""... $ac_c" 1>&6
+echo "configure:91480: checking for res_nsearch in -lbind" >&5
+ac_lib_var=`echo bind'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91488 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+res_nsearch()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:91499: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-    EXT_STATIC="$EXT_STATIC spl"
-    if test "no" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
-    fi
-  else
-    if test "no" = "shared" || test "no" = "yes"; then
-      PHP_SPL_SHARED=yes
-      
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+    echo $ac_n "checking for __res_nsearch in -lbind""... $ac_c" 1>&6
+echo "configure:91519: checking for __res_nsearch in -lbind" >&5
+ac_lib_var=`echo bind'_'__res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91527 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+int main() {
+__res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91538: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_spl="$shared_objects_spl $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91570 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpspl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpspl.so '$ext_builddir'/phpspl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSPL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(PHPSPL_SHARED_LIBADD)'
-      ;;
-  esac
+if { (eval echo configure:91574: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpspl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpspl.$suffix"
+    LIBS=$ac_libs
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpspl.$suffix: $ext_builddir/phpspl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpspl.$suffix \$(phplibdir)
+  if test "$found" = "yes"; then
+    
+  
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
+  esac
 
-$ext_builddir/phpspl.$suffix: \$(shared_objects_spl) \$(PHPSPL_SHARED_DEPENDENCIES)
-	$link_cmd
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/spl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/spl.so '$ext_builddir'/spl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SPL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_spl) $(SPL_SHARED_LIBADD)'
-      ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/spl.$suffix"
+    ac_cv_func_res_nsearch=yes
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/spl.$suffix"
-  fi
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_spl"
+  unset ac_cv_lib_socket_res_nsearch
+  unset ac_cv_lib_socket___res_nsearch
+  unset found
+  echo $ac_n "checking for res_nsearch in -lsocket""... $ac_c" 1>&6
+echo "configure:91616: checking for res_nsearch in -lsocket" >&5
+ac_lib_var=`echo socket'_'res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91624 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_nsearch();
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/spl.$suffix: $ext_builddir/spl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/spl.$suffix \$(phplibdir)
+int main() {
+res_nsearch()
+; return 0; }
+EOF
+if { (eval echo configure:91635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-$ext_builddir/spl.$suffix: \$(shared_objects_spl) \$(SPL_SHARED_DEPENDENCIES)
-	$link_cmd
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-EOF
+    echo $ac_n "checking for __res_nsearch in -lsocket""... $ac_c" 1>&6
+echo "configure:91655: checking for __res_nsearch in -lsocket" >&5
+ac_lib_var=`echo socket'_'__res_nsearch | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91663 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_nsearch();
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SPL 1
+int main() {
+__res_nsearch()
+; return 0; }
 EOF
+if { (eval echo configure:91674: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    fi
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  if test "no" != "shared" && test "no" != "yes" && test "" = "cli"; then
-    PHP_SPL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
   
+fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91706 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_NSEARCH 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
 EOF
-  done
 
+    ac_cv_func_res_nsearch=yes
+  else
+    
+  :
 
-        EXT_STATIC="$EXT_STATIC spl"
-        ;;
-      *)
-        
-  
-  case ext/spl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/spl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/spl/"; ac_bdir="ext/spl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  fi
   
+
+  fi
   
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  fi
+  
+ ;;
+  
+  esac
 
 
-  old_IFS=$IFS
-  for ac_src in php_spl.c spl_functions.c spl_engine.c spl_iterators.c spl_array.c spl_directory.c spl_exceptions.c spl_observer.c spl_dllist.c spl_heap.c spl_fixedarray.c; do
+  unset ac_cv_func_dns_search
+  unset ac_cv_func___dns_search
+  unset found
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  echo $ac_n "checking for dns_search""... $ac_c" 1>&6
+echo "configure:91767: checking for dns_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dns_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91772 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dns_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+int main() {
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dns_search) || defined (__stub___dns_search)
+choke me
+#else
+dns_search();
+#endif
+
+; return 0; }
 EOF
-  done
+if { (eval echo configure:91795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dns_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dns_search=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'dns_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dns_search""... $ac_c" 1>&6
+echo "configure:91813: checking for __dns_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dns_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91818 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dns_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC spl"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dns_search) || defined (__stub_____dns_search)
+choke me
+#else
+__dns_search();
+#endif
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=spl
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+; return 0; }
+EOF
+if { (eval echo configure:91841: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dns_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___dns_search=no"
+fi
+rm -f conftest*
+fi
 
-  fi
+if eval "test \"`echo '$ac_cv_func_'__dns_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
-  
-  
-    header_path=ext/spl
-    for header_file in php_spl.h spl_array.h spl_directory.h spl_engine.h spl_exceptions.h spl_functions.h spl_iterators.h spl_observer.h spl_dllist.h spl_heap.h spl_fixedarray.h; do
-      hp_hf="$header_path/$header_file"
-      
-  
-  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
-      
-  fi
 
-    done 
-  
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    ac_cv_func_dns_search=yes
+  ;;
   
-  am_i_shared=$PHP_SPL_SHARED
-  is_it_shared=$PHP_PCRE_SHARED
-  is_it_enabled=$PHP_PCRE
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension spl to build statically, but it
-depends on extension pcre, which you've configured to build shared.
-You either need to build spl shared or build pcre statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension spl, which depends on extension pcre,
-but you've either not enabled pcre, or have disabled it.
-" 1>&2; exit 1; }
-  fi
+    *) 
   
+  unset ac_cv_lib_resolv_dns_search
+  unset ac_cv_lib_resolv___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lresolv""... $ac_c" 1>&6
+echo "configure:91879: checking for dns_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91887 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
 
+int main() {
+dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:91898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-php_with_sqlite=yes
+    echo $ac_n "checking for __dns_search in -lresolv""... $ac_c" 1>&6
+echo "configure:91918: checking for __dns_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 91926 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
 
-echo $ac_n "checking for sqlite support""... $ac_c" 1>&6
-echo "configure:87214: checking for sqlite support" >&5
-# Check whether --with-sqlite or --without-sqlite was given.
-if test "${with_sqlite+set}" = set; then
-  withval="$with_sqlite"
-  PHP_SQLITE=$withval
+int main() {
+__dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:91937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  
-  PHP_SQLITE=yes
-  test "$PHP_ENABLE_ALL" && PHP_SQLITE=$PHP_ENABLE_ALL
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
+  
+fi
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SQLITE in
-shared,*)
-  PHP_SQLITE=`echo "$PHP_SQLITE"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SQLITE=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 91969 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:91973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
+    LIBS=$ac_libs
+  fi
 
+  if test "$found" = "yes"; then
+    
+  
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
 
-echo "$ac_t""$ext_output" 1>&6
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
+    ac_cv_func_dns_search=yes
+  else
+    
+  
+  unset ac_cv_lib_bind_dns_search
+  unset ac_cv_lib_bind___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lbind""... $ac_c" 1>&6
+echo "configure:92015: checking for dns_search in -lbind" >&5
+ac_lib_var=`echo bind'_'dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92023 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
 
+int main() {
+dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:92034: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-php_enable_sqlite_utf8=no
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-echo $ac_n "checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)""... $ac_c" 1>&6
-echo "configure:87258: checking whether to enable UTF-8 support in sqlite (default: ISO-8859-1)" >&5
-# Check whether --enable-sqlite-utf8 or --disable-sqlite-utf8 was given.
-if test "${enable_sqlite_utf8+set}" = set; then
-  enableval="$enable_sqlite_utf8"
-  PHP_SQLITE_UTF8=$enableval
+    echo $ac_n "checking for __dns_search in -lbind""... $ac_c" 1>&6
+echo "configure:92054: checking for __dns_search in -lbind" >&5
+ac_lib_var=`echo bind'_'__dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_SQLITE_UTF8=no
-  
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92062 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
 
+int main() {
+__dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:92073: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-ext_output=$PHP_SQLITE_UTF8
-echo "$ac_t""$ext_output" 1>&6
-
+  
+fi
 
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92105 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92109: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
+    LIBS=$ac_libs
+  fi
 
+  if test "$found" = "yes"; then
+    
+  
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
+  esac
 
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-if test "$PHP_SQLITE" != "no"; then
-  if test "$PHP_PDO" != "no"; then
+    ac_cv_func_dns_search=yes
+  else
     
-  echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:87286: checking for PDO includes" >&5
-if eval "test \"`echo '$''{'pdo_inc_path'+set}'`\" = set"; then
+  
+  unset ac_cv_lib_socket_dns_search
+  unset ac_cv_lib_socket___dns_search
+  unset found
+  echo $ac_n "checking for dns_search in -lsocket""... $ac_c" 1>&6
+echo "configure:92151: checking for dns_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-    echo $ac_n "checking for PDO includes""... $ac_c" 1>&6
-echo "configure:87292: checking for PDO includes" >&5
-    if test -f $abs_srcdir/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $abs_srcdir/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$abs_srcdir/ext
-    elif test -f $prefix/include/php/ext/pdo/php_pdo_driver.h; then
-      pdo_inc_path=$prefix/include/php/ext
-    fi
-  
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92159 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dns_search();
+
+int main() {
+dns_search()
+; return 0; }
+EOF
+if { (eval echo configure:92170: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-echo "$ac_t""$pdo_inc_path" 1>&6
-  if test -n "$pdo_inc_path"; then
-:
-  else
-echo "configure: warning: Cannot find php_pdo_driver.h." 1>&2
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-    if test -n "$pdo_inc_path"; then
-      cat >> confdefs.h <<\EOF
-#define PHP_SQLITE2_HAVE_PDO 1
+    echo $ac_n "checking for __dns_search in -lsocket""... $ac_c" 1>&6
+echo "configure:92190: checking for __dns_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dns_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92198 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dns_search();
+
+int main() {
+__dns_search()
+; return 0; }
 EOF
+if { (eval echo configure:92209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-      pdo_inc_path="-I$pdo_inc_path"
-    fi
-  fi  
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  if test "$PHP_SQLITE" != "yes"; then
-    SEARCH_PATH="/usr/local /usr"
-    SEARCH_FOR="/include/sqlite.h"
-    if test -r $PHP_SQLITE/; then # path given as parameter
-      SQLITE_DIR=$PHP_SQLITE
-    else # search default path list
-      echo $ac_n "checking for sqlite files in default path""... $ac_c" 1>&6
-echo "configure:87326: checking for sqlite files in default path" >&5
-      for i in $SEARCH_PATH ; do
-        if test -r $i/$SEARCH_FOR; then
-          SQLITE_DIR=$i
-          echo "$ac_t""found in $i" 1>&6
-        fi
-      done
-    fi
   
-    if test -z "$SQLITE_DIR"; then
-      echo "$ac_t""not found" 1>&6
-      { echo "configure: error: Please reinstall the sqlite distribution from http://www.sqlite.org" 1>&2; exit 1; }
-    fi
+fi
 
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-      -L$SQLITE_DIR/$PHP_LIBDIR -lm
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92241 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
+  if test "$found" = "yes"; then
+    
   
-  case $ac_ii in
+  case socket in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lsocket $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
+    cat >> confdefs.h <<\EOF
+#define HAVE_DNS_SEARCH 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+    ac_cv_func_dns_search=yes
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  :
+
   fi
+  
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+  fi
   
+
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  esac
+
+
+  unset ac_cv_func_dn_expand
+  unset ac_cv_func___dn_expand
+  unset found
   
-  fi
+  echo $ac_n "checking for dn_expand""... $ac_c" 1>&6
+echo "configure:92302: checking for dn_expand" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dn_expand'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92307 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dn_expand(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
+int main() {
 
-      fi
-    
-  fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dn_expand) || defined (__stub___dn_expand)
+choke me
+#else
+dn_expand();
+#endif
 
-    ;;
-    esac
-  done
+; return 0; }
+EOF
+if { (eval echo configure:92330: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dn_expand=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dn_expand=no"
+fi
+rm -f conftest*
+fi
 
-  echo $ac_n "checking for sqlite_open in -lsqlite""... $ac_c" 1>&6
-echo "configure:87438: checking for sqlite_open in -lsqlite" >&5
-ac_lib_var=`echo sqlite'_'sqlite_open | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$ac_cv_func_'dn_expand`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dn_expand""... $ac_c" 1>&6
+echo "configure:92348: checking for __dn_expand" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dn_expand'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92353 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dn_expand(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dn_expand) || defined (__stub_____dn_expand)
+choke me
+#else
+__dn_expand();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:92376: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dn_expand=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___dn_expand=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'__dn_expand`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
+
+
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
+
+    ac_cv_func_dn_expand=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_resolv_dn_expand
+  unset ac_cv_lib_resolv___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
+echo "configure:92414: checking for dn_expand in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsqlite  $LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92422 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
+
+int main() {
+dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:92433: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __dn_expand in -lresolv""... $ac_c" 1>&6
+echo "configure:92453: checking for __dn_expand in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 87446 "configure"
+#line 92461 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char sqlite_open();
+char __dn_expand();
 
 int main() {
-sqlite_open()
+__dn_expand()
 ; return 0; }
 EOF
-if { (eval echo configure:87457: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:92472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -87468,880 +92483,1297 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-
-  if test "$ext_shared" = "yes"; then
-    SQLITE_SHARED_LIBADD="-lsqlite $SQLITE_SHARED_LIBADD"
-    if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
-      
-  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
-  fi
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        SQLITE_SHARED_LIBADD="-L$ai_p $SQLITE_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SQLITE_SHARED_LIBADD="$ld_runpath_switch$ai_p $SQLITE_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
-
-      fi
-    
-  fi
+fi
 
-    fi
-  else
-    
 
-  if test -n "$SQLITE_DIR/$PHP_LIBDIR"; then
-    
-  if test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SQLITE_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SQLITE_DIR/$PHP_LIBDIR" || echo "$SQLITE_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $SQLITE_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/$PHP_LIBDIR\"`"
-  fi
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92504 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92508: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+    LIBS=$ac_libs
   fi
 
-
+  if test "$found" = "yes"; then
     
-  fi
-
-  fi
   
-  
-  case sqlite in
+  case resolv in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsqlite $LIBS" 
+      LIBS="-lresolv $LIBS" 
    ;;
   esac
 
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-  fi
-
-
-      
-  if test "$SQLITE_DIR/include" != "/usr/include"; then
-    
-  if test -z "$SQLITE_DIR/include" || echo "$SQLITE_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$SQLITE_DIR/include
+    ac_cv_func_dn_expand=yes
   else
     
-    ep_dir="`echo $SQLITE_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SQLITE_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
   
+  unset ac_cv_lib_bind_dn_expand
+  unset ac_cv_lib_bind___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lbind""... $ac_c" 1>&6
+echo "configure:92550: checking for dn_expand in -lbind" >&5
+ac_lib_var=`echo bind'_'dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  echo "$ac_t""no" 1>&6
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92558 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sqlite_sqlite_open
-    
-      { echo "configure: error: wrong sqlite lib version or lib not found" 1>&2; exit 1; }
-    
-  
+int main() {
+dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:92569: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-    SQLITE_MODULE_TYPE=external
-    PHP_SQLITE_CFLAGS=$pdo_inc_path
-    sqlite_extra_sources="libsqlite/src/encode.c"
-  else
-    # use bundled library
-    
-  # we only support certain lemon versions
-  lemon_version_list="1.0"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  # Extract the first word of "lemon", so it can be a program name with args.
-set dummy lemon; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:87630: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_LEMON'+set}'`\" = set"; then
+    echo $ac_n "checking for __dn_expand in -lbind""... $ac_c" 1>&6
+echo "configure:92589: checking for __dn_expand in -lbind" >&5
+ac_lib_var=`echo bind'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test -n "$LEMON"; then
-  ac_cv_prog_LEMON="$LEMON" # Let the user override the test.
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92597 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
+
+int main() {
+__dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:92608: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_LEMON="lemon"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
 fi
-LEMON="$ac_cv_prog_LEMON"
-if test -n "$LEMON"; then
-  echo "$ac_t""$LEMON" 1>&6
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
 fi
 
-  if test "$LEMON"; then
-    echo $ac_n "checking for lemon version""... $ac_c" 1>&6
-echo "configure:87658: checking for lemon version" >&5
-if eval "test \"`echo '$''{'php_cv_lemon_version'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-      lemon_version=`$LEMON -x 2>/dev/null | $SED -e 's/^.* //'`
-      php_cv_lemon_version=invalid
-      for lemon_check_version in $lemon_version_list; do
-        if test "$lemon_version" = "$lemon_check_version"; then
-          php_cv_lemon_version="$lemon_check_version (ok)"
-        fi
-      done
-    
 fi
 
-echo "$ac_t""$php_cv_lemon_version" 1>&6
-  else
-    lemon_version=none
-  fi
-  case $php_cv_lemon_version in
-    ""|invalid)
-      lemon_msg="lemon versions supported for regeneration of libsqlite parsers: $lemon_version_list (found: $lemon_version)."
-      echo "configure: warning: $lemon_msg" 1>&2
-      LEMON="exit 0;"
-      ;;
-  esac
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST LEMON"
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92640 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:92644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    SQLITE_MODULE_TYPE=builtin
-    PHP_SQLITE_CFLAGS="-I@ext_srcdir@/libsqlite/src -I@ext_builddir@/libsqlite/src $pdo_inc_path"
-    sqlite_extra_sources="libsqlite/src/opcodes.c \
-        libsqlite/src/parse.c libsqlite/src/encode.c \
-        libsqlite/src/auth.c libsqlite/src/btree.c libsqlite/src/build.c \
-        libsqlite/src/delete.c libsqlite/src/expr.c libsqlite/src/func.c \
-        libsqlite/src/hash.c libsqlite/src/insert.c libsqlite/src/main.c \
-        libsqlite/src/os.c libsqlite/src/pager.c \
-        libsqlite/src/printf.c libsqlite/src/random.c \
-        libsqlite/src/select.c libsqlite/src/table.c libsqlite/src/tokenize.c \
-        libsqlite/src/update.c libsqlite/src/util.c libsqlite/src/vdbe.c \
-        libsqlite/src/attach.c libsqlite/src/btree_rb.c libsqlite/src/pragma.c \
-        libsqlite/src/vacuum.c libsqlite/src/copy.c \
-        libsqlite/src/vdbeaux.c libsqlite/src/date.c \
-        libsqlite/src/where.c libsqlite/src/trigger.c"
+    LIBS=$ac_libs
   fi
-        sqlite_sources="sqlite.c sess_sqlite.c pdo_sqlite2.c $sqlite_extra_sources" 
-  
-  ext_builddir=ext/sqlite
-  ext_srcdir=$abs_srcdir/ext/sqlite
-
-  ac_extra=`echo "$PHP_SQLITE_CFLAGS"|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SQLITE_SHARED=no
+  if test "$found" = "yes"; then
     
   
-  case ext/sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
   esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
 
-  old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    ac_cv_func_dn_expand=yes
+  else
+    
+  
+  unset ac_cv_lib_socket_dn_expand
+  unset ac_cv_lib_socket___dn_expand
+  unset found
+  echo $ac_n "checking for dn_expand in -lsocket""... $ac_c" 1>&6
+echo "configure:92686: checking for dn_expand in -lsocket" >&5
+ac_lib_var=`echo socket'_'dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92694 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_expand();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+dn_expand()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:92705: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-    EXT_STATIC="$EXT_STATIC sqlite"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SQLITE_SHARED=yes
-      
-  case ext/sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
+    echo $ac_n "checking for __dn_expand in -lsocket""... $ac_c" 1>&6
+echo "configure:92725: checking for __dn_expand in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dn_expand | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92733 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_expand();
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+int main() {
+__dn_expand()
+; return 0; }
+EOF
+if { (eval echo configure:92744: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-  old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_sqlite="$shared_objects_sqlite $ac_bdir$ac_obj.lo"
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92776 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsqlite.so '$ext_builddir'/phpsqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(PHPSQLITE_SHARED_LIBADD)'
-      ;;
-  esac
+if { (eval echo configure:92780: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsqlite.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsqlite.$suffix"
+    LIBS=$ac_libs
   fi
+
+  if test "$found" = "yes"; then
+    
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsqlite.$suffix: $ext_builddir/phpsqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsqlite.$suffix \$(phplibdir)
 
-$ext_builddir/phpsqlite.$suffix: \$(shared_objects_sqlite) \$(PHPSQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_EXPAND 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+    ac_cv_func_dn_expand=yes
+  else
+    
+  :
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sqlite.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sqlite.so '$ext_builddir'/sqlite.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SQLITE, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sqlite) $(SQLITE_SHARED_LIBADD)'
-      ;;
-  esac
+  fi
+  
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sqlite.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sqlite.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sqlite"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sqlite.$suffix: $ext_builddir/sqlite.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sqlite.$suffix \$(phplibdir)
+  fi
+  
+ ;;
+  
+  esac
 
-$ext_builddir/sqlite.$suffix: \$(shared_objects_sqlite) \$(SQLITE_SHARED_DEPENDENCIES)
-	$link_cmd
 
+  unset ac_cv_func_dn_skipname
+  unset ac_cv_func___dn_skipname
+  unset found
+  
+  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
+echo "configure:92837: checking for dn_skipname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92842 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char dn_skipname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
+choke me
+#else
+dn_skipname();
+#endif
+
+; return 0; }
 EOF
+if { (eval echo configure:92865: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_dn_skipname=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_dn_skipname=no"
+fi
+rm -f conftest*
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SQLITE 1
+if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
+echo "configure:92883: checking for __dn_skipname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 92888 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __dn_skipname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
+choke me
+#else
+__dn_skipname();
+#endif
+
+; return 0; }
 EOF
+if { (eval echo configure:92911: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___dn_skipname=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___dn_skipname=no"
+fi
+rm -f conftest*
+fi
 
-    fi
-  fi
+if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SQLITE_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
+EOF
+
+    ac_cv_func_dn_skipname=yes
+  ;;
   
+    *) 
   
+  unset ac_cv_lib_resolv_dn_skipname
+  unset ac_cv_lib_resolv___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
+echo "configure:92949: checking for dn_skipname in -lresolv" >&5
+ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92957 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
+int main() {
+dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:92968: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
+echo "configure:92988: checking for __dn_skipname in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 92996 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+__dn_skipname()
+; return 0; }
 EOF
-  done
+if { (eval echo configure:93007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-        EXT_STATIC="$EXT_STATIC sqlite"
-        ;;
-      *)
-        
-  
-  case ext/sqlite in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sqlite"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sqlite/"; ac_bdir="ext/sqlite/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
   
+fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93039 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:93043: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
 
-  old_IFS=$IFS
-  for ac_src in $sqlite_sources; do
+  if test "$found" = "yes"; then
+    
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
 EOF
-  done
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sqlite"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+    ac_cv_func_dn_skipname=yes
+  else
+    
   
+  unset ac_cv_lib_bind_dn_skipname
+  unset ac_cv_lib_bind___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
+echo "configure:93085: checking for dn_skipname in -lbind" >&5
+ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93093 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
+int main() {
+dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:93104: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sqlite
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-  fi
+    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
+echo "configure:93124: checking for __dn_skipname in -lbind" >&5
+ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93132 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
 
-  
-  am_i_shared=$PHP_SQLITE_SHARED
-  is_it_shared=$PHP_SPL_SHARED
-  is_it_enabled=$PHP_SPL
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension sqlite to build statically, but it
-depends on extension spl, which you've configured to build shared.
-You either need to build sqlite shared or build spl statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension sqlite, which depends on extension spl,
-but you've either not enabled spl, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  am_i_shared=$PHP_SQLITE_SHARED
-  is_it_shared=$PHP_PDO_SHARED
-  is_it_enabled=$PHP_PDO
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension sqlite to build statically, but it
-depends on extension pdo, which you've configured to build shared.
-You either need to build sqlite shared or build pdo statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension sqlite, which depends on extension pdo,
-but you've either not enabled pdo, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
+int main() {
+__dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:93143: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_SHARED_LIBADD"
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93175 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:93179: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-  
-  
-    for header_file in $ext_builddir/libsqlite/src/sqlite.h; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
+    LIBS=$ac_libs
   fi
 
-    done 
+  if test "$found" = "yes"; then
+    
   
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
+  esac
 
-  
-  if test "$SQLITE_MODULE_TYPE" = "builtin"; then
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_DN_SKIPNAME 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
+
+    ac_cv_func_dn_skipname=yes
+  else
     
   
-    $php_shtool mkdir -p $ext_builddir/libsqlite/src
-  
+  unset ac_cv_lib_socket_dn_skipname
+  unset ac_cv_lib_socket___dn_skipname
+  unset found
+  echo $ac_n "checking for dn_skipname in -lsocket""... $ac_c" 1>&6
+echo "configure:93221: checking for dn_skipname in -lsocket" >&5
+ac_lib_var=`echo socket'_'dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93229 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char dn_skipname();
 
-    echo $ac_n "checking size of char *""... $ac_c" 1>&6
-echo "configure:88071: checking size of char *" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
+int main() {
+dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:93240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __dn_skipname in -lsocket""... $ac_c" 1>&6
+echo "configure:93260: checking for __dn_skipname in -lsocket" >&5
+ac_lib_var=`echo socket'_'__dn_skipname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_char_p=4
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93268 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __dn_skipname();
+
+int main() {
+__dn_skipname()
+; return 0; }
+EOF
+if { (eval echo configure:93279: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+
+  
+fi
+
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 88079 "configure"
+#line 93311 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(char *));
-  exit(0);
-}
+main() { return (0); }
 EOF
-if { (eval echo configure:88090: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:93315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  ac_cv_sizeof_char_p=`cat conftestval`
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_sizeof_char_p=0
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_char_p" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_CHAR_P $ac_cv_sizeof_char_p
-EOF
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
+  
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
 
     cat >> confdefs.h <<\EOF
-#define SQLITE_PTR_SZ SIZEOF_CHAR_P
+#define HAVE_DN_SKIPNAME 1
 EOF
 
-                if test "$PHP_SQLITE_UTF8" = "yes"; then
-      SQLITE_ENCODING="UTF8"
-      cat >> confdefs.h <<\EOF
-#define SQLITE_UTF8 1
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
 EOF
 
-    else
-      SQLITE_ENCODING="ISO8859"
-    fi
+    ac_cv_func_dn_skipname=yes
+  else
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_ENCODING"
+  :
 
+  fi
+  
 
-    SQLITE_VERSION=`cat $ext_srcdir/libsqlite/VERSION`
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SQLITE_VERSION"
+  fi
+  
 
+  fi
+  
+ ;;
+  
+  esac
 
-    sed -e s/--VERS--/$SQLITE_VERSION/ -e s/--ENCODING--/$SQLITE_ENCODING/ $ext_srcdir/libsqlite/src/sqlite.h.in > $ext_builddir/libsqlite/src/sqlite.h
 
-    if test "$ext_shared" = "no" || test "$ext_srcdir" != "$abs_srcdir"; then
-      echo '#include <php_config.h>' > $ext_builddir/libsqlite/src/config.h
-    else
-      echo "#include \"$abs_builddir/config.h\"" > $ext_builddir/libsqlite/src/config.h
-    fi
-    
-    cat >> $ext_builddir/libsqlite/src/config.h <<EOF
-#if ZTS
-# define THREADSAFE 1
-#endif
-#if !ZEND_DEBUG
-# define NDEBUG
-#endif
-EOF
-  fi
+
+
+  unset ac_cv_func_res_search
+  unset ac_cv_func___res_search
+  unset found
   
-  for ac_func in usleep nanosleep
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:88152: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "checking for res_search""... $ac_c" 1>&6
+echo "configure:93374: checking for res_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 88157 "configure"
+#line 93379 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char res_search(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char $ac_func();
+char res_search();
 
 int main() {
 
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+#if defined (__stub_res_search) || defined (__stub___res_search)
 choke me
 #else
-$ac_func();
+res_search();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:88180: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:93402: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_func_res_search=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_func_res_search=no"
 fi
 rm -f conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __res_search""... $ac_c" 1>&6
+echo "configure:93420: checking for __res_search" >&5
+if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93425 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __res_search(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___res_search) || defined (__stub_____res_search)
+choke me
+#else
+__res_search();
+#endif
+
+; return 0; }
 EOF
- 
+if { (eval echo configure:93448: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___res_search=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___res_search=no"
+fi
+rm -f conftest*
+fi
+
+if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
-done
 
-  for ac_hdr in time.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:88208: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
+
+    ac_cv_func_res_search=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_resolv_res_search
+  unset ac_cv_lib_resolv___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
+echo "configure:93486: checking for res_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 88213 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93494 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
+
+int main() {
+res_search()
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:88218: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:93505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
+echo "configure:93525: checking for __res_search in -lresolv" >&5
+ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lresolv  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93533 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
+
+int main() {
+__res_search()
+; return 0; }
+EOF
+if { (eval echo configure:93544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-done
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
+  
+fi
 
 
-echo $ac_n "checking whether flush should be called explicitly after a buffered io""... $ac_c" 1>&6
-echo "configure:88249: checking whether flush should be called explicitly after a buffered io" >&5
-if eval "test \"`echo '$''{'ac_cv_flush_io'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lresolv"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93576 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:93580: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
+
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
   
-if test "$cross_compiling" = yes; then
+  case resolv in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lresolv $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBRESOLV 1
+EOF
+
+    ac_cv_func_res_search=yes
+  else
+    
   
-  ac_cv_flush_io=no
+  unset ac_cv_lib_bind_res_search
+  unset ac_cv_lib_bind___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
+echo "configure:93622: checking for res_search in -lbind" >&5
+ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93630 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char res_search();
 
+int main() {
+res_search()
+; return 0; }
+EOF
+if { (eval echo configure:93641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  cat > conftest.$ac_ext <<EOF
-#line 88260 "configure"
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
+echo "configure:93661: checking for __res_search in -lbind" >&5
+ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lbind  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93669 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-#include <stdio.h>
-#include <stdlib.h>
+int main() {
+__res_search()
+; return 0; }
+EOF
+if { (eval echo configure:93680: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-int main(int argc, char **argv)
-{
-	char *filename = tmpnam(NULL);
-	char buffer[64];
-	int result = 0;
-	
-	FILE *fp = fopen(filename, "wb");
-	if (NULL == fp)
-		return 0;
-	fputs("line 1\n", fp);
-	fputs("line 2\n", fp);
-	fclose(fp);
-	
-	fp = fopen(filename, "rb+");
-	if (NULL == fp)
-		return 0;
-	fgets(buffer, sizeof(buffer), fp);
-	fputs("line 3\n", fp);
-	rewind(fp);
-	fgets(buffer, sizeof(buffer), fp);
-	if (0 != strcmp(buffer, "line 1\n"))
-		result = 1;
-	fgets(buffer, sizeof(buffer), fp);
-	if (0 != strcmp(buffer, "line 3\n"))
-		result = 1;
-	fclose(fp);
-	unlink(filename);
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+
+  
+fi
 
-	exit(result);
-}
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lbind"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 93712 "configure"
+#include "confdefs.h"
+main() { return (0); }
 EOF
-if { (eval echo configure:88298: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:93716: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  
-  ac_cv_flush_io=no
-
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  
-  ac_cv_flush_io=yes
-
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
+    LIBS=$ac_libs
+  fi
 
-echo "$ac_t""$ac_cv_flush_io" 1>&6
-if test "$ac_cv_flush_io" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_FLUSHIO 1
+  if test "$found" = "yes"; then
+    
+  
+  case bind in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lbind $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
 EOF
 
-fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBBIND 1
+EOF
 
-if test "$ac_cv_func_crypt" = "no"; then
-  echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:88326: checking for crypt in -lcrypt" >&5
-ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
+    ac_cv_func_res_search=yes
+  else
+    
+  
+  unset ac_cv_lib_socket_res_search
+  unset ac_cv_lib_socket___res_search
+  unset found
+  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
+echo "configure:93758: checking for res_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lcrypt  $LIBS"
+LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 88334 "configure"
+#line 93766 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char crypt();
+char res_search();
 
 int main() {
-crypt()
+res_search()
 ; return 0; }
 EOF
-if { (eval echo configure:88345: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:93777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -88356,229 +93788,161 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LIBS="-lcrypt $LIBS -lcrypt"
-    cat >> confdefs.h <<\EOF
-#define HAVE_CRYPT 1
-EOF
-
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
 
-fi
-  
-echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
-echo "configure:88374: checking for standard DES crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
+    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
+echo "configure:93797: checking for __res_search in -lsocket" >&5
+ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  if test "$cross_compiling" = yes; then
-  
-  ac_cv_crypt_des=yes
-
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88385 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lsocket  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 93805 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __res_search();
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
-
-main() {
-#if HAVE_CRYPT
-    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
-#else
-	exit(0);
-#endif
-}
+int main() {
+__res_search()
+; return 0; }
 EOF
-if { (eval echo configure:88404: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_crypt_des=yes
-
+if { (eval echo configure:93816: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_crypt_des=no
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
-rm -fr conftest*
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
 fi
 
+  
 fi
 
-echo "$ac_t""$ac_cv_crypt_des" 1>&6
-
-echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
-echo "configure:88425: checking for extended DES crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  if test "$cross_compiling" = yes; then
-  
-  ac_cv_crypt_ext_des=no
 
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lsocket"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 88436 "configure"
+#line 93848 "configure"
 #include "confdefs.h"
-
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
-
-main() {
-#if HAVE_CRYPT
-  exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
-#else
-  exit(0);
-#endif
-}
+main() { return (0); }
 EOF
-if { (eval echo configure:88455: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:93852: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  
-  ac_cv_crypt_ext_des=yes
-
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  
-  ac_cv_crypt_ext_des=no
-
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-
-echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
+    LIBS=$ac_libs
+  fi
 
-echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
-echo "configure:88476: checking for MD5 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
+  if test "$found" = "yes"; then
+    
   
-  ac_cv_crypt_md5=no
+  case socket in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsocket $LIBS" 
+   ;;
+  esac
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 88487 "configure"
-#include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
+    cat >> confdefs.h <<\EOF
+#define HAVE_RES_SEARCH 1
+EOF
 
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBSOCKET 1
+EOF
 
-main() {
-#if HAVE_CRYPT
-    char salt[15], answer[40];
+    ac_cv_func_res_search=yes
+  else
+    
+  :
 
-    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
-    salt[3]='r'; salt[4]='a'; salt[5]='s';
-    salt[6]='m'; salt[7]='u'; salt[8]='s';
-    salt[9]='l'; salt[10]='e'; salt[11]='$';
-    salt[12]='\0';
-    strcpy(answer,salt);
-    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
-    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
-#else
-	exit(0);
-#endif
-}
-EOF
-if { (eval echo configure:88515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+  fi
   
-  ac_cv_crypt_md5=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  fi
   
-  ac_cv_crypt_md5=no
-
-fi
-rm -fr conftest*
-fi
 
-fi
+  fi
+  
+ ;;
+  
+  esac
 
-echo "$ac_t""$ac_cv_crypt_md5" 1>&6
 
-echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
-echo "configure:88536: checking for Blowfish crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
+echo $ac_n "checking whether atof() accepts NAN""... $ac_c" 1>&6
+echo "configure:93905: checking whether atof() accepts NAN" >&5
+if eval "test \"`echo '$''{'ac_cv_atof_accept_nan'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 if test "$cross_compiling" = yes; then
   
-  ac_cv_crypt_blowfish=no
+  ac_cv_atof_accept_nan=no
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 88547 "configure"
+#line 93916 "configure"
 #include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+#include <math.h>
+#include <stdlib.h>
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[70];
-    
-    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
-    strcat(salt,"rasmuslerd............");
-    strcpy(answer,salt);
-    strcpy(&answer[29],"nIdrcHdxcUxWomQX9j6kvERCFjTg7Ra");
-    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
+#ifdef HAVE_ISNAN
+#define zend_isnan(a) isnan(a)
+#elif defined(HAVE_FPCLASS)
+#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
 #else
-	exit(0);
+#define zend_isnan(a) 0
 #endif
+
+int main(int argc, char** argv)
+{
+	return zend_isnan(atof("NAN")) ? 0 : 1;
 }
+
 EOF
-if { (eval echo configure:88572: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:93936: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-  ac_cv_crypt_blowfish=yes
+  ac_cv_atof_accept_nan=yes
 
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-  ac_cv_crypt_blowfish=no
+  ac_cv_atof_accept_nan=no
 
 fi
 rm -fr conftest*
@@ -88586,55 +93950,60 @@ fi
 
 fi
 
-echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
+echo "$ac_t""$ac_cv_atof_accept_nan" 1>&6
+if test "$ac_cv_atof_accept_nan" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ATOF_ACCEPTS_NAN 1
+EOF
 
-echo $ac_n "checking for SHA512 crypt""... $ac_c" 1>&6
-echo "configure:88593: checking for SHA512 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_SHA512'+set}'`\" = set"; then
+fi
+
+echo $ac_n "checking whether atof() accepts INF""... $ac_c" 1>&6
+echo "configure:93963: checking whether atof() accepts INF" >&5
+if eval "test \"`echo '$''{'ac_cv_atof_accept_inf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 if test "$cross_compiling" = yes; then
   
-  ac_cv_crypt_SHA512=no
+  ac_cv_atof_accept_inf=no
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 88604 "configure"
+#line 93974 "configure"
 #include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+#include <math.h>
+#include <stdlib.h>
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[80];
-    
-    salt[0]='$'; salt[1]='6'; salt[2]='$'; salt[3]='$'; salt[4]='b'; salt[5]='a'; salt[6]='r'; salt[7]='\0';
-    strcpy(answer, salt);
-    strcpy(&answer[29],"$6$$QMXjqd7rHQZPQ1yHsXkQqC1FBzDiVfTHXL.LaeDAeVV.IzMaV9VU4MQ8kPuZa2SOP1A0RPm772EaFYjpEJtdu.");
-    exit (strcmp((char *)crypt("foo",salt),answer));
+#ifdef HAVE_ISINF
+#define zend_isinf(a) isinf(a)
+#elif defined(INFINITY)
+/* Might not work, but is required by ISO C99 */
+#define zend_isinf(a) (((a)==INFINITY)?1:0)
+#elif defined(HAVE_FPCLASS)
+#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
 #else
-	exit(0);
+#define zend_isinf(a) 0
 #endif
+
+int main(int argc, char** argv)
+{
+	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
 }
+
 EOF
-if { (eval echo configure:88628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:93997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-  ac_cv_crypt_SHA512=yes
+  ac_cv_atof_accept_inf=yes
 
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-  ac_cv_crypt_SHA512=no
+  ac_cv_atof_accept_inf=no
 
 fi
 rm -fr conftest*
@@ -88642,55 +94011,60 @@ fi
 
 fi
 
-echo "$ac_t""$ac_cv_crypt_SHA512" 1>&6
+echo "$ac_t""$ac_cv_atof_accept_inf" 1>&6
+if test "$ac_cv_atof_accept_inf" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_ATOF_ACCEPTS_INF 1
+EOF
 
-echo $ac_n "checking for SHA256 crypt""... $ac_c" 1>&6
-echo "configure:88649: checking for SHA256 crypt" >&5
-if eval "test \"`echo '$''{'ac_cv_crypt_SHA256'+set}'`\" = set"; then
+fi
+
+echo $ac_n "checking whether HUGE_VAL == INF""... $ac_c" 1>&6
+echo "configure:94024: checking whether HUGE_VAL == INF" >&5
+if eval "test \"`echo '$''{'ac_cv_huge_val_inf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
 if test "$cross_compiling" = yes; then
   
-  ac_cv_crypt_SHA256=no
+  ac_cv_huge_val_inf=yes
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 88660 "configure"
+#line 94035 "configure"
 #include "confdefs.h"
 
-#if HAVE_UNISTD_H
-#include <unistd.h>
-#endif
-
-#if HAVE_CRYPT_H
-#include <crypt.h>
-#endif
+#include <math.h>
+#include <stdlib.h>
 
-main() {
-#if HAVE_CRYPT
-    char salt[30], answer[80];
-    salt[0]='$'; salt[1]='5'; salt[2]='$'; salt[3]='$'; salt[4]='s'; salt[5]='a'; salt[6]='l'; salt[7]='t';  salt[8]='s'; salt[9]='t'; salt[10]='r'; salt[11]='i'; salt[12]='n'; salt[13]='g'; salt[14]='\0';    
-    strcat(salt,"");
-    strcpy(answer, salt);
-    strcpy(&answer[29], "$5$saltstring$5B8vYYiY.CVt1RlTTf8KbXBH3hsxY/GNooZaBBGWEc5");
-    exit (strcmp((char *)crypt("foo",salt),answer));
+#ifdef HAVE_ISINF
+#define zend_isinf(a) isinf(a)
+#elif defined(INFINITY)
+/* Might not work, but is required by ISO C99 */
+#define zend_isinf(a) (((a)==INFINITY)?1:0)
+#elif defined(HAVE_FPCLASS)
+#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
 #else
-	exit(0);
+#define zend_isinf(a) 0
 #endif
+
+int main(int argc, char** argv)
+{
+	return zend_isinf(HUGE_VAL) ? 0 : 1;
 }
+
 EOF
-if { (eval echo configure:88684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:94058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
-  ac_cv_crypt_SHA256=yes
+  ac_cv_huge_val_inf=yes
 
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
-  ac_cv_crypt_SHA256=no
+  ac_cv_huge_val_inf=no
 
 fi
 rm -fr conftest*
@@ -88698,254 +94072,173 @@ fi
 
 fi
 
-echo "$ac_t""$ac_cv_crypt_SHA256" 1>&6
-
-
-if test "$ac_cv_crypt_blowfish" = "no" || test "$ac_cv_crypt_des" = "no" || test "$ac_cv_crypt_ext_des" = "no" || test "x$php_crypt_r" = "x0"; then
-
-        echo $ac_n "checking whether the compiler supports __alignof__""... $ac_c" 1>&6
-echo "configure:88708: checking whether the compiler supports __alignof__" >&5
-if eval "test \"`echo '$''{'ac_cv_alignof_exists'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  cat > conftest.$ac_ext <<EOF
-#line 88714 "configure"
-#include "confdefs.h"
-
-  
-int main() {
-
-    int align = __alignof__(int);
-  
-; return 0; }
-EOF
-if { (eval echo configure:88724: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-    ac_cv_alignof_exists=yes
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-    ac_cv_alignof_exists=no
-  
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_alignof_exists" 1>&6
-  if test "$ac_cv_alignof_exists" = "yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ALIGNOF 1
-EOF
-
-  fi
-
-        echo $ac_n "checking whether the compiler supports aligned attribute""... $ac_c" 1>&6
-echo "configure:88749: checking whether the compiler supports aligned attribute" >&5
-if eval "test \"`echo '$''{'ac_cv_attribute_aligned'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  cat > conftest.$ac_ext <<EOF
-#line 88755 "configure"
-#include "confdefs.h"
-
-  
-int main() {
-
-    unsigned char test[32] __attribute__ ((__aligned__ (__alignof__ (int))));
-  
-; return 0; }
-EOF
-if { (eval echo configure:88765: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-    ac_cv_attribute_aligned=yes
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
-    ac_cv_attribute_aligned=no
-  
-fi
-rm -f conftest*
-fi
-
-echo "$ac_t""$ac_cv_attribute_aligned" 1>&6
-  if test "$ac_cv_attribute_aligned" = "yes"; then
-    cat >> confdefs.h <<\EOF
-#define HAVE_ATTRIBUTE_ALIGNED 1
-EOF
-
-  fi
-    
-
-  cat >> confdefs.h <<EOF
-#define PHP_USE_PHP_CRYPT_R 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_STD_DES_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_BLOWFISH_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_EXT_DES_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_MD5_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_SHA512_CRYPT 1
-EOF
-
-  cat >> confdefs.h <<EOF
-#define PHP_SHA256_CRYPT 1
-EOF
-
-
-  
-  
-  case ext/standard in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+echo "$ac_t""$ac_cv_huge_val_inf" 1>&6
+if test "$ac_cv_huge_val_inf" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_HUGE_VAL_INF 1
+EOF
+
+fi
+
+echo $ac_n "checking whether HUGE_VAL + -HUGEVAL == NAN""... $ac_c" 1>&6
+echo "configure:94085: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
+if eval "test \"`echo '$''{'ac_cv_huge_val_nan'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
+if test "$cross_compiling" = yes; then
   
+  ac_cv_huge_val_nan=yes
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+else
+  cat > conftest.$ac_ext <<EOF
+#line 94096 "configure"
+#include "confdefs.h"
 
+#include <math.h>
+#include <stdlib.h>
 
-  old_IFS=$IFS
-  for ac_src in crypt_freesec.c crypt_blowfish.c crypt_sha512.c crypt_sha256.c php_crypt_r.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+#ifdef HAVE_ISNAN
+#define zend_isnan(a) isnan(a)
+#elif defined(HAVE_FPCLASS)
+#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
+#else
+#define zend_isnan(a) 0
+#endif
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+int main(int argc, char** argv)
+{
+#if defined(__sparc__) && !(__GNUC__ >= 3)
+	/* prevent bug #27830 */
+	return 1;
+#else
+	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
+#endif
+}
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
 EOF
-  done
-
+if { (eval echo configure:94121: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_huge_val_nan=yes
 
 else
-  if test "$ac_cv_crypt_des" = "yes"; then
-    ac_result=1
-    ac_crypt_des=1
-  else
-    ac_result=0
-    ac_crypt_des=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_STD_DES_CRYPT $ac_result
-EOF
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_huge_val_nan=no
+
+fi
+rm -fr conftest*
+fi
 
+fi
 
-  if test "$ac_cv_crypt_blowfish" = "yes"; then
-    ac_result=1
-    ac_crypt_blowfish=1
-  else
-    ac_result=0
-    ac_crypt_blowfish=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_BLOWFISH_CRYPT $ac_result
+echo "$ac_t""$ac_cv_huge_val_nan" 1>&6
+if test "$ac_cv_huge_val_nan" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_HUGE_VAL_NAN 1
 EOF
 
+fi
+
+echo $ac_n "checking whether strptime() declaration fails""... $ac_c" 1>&6
+echo "configure:94148: checking whether strptime() declaration fails" >&5
+if eval "test \"`echo '$''{'ac_cv_strptime_decl_fails'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+cat > conftest.$ac_ext <<EOF
+#line 94154 "configure"
+#include "confdefs.h"
 
-  if test "$ac_cv_crypt_ext_des" = "yes"; then
-    ac_result=1
-    ac_crypt_edes=1
-  else
-    ac_result=0
-    ac_crypt_edes=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_EXT_DES_CRYPT $ac_result
-EOF
+#include <time.h>
 
+int main() {
 
-  if test "$ac_cv_crypt_md5" = "yes"; then
-    ac_result=1
-    ac_crypt_md5=1
-  else
-    ac_result=0
-    ac_crypt_md5=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_MD5_CRYPT $ac_result
+#ifndef HAVE_STRPTIME
+#error no strptime() on this platform
+#else
+/* use invalid strptime() declaration to see if it fails to compile */
+int strptime(const char *s, const char *format, struct tm *tm);
+#endif
+
+; return 0; }
 EOF
+if { (eval echo configure:94170: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
   
+  ac_cv_strptime_decl_fails=no
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
   
-  if test "$ac_cv_crypt_sha512" = "yes"; then
-    ac_result=1
-    ac_crypt_sha512=1
-  else
-    ac_result=0
-    ac_crypt_sha512=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_SHA512_CRYPT $ac_result
-EOF
+  ac_cv_strptime_decl_fails=yes
 
+fi
+rm -f conftest*
+fi
 
-  if test "$ac_cv_crypt_sha256" = "yes"; then
-    ac_result=1
-    ac_crypt_sha256=1
-  else
-    ac_result=0
-    ac_crypt_sha256=0
-  fi
-  cat >> confdefs.h <<EOF
-#define PHP_SHA256_CRYPT $ac_result
+echo "$ac_t""$ac_cv_strptime_decl_fails" 1>&6
+if test "$ac_cv_strptime_decl_fails" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_STRPTIME_DECL_FAILS 1
 EOF
 
+fi
 
+for ac_hdr in wchar.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:94198: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 94203 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:94208: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
   cat >> confdefs.h <<EOF
-#define PHP_USE_PHP_CRYPT_R 0
+#define $ac_tr_hdr 1
 EOF
-
+ 
+else
+  echo "$ac_t""no" 1>&6
 fi
+done
 
-for ac_func in getcwd getwd asinh acosh atanh log1p hypot glob strfmon nice fpclass isinf isnan mempcpy strpncpy
+for ac_func in mblen
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:88944: checking for $ac_func" >&5
+echo "configure:94237: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 88949 "configure"
+#line 94242 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -88968,7 +94261,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:88972: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:94265: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -88992,55 +94285,15 @@ else
 fi
 done
 
-echo $ac_n "checking for working fnmatch""... $ac_c" 1>&6
-echo "configure:88997: checking for working fnmatch" >&5
-if eval "test \"`echo '$''{'ac_cv_func_fnmatch_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  # Some versions of Solaris or SCO have a broken fnmatch function.
-# So we run a test program.  If we are cross-compiling, take no chance.
-# Thanks to John Oleynick and Franc,ois Pinard for this test.
-if test "$cross_compiling" = yes; then
-  ac_cv_func_fnmatch_works=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89008 "configure"
-#include "confdefs.h"
-main() { exit (fnmatch ("a*", "abc", 0) != 0); }
-EOF
-if { (eval echo configure:89012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_func_fnmatch_works=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_func_fnmatch_works=no
-fi
-rm -fr conftest*
-fi
-
-fi
-
-echo "$ac_t""$ac_cv_func_fnmatch_works" 1>&6
-if test $ac_cv_func_fnmatch_works = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_FNMATCH 1
-EOF
-
-fi
-	
-
-
-for ac_func in fork CreateProcess
+for ac_func in mbrlen mbsinit
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:89039: checking for $ac_func" >&5
+echo "configure:94292: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 89044 "configure"
+#line 94297 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -89063,7 +94316,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:89067: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:94320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -89082,1243 +94335,1194 @@ if eval "test \"`echo '$ac_cv_func_'$ac_
 #define $ac_tr_func 1
 EOF
  
-  php_can_support_proc_open=yes
-  break
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
+echo "configure:94345: checking for mbstate_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_mbstate_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+cat > conftest.$ac_ext <<EOF
+#line 94351 "configure"
+#include "confdefs.h"
+
+#ifdef HAVE_WCHAR_H
+# include <wchar.h>
+#endif
+
+int main() {
+
+int __tmp__() { mbstate_t a; }
+
+; return 0; }
+EOF
+if { (eval echo configure:94364: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  
+  ac_cv_type_mbstate_t=yes
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  
+  ac_cv_type_mbstate_t=no
+
+fi
+rm -f conftest*
+fi
+
+echo "$ac_t""$ac_cv_type_mbstate_t" 1>&6
+if test "$ac_cv_type_mbstate_t" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_MBSTATE_T 1
+EOF
+
+fi
+
+for ac_hdr in atomic.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:94392: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 94397 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:94402: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+
+  ext_builddir=ext/standard
+  ext_srcdir=$abs_srcdir/ext/standard
+
+  ac_extra=
+
+  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
+    PHP_STANDARD_SHARED=no
+    
+  
+  case ext/standard in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC standard"
+    if test "" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+    fi
+  else
+    if test "" = "shared" || test "" = "yes"; then
+      PHP_STANDARD_SHARED=yes
+      
+  case ext/standard in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSTANDARD, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)
+
+$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(STANDARD, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
 
-else
-  echo "$ac_t""no" 1>&6
-php_can_support_proc_open=no
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)
 
-fi
-done
+$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo $ac_n "checking if your OS can spawn processes with inherited handles""... $ac_c" 1>&6
-echo "configure:89097: checking if your OS can spawn processes with inherited handles" >&5
-if test "$php_can_support_proc_open" = "yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define PHP_CAN_SUPPORT_PROC_OPEN 1
 EOF
 
-else
-  echo "$ac_t""no" 1>&6
-fi
-
-if test "$PHP_SAPI" = "cgi" || test "$PHP_SAPI" = "cli" || test "$PHP_SAPI" = "embed"; then
-  cat >> confdefs.h <<\EOF
-#define ENABLE_CHROOT_FUNC 1
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_STANDARD 1
 EOF
 
-fi
-
+    fi
+  fi
 
-  unset ac_cv_func_res_nsearch
-  unset ac_cv_func___res_nsearch
-  unset found
+  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
+    PHP_STANDARD_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/standard in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  echo $ac_n "checking for res_nsearch""... $ac_c" 1>&6
-echo "configure:89121: checking for res_nsearch" >&5
-if eval "test \"`echo '$''{'ac_cv_func_res_nsearch'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89126 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char res_nsearch(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
 
-int main() {
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_res_nsearch) || defined (__stub___res_nsearch)
-choke me
-#else
-res_nsearch();
-#endif
 
-; return 0; }
+  old_IFS=$IFS
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:89149: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_res_nsearch=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_res_nsearch=no"
-fi
-rm -f conftest*
-fi
+  done
 
-if eval "test \"`echo '$ac_cv_func_'res_nsearch`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __res_nsearch""... $ac_c" 1>&6
-echo "configure:89167: checking for __res_nsearch" >&5
-if eval "test \"`echo '$''{'ac_cv_func___res_nsearch'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89172 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __res_nsearch(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
 
-int main() {
+        EXT_STATIC="$EXT_STATIC standard"
+        ;;
+      *)
+        
+  
+  case ext/standard in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___res_nsearch) || defined (__stub_____res_nsearch)
-choke me
-#else
-__res_nsearch();
-#endif
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-; return 0; }
-EOF
-if { (eval echo configure:89195: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___res_nsearch=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___res_nsearch=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'__res_nsearch`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
+  old_IFS=$IFS
+  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
+                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
+                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
+                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
+                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
+                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
+                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
+                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
+                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
+                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
+                            filters.c proc_open.c streamsfuncs.c http.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_res_nsearch=yes
-  ;;
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+  fi
   
-    *) 
   
-  unset ac_cv_lib_resolv_res_nsearch
-  unset ac_cv_lib_resolv___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lresolv""... $ac_c" 1>&6
-echo "configure:89233: checking for res_nsearch in -lresolv" >&5
-ac_lib_var=`echo resolv'_'res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89241 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
-
-int main() {
-res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:89252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_nsearch in -lresolv""... $ac_c" 1>&6
-echo "configure:89272: checking for __res_nsearch in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89280 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=standard
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-int main() {
-__res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:89291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
-  
-fi
 
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89323 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
+  
+    for header_file in ext/standard/; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
   fi
 
-  if test "$found" = "yes"; then
-    
+    done 
   
-  case resolv in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lresolv $LIBS" 
-   ;;
-  esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_res_nsearch=yes
-  else
-    
-  
-  unset ac_cv_lib_bind_res_nsearch
-  unset ac_cv_lib_bind___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lbind""... $ac_c" 1>&6
-echo "configure:89369: checking for res_nsearch in -lbind" >&5
-ac_lib_var=`echo bind'_'res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89377 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
+php_with_sybase_ct=no
 
-int main() {
-res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:89388: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
+echo "configure:94792: checking for Sybase-CT support" >&5
+# Check whether --with-sybase-ct or --without-sybase-ct was given.
+if test "${with_sybase_ct+set}" = set; then
+  withval="$with_sybase_ct"
+  PHP_SYBASE_CT=$withval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_SYBASE_CT=no
+  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_nsearch in -lbind""... $ac_c" 1>&6
-echo "configure:89408: checking for __res_nsearch in -lbind" >&5
-ac_lib_var=`echo bind'_'__res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89416 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
 
-int main() {
-__res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:89427: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYBASE_CT in
+shared,*)
+  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYBASE_CT=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-  
-fi
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89459 "configure"
-#include "confdefs.h"
-main() { return (0); }
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SYBASE_CT" != "no"; then
+
+  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
+    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
+  fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYBASE_CT 1
 EOF
-if { (eval echo configure:89463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+  
+  ext_builddir=ext/sybase_ct
+  ext_srcdir=$abs_srcdir/ext/sybase_ct
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYBASE_CT_SHARED=no
+    
+  
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
 
-  if test "$found" = "yes"; then
-    
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
-  esac
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
 
-    ac_cv_func_res_nsearch=yes
+    EXT_STATIC="$EXT_STATIC sybase_ct"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
+    fi
   else
-    
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYBASE_CT_SHARED=yes
+      
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  unset ac_cv_lib_socket_res_nsearch
-  unset ac_cv_lib_socket___res_nsearch
-  unset found
-  echo $ac_n "checking for res_nsearch in -lsocket""... $ac_c" 1>&6
-echo "configure:89505: checking for res_nsearch in -lsocket" >&5
-ac_lib_var=`echo socket'_'res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89513 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_nsearch();
 
-int main() {
-res_nsearch()
-; return 0; }
-EOF
-if { (eval echo configure:89524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_nsearch in -lsocket""... $ac_c" 1>&6
-echo "configure:89544: checking for __res_nsearch in -lsocket" >&5
-ac_lib_var=`echo socket'_'__res_nsearch | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89552 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_nsearch();
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"
 
-int main() {
-__res_nsearch()
-; return 0; }
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:89563: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYBASE_CT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
+  fi
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)
+
+$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89595 "configure"
-#include "confdefs.h"
-main() { return (0); }
 EOF
-if { (eval echo configure:89599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-  if test "$found" = "yes"; then
-    
-  
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYBASE_CT, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_NSEARCH 1
-EOF
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)
+
+$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
 EOF
 
-    ac_cv_func_res_nsearch=yes
-  else
-    
-  :
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYBASE_CT 1
+EOF
 
+    fi
   fi
-  
 
-  fi
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYBASE_CT_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-
-  fi
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
- ;;
   
-  esac
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-  unset ac_cv_func_dns_search
-  unset ac_cv_func___dns_search
-  unset found
-  
-  echo $ac_n "checking for dns_search""... $ac_c" 1>&6
-echo "configure:89656: checking for dns_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dns_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89661 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dns_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
 
-int main() {
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dns_search) || defined (__stub___dns_search)
-choke me
-#else
-dns_search();
-#endif
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:89684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_dns_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_dns_search=no"
-fi
-rm -f conftest*
-fi
+  done
 
-if eval "test \"`echo '$ac_cv_func_'dns_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dns_search""... $ac_c" 1>&6
-echo "configure:89702: checking for __dns_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dns_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89707 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dns_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
 
-int main() {
+        EXT_STATIC="$EXT_STATIC sybase_ct"
+        ;;
+      *)
+        
+  
+  case ext/sybase_ct in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dns_search) || defined (__stub_____dns_search)
-choke me
-#else
-__dns_search();
-#endif
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-; return 0; }
-EOF
-if { (eval echo configure:89730: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___dns_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___dns_search=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'__dns_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
+  old_IFS=$IFS
+  for ac_src in php_sybase_ct.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_dns_search=yes
-  ;;
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
+  fi
   
-    *) 
   
-  unset ac_cv_lib_resolv_dns_search
-  unset ac_cv_lib_resolv___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lresolv""... $ac_c" 1>&6
-echo "configure:89768: checking for dns_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89776 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
-
-int main() {
-dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89787: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-
-    echo $ac_n "checking for __dns_search in -lresolv""... $ac_c" 1>&6
-echo "configure:89807: checking for __dns_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89815 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
-
-int main() {
-__dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89826: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sybase_ct
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
 
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"
 
+ 
+  if test "$PHP_SYBASE_CT" = "yes"; then
+    SYBASE_CT_INCDIR=/home/sybase/include
+    SYBASE_CT_LIBDIR=/home/sybase/lib
+  else
+    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
+    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
+  fi
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
+    echo $ac_n "checking size of long int""... $ac_c" 1>&6
+echo "configure:95147: checking size of long int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 89858 "configure"
+#line 95155 "configure"
 #include "confdefs.h"
-main() { return (0); }
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long int));
+  exit(0);
+}
 EOF
-if { (eval echo configure:89862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:95167: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  found=yes
+  ac_cv_sizeof_long_int=`cat conftestval`
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  found=no
+  ac_cv_sizeof_long_int=0
 fi
 rm -fr conftest*
 fi
 
-    LIBS=$ac_libs
-  fi
-
-  if test "$found" = "yes"; then
-    
-  
-  case resolv in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lresolv $LIBS" 
-   ;;
-  esac
-
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
+fi
+echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
 EOF
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_dns_search=yes
+  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
+echo "configure:95187: checking checking if we're on a 64-bit platform" >&5
+  if test "$ac_cv_sizeof_long_int" = "4"; then
+    echo "$ac_t""no" 1>&6
+    PHP_SYBASE_64=no
   else
-    
-  
-  unset ac_cv_lib_bind_dns_search
-  unset ac_cv_lib_bind___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lbind""... $ac_c" 1>&6
-echo "configure:89904: checking for dns_search in -lbind" >&5
-ac_lib_var=`echo bind'_'dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89912 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
+    echo "$ac_t""yes" 1>&6
+    PHP_SYBASE_64=yes
+  fi
 
-int main() {
-dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  echo $ac_n "checking Checking for ctpublic.h""... $ac_c" 1>&6
+echo "configure:95198: checking Checking for ctpublic.h" >&5
+  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
+    echo "$ac_t""found in $SYBASE_CT_INCDIR" 1>&6
+    
+  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
+    
+  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SYBASE_CT_INCDIR
+  else
+    
+    ep_dir="`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
+  fi
 
-    echo $ac_n "checking for __dns_search in -lbind""... $ac_c" 1>&6
-echo "configure:89943: checking for __dns_search in -lbind" >&5
-ac_lib_var=`echo bind'_'__dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 89951 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-int main() {
-__dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:89962: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  fi
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+  else
+    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
+  fi
+ 
+  echo $ac_n "checking Checking Sybase libdir""... $ac_c" 1>&6
+echo "configure:95237: checking Checking Sybase libdir" >&5
+  echo "$ac_t""Have $SYBASE_CT_LIBDIR" 1>&6
+ 
+  echo $ac_n "checking Checking for Sybase platform libraries""... $ac_c" 1>&6
+echo "configure:95241: checking Checking for Sybase platform libraries" >&5
 
   
-fi
+  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$SYBASE_CT_LIBDIR
+  else
+    
+    ep_dir="`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 89994 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:89998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
+      fi
+    
   fi
 
-  if test "$found" = "yes"; then
+  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then
     
   
-  case bind in
+  case ct in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbind $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case ct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lct $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
 
-    ac_cv_func_dns_search=yes
-  else
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
+    echo "$ac_t""FreeTDS: $SYBASE_CT_LIBS" 1>&6
+  elif test -f $SYBASE_CT_LIBDIR/libsybct64.so && test $PHP_SYBASE_64 = "yes"; then
     
   
-  unset ac_cv_lib_socket_dns_search
-  unset ac_cv_lib_socket___dns_search
-  unset found
-  echo $ac_n "checking for dns_search in -lsocket""... $ac_c" 1>&6
-echo "configure:90040: checking for dns_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90048 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dns_search();
-
-int main() {
-dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:90059: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  case sybcs64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcs64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcs64 $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __dns_search in -lsocket""... $ac_c" 1>&6
-echo "configure:90079: checking for __dns_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dns_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90087 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dns_search();
 
-int main() {
-__dns_search()
-; return 0; }
-EOF
-if { (eval echo configure:90098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    
   
-fi
+  case sybct64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybct64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybct64 $LIBS" 
+   ;;
+  esac
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90130 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90134: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+    fi
+   ;;
+  esac
 
-    LIBS=$ac_libs
-  fi
 
-  if test "$found" = "yes"; then
     
   
-  case socket in
+  case sybcomn64 in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsocket $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcomn64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcomn64 $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DNS_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
 
-    ac_cv_func_dns_search=yes
-  else
     
-  :
-
-  fi
   
-
-  fi
+  case sybintl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
   
+  case sybintl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybintl64 $LIBS" 
+   ;;
+  esac
 
-  fi
-  
- ;;
-  
+
+    fi
+   ;;
   esac
 
 
-  unset ac_cv_func_dn_expand
-  unset ac_cv_func___dn_expand
-  unset found
-  
-  echo $ac_n "checking for dn_expand""... $ac_c" 1>&6
-echo "configure:90191: checking for dn_expand" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dn_expand'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90196 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dn_expand(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
 
-int main() {
+    ac_solid_uname_s=`uname -s 2>/dev/null`
+    case $ac_solid_uname_s in
+      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
+      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; # 
+    esac
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
+    echo "$ac_t""Sybase64: $SYBASE_CT_LIBS" 1>&6
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dn_expand) || defined (__stub___dn_expand)
-choke me
-#else
-dn_expand();
-#endif
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-; return 0; }
-EOF
-if { (eval echo configure:90219: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_dn_expand=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_dn_expand=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'dn_expand`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dn_expand""... $ac_c" 1>&6
-echo "configure:90237: checking for __dn_expand" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dn_expand'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90242 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dn_expand(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
+    fi
+   ;;
+  esac
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dn_expand) || defined (__stub_____dn_expand)
-choke me
-#else
-__dn_expand();
-#endif
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:90265: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___dn_expand=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___dn_expand=no"
-fi
-rm -f conftest*
-fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-if eval "test \"`echo '$ac_cv_func_'__dn_expand`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
 
+      fi
+    
+  fi
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_dn_expand=yes
-  ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_dn_expand
-  unset ac_cv_lib_resolv___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lresolv""... $ac_c" 1>&6
-echo "configure:90303: checking for dn_expand in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dn_expand | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for netg_errstr in -lsybtcl64""... $ac_c" 1>&6
+echo "configure:95507: checking for netg_errstr in -lsybtcl64" >&5
+ac_lib_var=`echo sybtcl64'_'netg_errstr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
+LIBS="-lsybtcl64  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 90311 "configure"
+#line 95515 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char dn_expand();
+char netg_errstr();
 
 int main() {
-dn_expand()
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:90322: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -90333,167 +95537,186 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl64 $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __dn_expand in -lresolv""... $ac_c" 1>&6
-echo "configure:90342: checking for __dn_expand in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90350 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
 
-int main() {
-__dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:90361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+    
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sybtcl64_netg_errstr
+     
+      
   
-fi
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl64 $LIBS" 
+   ;;
+  esac
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90393 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90397: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
+    fi
+   ;;
+  esac
+
+
+    
+  
 fi
 
-    LIBS=$ac_libs
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case resolv in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lresolv $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_dn_expand=yes
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  unset ac_cv_lib_bind_dn_expand
-  unset ac_cv_lib_bind___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lbind""... $ac_c" 1>&6
-echo "configure:90439: checking for dn_expand in -lbind" >&5
-ac_lib_var=`echo bind'_'dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90447 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_expand();
+  fi
 
-int main() {
-dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:90458: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __dn_expand in -lbind""... $ac_c" 1>&6
-echo "configure:90478: checking for __dn_expand in -lbind" >&5
-ac_lib_var=`echo bind'_'__dn_expand | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for insck__getVdate in -linsck64""... $ac_c" 1>&6
+echo "configure:95701: checking for insck__getVdate in -linsck64" >&5
+ac_lib_var=`echo insck64'_'insck__getVdate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
+LIBS="-linsck64  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 90486 "configure"
+#line 95709 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __dn_expand();
+char insck__getVdate();
 
 int main() {
-__dn_expand()
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:90497: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -90508,89 +95731,159 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck64 $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck64_insck__getVdate
+    
   
 fi
 
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90529 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90533: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-    LIBS=$ac_libs
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$found" = "yes"; then
     
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
-  esac
+  fi
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
+      fi
+    
+  fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_dn_expand=yes
-  else
-    
-  
-  unset ac_cv_lib_socket_dn_expand
-  unset ac_cv_lib_socket___dn_expand
-  unset found
-  echo $ac_n "checking for dn_expand in -lsocket""... $ac_c" 1>&6
-echo "configure:90575: checking for dn_expand in -lsocket" >&5
-ac_lib_var=`echo socket'_'dn_expand | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for bsd_tcp in -linsck64""... $ac_c" 1>&6
+echo "configure:95868: checking for bsd_tcp in -linsck64" >&5
+ac_lib_var=`echo insck64'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-linsck64  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 90583 "configure"
+#line 95876 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char dn_expand();
+char bsd_tcp();
 
 int main() {
-dn_expand()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:90594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:95887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -90605,255 +95898,452 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck64 in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck64 $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __dn_expand in -lsocket""... $ac_c" 1>&6
-echo "configure:90614: checking for __dn_expand in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dn_expand | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90622 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_expand();
 
-int main() {
-__dn_expand()
-; return 0; }
-EOF
-if { (eval echo configure:90633: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck64_bsd_tcp
+    
   
 fi
 
+  elif test -f $SYBASE_CT_LIBDIR/libsybct.so; then
+    
+  
+  case sybcs in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcs in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcs $LIBS" 
+   ;;
+  esac
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90665 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90669: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+    fi
+   ;;
+  esac
+
 
-  if test "$found" = "yes"; then
     
   
-  case socket in
+  case sybct in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsocket $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybct $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_EXPAND 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
 
-    ac_cv_func_dn_expand=yes
-  else
     
-  :
-
-  fi
   
+  case sybcomn in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybcomn in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybcomn $LIBS" 
+   ;;
+  esac
 
-  fi
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case sybintl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
   
+  case sybintl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybintl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
 
+
+  
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
+    echo "$ac_t""Sybase32 syb-prefix: $SYBASE_CT_LIBS" 1>&6
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
- ;;
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
   esac
 
 
-  unset ac_cv_func_dn_skipname
-  unset ac_cv_func___dn_skipname
-  unset found
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  echo $ac_n "checking for dn_skipname""... $ac_c" 1>&6
-echo "configure:90726: checking for dn_skipname" >&5
-if eval "test \"`echo '$''{'ac_cv_func_dn_skipname'+set}'`\" = set"; then
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for netg_errstr in -lsybtcl""... $ac_c" 1>&6
+echo "configure:96134: checking for netg_errstr in -lsybtcl" >&5
+ac_lib_var=`echo sybtcl'_'netg_errstr | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 90731 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lsybtcl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 96142 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char dn_skipname(); below.  */
-#include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char dn_skipname();
+char netg_errstr();
 
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_dn_skipname) || defined (__stub___dn_skipname)
-choke me
-#else
-dn_skipname();
-#endif
-
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:90754: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96153: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_dn_skipname=yes"
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_dn_skipname=no"
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-if eval "test \"`echo '$ac_cv_func_'dn_skipname`\" = yes"; then
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
 else
   echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __dn_skipname""... $ac_c" 1>&6
-echo "configure:90772: checking for __dn_skipname" >&5
-if eval "test \"`echo '$''{'ac_cv_func___dn_skipname'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90777 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __dn_skipname(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
 
-int main() {
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_sybtcl_netg_errstr
+     
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
+  esac
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___dn_skipname) || defined (__stub_____dn_skipname)
-choke me
-#else
-__dn_skipname();
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:90800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___dn_skipname=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___dn_skipname=no"
-fi
-rm -f conftest*
+    fi
+   ;;
+  esac
+
+
+    
+  
 fi
 
-if eval "test \"`echo '$ac_cv_func_'__dn_skipname`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
 
+      fi
+    
+  fi
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_dn_skipname=yes
-  ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_dn_skipname
-  unset ac_cv_lib_resolv___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
-echo "configure:90838: checking for dn_skipname in -lresolv" >&5
-ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
+echo "configure:96328: checking for insck__getVdate in -linsck" >&5
+ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 90846 "configure"
+#line 96336 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char dn_skipname();
+char insck__getVdate();
 
 int main() {
-dn_skipname()
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:90857: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96347: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -90868,167 +96358,159 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
-echo "configure:90877: checking for __dn_skipname in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90885 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
 
-int main() {
-__dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:90896: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_insck__getVdate
+    
   
 fi
 
-
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 90928 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:90932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
-
-    LIBS=$ac_libs
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case resolv in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lresolv $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_dn_skipname=yes
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-  unset ac_cv_lib_bind_dn_skipname
-  unset ac_cv_lib_bind___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lbind""... $ac_c" 1>&6
-echo "configure:90974: checking for dn_skipname in -lbind" >&5
-ac_lib_var=`echo bind'_'dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 90982 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:90993: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __dn_skipname in -lbind""... $ac_c" 1>&6
-echo "configure:91013: checking for __dn_skipname in -lbind" >&5
-ac_lib_var=`echo bind'_'__dn_skipname | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
+echo "configure:96495: checking for bsd_tcp in -linsck" >&5
+ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 91021 "configure"
+#line 96503 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
+char bsd_tcp();
 
 int main() {
-__dn_skipname()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:91032: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -91043,128 +96525,258 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_bsd_tcp
+    
   
 fi
 
+  else
+    
+  
+  case cs in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case cs in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcs $LIBS" 
+   ;;
+  esac
+
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91064 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:91068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
+    fi
+   ;;
+  esac
 
-    LIBS=$ac_libs
-  fi
 
-  if test "$found" = "yes"; then
     
   
-  case bind in
+  case ct in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lbind $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case ct in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lct $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
-EOF
 
-    ac_cv_func_dn_skipname=yes
-  else
     
   
-  unset ac_cv_lib_socket_dn_skipname
-  unset ac_cv_lib_socket___dn_skipname
-  unset found
-  echo $ac_n "checking for dn_skipname in -lsocket""... $ac_c" 1>&6
-echo "configure:91110: checking for dn_skipname in -lsocket" >&5
-ac_lib_var=`echo socket'_'dn_skipname | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91118 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char dn_skipname();
+  case comn in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case comn in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcomn $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    
+  
+  case intl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case intl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lintl $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
+    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
+    echo "$ac_t""Sybase32 default: $SYBASE_CT_LIBS" 1>&6
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=" 
+      $SYBASE_CT_LIBS 
+    "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-int main() {
-dn_skipname()
-; return 0; }
-EOF
-if { (eval echo configure:91129: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      fi
+    
+  fi
 
-    echo $ac_n "checking for __dn_skipname in -lsocket""... $ac_c" 1>&6
-echo "configure:91149: checking for __dn_skipname in -lsocket" >&5
-ac_lib_var=`echo socket'_'__dn_skipname | sed 'y%./+-%__p_%'`
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
+echo "configure:96761: checking for netg_errstr in -ltcl" >&5
+ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
+LIBS="-ltcl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 91157 "configure"
+#line 96769 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char __dn_skipname();
+char netg_errstr();
 
 int main() {
-__dn_skipname()
+netg_errstr()
 ; return 0; }
 EOF
-if { (eval echo configure:91168: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96780: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -91179,218 +96791,186 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
-
   
-fi
-
-
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91200 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:91204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
-
-    LIBS=$ac_libs
-  fi
-
-  if test "$found" = "yes"; then
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     
+      
   
-  case socket in
+  case tcl in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsocket $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case tcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltcl $LIBS" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_DN_SKIPNAME 1
-EOF
+    fi
+   ;;
+  esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
-EOF
 
-    ac_cv_func_dn_skipname=yes
-  else
     
-  :
-
-  fi
-  
-
-  fi
   
+else
+  echo "$ac_t""no" 1>&6
 
-  fi
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_tcl_netg_errstr
+     
+      
   
- ;;
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
   
+  case sybtcl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lsybtcl $LIBS" 
+   ;;
   esac
 
 
+    fi
+   ;;
+  esac
 
 
-  unset ac_cv_func_res_search
-  unset ac_cv_func___res_search
-  unset found
+    
   
-  echo $ac_n "checking for res_search""... $ac_c" 1>&6
-echo "configure:91263: checking for res_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91268 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char res_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
+fi
 
-int main() {
+  
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_res_search) || defined (__stub___res_search)
-choke me
-#else
-res_search();
-#endif
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-; return 0; }
-EOF
-if { (eval echo configure:91291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_res_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_res_search=no"
-fi
-rm -f conftest*
-fi
 
-if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
- echo $ac_n "checking for __res_search""... $ac_c" 1>&6
-echo "configure:91309: checking for __res_search" >&5
-if eval "test \"`echo '$''{'ac_cv_func___res_search'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91314 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char __res_search(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
+    fi
+   ;;
+  esac
 
-int main() {
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub___res_search) || defined (__stub_____res_search)
-choke me
-#else
-__res_search();
-#endif
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-; return 0; }
-EOF
-if { (eval echo configure:91337: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func___res_search=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func___res_search=no"
-fi
-rm -f conftest*
-fi
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-if eval "test \"`echo '$ac_cv_func_'__res_search`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
- 
-fi
 
+      fi
+    
+  fi
 
-  case $found in
-  yes) 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+    ;;
+    esac
+  done
 
-    ac_cv_func_res_search=yes
-  ;;
-  
-    *) 
-  
-  unset ac_cv_lib_resolv_res_search
-  unset ac_cv_lib_resolv___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
-echo "configure:91375: checking for res_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
+echo "configure:96955: checking for insck__getVdate in -linsck" >&5
+ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 91383 "configure"
+#line 96963 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char res_search();
+char insck__getVdate();
 
 int main() {
-res_search()
+insck__getVdate()
 ; return 0; }
 EOF
-if { (eval echo configure:91394: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:96974: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -91405,128 +96985,159 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
 
-    echo $ac_n "checking for __res_search in -lresolv""... $ac_c" 1>&6
-echo "configure:91414: checking for __res_search in -lresolv" >&5
-ac_lib_var=`echo resolv'_'__res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lresolv  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91422 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
 
-int main() {
-__res_search()
-; return 0; }
-EOF
-if { (eval echo configure:91433: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+    fi
+   ;;
+  esac
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
+
+  
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_insck__getVdate
+    
   
 fi
 
-
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lresolv"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91465 "configure"
-#include "confdefs.h"
-main() { return (0); }
-EOF
-if { (eval echo configure:91469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
-
-    LIBS=$ac_libs
+    
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="-L$SYBASE_CT_LIBDIR"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-  if test "$found" = "yes"; then
-    
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  case resolv in
+  case $ac_ii in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lresolv $LIBS" 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
    ;;
   esac
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBRESOLV 1
-EOF
 
-    ac_cv_func_res_search=yes
-  else
+      fi
     
-  
-  unset ac_cv_lib_bind_res_search
-  unset ac_cv_lib_bind___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lbind""... $ac_c" 1>&6
-echo "configure:91511: checking for res_search in -lbind" >&5
-ac_lib_var=`echo bind'_'res_search | sed 'y%./+-%__p_%'`
+  fi
+
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
+echo "configure:97122: checking for bsd_tcp in -linsck" >&5
+ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
+LIBS="-linsck  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 91519 "configure"
+#line 97130 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char res_search();
+char bsd_tcp();
 
 int main() {
-res_search()
+bsd_tcp()
 ; return 0; }
 EOF
-if { (eval echo configure:91530: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:97141: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -91541,793 +97152,880 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
+    else
+      
+  
+  case insck in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-linsck $LIBS" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+  
 else
   echo "$ac_t""no" 1>&6
 
-    echo $ac_n "checking for __res_search in -lbind""... $ac_c" 1>&6
-echo "configure:91550: checking for __res_search in -lbind" >&5
-ac_lib_var=`echo bind'_'__res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_insck_bsd_tcp
+    
+  
+fi
+
+  fi
+fi
+
+
+
+php_enable_sysvmsg=no
+
+echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
+echo "configure:97201: checking whether to enable System V IPC support" >&5
+# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
+if test "${enable_sysvmsg+set}" = set; then
+  enableval="$enable_sysvmsg"
+  PHP_SYSVMSG=$enableval
+else
+  
+  PHP_SYSVMSG=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVMSG in
+shared,*)
+  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVMSG=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SYSVMSG" != "no"; then
+  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
+echo "configure:97244: checking for sys/msg.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lbind  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91558 "configure"
+  cat > conftest.$ac_ext <<EOF
+#line 97249 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
-
-int main() {
-__res_search()
-; return 0; }
+#include <sys/msg.h>
 EOF
-if { (eval echo configure:91569: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:97254: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
-LIBS="$ac_save_LIBS"
-
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  found=yes
+  :
 else
   echo "$ac_t""no" 1>&6
-found=no
-fi
-
+{ echo "configure: error: Cannot enable System V IPC support, sys/msg.h is missing" 1>&2; exit 1; }
   
 fi
 
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lbind"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91601 "configure"
-#include "confdefs.h"
-main() { return (0); }
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYSVMSG 1
 EOF
-if { (eval echo configure:91605: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
-  fi
+  
+  ext_builddir=ext/sysvmsg
+  ext_srcdir=$abs_srcdir/ext/sysvmsg
 
-  if test "$found" = "yes"; then
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVMSG_SHARED=no
     
   
-  case bind in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lbind $LIBS" 
-   ;;
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
-EOF
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBBIND 1
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_res_search=yes
+
+    EXT_STATIC="$EXT_STATIC sysvmsg"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+    fi
   else
-    
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVMSG_SHARED=yes
+      
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  unset ac_cv_lib_socket_res_search
-  unset ac_cv_lib_socket___res_search
-  unset found
-  echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
-echo "configure:91647: checking for res_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91655 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char res_search();
 
-int main() {
-res_search()
-; return 0; }
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:91666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    echo $ac_n "checking for __res_search in -lsocket""... $ac_c" 1>&6
-echo "configure:91686: checking for __res_search in -lsocket" >&5
-ac_lib_var=`echo socket'_'__res_search | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 91694 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char __res_search();
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVMSG, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)
+
+$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
+	$link_cmd
 
-int main() {
-__res_search()
-; return 0; }
 EOF
-if { (eval echo configure:91705: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  found=yes
-else
-  echo "$ac_t""no" 1>&6
-found=no
-fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVMSG, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
+      ;;
+  esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
+  fi
   
-fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
 
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)
+
+$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  if test "$found" = "yes"; then
-    ac_libs=$LIBS
-    LIBS="$LIBS -lsocket"
-    if test "$cross_compiling" = yes; then
-  found=no
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91737 "configure"
-#include "confdefs.h"
-main() { return (0); }
 EOF
-if { (eval echo configure:91741: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  found=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  found=no
-fi
-rm -fr conftest*
-fi
 
-    LIBS=$ac_libs
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYSVMSG 1
+EOF
+
+    fi
   fi
 
-  if test "$found" = "yes"; then
-    
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVMSG_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-  case socket in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsocket $LIBS" 
-   ;;
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_RES_SEARCH 1
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC sysvmsg"
+        ;;
+      *)
+        
+  
+  case ext/sysvmsg in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in sysvmsg.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBSOCKET 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-    ac_cv_func_res_search=yes
-  else
-    
-  :
-
-  fi
-  
 
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
   fi
   
-
-  fi
   
- ;;
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  esac
 
 
-echo $ac_n "checking whether atof() accepts NAN""... $ac_c" 1>&6
-echo "configure:91794: checking whether atof() accepts NAN" >&5
-if eval "test \"`echo '$''{'ac_cv_atof_accept_nan'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_atof_accept_nan=no
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvmsg
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91805 "configure"
-#include "confdefs.h"
+  fi
 
-#include <math.h>
-#include <stdlib.h>
+fi
 
-#ifdef HAVE_ISNAN
-#define zend_isnan(a) isnan(a)
-#elif defined(HAVE_FPCLASS)
-#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
-#else
-#define zend_isnan(a) 0
-#endif
 
-int main(int argc, char** argv)
-{
-	return zend_isnan(atof("NAN")) ? 0 : 1;
-}
 
-EOF
-if { (eval echo configure:91825: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_atof_accept_nan=yes
+php_enable_sysvsem=no
 
+echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
+echo "configure:97581: checking whether to enable System V semaphore support" >&5
+# Check whether --enable-sysvsem or --disable-sysvsem was given.
+if test "${enable_sysvsem+set}" = set; then
+  enableval="$enable_sysvsem"
+  PHP_SYSVSEM=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   
-  ac_cv_atof_accept_nan=no
+  PHP_SYSVSEM=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL
 
 fi
-rm -fr conftest*
-fi
 
-fi
 
-echo "$ac_t""$ac_cv_atof_accept_nan" 1>&6
-if test "$ac_cv_atof_accept_nan" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ATOF_ACCEPTS_NAN 1
-EOF
 
-fi
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVSEM in
+shared,*)
+  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVSEM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-echo $ac_n "checking whether atof() accepts INF""... $ac_c" 1>&6
-echo "configure:91852: checking whether atof() accepts INF" >&5
-if eval "test \"`echo '$''{'ac_cv_atof_accept_inf'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_atof_accept_inf=no
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91863 "configure"
-#include "confdefs.h"
 
-#include <math.h>
-#include <stdlib.h>
+echo "$ac_t""$ext_output" 1>&6
 
-#ifdef HAVE_ISINF
-#define zend_isinf(a) isinf(a)
-#elif defined(INFINITY)
-/* Might not work, but is required by ISO C99 */
-#define zend_isinf(a) (((a)==INFINITY)?1:0)
-#elif defined(HAVE_FPCLASS)
-#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
-#else
-#define zend_isinf(a) 0
-#endif
 
-int main(int argc, char** argv)
-{
-	return zend_isinf(atof("INF")) && zend_isinf(atof("-INF")) ? 0 : 1;
-}
 
-EOF
-if { (eval echo configure:91886: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_atof_accept_inf=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+if test "$PHP_SYSVSEM" != "no"; then
+ 
+  ext_builddir=ext/sysvsem
+  ext_srcdir=$abs_srcdir/ext/sysvsem
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVSEM_SHARED=no
+    
+  
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  ac_cv_atof_accept_inf=no
 
-fi
-rm -fr conftest*
-fi
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
 
-echo "$ac_t""$ac_cv_atof_accept_inf" 1>&6
-if test "$ac_cv_atof_accept_inf" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ATOF_ACCEPTS_INF 1
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-fi
 
-echo $ac_n "checking whether HUGE_VAL == INF""... $ac_c" 1>&6
-echo "configure:91913: checking whether HUGE_VAL == INF" >&5
-if eval "test \"`echo '$''{'ac_cv_huge_val_inf'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+    EXT_STATIC="$EXT_STATIC sysvsem"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVSEM_SHARED=yes
+      
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-if test "$cross_compiling" = yes; then
   
-  ac_cv_huge_val_inf=yes
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91924 "configure"
-#include "confdefs.h"
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-#include <math.h>
-#include <stdlib.h>
 
-#ifdef HAVE_ISINF
-#define zend_isinf(a) isinf(a)
-#elif defined(INFINITY)
-/* Might not work, but is required by ISO C99 */
-#define zend_isinf(a) (((a)==INFINITY)?1:0)
-#elif defined(HAVE_FPCLASS)
-#define zend_isinf(a) ((fpclass(a) == FP_PINF) || (fpclass(a) == FP_NINF))
-#else
-#define zend_isinf(a) 0
-#endif
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"
 
-int main(int argc, char** argv)
-{
-	return zend_isinf(HUGE_VAL) ? 0 : 1;
-}
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:91947: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_huge_val_inf=yes
+  done
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSEM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
+  fi
   
-  ac_cv_huge_val_inf=no
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
 
-fi
-rm -fr conftest*
-fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)
 
-fi
+$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
+	$link_cmd
 
-echo "$ac_t""$ac_cv_huge_val_inf" 1>&6
-if test "$ac_cv_huge_val_inf" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_HUGE_VAL_INF 1
 EOF
 
-fi
-
-echo $ac_n "checking whether HUGE_VAL + -HUGEVAL == NAN""... $ac_c" 1>&6
-echo "configure:91974: checking whether HUGE_VAL + -HUGEVAL == NAN" >&5
-if eval "test \"`echo '$''{'ac_cv_huge_val_nan'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-if test "$cross_compiling" = yes; then
-  
-  ac_cv_huge_val_nan=yes
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-else
-  cat > conftest.$ac_ext <<EOF
-#line 91985 "configure"
-#include "confdefs.h"
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSEM, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
+      ;;
+  esac
 
-#include <math.h>
-#include <stdlib.h>
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
 
-#ifdef HAVE_ISNAN
-#define zend_isnan(a) isnan(a)
-#elif defined(HAVE_FPCLASS)
-#define zend_isnan(a) ((fpclass(a) == FP_SNAN) || (fpclass(a) == FP_QNAN))
-#else
-#define zend_isnan(a) 0
-#endif
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)
 
-int main(int argc, char** argv)
-{
-#if defined(__sparc__) && !(__GNUC__ >= 3)
-	/* prevent bug #27830 */
-	return 1;
-#else
-	return zend_isnan(HUGE_VAL + -HUGE_VAL) ? 0 : 1;
-#endif
-}
+$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
+	$link_cmd
 
 EOF
-if { (eval echo configure:92010: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-  ac_cv_huge_val_nan=yes
 
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-  ac_cv_huge_val_nan=no
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_SYSVSEM 1
+EOF
 
-fi
-rm -fr conftest*
-fi
+    fi
+  fi
 
-fi
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVSEM_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
+  
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
 
-echo "$ac_t""$ac_cv_huge_val_nan" 1>&6
-if test "$ac_cv_huge_val_nan" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_HUGE_VAL_NAN 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
 
-echo $ac_n "checking whether strptime() declaration fails""... $ac_c" 1>&6
-echo "configure:92037: checking whether strptime() declaration fails" >&5
-if eval "test \"`echo '$''{'ac_cv_strptime_decl_fails'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
   
-cat > conftest.$ac_ext <<EOF
-#line 92043 "configure"
-#include "confdefs.h"
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-#include <time.h>
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-#ifndef HAVE_STRPTIME
-#error no strptime() on this platform
-#else
-/* use invalid strptime() declaration to see if it fails to compile */
-int strptime(const char *s, const char *format, struct tm *tm);
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:92059: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+        EXT_STATIC="$EXT_STATIC sysvsem"
+        ;;
+      *)
+        
+  
+  case ext/sysvsem in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  ac_cv_strptime_decl_fails=no
-
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
   
-  ac_cv_strptime_decl_fails=yes
-
-fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_strptime_decl_fails" 1>&6
-if test "$ac_cv_strptime_decl_fails" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_STRPTIME_DECL_FAILS 1
-EOF
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-fi
 
-for ac_hdr in wchar.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:92087: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 92092 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:92097: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
+  old_IFS=$IFS
+  for ac_src in sysvsem.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+  done
 
-for ac_func in mblen
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:92126: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 92131 "configure"
-#include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
 
-int main() {
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
 
-; return 0; }
-EOF
-if { (eval echo configure:92154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvsem
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  fi
+
+ cat >> confdefs.h <<\EOF
+#define HAVE_SYSVSEM 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
-for ac_func in mbrlen mbsinit
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:92181: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+ echo $ac_n "checking for union semun""... $ac_c" 1>&6
+echo "configure:97919: checking for union semun" >&5
+if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 92186 "configure"
+#line 97924 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
 
+#include <sys/types.h>
+#include <sys/ipc.h>
+#include <sys/sem.h>
+   
 int main() {
-
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
-
+union semun x;
 ; return 0; }
 EOF
-if { (eval echo configure:92209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:97935: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  
+     php_cv_semun=yes
+   
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  
+     php_cv_semun=no
+   
 fi
 rm -f conftest*
+ 
 fi
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+echo "$ac_t""$php_cv_semun" 1>&6
+ if test "$php_cv_semun" = "yes"; then
+   cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 1
 EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
 
-echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
-echo "configure:92234: checking for mbstate_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_mbstate_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-cat > conftest.$ac_ext <<EOF
-#line 92240 "configure"
-#include "confdefs.h"
+ else
+   cat >> confdefs.h <<\EOF
+#define HAVE_SEMUN 0
+EOF
 
-#ifdef HAVE_WCHAR_H
-# include <wchar.h>
-#endif
+ fi
+fi
 
-int main() {
 
-int __tmp__() { mbstate_t a; }
 
-; return 0; }
-EOF
-if { (eval echo configure:92253: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-  ac_cv_type_mbstate_t=yes
+php_enable_sysvshm=no
 
+echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
+echo "configure:97971: checking whether to enable System V shared memory support" >&5
+# Check whether --enable-sysvshm or --disable-sysvshm was given.
+if test "${enable_sysvshm+set}" = set; then
+  enableval="$enable_sysvshm"
+  PHP_SYSVSHM=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
   
-  ac_cv_type_mbstate_t=no
+  PHP_SYSVSHM=no
+  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL
 
 fi
-rm -f conftest*
-fi
 
-echo "$ac_t""$ac_cv_type_mbstate_t" 1>&6
-if test "$ac_cv_type_mbstate_t" = "yes"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_MBSTATE_T 1
-EOF
 
-fi
 
-for ac_hdr in atomic.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:92281: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 92286 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:92291: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
-fi
-done
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_SYSVSHM in
+shared,*)
+  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_SYSVSHM=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
 
-  ext_builddir=ext/standard
-  ext_srcdir=$abs_srcdir/ext/standard
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_SYSVSHM" != "no"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_SYSVSHM 1
+EOF
+
+  
+  ext_builddir=ext/sysvshm
+  ext_srcdir=$abs_srcdir/ext/sysvshm
 
   ac_extra=
 
-  if test "" != "shared" && test "" != "yes" && test "" != "cli"; then
-    PHP_STANDARD_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_SYSVSHM_SHARED=no
     
   
-  case ext/standard in
+  case ext/sysvshm in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92342,17 +98040,7 @@ done
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in sysvshm.c; do
   
       IFS=.
       set $ac_src
@@ -92375,18 +98063,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC standard"
-    if test "" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+    EXT_STATIC="$EXT_STATIC sysvshm"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
     fi
   else
-    if test "" = "shared" || test "" = "yes"; then
-      PHP_STANDARD_SHARED=yes
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_SYSVSHM_SHARED=yes
       
-  case ext/standard in
+  case ext/sysvshm in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92401,24 +98089,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in sysvshm.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_standard="$shared_objects_standard $ac_bdir$ac_obj.lo"
+      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -92441,31 +98119,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpstandard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpstandard.so '$ext_builddir'/phpstandard.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSTANDARD, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSHM, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(PHPSTANDARD_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpstandard.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpstandard.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpstandard.$suffix: $ext_builddir/phpstandard.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpstandard.$suffix \$(phplibdir)
+\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)
 
-$ext_builddir/phpstandard.$suffix: \$(shared_objects_standard) \$(PHPSTANDARD_SHARED_DEPENDENCIES)
+$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -92478,31 +98156,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/standard.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/standard.so '$ext_builddir'/standard.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(STANDARD, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSHM, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_standard) $(STANDARD_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/standard.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/standard.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_standard"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/standard.$suffix: $ext_builddir/standard.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/standard.$suffix \$(phplibdir)
+\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)
 
-$ext_builddir/standard.$suffix: \$(shared_objects_standard) \$(STANDARD_SHARED_DEPENDENCIES)
+$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -92510,22 +98188,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_STANDARD 1
+#define COMPILE_DL_SYSVSHM 1
 EOF
 
     fi
   fi
 
-  if test "" != "shared" && test "" != "yes" && test "" = "cli"; then
-    PHP_STANDARD_SHARED=no
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_SYSVSHM_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/standard in
+  case ext/sysvshm in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92540,17 +98218,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in sysvshm.c; do
   
       IFS=.
       set $ac_src
@@ -92573,15 +98241,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC standard"
+        EXT_STATIC="$EXT_STATIC sysvshm"
         ;;
       *)
         
   
-  case ext/standard in
+  case ext/sysvshm in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/standard"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/standard/"; ac_bdir="ext/standard/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92596,17 +98264,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in array.c base64.c basic_functions.c browscap.c crc32.c crypt.c \
-                            cyr_convert.c datetime.c dir.c dl.c dns.c exec.c file.c filestat.c \
-                            flock_compat.c formatted_print.c fsock.c head.c html.c image.c \
-                            info.c iptc.c lcg.c link.c mail.c math.c md5.c metaphone.c \
-                            microtime.c pack.c pageinfo.c quot_print.c rand.c \
-                            soundex.c string.c scanf.c syslog.c type.c uniqid.c url.c \
-                            var.c versioning.c assert.c strnatcmp.c levenshtein.c \
-                            incomplete_class.c url_scanner_ex.c ftp_fopen_wrapper.c \
-                            http_fopen_wrapper.c php_fopen_wrapper.c credits.c css.c \
-                            var_unserializer.c ftok.c sha1.c user_filters.c uuencode.c \
-                            filters.c proc_open.c streamsfuncs.c http.c; do
+  for ac_src in sysvshm.c; do
   
       IFS=.
       set $ac_src
@@ -92631,116 +98289,387 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC standard"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
+  fi
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
+
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=sysvshm
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
+  fi
+
+fi
+
+
+
+php_with_tidy=no
+
+echo $ac_n "checking for TIDY support""... $ac_c" 1>&6
+echo "configure:98315: checking for TIDY support" >&5
+# Check whether --with-tidy or --without-tidy was given.
+if test "${with_tidy+set}" = set; then
+  withval="$with_tidy"
+  PHP_TIDY=$withval
+else
+  
+  PHP_TIDY=no
+  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_TIDY in
+shared,*)
+  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_TIDY=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_TIDY" != "no"; then
+
+  if test "$PHP_TIDY" != "yes"; then
+    TIDY_SEARCH_DIRS=$PHP_TIDY
+  else
+    TIDY_SEARCH_DIRS="/usr/local /usr"
+  fi
+
+  for i in $TIDY_SEARCH_DIRS; do
+    if test -f $i/include/tidy/tidy.h; then
+      TIDY_DIR=$i
+      TIDY_INCDIR=$i/include/tidy
+    elif test -f $i/include/tidy.h; then
+      TIDY_DIR=$i
+      TIDY_INCDIR=$i/include
+    fi
+  done
+
+  if test -z "$TIDY_DIR"; then
+    { echo "configure: error: Cannot find libtidy" 1>&2; exit 1; }
+  fi
+
+  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR
+
+  
+
+  if test "$ext_shared" = "yes"; then
+    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
+    if test -n "$TIDY_LIBDIR"; then
+      
+  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_LIBDIR
+  else
+    
+    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$TIDY_LIBDIR"; then
+    
+  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_LIBDIR
+  else
+    
+    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
   fi
+
+    
+      
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=standard
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+  fi
 
   fi
+  
+  
+  case tidy in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-ltidy $LIBS" 
+   ;;
+  esac
 
 
 
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+
+  fi
 
 
   
-    for header_file in ext/standard/; do
-      
+  if test "$TIDY_INCDIR" != "/usr/include"; then
+    
+  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$TIDY_INCDIR
+  else
+    
+    ep_dir="`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$TIDY_INCDIR\"`"
+  fi
+
+    
   
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
     
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
   fi
 
-    done 
-  
+  fi
 
 
+  
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff=""
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-php_with_sybase_ct=no
 
-echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
-echo "configure:92681: checking for Sybase-CT support" >&5
-# Check whether --with-sybase-ct or --without-sybase-ct was given.
-if test "${with_sybase_ct+set}" = set; then
-  withval="$with_sybase_ct"
-  PHP_SYBASE_CT=$withval
-else
-  
-  PHP_SYBASE_CT=no
-  test "$PHP_ENABLE_ALL" && PHP_SYBASE_CT=$PHP_ENABLE_ALL
+    fi
+   ;;
+  esac
 
-fi
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SYBASE_CT in
-shared,*)
-  PHP_SYBASE_CT=`echo "$PHP_SYBASE_CT"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SYBASE_CT=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
 
+      fi
+    
+  fi
 
+    ;;
+    esac
+  done
 
-echo "$ac_t""$ext_output" 1>&6
+  echo $ac_n "checking for tidyOptGetDoc in -ltidy""... $ac_c" 1>&6
+echo "configure:98604: checking for tidyOptGetDoc in -ltidy" >&5
+ac_lib_var=`echo tidy'_'tidyOptGetDoc | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-ltidy  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 98612 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char tidyOptGetDoc();
 
+int main() {
+tidyOptGetDoc()
+; return 0; }
+EOF
+if { (eval echo configure:98623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    
+  cat >> confdefs.h <<\EOF
+#define HAVE_TIDYOPTGETDOC 1
+EOF
 
+  
+  
+else
+  echo "$ac_t""no" 1>&6
 
-if test "$PHP_SYBASE_CT" != "no"; then
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_tidy_tidyOptGetDoc
+    
+  
+fi
 
-  if test "$PHP_SYBASE" && test "$PHP_SYBASE" != "no" && test "$ext_shared" = "no"; then
-    { echo "configure: error: You can not use both --with-sybase and --with-sybase-ct in same build!" 1>&2; exit 1; }
-  fi
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYBASE_CT 1
-EOF
 
   
-  ext_builddir=ext/sybase_ct
-  ext_srcdir=$abs_srcdir/ext/sybase_ct
+  ext_builddir=ext/tidy
+  ext_srcdir=$abs_srcdir/ext/tidy
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYBASE_CT_SHARED=no
+    PHP_TIDY_SHARED=no
     
   
-  case ext/sybase_ct in
+  case ext/tidy in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92755,7 +98684,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
+  for ac_src in tidy.c; do
   
       IFS=.
       set $ac_src
@@ -92778,18 +98707,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sybase_ct"
+    EXT_STATIC="$EXT_STATIC tidy"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYBASE_CT_SHARED=yes
+      PHP_TIDY_SHARED=yes
       
-  case ext/sybase_ct in
+  case ext/tidy in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92804,14 +98733,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
+  for ac_src in tidy.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_sybase_ct="$shared_objects_sybase_ct $ac_bdir$ac_obj.lo"
+      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -92834,31 +98763,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsybase_ct.so '$ext_builddir'/phpsybase_ct.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYBASE_CT, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTIDY, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(PHPSYBASE_CT_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsybase_ct.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsybase_ct.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsybase_ct.$suffix: $ext_builddir/phpsybase_ct.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsybase_ct.$suffix \$(phplibdir)
+\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)
 
-$ext_builddir/phpsybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(PHPSYBASE_CT_SHARED_DEPENDENCIES)
+$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -92871,31 +98800,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sybase_ct.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sybase_ct.so '$ext_builddir'/sybase_ct.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYBASE_CT, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TIDY, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sybase_ct) $(SYBASE_CT_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sybase_ct.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sybase_ct.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sybase_ct"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/sybase_ct.$suffix: $ext_builddir/sybase_ct.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sybase_ct.$suffix \$(phplibdir)
+\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)
 
-$ext_builddir/sybase_ct.$suffix: \$(shared_objects_sybase_ct) \$(SYBASE_CT_SHARED_DEPENDENCIES)
+$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -92903,22 +98832,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYBASE_CT 1
+#define COMPILE_DL_TIDY 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYBASE_CT_SHARED=no
+    PHP_TIDY_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/sybase_ct in
+  case ext/tidy in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -92933,7 +98862,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
+  for ac_src in tidy.c; do
   
       IFS=.
       set $ac_src
@@ -92956,984 +98885,560 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC sybase_ct"
+        EXT_STATIC="$EXT_STATIC tidy"
         ;;
       *)
         
   
-  case ext/sybase_ct in
+  case ext/tidy in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sybase_ct"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sybase_ct/"; ac_bdir="ext/sybase_ct/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_sybase_ct.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sybase_ct"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sybase_ct
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST SYBASE_CT_SHARED_LIBADD"
-
- 
-  if test "$PHP_SYBASE_CT" = "yes"; then
-    SYBASE_CT_INCDIR=/home/sybase/include
-    SYBASE_CT_LIBDIR=/home/sybase/lib
-  else
-    SYBASE_CT_INCDIR=$PHP_SYBASE_CT/include
-    SYBASE_CT_LIBDIR=$PHP_SYBASE_CT/lib
-  fi
-
-    echo $ac_n "checking size of long int""... $ac_c" 1>&6
-echo "configure:93036: checking size of long int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long_int=4
-else
-  cat > conftest.$ac_ext <<EOF
-#line 93044 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long int));
-  exit(0);
-}
-EOF
-if { (eval echo configure:93055: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long_int=0
-fi
-rm -fr conftest*
-fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_long_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG_INT $ac_cv_sizeof_long_int
-EOF
-
-
-  echo $ac_n "checking checking if we're on a 64-bit platform""... $ac_c" 1>&6
-echo "configure:93075: checking checking if we're on a 64-bit platform" >&5
-  if test "$ac_cv_sizeof_long_int" = "4"; then
-    echo "$ac_t""no" 1>&6
-    PHP_SYBASE_64=no
-  else
-    echo "$ac_t""yes" 1>&6
-    PHP_SYBASE_64=yes
-  fi
-
-
-  echo $ac_n "checking Checking for ctpublic.h""... $ac_c" 1>&6
-echo "configure:93086: checking Checking for ctpublic.h" >&5
-  if test -f $SYBASE_CT_INCDIR/ctpublic.h; then
-    echo "$ac_t""found in $SYBASE_CT_INCDIR" 1>&6
-    
-  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
-    
-  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SYBASE_CT_INCDIR
-  else
-    
-    ep_dir="`echo $SYBASE_CT_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-  else
-    { echo "configure: error: ctpublic.h missing!" 1>&2; exit 1; }
-  fi
- 
-  echo $ac_n "checking Checking Sybase libdir""... $ac_c" 1>&6
-echo "configure:93125: checking Checking Sybase libdir" >&5
-  echo "$ac_t""Have $SYBASE_CT_LIBDIR" 1>&6
- 
-  echo $ac_n "checking Checking for Sybase platform libraries""... $ac_c" 1>&6
-echo "configure:93129: checking Checking for Sybase platform libraries" >&5
-
-  
-  if test "$SYBASE_CT_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$SYBASE_CT_LIBDIR
-  else
-    
-    ep_dir="`echo $SYBASE_CT_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-L$ai_p $SYBASE_CT_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && SYBASE_CT_SHARED_LIBADD="$ld_runpath_switch$ai_p $SYBASE_CT_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
 
-  if test -f $SYBASE_CT_INCDIR/tds.h || test -f $SYBASE_CT_INCDIR/tds_sysdep_public.h; then
-    
+  old_IFS=$IFS
+  for ac_src in tidy.c; do
   
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lct $LIBS" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lct"
-    echo "$ac_t""FreeTDS: $SYBASE_CT_LIBS" 1>&6
-  elif test -f $SYBASE_CT_LIBDIR/libsybct64.so && test $PHP_SYBASE_64 = "yes"; then
-    
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
+  fi
   
-  case sybcs64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcs64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case sybcs64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcs64 $LIBS" 
-   ;;
-  esac
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
 
-    fi
-   ;;
-  esac
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=tidy
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
+  fi
 
-    
-  
-  case sybct64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybct64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case sybct64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybct64 $LIBS" 
-   ;;
-  esac
-
+  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"
 
-    fi
-   ;;
-  esac
+  cat >> confdefs.h <<\EOF
+#define HAVE_TIDY 1
+EOF
 
+fi
 
-    
-  
-  case sybcomn64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcomn64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybcomn64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcomn64 $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
 
+php_enable_tokenizer=yes
 
-    
-  
-  case sybintl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybintl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
+echo "configure:98967: checking whether to enable tokenizer support" >&5
+# Check whether --enable-tokenizer or --disable-tokenizer was given.
+if test "${enable_tokenizer+set}" = set; then
+  enableval="$enable_tokenizer"
+  PHP_TOKENIZER=$enableval
+else
   
-  case sybintl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybintl64 $LIBS" 
-   ;;
-  esac
+  PHP_TOKENIZER=yes
+  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL
 
+fi
 
-    fi
-   ;;
-  esac
 
 
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_TOKENIZER in
+shared,*)
+  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_TOKENIZER=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
-    ac_solid_uname_s=`uname -s 2>/dev/null`
-    case $ac_solid_uname_s in
-      *OSF*)                            ;; # Tru64/DEC OSF does NOT use the SYB_LP64 define
-      *) CFLAGS="${CFLAGS} -DSYB_LP64"  ;; # 
-    esac
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs64 -lsybct64 -lsybcomn64 -lsybintl64"
-    echo "$ac_t""Sybase64: $SYBASE_CT_LIBS" 1>&6
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
 
+echo "$ac_t""$ext_output" 1>&6
 
-    fi
-   ;;
-  esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
+if test "$PHP_TOKENIZER" != "no"; then
   
+  ext_builddir=ext/tokenizer
+  ext_srcdir=$abs_srcdir/ext/tokenizer
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_TOKENIZER_SHARED=no
+    
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/tokenizer in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in tokenizer.c tokenizer_data.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for netg_errstr in -lsybtcl64""... $ac_c" 1>&6
-echo "configure:93395: checking for netg_errstr in -lsybtcl64" >&5
-ac_lib_var=`echo sybtcl64'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsybtcl64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93403 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-netg_errstr()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:93414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl64 $LIBS" 
-   ;;
-  esac
+  done
 
 
+    EXT_STATIC="$EXT_STATIC tokenizer"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
     fi
-   ;;
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_TOKENIZER_SHARED=yes
+      
+  case ext/tokenizer in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
+  
+  
 
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
 
-    
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sybtcl64_netg_errstr
-     
-      
+  old_IFS=$IFS
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl64 $SYBASE_CT_SHARED_LIBADD" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case sybtcl64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl64 $LIBS" 
-   ;;
-  esac
+      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
 
-    
-  
-fi
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTOKENIZER, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
+      ;;
+  esac
 
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
   fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)
 
+$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    fi
-   ;;
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TOKENIZER, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
+      ;;
   esac
 
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
-
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
 
-      fi
-    
-  fi
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)
 
-    ;;
-    esac
-  done
+$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
+	$link_cmd
 
-  echo $ac_n "checking for insck__getVdate in -linsck64""... $ac_c" 1>&6
-echo "configure:93589: checking for insck__getVdate in -linsck64" >&5
-ac_lib_var=`echo insck64'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93597 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
+EOF
 
-int main() {
-insck__getVdate()
-; return 0; }
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_TOKENIZER 1
 EOF
-if { (eval echo configure:93608: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_TOKENIZER_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
+        
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
+  case ext/tokenizer in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck64 $LIBS" 
-   ;;
-  esac
-
 
-    fi
-   ;;
-  esac
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
-else
-  echo "$ac_t""no" 1>&6
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck64_insck__getVdate
-    
-  
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        EXT_STATIC="$EXT_STATIC tokenizer"
+        ;;
+      *)
         
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  case ext/tokenizer in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in tokenizer.c tokenizer_data.c; do
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    fi
-   ;;
-  esac
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
   fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
-  fi
 
 
-      fi
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=tokenizer
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-    ;;
-    esac
-  done
+  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
 
-  echo $ac_n "checking for bsd_tcp in -linsck64""... $ac_c" 1>&6
-echo "configure:93756: checking for bsd_tcp in -linsck64" >&5
-ac_lib_var=`echo insck64'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck64  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 93764 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
+fi
 
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:93775: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+
+
+php_enable_wddx=no
+
+echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
+echo "configure:99313: checking whether to enable WDDX support" >&5
+# Check whether --enable-wddx or --disable-wddx was given.
+if test "${enable_wddx+set}" = set; then
+  enableval="$enable_wddx"
+  PHP_WDDX=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_WDDX=no
+  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck64 $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case insck64 in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck64 $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_WDDX in
+shared,*)
+  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_WDDX=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck64_bsd_tcp
-    
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
   
-fi
+php_with_libxml_dir=no
 
-  elif test -f $SYBASE_CT_LIBDIR/libsybct.so; then
-    
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:99358: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
   
-  case sybcs in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcs $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBXML_DIR=no
   
-  case sybcs in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcs $LIBS" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
 
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  
-  case sybct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybct $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybct $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+fi
 
 
-    
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat dir for WDDX""... $ac_c" 1>&6
+echo "configure:99382: checking libexpat dir for WDDX" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
   
-  case sybcomn in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybcomn $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBEXPAT_DIR=no
   
-  case sybcomn in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybcomn $LIBS" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
 
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  
-  case sybintl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybintl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case sybintl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybintl $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
 
+if test "$PHP_WDDX" != "no"; then
+
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: WDDX extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+    fi
 
-  
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lsybcs -lsybct -lsybcomn -lsybintl"
-    echo "$ac_t""Sybase32 syb-prefix: $SYBASE_CT_LIBS" 1>&6
-  
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:99410: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  for ac_i in $ac_stuff; do
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
       else
         
   
@@ -93955,7 +99460,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -93990,8 +99495,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
       else
         
   
@@ -94017,550 +99522,773 @@ fi
     esac
   done
 
-  echo $ac_n "checking for netg_errstr in -lsybtcl""... $ac_c" 1>&6
-echo "configure:94022: checking for netg_errstr in -lsybtcl" >&5
-ac_lib_var=`echo sybtcl'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:99568: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsybtcl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94030 "configure"
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $WDDX_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 99584 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
 
-int main() {
-netg_errstr()
-; return 0; }
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
 EOF
-if { (eval echo configure:94041: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+if { (eval echo configure:99595: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
 fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
+
+      
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
+
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
+
+      fi
       
+      if test "$PHP_XML" = "no"; then
+        
   
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
+  case ext/xml in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in compat.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+        
   
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl $LIBS" 
-   ;;
-  esac
+    BUILD_DIR="$BUILD_DIR ext/xml"
+  
+
+      fi
+    
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
+
+  fi
 
+        if test "$PHP_LIBEXPAT_DIR" != "no"; then
+    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
+      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
+        EXPAT_DIR=$i
+        break
+      fi
+    done
 
+    if test -z "$EXPAT_DIR"; then
+      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
     fi
-   ;;
-  esac
 
+    
+  if test "$EXPAT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/include
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
+  fi
 
     
   
-else
-  echo "$ac_t""no" 1>&6
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_sybtcl_netg_errstr
-     
+  fi
+
+    
+
+  if test "$ext_shared" = "yes"; then
+    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
+    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
       
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
+      else
+        
   
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
       
   
-  case sybtcl in
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case expat in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lsybtcl $LIBS" 
+      LIBS="-lexpat $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
 
 
-    
-  
-fi
+  fi
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
+EOF
+
+  fi
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_WDDX 1
+EOF
 
   
+  ext_builddir=ext/wddx
+  ext_srcdir=$abs_srcdir/ext/wddx
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_WDDX_SHARED=no
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
   
-  save_ext_shared=$ext_shared
-  ext_shared=yes
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC wddx"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_WDDX_SHARED=yes
       
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
+      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPWDDX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
+  fi
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)
+
+$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
+	$link_cmd
+
+EOF
+
+          ;;
+        *)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(WDDX, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
+      ;;
   esac
 
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
+  fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
 
-    fi
-   ;;
-  esac
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)
 
+$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
+	$link_cmd
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+EOF
+
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_WDDX 1
+EOF
+
+    fi
   fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_WDDX_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
         
   
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
 
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
-echo "configure:94216: checking for insck__getVdate in -linsck" >&5
-ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94224 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-int main() {
-insck__getVdate()
-; return 0; }
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
-if { (eval echo configure:94235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  done
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+
+        EXT_STATIC="$EXT_STATIC wddx"
+        ;;
+      *)
+        
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
+  case ext/wddx in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
-
 
-    fi
-   ;;
-  esac
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in wddx.c; do
   
-else
-  echo "$ac_t""no" 1>&6
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_insck__getVdate
-    
-  
-fi
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
 
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+  fi
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=wddx
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
   
+  am_i_shared=$PHP_WDDX_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension wddx to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build wddx shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension wddx, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
 
+fi
 
-      fi
-    
-  fi
 
-    ;;
-    esac
-  done
 
-  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
-echo "configure:94383: checking for bsd_tcp in -linsck" >&5
-ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94391 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
+php_enable_xml=yes
 
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:94402: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
+echo "configure:100162: checking whether to enable XML support" >&5
+# Check whether --enable-xml or --disable-xml was given.
+if test "${enable_xml+set}" = set; then
+  enableval="$enable_xml"
+  PHP_XML=$enableval
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  
+  PHP_XML=yes
+  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL
 
 fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_XML in
+shared,*)
+  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_XML=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
 
 
-  
-else
-  echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_bsd_tcp
-    
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test -z "$PHP_LIBXML_DIR"; then
   
-fi
+php_with_libxml_dir=no
 
-  else
-    
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:100207: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
   
-  case cs in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lcs $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBXML_DIR=no
   
-  case cs in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcs $LIBS" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
 
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lct $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case ct in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lct $LIBS" 
-   ;;
-  esac
 
 
-    fi
-   ;;
-  esac
+fi
 
 
-    
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat install dir""... $ac_c" 1>&6
+echo "configure:100231: checking libexpat install dir" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
   
-  case comn in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lcomn $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
+  PHP_LIBEXPAT_DIR=no
   
-  case comn in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lcomn $LIBS" 
-   ;;
-  esac
 
+fi
 
-    fi
-   ;;
-  esac
 
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
 
-    
-  
-  case intl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lintl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case intl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lintl $LIBS" 
-   ;;
-  esac
 
 
+
+if test "$PHP_XML" != "no"; then
+
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: XML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+    fi
+
+    
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:100260: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
     fi
-   ;;
-  esac
+  done
 
+fi
 
-  
-    SYBASE_CT_LIBS="-L$SYBASE_CT_LIBDIR -lcs -lct -lcomn -lintl"
-    echo "$ac_t""Sybase32 default: $SYBASE_CT_LIBS" 1>&6
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=" 
-      $SYBASE_CT_LIBS 
-    "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
+        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
       else
         
   
@@ -94582,7 +100310,7 @@ fi
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
+        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -94617,8 +100345,8 @@ fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
       else
         
   
@@ -94644,160 +100372,13 @@ fi
     esac
   done
 
-  echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
-echo "configure:94649: checking for netg_errstr in -ltcl" >&5
-ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-ltcl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94657 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char netg_errstr();
-
-int main() {
-netg_errstr()
-; return 0; }
-EOF
-if { (eval echo configure:94668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-      
-  
-  case tcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-ltcl $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case tcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltcl $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_tcl_netg_errstr
-     
-      
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-lsybtcl $SYBASE_CT_SHARED_LIBADD" 
-    else
       
-  
-  case sybtcl in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lsybtcl $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    
-  
-fi
-
-  
-    
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
+  for ac_i in $LIBXML_INCS; do
     case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
+    -I*)
       ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$ac_ii" != "/usr/include"; then
     
   if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
     ai_p=$ac_ii
@@ -94810,176 +100391,187 @@ fi
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
     
   fi
 
+  fi
+
     ;;
     esac
   done
 
-  echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
-echo "configure:94843: checking for insck__getVdate in -linsck" >&5
-ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:100418: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 94851 "configure"
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XML_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 100434 "configure"
 #include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char insck__getVdate();
 
-int main() {
-insck__getVdate()
-; return 0; }
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
 EOF
-if { (eval echo configure:94862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+if { (eval echo configure:100445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  rm -fr conftest*
   
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
+    LIBS=$old_LIBS
     
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
   
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
+fi
+rm -fr conftest*
+fi
+
+
       
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
+fi
 
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
 
+      fi
+      
+      xml_extra_sources="compat.c"
+      
+  am_i_shared=$PHP_XML_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xml to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xml shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xml, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+    
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
     fi
-   ;;
-  esac
-
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
 
+  fi
   
-else
-  echo "$ac_t""no" 1>&6
+        if test "$PHP_LIBEXPAT_DIR" != "no"; then
+    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
+      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
+        EXPAT_DIR=$i
+        break
+      fi
+    done
+
+    if test -z "$EXPAT_DIR"; then
+      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
+    fi
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_insck__getVdate
     
-  
-fi
+  if test "$EXPAT_DIR/include" != "/usr/include"; then
+    
+  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/include
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
+  fi
 
     
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="-L$SYBASE_CT_LIBDIR"
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
       fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
+    
+  fi
 
-    fi
-   ;;
-  esac
+  fi
 
+    
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
+  if test "$ext_shared" = "yes"; then
+    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
+    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
       
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
       else
         
   
@@ -94997,189 +100589,84 @@ fi
   fi
 
 
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
-echo "configure:95010: checking for bsd_tcp in -linsck" >&5
-ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-linsck  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 95018 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char bsd_tcp();
-
-int main() {
-bsd_tcp()
-; return 0; }
-EOF
-if { (eval echo configure:95029: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        SYBASE_CT_SHARED_LIBADD="-linsck $SYBASE_CT_SHARED_LIBADD" 
-    else
-      
-  
-  case insck in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-linsck $LIBS" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_insck_bsd_tcp
-    
-  
-fi
-
-  fi
-fi
-
-
-
-php_enable_sysvmsg=no
+      fi
+    
+  fi
 
-echo $ac_n "checking whether to enable System V IPC support""... $ac_c" 1>&6
-echo "configure:95089: checking whether to enable System V IPC support" >&5
-# Check whether --enable-sysvmsg or --disable-sysvmsg was given.
-if test "${enable_sysvmsg+set}" = set; then
-  enableval="$enable_sysvmsg"
-  PHP_SYSVMSG=$enableval
-else
-  
-  PHP_SYSVMSG=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVMSG=$PHP_ENABLE_ALL
+    fi
+  else
+    
 
-fi
+  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_SYSVMSG in
-shared,*)
-  PHP_SYSVMSG=`echo "$PHP_SYSVMSG"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_SYSVMSG=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    
+  fi
 
+  fi
+  
+  
+  case expat in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lexpat $LIBS" 
+   ;;
+  esac
 
 
-echo "$ac_t""$ext_output" 1>&6
 
 
+  fi
 
 
-if test "$PHP_SYSVMSG" != "no"; then
-  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
-echo "configure:95132: checking for sys/msg.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 95137 "configure"
-#include "confdefs.h"
-#include <sys/msg.h>
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:95142: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
-fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  :
-else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: Cannot enable System V IPC support, sys/msg.h is missing" 1>&2; exit 1; }
-  
-fi
-
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYSVMSG 1
-EOF
+  fi
 
   
-  ext_builddir=ext/sysvmsg
-  ext_srcdir=$abs_srcdir/ext/sysvmsg
+  ext_builddir=ext/xml
+  ext_srcdir=$abs_srcdir/ext/xml
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVMSG_SHARED=no
+    PHP_XML_SHARED=no
     
   
-  case ext/sysvmsg in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95194,7 +100681,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in xml.c $xml_extra_sources; do
   
       IFS=.
       set $ac_src
@@ -95217,18 +100704,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sysvmsg"
+    EXT_STATIC="$EXT_STATIC xml"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVMSG_SHARED=yes
+      PHP_XML_SHARED=yes
       
-  case ext/sysvmsg in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95243,14 +100730,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in xml.c $xml_extra_sources; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_sysvmsg="$shared_objects_sysvmsg $ac_bdir$ac_obj.lo"
+      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -95273,31 +100760,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvmsg.so '$ext_builddir'/phpsysvmsg.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVMSG, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXML, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(PHPSYSVMSG_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvmsg.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvmsg.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvmsg.$suffix: $ext_builddir/phpsysvmsg.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvmsg.$suffix \$(phplibdir)
+\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)
 
-$ext_builddir/phpsysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(PHPSYSVMSG_SHARED_DEPENDENCIES)
+$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -95310,31 +100797,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvmsg.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvmsg.so '$ext_builddir'/sysvmsg.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVMSG, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XML, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvmsg) $(SYSVMSG_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvmsg.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvmsg.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvmsg"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvmsg.$suffix: $ext_builddir/sysvmsg.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvmsg.$suffix \$(phplibdir)
+\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)
 
-$ext_builddir/sysvmsg.$suffix: \$(shared_objects_sysvmsg) \$(SYSVMSG_SHARED_DEPENDENCIES)
+$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -95342,22 +100829,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVMSG 1
+#define COMPILE_DL_XML 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVMSG_SHARED=no
+    PHP_XML_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/sysvmsg in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95372,7 +100859,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in xml.c $xml_extra_sources; do
   
       IFS=.
       set $ac_src
@@ -95395,15 +100882,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC sysvmsg"
+        EXT_STATIC="$EXT_STATIC xml"
         ;;
       *)
         
   
-  case ext/sysvmsg in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvmsg"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvmsg/"; ac_bdir="ext/sysvmsg/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95418,7 +100905,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvmsg.c; do
+  for ac_src in xml.c $xml_extra_sources; do
   
       IFS=.
       set $ac_src
@@ -95443,7 +100930,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvmsg"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
   fi
   
   
@@ -95452,28 +100939,53 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvmsg
+    PHP_PECL_EXTENSION=xml
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"
+
+  
+  
+    for header_file in ext/xml/; do
+      
+  
+  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
+      
+  fi
+
+    done 
+  
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_XML 1
+EOF
+
 fi
 
 
 
-php_enable_sysvsem=no
+php_enable_xmlreader=yes
 
-echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
-echo "configure:95469: checking whether to enable System V semaphore support" >&5
-# Check whether --enable-sysvsem or --disable-sysvsem was given.
-if test "${enable_sysvsem+set}" = set; then
-  enableval="$enable_sysvsem"
-  PHP_SYSVSEM=$enableval
+echo $ac_n "checking whether to enable XMLReader support""... $ac_c" 1>&6
+echo "configure:100981: checking whether to enable XMLReader support" >&5
+# Check whether --enable-xmlreader or --disable-xmlreader was given.
+if test "${enable_xmlreader+set}" = set; then
+  enableval="$enable_xmlreader"
+  PHP_XMLREADER=$enableval
 else
   
-  PHP_SYSVSEM=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVSEM=$PHP_ENABLE_ALL
+  PHP_XMLREADER=yes
+  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL
 
 fi
 
@@ -95481,12 +100993,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_SYSVSEM in
+case $PHP_XMLREADER in
 shared,*)
-  PHP_SYSVSEM=`echo "$PHP_SYSVSEM"|$SED 's/^shared,//'`
+  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_SYSVSEM=yes
+  PHP_XMLREADER=yes
   ;;
 no)
   ext_output=no
@@ -95505,21 +101017,277 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_SYSVSEM" != "no"; then
- 
-  ext_builddir=ext/sysvsem
-  ext_srcdir=$abs_srcdir/ext/sysvsem
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
+
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:101026: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
+  
+
+fi
+
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+fi
+
+if test "$PHP_XMLREADER" != "no"; then
+
+  if test "$PHP_LIBXML" = "no"; then
+    { echo "configure: error: XMLReader extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+  fi
+
+  
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:101054: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
+      
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+      fi
+    
+  fi
+
+    ;;
+    esac
+  done
+
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+    ;;
+    esac
+  done
+
+
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:101212: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XMLREADER_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 101228 "configure"
+#include "confdefs.h"
+
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
+EOF
+if { (eval echo configure:101239: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
+fi
+
+
+      
+fi
+
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
+EOF
+
+      fi
+      
+    cat >> confdefs.h <<\EOF
+#define HAVE_XMLREADER 1
+EOF
+
+    
+  ext_builddir=ext/xmlreader
+  ext_srcdir=$abs_srcdir/ext/xmlreader
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVSEM_SHARED=no
+    PHP_XMLREADER_SHARED=no
     
   
-  case ext/sysvsem in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95534,7 +101302,7 @@ if test "$PHP_SYSVSEM" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -95557,18 +101325,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC sysvsem"
+    EXT_STATIC="$EXT_STATIC xmlreader"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVSEM_SHARED=yes
+      PHP_XMLREADER_SHARED=yes
       
-  case ext/sysvsem in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95583,14 +101351,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_sysvsem="$shared_objects_sysvsem $ac_bdir$ac_obj.lo"
+      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -95613,31 +101381,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvsem.so '$ext_builddir'/phpsysvsem.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSEM, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLREADER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(PHPSYSVSEM_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvsem.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvsem.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvsem.$suffix: $ext_builddir/phpsysvsem.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvsem.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)
 
-$ext_builddir/phpsysvsem.$suffix: \$(shared_objects_sysvsem) \$(PHPSYSVSEM_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -95650,31 +101418,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvsem.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvsem.so '$ext_builddir'/sysvsem.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSEM, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLREADER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvsem) $(SYSVSEM_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvsem.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvsem.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvsem"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvsem.$suffix: $ext_builddir/sysvsem.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvsem.$suffix \$(phplibdir)
+\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)
 
-$ext_builddir/sysvsem.$suffix: \$(shared_objects_sysvsem) \$(SYSVSEM_SHARED_DEPENDENCIES)
+$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -95682,22 +101450,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVSEM 1
+#define COMPILE_DL_XMLREADER 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVSEM_SHARED=no
+    PHP_XMLREADER_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/sysvsem in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95712,7 +101480,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -95735,15 +101503,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC sysvsem"
+        EXT_STATIC="$EXT_STATIC xmlreader"
         ;;
       *)
         
   
-  case ext/sysvsem in
+  case ext/xmlreader in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvsem"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvsem/"; ac_bdir="ext/sysvsem/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -95758,7 +101526,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvsem.c; do
+  for ac_src in php_xmlreader.c; do
   
       IFS=.
       set $ac_src
@@ -95783,7 +101551,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvsem"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
   fi
   
   
@@ -95792,78 +101560,72 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvsem
+    PHP_PECL_EXTENSION=xmlreader
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
- cat >> confdefs.h <<\EOF
-#define HAVE_SYSVSEM 1
-EOF
-
- echo $ac_n "checking for union semun""... $ac_c" 1>&6
-echo "configure:95807: checking for union semun" >&5
-if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 95812 "configure"
-#include "confdefs.h"
+    
+  am_i_shared=$PHP_XMLREADER_SHARED
+  is_it_shared=$PHP_DOM_SHARED
+  is_it_enabled=$PHP_DOM
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xmlreader to build statically, but it
+depends on extension dom, which you've configured to build shared.
+You either need to build xmlreader shared or build dom statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xmlreader, which depends on extension dom,
+but you've either not enabled dom, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"
 
-#include <sys/types.h>
-#include <sys/ipc.h>
-#include <sys/sem.h>
-   
-int main() {
-union semun x;
-; return 0; }
-EOF
-if { (eval echo configure:95823: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
   
-     php_cv_semun=yes
-   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
   
-     php_cv_semun=no
-   
-fi
-rm -f conftest*
- 
+  fi
+
 fi
 
-echo "$ac_t""$php_cv_semun" 1>&6
- if test "$php_cv_semun" = "yes"; then
-   cat >> confdefs.h <<\EOF
-#define HAVE_SEMUN 1
-EOF
 
- else
-   cat >> confdefs.h <<\EOF
-#define HAVE_SEMUN 0
-EOF
+# Local macros for automake & autoconf
 
- fi
-fi
 
 
 
-php_enable_sysvshm=no
 
-echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
-echo "configure:95859: checking whether to enable System V shared memory support" >&5
-# Check whether --enable-sysvshm or --disable-sysvshm was given.
-if test "${enable_sysvshm+set}" = set; then
-  enableval="$enable_sysvshm"
-  PHP_SYSVSHM=$enableval
+
+
+
+
+
+
+
+
+php_with_xmlrpc=no
+
+echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
+echo "configure:101621: checking for XMLRPC-EPI support" >&5
+# Check whether --with-xmlrpc or --without-xmlrpc was given.
+if test "${with_xmlrpc+set}" = set; then
+  withval="$with_xmlrpc"
+  PHP_XMLRPC=$withval
 else
   
-  PHP_SYSVSHM=no
-  test "$PHP_ENABLE_ALL" && PHP_SYSVSHM=$PHP_ENABLE_ALL
+  PHP_XMLRPC=no
+  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL
 
 fi
 
@@ -95871,12 +101633,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_SYSVSHM in
+case $PHP_XMLRPC in
 shared,*)
-  PHP_SYSVSHM=`echo "$PHP_SYSVSHM"|$SED 's/^shared,//'`
+  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_SYSVSHM=yes
+  PHP_XMLRPC=yes
   ;;
 no)
   ext_output=no
@@ -95895,203 +101657,341 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test "$PHP_SYSVSHM" != "no"; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_SYSVSHM 1
-EOF
+if test -z "$PHP_LIBXML_DIR"; then
+  
+php_with_libxml_dir=no
 
+echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
+echo "configure:101666: checking libxml2 install dir" >&5
+# Check whether --with-libxml-dir or --without-libxml-dir was given.
+if test "${with_libxml_dir+set}" = set; then
+  withval="$with_libxml_dir"
+  PHP_LIBXML_DIR=$withval
+else
+  
+  PHP_LIBXML_DIR=no
   
-  ext_builddir=ext/sysvshm
-  ext_srcdir=$abs_srcdir/ext/sysvshm
 
-  ac_extra=
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_SYSVSHM_SHARED=no
-    
-  
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+
+ext_output=$PHP_LIBXML_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+fi
+
+
+php_with_libexpat_dir=no
+
+echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
+echo "configure:101690: checking libexpat dir for XMLRPC-EPI" >&5
+# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
+if test "${with_libexpat_dir+set}" = set; then
+  withval="$with_libexpat_dir"
+  PHP_LIBEXPAT_DIR=$withval
+else
   
+  PHP_LIBEXPAT_DIR=no
   
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+fi
 
 
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
+ext_output=$PHP_LIBEXPAT_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+
+php_with_iconv_dir=no
+
+echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
+echo "configure:101713: checking iconv dir for XMLRPC-EPI" >&5
+# Check whether --with-iconv-dir or --without-iconv-dir was given.
+if test "${with_iconv_dir+set}" = set; then
+  withval="$with_iconv_dir"
+  PHP_ICONV_DIR=$withval
+else
+  
+  PHP_ICONV_DIR=no
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+
+ext_output=$PHP_ICONV_DIR
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_XMLRPC" != "no"; then
+
+  
+  am_i_shared=$PHP_XMLRPC_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension xmlrpc to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xmlrpc shared or build libxml statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension xmlrpc, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_XMLRPC 1
 EOF
-  done
 
 
-    EXT_STATIC="$EXT_STATIC sysvshm"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
+        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+
+    if test "$PHP_LIBXML" = "no"; then
+      { echo "configure: error: XML-RPC extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_SYSVSHM_SHARED=yes
+
+    
+echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
+echo "configure:101769: checking for xml2-config path" >&5
+if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  for i in $PHP_LIBXML_DIR /usr/local /usr; do
+    if test -x "$i/bin/xml2-config"; then
+      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+      break
+    fi
+  done
+
+fi
+
+echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+
+  if test -x "$ac_cv_php_xml2_config_path"; then
+    XML2_CONFIG="$ac_cv_php_xml2_config_path"
+    libxml_full_version=`$XML2_CONFIG --version`
+    ac_IFS=$IFS
+    IFS="."
+    set $libxml_full_version
+    IFS=$ac_IFS
+    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXML_VERSION" -ge "2006011"; then
+      LIBXML_LIBS=`$XML2_CONFIG --libs`
+      LIBXML_INCS=`$XML2_CONFIG --cflags`
       
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  for ac_i in $LIBXML_LIBS; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-      shared_objects_sysvshm="$shared_objects_sysvshm $ac_bdir$ac_obj.lo"
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+      fi
+    
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpsysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpsysvshm.so '$ext_builddir'/phpsysvshm.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPSYSVSHM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(PHPSYSVSHM_SHARED_LIBADD)'
-      ;;
-  esac
+    ;;
+    esac
+  done
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpsysvshm.$suffix"
+      
+  for ac_i in $LIBXML_INCS; do
+    case $ac_i in
+    -I*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/include"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpsysvshm.$suffix"
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpsysvshm.$suffix: $ext_builddir/phpsysvshm.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpsysvshm.$suffix \$(phplibdir)
-
-$ext_builddir/phpsysvshm.$suffix: \$(shared_objects_sysvshm) \$(PHPSYSVSHM_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+  fi
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+    ;;
+    esac
+  done
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/sysvshm.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/sysvshm.so '$ext_builddir'/sysvshm.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(SYSVSHM, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_sysvshm) $(SYSVSHM_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/sysvshm.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/sysvshm.$suffix"
-  fi
+            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
+echo "configure:101927: checking whether libxml build works" >&5
+if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_sysvshm"
+        
+  old_LIBS=$LIBS
+  LIBS="
+          $XMLRPC_SHARED_LIBADD
+         $LIBS"
+  if test "$cross_compiling" = yes; then
+  
+    LIBS=$old_LIBS
+  
+else
+  cat > conftest.$ac_ext <<EOF
+#line 101943 "configure"
+#include "confdefs.h"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/sysvshm.$suffix: $ext_builddir/sysvshm.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/sysvshm.$suffix \$(phplibdir)
+    
+    char xmlInitParser();
+    int main() {
+      xmlInitParser();
+      return 0;
+    }
+  
+EOF
+if { (eval echo configure:101954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+    LIBS=$old_LIBS
+    
+          php_cv_libxml_build_works=yes
+        
+  
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+    LIBS=$old_LIBS
+    
+          echo "$ac_t""no" 1>&6
+          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
+        
+  
+fi
+rm -fr conftest*
+fi
 
-$ext_builddir/sysvshm.$suffix: \$(shared_objects_sysvshm) \$(SYSVSHM_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+      
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_SYSVSHM 1
+echo "$ac_t""$php_cv_libxml_build_works" 1>&6
+      if test "$php_cv_libxml_build_works" = "yes"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBXML 1
 EOF
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_SYSVSHM_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+      fi
+      
+      if test "$PHP_XML" = "no"; then
         
   
-  case ext/sysvshm in
+  case ext/xml in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96106,7 +102006,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in sysvshm.c; do
+  for ac_src in compat.c; do
   
       IFS=.
       set $ac_src
@@ -96116,10 +102016,10 @@ EOF
       PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -96129,203 +102029,405 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC sysvshm"
-        ;;
-      *)
         
   
-  case ext/sysvshm in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/sysvshm"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/sysvshm/"; ac_bdir="ext/sysvshm/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+    BUILD_DIR="$BUILD_DIR ext/xml"
   
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+      fi
+    
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+    
+  fi
+
+  else
+    testval=no
+    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
+      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBEXPAT 1
+EOF
 
+        
 
-  old_IFS=$IFS
-  for ac_src in sysvshm.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  if test "$ext_shared" = "yes"; then
+    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
+    if test -n "$i/$PHP_LIBDIR"; then
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$i/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
+      fi
+    
+  fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC sysvshm"
+    fi
+  else
+    
+
+  if test -n "$i/$PHP_LIBDIR"; then
+    
+  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$i/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
   fi
+
+    
+      
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=sysvshm
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+  fi
 
   fi
+  
+  
+  case expat in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lexpat $LIBS" 
+   ;;
+  esac
 
-fi
 
 
 
-php_with_tidy=no
+  fi
 
-echo $ac_n "checking for TIDY support""... $ac_c" 1>&6
-echo "configure:96203: checking for TIDY support" >&5
-# Check whether --with-tidy or --without-tidy was given.
-if test "${with_tidy+set}" = set; then
-  withval="$with_tidy"
-  PHP_TIDY=$withval
-else
+
+        
+  if test "$i/include" != "/usr/include"; then
+    
+  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
+    ai_p=$i/include
+  else
+    
+    ep_dir="`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$i/include\"`"
+  fi
+
+    
   
-  PHP_TIDY=no
-  test "$PHP_ENABLE_ALL" && PHP_TIDY=$PHP_ENABLE_ALL
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-fi
+  fi
 
+        testval=yes
+        break
+      fi
+    done
 
+    if test "$testval" = "no"; then
+      { echo "configure: error: XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" 1>&2; exit 1; }
+    fi
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_TIDY in
-shared,*)
-  PHP_TIDY=`echo "$PHP_TIDY"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_TIDY=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then
 
+    if test "$PHP_ICONV_DIR" != "no"; then
+      PHP_ICONV=$PHP_ICONV_DIR
+    fi
+  
+    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
+      PHP_ICONV=yes
+    fi
+  
+    
+  found_iconv=no
+  unset ICONV_DIR
 
+  # Create the directories for a VPATH build:
+  $php_shtool mkdir -p ext/iconv
 
-echo "$ac_t""$ext_output" 1>&6
+  echo > ext/iconv/php_have_bsd_iconv.h
+  echo > ext/iconv/php_have_ibm_iconv.h
+  echo > ext/iconv/php_have_glibc_iconv.h
+  echo > ext/iconv/php_have_libiconv.h
+  echo > ext/iconv/php_have_iconv.h
+  echo > ext/iconv/php_php_iconv_impl.h
+  echo > ext/iconv/php_iconv_aliased_libiconv.h
+  echo > ext/iconv/php_php_iconv_h_path.h
+  echo > ext/iconv/php_iconv_supports_errno.h
 
+        if test "$PHP_ICONV" = "yes"; then
+    echo $ac_n "checking for iconv""... $ac_c" 1>&6
+echo "configure:102223: checking for iconv" >&5
+if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102228 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char iconv(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char iconv();
 
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_iconv) || defined (__stub___iconv)
+choke me
+#else
+iconv();
+#endif
 
-if test "$PHP_TIDY" != "no"; then
+; return 0; }
+EOF
+if { (eval echo configure:102251: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_iconv=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_iconv=no"
+fi
+rm -f conftest*
+fi
 
-  if test "$PHP_TIDY" != "yes"; then
-    TIDY_SEARCH_DIRS=$PHP_TIDY
-  else
-    TIDY_SEARCH_DIRS="/usr/local /usr"
-  fi
+if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+      found_iconv=yes
+    
+else
+  echo "$ac_t""no" 1>&6
 
-  for i in $TIDY_SEARCH_DIRS; do
-    if test -f $i/include/tidy/tidy.h; then
-      TIDY_DIR=$i
-      TIDY_INCDIR=$i/include/tidy
-    elif test -f $i/include/tidy.h; then
-      TIDY_DIR=$i
-      TIDY_INCDIR=$i/include
-    fi
-  done
+      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
+echo "configure:102272: checking for libiconv" >&5
+if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102277 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char libiconv(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char libiconv();
 
-  if test -z "$TIDY_DIR"; then
-    { echo "configure: error: Cannot find libtidy" 1>&2; exit 1; }
-  fi
+int main() {
 
-  TIDY_LIBDIR=$TIDY_DIR/$PHP_LIBDIR
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_libiconv) || defined (__stub___libiconv)
+choke me
+#else
+libiconv();
+#endif
+
+; return 0; }
+EOF
+if { (eval echo configure:102300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_libiconv=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_libiconv=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+        
+  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
 
-  if test "$ext_shared" = "yes"; then
-    TIDY_SHARED_LIBADD="-ltidy $TIDY_SHARED_LIBADD"
-    if test -n "$TIDY_LIBDIR"; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBICONV 1
+EOF
+
+        found_iconv=yes
       
-  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_LIBDIR
-  else
-    
-    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+else
+  echo "$ac_t""no" 1>&6
+fi
+
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+fi
+
   fi
 
-    
+        if test "$found_iconv" = "no"; then
+
+    for i in $PHP_ICONV /usr/local /usr; do
+      if test -r $i/include/giconv.h; then
+        cat >> confdefs.h <<\EOF
+#define HAVE_GICONV_H 1
+EOF
+
+        ICONV_DIR=$i
+        iconv_lib_name=giconv
+        break
+      elif test -r $i/include/iconv.h; then
+        ICONV_DIR=$i
+        iconv_lib_name=iconv
+        break
+      fi
+    done
+
+    if test -z "$ICONV_DIR"; then
+      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
+    fi
+  
+    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
+       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
+    then
+      
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="
+        -L$ICONV_DIR/$PHP_LIBDIR
+      "
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
       if test "$ext_shared" = "yes"; then
-        TIDY_SHARED_LIBADD="-L$ai_p $TIDY_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && TIDY_SHARED_LIBADD="$ld_runpath_switch$ai_p $TIDY_SHARED_LIBADD"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
-
       fi
-    
-  fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
 
     fi
-  else
-    
+   ;;
+  esac
 
-  if test -n "$TIDY_LIBDIR"; then
-    
-  if test "$TIDY_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$TIDY_LIBDIR" != "/usr/lib"; then
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$TIDY_LIBDIR" || echo "$TIDY_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $TIDY_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -96341,60 +102443,82 @@ if test "$PHP_TIDY" != "no"; then
   fi
 
 
+      fi
     
   fi
 
-  fi
-  
-  
-  case tidy in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-ltidy $LIBS" 
-   ;;
-  esac
-
-
-
+    ;;
+    esac
+  done
 
-  fi
+  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
+echo "configure:102456: checking for libiconv in -l$iconv_lib_name" >&5
+ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-l$iconv_lib_name  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 102464 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char libiconv();
 
+int main() {
+libiconv()
+; return 0; }
+EOF
+if { (eval echo configure:102475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  if test "$TIDY_INCDIR" != "/usr/include"; then
-    
-  if test -z "$TIDY_INCDIR" || echo "$TIDY_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$TIDY_INCDIR
-  else
-    
-    ep_dir="`echo $TIDY_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
     
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$TIDY_INCDIR\"`"
-  fi
+        found_iconv=yes
+        
+  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
 
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+        cat >> confdefs.h <<\EOF
+#define HAVE_LIBICONV 1
+EOF
 
-  fi
+        
+  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h
 
+        cat >> confdefs.h <<\EOF
+#define ICONV_ALIASED_LIBICONV 1
+EOF
 
+      
   
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_$iconv_lib_name_libiconv
+    
+        
   save_old_LDFLAGS=$LDFLAGS
-  ac_stuff=""
+  ac_stuff="
+          -L$ICONV_DIR/$PHP_LIBDIR
+        "
   
   save_ext_shared=$ext_shared
   ext_shared=yes
@@ -96487,27 +102611,27 @@ if test "$PHP_TIDY" != "no"; then
     esac
   done
 
-  echo $ac_n "checking for tidyOptGetDoc in -ltidy""... $ac_c" 1>&6
-echo "configure:96492: checking for tidyOptGetDoc in -ltidy" >&5
-ac_lib_var=`echo tidy'_'tidyOptGetDoc | sed 'y%./+-%__p_%'`
+  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
+echo "configure:102616: checking for iconv in -l$iconv_lib_name" >&5
+ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-ltidy  $LIBS"
+LIBS="-l$iconv_lib_name  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 96500 "configure"
+#line 102624 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char tidyOptGetDoc();
+char iconv();
 
 int main() {
-tidyOptGetDoc()
+iconv()
 ; return 0; }
 EOF
-if { (eval echo configure:96511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:102635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -96526,386 +102650,749 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
     
-  cat >> confdefs.h <<\EOF
-#define HAVE_TIDYOPTGETDOC 1
-EOF
-
-  
+          found_iconv=yes
+        
   
 else
   echo "$ac_t""no" 1>&6
 
     LDFLAGS=$save_old_LDFLAGS
     ext_shared=$save_ext_shared
-    unset ac_cv_lib_tidy_tidyOptGetDoc
+    unset ac_cv_lib_$iconv_lib_name_iconv
     
   
 fi
 
+      
+  
+fi
+
+    fi
+  fi
+
+  if test "$found_iconv" = "yes"; then
+    
+  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_ICONV 1
+EOF
+
+    if test -n "$ICONV_DIR"; then
+      
 
+  if test "$ext_shared" = "yes"; then
+    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
+    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
+      
+  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+      else
+        
   
-  ext_builddir=ext/tidy
-  ext_srcdir=$abs_srcdir/ext/tidy
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  ac_extra=
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_TIDY_SHARED=no
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
+    
+  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
+  fi
+
     
+      
   
-  case ext/tidy in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in tidy.c; do
+  fi
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $iconv_lib_name in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-l$iconv_lib_name $LIBS" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
 
-    EXT_STATIC="$EXT_STATIC tidy"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_TIDY_SHARED=yes
+  fi
+
+
       
-  case ext/tidy in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  if test "$ICONV_DIR/include" != "/usr/include"; then
+    
+  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$ICONV_DIR/include
+  else
+    
+    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
+  fi
+
+    
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
+  fi
 
+    fi
+    
+else 
+      { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in tidy.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_tidy="$shared_objects_tidy $ac_bdir$ac_obj.lo"
+  fi
+fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+if test "$PHP_XMLRPC" = "yes"; then
+  # Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:102825: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$RANLIB"; then
+  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_RANLIB="ranlib"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+fi
+fi
+RANLIB="$ac_cv_prog_RANLIB"
+if test -n "$RANLIB"; then
+  echo "$ac_t""$RANLIB" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+echo $ac_n "checking for inline""... $ac_c" 1>&6
+echo "configure:102853: checking for inline" >&5
+if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_cv_c_inline=no
+for ac_kw in inline __inline__ __inline; do
+  cat > conftest.$ac_ext <<EOF
+#line 102860 "configure"
+#include "confdefs.h"
+
+int main() {
+} $ac_kw foo() {
+; return 0; }
+EOF
+if { (eval echo configure:102867: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_c_inline=$ac_kw; break
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+fi
+rm -f conftest*
+done
+
+fi
+
+echo "$ac_t""$ac_cv_c_inline" 1>&6
+case "$ac_cv_c_inline" in
+  inline | yes) ;;
+  no) cat >> confdefs.h <<\EOF
+#define inline 
+EOF
+ ;;
+  *)  cat >> confdefs.h <<EOF
+#define inline $ac_cv_c_inline
+EOF
+ ;;
+esac
+
+	
+
+
+
+
+
+cat >> confdefs.h <<\EOF
+#define UNDEF_THREADS_HACK 
+EOF
+
+
+
+echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
+echo "configure:102905: checking for ANSI C header files" >&5
+if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102910 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:102918: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  ac_cv_header_stdc=yes
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 102935 "configure"
+#include "confdefs.h"
+#include <string.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "memchr" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+cat > conftest.$ac_ext <<EOF
+#line 102953 "configure"
+#include "confdefs.h"
+#include <stdlib.h>
 EOF
-  done
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "free" >/dev/null 2>&1; then
+  :
+else
+  rm -rf conftest*
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptidy.so '$ext_builddir'/phptidy.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTIDY, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(PHPTIDY_SHARED_LIBADD)'
-      ;;
-  esac
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+if test "$cross_compiling" = yes; then
+  :
+else
+  cat > conftest.$ac_ext <<EOF
+#line 102974 "configure"
+#include "confdefs.h"
+#include <ctype.h>
+#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int main () { int i; for (i = 0; i < 256; i++)
+if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
+exit (0); }
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptidy.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptidy.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
+EOF
+if { (eval echo configure:102985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  :
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_header_stdc=no
+fi
+rm -fr conftest*
+fi
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phptidy.$suffix: $ext_builddir/phptidy.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phptidy.$suffix \$(phplibdir)
+fi
+fi
 
-$ext_builddir/phptidy.$suffix: \$(shared_objects_tidy) \$(PHPTIDY_SHARED_DEPENDENCIES)
-	$link_cmd
+echo "$ac_t""$ac_cv_header_stdc" 1>&6
+if test $ac_cv_header_stdc = yes; then
+  cat >> confdefs.h <<\EOF
+#define STDC_HEADERS 1
+EOF
+
+fi
 
+for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:103012: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103017 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:103022: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
 EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tidy.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tidy.so '$ext_builddir'/tidy.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TIDY, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tidy) $(TIDY_SHARED_LIBADD)'
-      ;;
-  esac
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tidy.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tidy.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tidy"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/tidy.$suffix: $ext_builddir/tidy.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/tidy.$suffix \$(phplibdir)
 
-$ext_builddir/tidy.$suffix: \$(shared_objects_tidy) \$(TIDY_SHARED_DEPENDENCIES)
-	$link_cmd
 
+echo $ac_n "checking size of char""... $ac_c" 1>&6
+echo "configure:103054: checking size of char" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_char=1
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103062 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(char));
+  exit(0);
+}
 EOF
+if { (eval echo configure:103074: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_char=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_char=0
+fi
+rm -fr conftest*
+fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_TIDY 1
+fi
+echo "$ac_t""$ac_cv_sizeof_char" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_CHAR $ac_cv_sizeof_char
 EOF
 
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_TIDY_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/tidy in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+echo $ac_n "checking size of int""... $ac_c" 1>&6
+echo "configure:103095: checking size of int" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_int=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103103 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(int));
+  exit(0);
+}
+EOF
+if { (eval echo configure:103115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_int=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_int=0
+fi
+rm -fr conftest*
+fi
 
-  old_IFS=$IFS
-  for ac_src in tidy.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+fi
+echo "$ac_t""$ac_cv_sizeof_int" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_INT $ac_cv_sizeof_int
+EOF
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+echo $ac_n "checking size of long""... $ac_c" 1>&6
+echo "configure:103135: checking size of long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long=4
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103143 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long));
+  exit(0);
+}
 EOF
-  done
+if { (eval echo configure:103155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long=0
+fi
+rm -fr conftest*
+fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG $ac_cv_sizeof_long
+EOF
 
-        EXT_STATIC="$EXT_STATIC tidy"
-        ;;
-      *)
-        
-  
-  case ext/tidy in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tidy"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tidy/"; ac_bdir="ext/tidy/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+echo $ac_n "checking size of long long""... $ac_c" 1>&6
+echo "configure:103175: checking size of long long" >&5
+if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test "$cross_compiling" = yes; then
+  ac_cv_sizeof_long_long=8
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103183 "configure"
+#include "confdefs.h"
+#include <stdio.h>
+#include <sys/types.h>
+main()
+{
+  FILE *f=fopen("conftestval", "w");
+  if (!f) exit(1);
+  fprintf(f, "%d\n", sizeof(long long));
+  exit(0);
+}
+EOF
+if { (eval echo configure:103195: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  ac_cv_sizeof_long_long=`cat conftestval`
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  ac_cv_sizeof_long_long=0
+fi
+rm -fr conftest*
+fi
 
+fi
+echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
+cat >> confdefs.h <<EOF
+#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
+EOF
 
-  old_IFS=$IFS
-  for ac_src in tidy.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+echo $ac_n "checking for size_t""... $ac_c" 1>&6
+echo "configure:103215: checking for size_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103220 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_size_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_size_t=no
+fi
+rm -f conftest*
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+fi
+echo "$ac_t""$ac_cv_type_size_t" 1>&6
+if test $ac_cv_type_size_t = no; then
+  cat >> confdefs.h <<\EOF
+#define size_t unsigned
 EOF
-  done
 
+fi
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC tidy"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
+echo "configure:103248: checking whether time.h and sys/time.h may both be included" >&5
+if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103253 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/time.h>
+#include <time.h>
+int main() {
+struct tm *tp;
+; return 0; }
+EOF
+if { (eval echo configure:103262: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  rm -rf conftest*
+  ac_cv_header_time=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  ac_cv_header_time=no
+fi
+rm -f conftest*
+fi
 
+echo "$ac_t""$ac_cv_header_time" 1>&6
+if test $ac_cv_header_time = yes; then
+  cat >> confdefs.h <<\EOF
+#define TIME_WITH_SYS_TIME 1
+EOF
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=tidy
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+fi
 
-  fi
+echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
+echo "configure:103283: checking for uid_t in sys/types.h" >&5
+if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103288 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "uid_t" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_uid_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_uid_t=no
+fi
+rm -f conftest*
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST TIDY_SHARED_LIBADD"
+fi
 
+echo "$ac_t""$ac_cv_type_uid_t" 1>&6
+if test $ac_cv_type_uid_t = no; then
   cat >> confdefs.h <<\EOF
-#define HAVE_TIDY 1
+#define uid_t int
 EOF
 
-fi
-
+  cat >> confdefs.h <<\EOF
+#define gid_t int
+EOF
 
+fi
 
 
-php_enable_tokenizer=yes
 
-echo $ac_n "checking whether to enable tokenizer support""... $ac_c" 1>&6
-echo "configure:96855: checking whether to enable tokenizer support" >&5
-# Check whether --enable-tokenizer or --disable-tokenizer was given.
-if test "${enable_tokenizer+set}" = set; then
-  enableval="$enable_tokenizer"
-  PHP_TOKENIZER=$enableval
-else
-  
-  PHP_TOKENIZER=yes
-  test "$PHP_ENABLE_ALL" && PHP_TOKENIZER=$PHP_ENABLE_ALL
 
-fi
 
 
+# Standard XMLRPC list
+for ac_func in \
+ strtoul strtoull snprintf \
+ strstr strpbrk strerror\
+ memcpy memmove
+do
+echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+echo "configure:103328: checking for $ac_func" >&5
+if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 103333 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char $ac_func();
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_TOKENIZER in
-shared,*)
-  PHP_TOKENIZER=`echo "$PHP_TOKENIZER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_TOKENIZER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+int main() {
 
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+$ac_func();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:103356: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_$ac_func=no"
+fi
+rm -f conftest*
+fi
 
-echo "$ac_t""$ext_output" 1>&6
+if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_func 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
 
 
 
-if test "$PHP_TOKENIZER" != "no"; then
   
-  ext_builddir=ext/tokenizer
-  ext_srcdir=$abs_srcdir/ext/tokenizer
+  ext_builddir=ext/xmlrpc
+  ext_srcdir=$abs_srcdir/ext/xmlrpc
 
-  ac_extra=
+  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_TOKENIZER_SHARED=no
+    PHP_XMLRPC_SHARED=no
     
   
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96920,7 +103407,12 @@ if test "$PHP_TOKENIZER" != "no"; then
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
@@ -96943,18 +103435,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC tokenizer"
+    EXT_STATIC="$EXT_STATIC xmlrpc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_TOKENIZER_SHARED=yes
+      PHP_XMLRPC_SHARED=yes
       
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -96969,14 +103461,19 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_tokenizer="$shared_objects_tokenizer $ac_bdir$ac_obj.lo"
+      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -96999,31 +103496,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phptokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phptokenizer.so '$ext_builddir'/phptokenizer.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPTOKENIZER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(PHPTOKENIZER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phptokenizer.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phptokenizer.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phptokenizer.$suffix: $ext_builddir/phptokenizer.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phptokenizer.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/phptokenizer.$suffix: \$(shared_objects_tokenizer) \$(PHPTOKENIZER_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97036,31 +103533,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/tokenizer.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/tokenizer.so '$ext_builddir'/tokenizer.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(TOKENIZER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_tokenizer) $(TOKENIZER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/tokenizer.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/tokenizer.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_tokenizer"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/tokenizer.$suffix: $ext_builddir/tokenizer.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/tokenizer.$suffix \$(phplibdir)
+\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/tokenizer.$suffix: \$(shared_objects_tokenizer) \$(TOKENIZER_SHARED_DEPENDENCIES)
+$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97068,22 +103565,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_TOKENIZER 1
+#define COMPILE_DL_XMLRPC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_TOKENIZER_SHARED=no
+    PHP_XMLRPC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/tokenizer in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97098,7 +103595,12 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
@@ -97114,413 +103616,22 @@ EOF
         *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC tokenizer"
-        ;;
-      *)
-        
-  
-  case ext/tokenizer in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/tokenizer"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/tokenizer/"; ac_bdir="ext/tokenizer/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in tokenizer.c tokenizer_data.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC tokenizer"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=tokenizer
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-  
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
-
-fi
-
-
-
-php_enable_wddx=no
-
-echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
-echo "configure:97201: checking whether to enable WDDX support" >&5
-# Check whether --enable-wddx or --disable-wddx was given.
-if test "${enable_wddx+set}" = set; then
-  enableval="$enable_wddx"
-  PHP_WDDX=$enableval
-else
-  
-  PHP_WDDX=no
-  test "$PHP_ENABLE_ALL" && PHP_WDDX=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_WDDX in
-shared,*)
-  PHP_WDDX=`echo "$PHP_WDDX"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_WDDX=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test -z "$PHP_LIBXML_DIR"; then
-  
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:97246: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
-  
-  PHP_LIBXML_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-fi
-
-
-php_with_libexpat_dir=no
-
-echo $ac_n "checking libexpat dir for WDDX""... $ac_c" 1>&6
-echo "configure:97270: checking libexpat dir for WDDX" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
-else
-  
-  PHP_LIBEXPAT_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBEXPAT_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_WDDX" != "no"; then
-
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: WDDX extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-    fi
-
-    
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:97298: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
-
-fi
-
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="$WDDX_SHARED_LIBADD -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    ;;
-    esac
-  done
-
-
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:97456: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $WDDX_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 97472 "configure"
-#include "confdefs.h"
-
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
-EOF
-if { (eval echo configure:97483: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
-fi
-
-
-      
-fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-      fi
-      
-      if test "$PHP_XML" = "no"; then
+
+        EXT_STATIC="$EXT_STATIC xmlrpc"
+        ;;
+      *)
         
   
-  case ext/xml in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97535,20 +103646,25 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in compat.c; do
+  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
+          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
+          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
+          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
+          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
+          libxmlrpc/xml_to_soap.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -97558,46 +103674,64 @@ EOF
   done
 
 
-        
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
+  fi
   
-    BUILD_DIR="$BUILD_DIR ext/xml"
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
 
-      fi
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=xmlrpc
     
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-        if test "$PHP_LIBEXPAT_DIR" != "no"; then
-    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
-      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
-        EXPAT_DIR=$i
+  
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"
+  
+
+  XMLRPC_MODULE_TYPE=builtin
+
+elif test "$PHP_XMLRPC" != "no"; then
+
+  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
+    XMLRPC_DIR=$PHP_XMLRPC/include
+  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
+    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
+  else
+    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
+echo "configure:103710: checking for XMLRPC-EPI in default path" >&5
+    for i in /usr/local /usr; do
+      if test -r $i/include/xmlrpc.h; then
+        XMLRPC_DIR=$i/include
+        echo "$ac_t""found in $i" 1>&6
         break
       fi
     done
+  fi
 
-    if test -z "$EXPAT_DIR"; then
-      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
-    fi
+  if test -z "$XMLRPC_DIR"; then
+    echo "$ac_t""not found" 1>&6
+    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
+  fi
 
+  
+  if test "$XMLRPC_DIR" != "/usr/include"; then
     
-  if test "$EXPAT_DIR/include" != "/usr/include"; then
-    
-  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/include
+  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR
   else
     
-    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
   fi
 
     
@@ -97618,28 +103752,28 @@ else
 
   fi
 
-    
+  
 
   if test "$ext_shared" = "yes"; then
-    WDDX_SHARED_LIBADD="-lexpat $WDDX_SHARED_LIBADD"
-    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
+    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
       
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        WDDX_SHARED_LIBADD="-L$ai_p $WDDX_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && WDDX_SHARED_LIBADD="$ld_runpath_switch$ai_p $WDDX_SHARED_LIBADD"
+        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
       else
         
   
@@ -97665,18 +103799,18 @@ else
   else
     
 
-  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
+  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
     
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
+  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -97702,10 +103836,10 @@ else
   fi
   
   
-  case expat in
+  case xmlrpc in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lexpat $LIBS" 
+      LIBS="-lxmlrpc $LIBS" 
    ;;
   esac
 
@@ -97715,30 +103849,20 @@ else
   fi
 
 
-    cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
-EOF
-
-  fi
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_WDDX 1
-EOF
-
   
-  ext_builddir=ext/wddx
-  ext_srcdir=$abs_srcdir/ext/wddx
+  ext_builddir=ext/xmlrpc
+  ext_srcdir=$abs_srcdir/ext/xmlrpc
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_WDDX_SHARED=no
+    PHP_XMLRPC_SHARED=no
     
   
-  case ext/wddx in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97753,7 +103877,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -97776,18 +103900,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC wddx"
+    EXT_STATIC="$EXT_STATIC xmlrpc"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_WDDX_SHARED=yes
+      PHP_XMLRPC_SHARED=yes
       
-  case ext/wddx in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97802,14 +103926,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_wddx="$shared_objects_wddx $ac_bdir$ac_obj.lo"
+      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -97832,31 +103956,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpwddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpwddx.so '$ext_builddir'/phpwddx.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPWDDX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(PHPWDDX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpwddx.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpwddx.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpwddx.$suffix: $ext_builddir/phpwddx.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpwddx.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/phpwddx.$suffix: \$(shared_objects_wddx) \$(PHPWDDX_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97869,31 +103993,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/wddx.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/wddx.so '$ext_builddir'/wddx.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(WDDX, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_wddx) $(WDDX_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/wddx.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/wddx.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_wddx"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/wddx.$suffix: $ext_builddir/wddx.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/wddx.$suffix \$(phplibdir)
+\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
 
-$ext_builddir/wddx.$suffix: \$(shared_objects_wddx) \$(WDDX_SHARED_DEPENDENCIES)
+$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -97901,22 +104025,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_WDDX 1
+#define COMPILE_DL_XMLRPC 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_WDDX_SHARED=no
+    PHP_XMLRPC_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/wddx in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97931,7 +104055,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -97954,15 +104078,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC wddx"
+        EXT_STATIC="$EXT_STATIC xmlrpc"
         ;;
       *)
         
   
-  case ext/wddx in
+  case ext/xmlrpc in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/wddx"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/wddx/"; ac_bdir="ext/wddx/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -97977,7 +104101,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in wddx.c; do
+  for ac_src in xmlrpc-epi-php.c; do
   
       IFS=.
       set $ac_src
@@ -98002,7 +104126,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC wddx"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
   fi
   
   
@@ -98011,50 +104135,29 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=wddx
+    PHP_PECL_EXTENSION=xmlrpc
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  am_i_shared=$PHP_WDDX_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension wddx to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build wddx shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension wddx, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
-
+  XMLRPC_MODULE_TYPE=external
 fi
 
 
 
-php_enable_xml=yes
+php_enable_xmlwriter=yes
 
-echo $ac_n "checking whether to enable XML support""... $ac_c" 1>&6
-echo "configure:98050: checking whether to enable XML support" >&5
-# Check whether --enable-xml or --disable-xml was given.
-if test "${enable_xml+set}" = set; then
-  enableval="$enable_xml"
-  PHP_XML=$enableval
+echo $ac_n "checking whether to enable XMLWriter support""... $ac_c" 1>&6
+echo "configure:104153: checking whether to enable XMLWriter support" >&5
+# Check whether --enable-xmlwriter or --disable-xmlwriter was given.
+if test "${enable_xmlwriter+set}" = set; then
+  enableval="$enable_xmlwriter"
+  PHP_XMLWRITER=$enableval
 else
   
-  PHP_XML=yes
-  test "$PHP_ENABLE_ALL" && PHP_XML=$PHP_ENABLE_ALL
+  PHP_XMLWRITER=yes
+  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL
 
 fi
 
@@ -98062,12 +104165,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XML in
+case $PHP_XMLWRITER in
 shared,*)
-  PHP_XML=`echo "$PHP_XML"|$SED 's/^shared,//'`
+  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XML=yes
+  PHP_XMLWRITER=yes
   ;;
 no)
   ext_output=no
@@ -98091,7 +104194,7 @@ if test -z "$PHP_LIBXML_DIR"; then
 php_with_libxml_dir=no
 
 echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:98095: checking libxml2 install dir" >&5
+echo "configure:104198: checking libxml2 install dir" >&5
 # Check whether --with-libxml-dir or --without-libxml-dir was given.
 if test "${with_libxml_dir+set}" = set; then
   withval="$with_libxml_dir"
@@ -98111,40 +104214,15 @@ echo "$ac_t""$ext_output" 1>&6
 
 fi
 
+if test "$PHP_XMLWRITER" != "no"; then
 
-php_with_libexpat_dir=no
+  if test "$PHP_LIBXML" = "no"; then
+    { echo "configure: error: XMLWriter extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+  fi
 
-echo $ac_n "checking libexpat install dir""... $ac_c" 1>&6
-echo "configure:98119: checking libexpat install dir" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
-else
-  
-  PHP_LIBEXPAT_DIR=no
   
-
-fi
-
-
-ext_output=$PHP_LIBEXPAT_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_XML" != "no"; then
-
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
-
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: XML extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-    fi
-
-    
 echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:98148: checking for xml2-config path" >&5
+echo "configure:104226: checking for xml2-config path" >&5
 if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -98176,7 +104254,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -pthread"
+        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
       else
         
   
@@ -98198,7 +104276,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="$XML_SHARED_LIBADD -l$ac_ii" 
+        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -98233,8 +104311,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
+        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
       else
         
   
@@ -98302,7 +104380,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
 
             echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:98306: checking whether libxml build works" >&5
+echo "configure:104384: checking whether libxml build works" >&5
 if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -98310,7 +104388,7 @@ else
         
   old_LIBS=$LIBS
   LIBS="
-          $XML_SHARED_LIBADD
+          $XMLWRITER_SHARED_LIBADD
          $LIBS"
   if test "$cross_compiling" = yes; then
   
@@ -98318,7 +104396,7 @@ else
   
 else
   cat > conftest.$ac_ext <<EOF
-#line 98322 "configure"
+#line 104400 "configure"
 #include "confdefs.h"
 
     
@@ -98329,7 +104407,7 @@ else
     }
   
 EOF
-if { (eval echo configure:98333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:104411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     LIBS=$old_LIBS
@@ -98364,197 +104442,24 @@ EOF
 
       fi
       
-      xml_extra_sources="compat.c"
-      
-  am_i_shared=$PHP_XML_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xml to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xml shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xml, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
-    
-  fi
-
-  fi
-  
-        if test "$PHP_LIBEXPAT_DIR" != "no"; then
-    for i in $PHP_XML $PHP_LIBEXPAT_DIR /usr /usr/local; do
-      if test -f "$i/$PHP_LIBDIR/libexpat.a" || test -f "$i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME"; then
-        EXPAT_DIR=$i
-        break
-      fi
-    done
-
-    if test -z "$EXPAT_DIR"; then
-      { echo "configure: error: not found. Please reinstall the expat distribution." 1>&2; exit 1; }
-    fi
-
-    
-  if test "$EXPAT_DIR/include" != "/usr/include"; then
-    
-  if test -z "$EXPAT_DIR/include" || echo "$EXPAT_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/include
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-    
-
-  if test "$ext_shared" = "yes"; then
-    XML_SHARED_LIBADD="-lexpat $XML_SHARED_LIBADD"
-    if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
-      
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        XML_SHARED_LIBADD="-L$ai_p $XML_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XML_SHARED_LIBADD="$ld_runpath_switch$ai_p $XML_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    fi
-  else
-    
-
-  if test -n "$EXPAT_DIR/$PHP_LIBDIR"; then
-    
-  if test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EXPAT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$EXPAT_DIR/$PHP_LIBDIR" || echo "$EXPAT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$EXPAT_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $EXPAT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$EXPAT_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case expat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lexpat $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
     cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
+#define HAVE_XMLWRITER 1
 EOF
 
-  fi
-
-  
-  ext_builddir=ext/xml
-  ext_srcdir=$abs_srcdir/ext/xml
+    
+  ext_builddir=ext/xmlwriter
+  ext_srcdir=$abs_srcdir/ext/xmlwriter
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XML_SHARED=no
+    PHP_XMLWRITER_SHARED=no
     
   
-  case ext/xml in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98569,7 +104474,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -98592,18 +104497,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC xml"
+    EXT_STATIC="$EXT_STATIC xmlwriter"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XML_SHARED=yes
+      PHP_XMLWRITER_SHARED=yes
       
-  case ext/xml in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98618,14 +104523,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_xml="$shared_objects_xml $ac_bdir$ac_obj.lo"
+      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -98648,31 +104553,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxml.so '$ext_builddir'/phpxml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLWRITER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(PHPXML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxml.$suffix: $ext_builddir/phpxml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxml.$suffix \$(phplibdir)
+\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)
 
-$ext_builddir/phpxml.$suffix: \$(shared_objects_xml) \$(PHPXML_SHARED_DEPENDENCIES)
+$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98685,31 +104590,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xml.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xml.so '$ext_builddir'/xml.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XML, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLWRITER, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xml) $(XML_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xml.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xml.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xml"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/xml.$suffix: $ext_builddir/xml.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xml.$suffix \$(phplibdir)
+\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)
 
-$ext_builddir/xml.$suffix: \$(shared_objects_xml) \$(XML_SHARED_DEPENDENCIES)
+$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -98717,22 +104622,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_XML 1
+#define COMPILE_DL_XMLWRITER 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XML_SHARED=no
+    PHP_XMLWRITER_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/xml in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98747,7 +104652,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -98770,15 +104675,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC xml"
+        EXT_STATIC="$EXT_STATIC xmlwriter"
         ;;
       *)
         
   
-  case ext/xml in
+  case ext/xmlwriter in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -98793,7 +104698,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in xml.c $xml_extra_sources; do
+  for ac_src in php_xmlwriter.c; do
   
       IFS=.
       set $ac_src
@@ -98818,7 +104723,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xml"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
   fi
   
   
@@ -98827,53 +104732,40 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xml
+    PHP_PECL_EXTENSION=xmlwriter
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XML_SHARED_LIBADD"
+    
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"
 
   
+    else
+      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
+    fi
+else 
+    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
   
-    for header_file in ext/xml/; do
-      
-  
-  unique=`echo $header_file|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INSTALLHEADERS$unique=set"
-    
-        INSTALL_HEADERS="$INSTALL_HEADERS $header_file"
-      
   fi
 
-    done 
-  
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_XML 1
-EOF
-
 fi
 
 
 
-php_enable_xmlreader=yes
+php_with_xsl=no
 
-echo $ac_n "checking whether to enable XMLReader support""... $ac_c" 1>&6
-echo "configure:98869: checking whether to enable XMLReader support" >&5
-# Check whether --enable-xmlreader or --disable-xmlreader was given.
-if test "${enable_xmlreader+set}" = set; then
-  enableval="$enable_xmlreader"
-  PHP_XMLREADER=$enableval
+echo $ac_n "checking for XSL support""... $ac_c" 1>&6
+echo "configure:104761: checking for XSL support" >&5
+# Check whether --with-xsl or --without-xsl was given.
+if test "${with_xsl+set}" = set; then
+  withval="$with_xsl"
+  PHP_XSL=$withval
 else
   
-  PHP_XMLREADER=yes
-  test "$PHP_ENABLE_ALL" && PHP_XMLREADER=$PHP_ENABLE_ALL
+  PHP_XSL=no
+  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL
 
 fi
 
@@ -98881,12 +104773,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XMLREADER in
+case $PHP_XSL in
 shared,*)
-  PHP_XMLREADER=`echo "$PHP_XMLREADER"|$SED 's/^shared,//'`
+  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XMLREADER=yes
+  PHP_XSL=yes
   ;;
 no)
   ext_output=no
@@ -98905,72 +104797,41 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
-  
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:98914: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
-  
-  PHP_LIBXML_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-fi
-
-if test "$PHP_XMLREADER" != "no"; then
+if test "$PHP_XSL" != "no"; then
 
   if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XMLReader extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
+    { echo "configure: error: XSL extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
   fi
-
-  
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:98942: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
   
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
+  if test "$PHP_DOM" = "no"; then
+    { echo "configure: error: XSL extension requires DOM extension, add --enable-dom" 1>&2; exit 1; }
+  fi
+
+  for i in $PHP_XSL /usr/local /usr; do
+    if test -x "$i/bin/xslt-config"; then
+      XSLT_CONFIG=$i/bin/xslt-config
       break
     fi
   done
 
-fi
-
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
+  if test -z "$XSLT_CONFIG"; then
+    { echo "configure: error: xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" 1>&2; exit 1; }
+  else
+    libxslt_full_version=`$XSLT_CONFIG --version`
     ac_IFS=$IFS
     IFS="."
-    set $libxml_full_version
+    set $libxslt_full_version
     IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
+    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
+    if test "$LIBXSLT_VERSION" -ge "1001000"; then
+      XSL_LIBS=`$XSLT_CONFIG --libs`
+      XSL_INCS=`$XSLT_CONFIG --cflags`
       
-  for ac_i in $LIBXML_LIBS; do
+  for ac_i in $XSL_LIBS; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -pthread"
+        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
       else
         
   
@@ -98992,7 +104853,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="$XMLREADER_SHARED_LIBADD -l$ac_ii" 
+        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii" 
     else
       
   
@@ -99027,8 +104888,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        XMLREADER_SHARED_LIBADD="-L$ai_p $XMLREADER_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLREADER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLREADER_SHARED_LIBADD"
+        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
       else
         
   
@@ -99055,7 +104916,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   done
 
       
-  for ac_i in $LIBXML_INCS; do
+  for ac_i in $XSL_INCS; do
     case $ac_i in
     -I*)
       ac_ii=`echo $ac_i|cut -c 3-`
@@ -99094,88 +104955,177 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     esac
   done
 
+      
+      echo $ac_n "checking for EXSLT support""... $ac_c" 1>&6
+echo "configure:104961: checking for EXSLT support" >&5
+      for i in $PHP_XSL /usr/local /usr; do
+        if test -r "$i/include/libexslt/exslt.h"; then
+          PHP_XSL_EXSL_DIR=$i
+          break
+        fi
+      done
+      if test -z "$PHP_XSL_EXSL_DIR"; then
+        echo "$ac_t""not found" 1>&6
+      else 
+        echo "$ac_t""found" 1>&6
+        
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:99100: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
+  if test "$ext_shared" = "yes"; then
+    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
+    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+      
+  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
+      else
         
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLREADER_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
   
-    LIBS=$old_LIBS
   
-else
-  cat > conftest.$ac_ext <<EOF
-#line 99116 "configure"
-#include "confdefs.h"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
+
+      fi
     
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+    
+  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
   
-EOF
-if { (eval echo configure:99127: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
   
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-    LIBS=$old_LIBS
+  fi
+
+
     
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
+  fi
+
+  fi
   
-fi
-rm -fr conftest*
-fi
+  
+  case exslt in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lexslt $LIBS" 
+   ;;
+  esac
 
 
-      
-fi
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
+
+  fi
+
+
+        
+  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then
+    
+  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_XSL_EXSL_DIR/include
+  else
+    
+    ep_dir="`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
         cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
+#define HAVE_XSL_EXSLT 1
 EOF
 
       fi
-      
-    cat >> confdefs.h <<\EOF
-#define HAVE_XMLREADER 1
+    else
+      { echo "configure: error: libxslt version 1.1.0 or greater required." 1>&2; exit 1; }
+    fi
+    
+  
+  fi
+  
+  cat >> confdefs.h <<\EOF
+#define HAVE_XSL 1
 EOF
 
-    
-  ext_builddir=ext/xmlreader
-  ext_srcdir=$abs_srcdir/ext/xmlreader
+  
+  ext_builddir=ext/xsl
+  ext_srcdir=$abs_srcdir/ext/xsl
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLREADER_SHARED=no
+    PHP_XSL_SHARED=no
     
   
-  case ext/xmlreader in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -99190,7 +105140,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -99213,18 +105163,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC xmlreader"
+    EXT_STATIC="$EXT_STATIC xsl"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLREADER_SHARED=yes
+      PHP_XSL_SHARED=yes
       
-  case ext/xmlreader in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -99239,14 +105189,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_xmlreader="$shared_objects_xmlreader $ac_bdir$ac_obj.lo"
+      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -99269,31 +105219,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlreader.so '$ext_builddir'/phpxmlreader.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLREADER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXSL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(PHPXMLREADER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlreader.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlreader.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlreader.$suffix: $ext_builddir/phpxmlreader.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlreader.$suffix \$(phplibdir)
+\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)
 
-$ext_builddir/phpxmlreader.$suffix: \$(shared_objects_xmlreader) \$(PHPXMLREADER_SHARED_DEPENDENCIES)
+$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -99306,31 +105256,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlreader.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlreader.so '$ext_builddir'/xmlreader.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLREADER, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XSL, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlreader) $(XMLREADER_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlreader.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlreader.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlreader"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlreader.$suffix: $ext_builddir/xmlreader.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlreader.$suffix \$(phplibdir)
+\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)
 
-$ext_builddir/xmlreader.$suffix: \$(shared_objects_xmlreader) \$(XMLREADER_SHARED_DEPENDENCIES)
+$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -99338,22 +105288,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLREADER 1
+#define COMPILE_DL_XSL 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLREADER_SHARED=no
+    PHP_XSL_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/xmlreader in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -99368,7 +105318,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -99391,15 +105341,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC xmlreader"
+        EXT_STATIC="$EXT_STATIC xsl"
         ;;
       *)
         
   
-  case ext/xmlreader in
+  case ext/xsl in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlreader"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlreader/"; ac_bdir="ext/xmlreader/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -99414,7 +105364,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_xmlreader.c; do
+  for ac_src in php_xsl.c xsltprocessor.c; do
   
       IFS=.
       set $ac_src
@@ -99439,7 +105389,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlreader"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
   fi
   
   
@@ -99448,72 +105398,50 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlreader
+    PHP_PECL_EXTENSION=xsl
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
-    
-  am_i_shared=$PHP_XMLREADER_SHARED
-  is_it_shared=$PHP_DOM_SHARED
-  is_it_enabled=$PHP_DOM
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"
+
+  
+  am_i_shared=$PHP_XSL_SHARED
+  is_it_shared=$PHP_LIBXML_SHARED
+  is_it_enabled=$PHP_LIBXML
   if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
     { echo "configure: error: 
-You've configured extension xmlreader to build statically, but it
-depends on extension dom, which you've configured to build shared.
-You either need to build xmlreader shared or build dom statically for the
+You've configured extension xsl to build statically, but it
+depends on extension libxml, which you've configured to build shared.
+You either need to build xsl shared or build libxml statically for the
 build to be successful.
 " 1>&2; exit 1; }
   fi
-  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
     { echo "configure: error: 
-You've configured extension xmlreader, which depends on extension dom,
-but you've either not enabled dom, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLREADER_SHARED_LIBADD"
-
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
+You've configured extension xsl, which depends on extension libxml,
+but you've either not enabled libxml, or have disabled it.
+" 1>&2; exit 1; }
   fi
-
+  
 fi
 
 
-# Local macros for automake & autoconf
-
-
-
-
-
-
-
-
-
-
 
+php_enable_zip=no
 
-
-php_with_xmlrpc=no
-
-echo $ac_n "checking for XMLRPC-EPI support""... $ac_c" 1>&6
-echo "configure:99509: checking for XMLRPC-EPI support" >&5
-# Check whether --with-xmlrpc or --without-xmlrpc was given.
-if test "${with_xmlrpc+set}" = set; then
-  withval="$with_xmlrpc"
-  PHP_XMLRPC=$withval
+echo $ac_n "checking for zip archive read/writesupport""... $ac_c" 1>&6
+echo "configure:105437: checking for zip archive read/writesupport" >&5
+# Check whether --enable-zip or --disable-zip was given.
+if test "${enable_zip+set}" = set; then
+  enableval="$enable_zip"
+  PHP_ZIP=$enableval
 else
   
-  PHP_XMLRPC=no
-  test "$PHP_ENABLE_ALL" && PHP_XMLRPC=$PHP_ENABLE_ALL
+  PHP_ZIP=no
+  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL
 
 fi
 
@@ -99521,12 +105449,12 @@ fi
 
 ext_output="yes, shared"
 ext_shared=yes
-case $PHP_XMLRPC in
+case $PHP_ZIP in
 shared,*)
-  PHP_XMLRPC=`echo "$PHP_XMLRPC"|$SED 's/^shared,//'`
+  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
   ;;
 shared)
-  PHP_XMLRPC=yes
+  PHP_ZIP=yes
   ;;
 no)
   ext_output=no
@@ -99545,25 +105473,25 @@ echo "$ac_t""$ext_output" 1>&6
 
 
 
-if test -z "$PHP_LIBXML_DIR"; then
+if test -z "$PHP_ZLIB_DIR"; then
   
-php_with_libxml_dir=no
+php_with_zlib_dir=no
 
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:99554: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
+echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
+echo "configure:105482: checking for the location of libz" >&5
+# Check whether --with-zlib-dir or --without-zlib-dir was given.
+if test "${with_zlib_dir+set}" = set; then
+  withval="$with_zlib_dir"
+  PHP_ZLIB_DIR=$withval
 else
   
-  PHP_LIBXML_DIR=no
+  PHP_ZLIB_DIR=no
   
 
 fi
 
 
-ext_output=$PHP_LIBXML_DIR
+ext_output=$PHP_ZLIB_DIR
 echo "$ac_t""$ext_output" 1>&6
 
 
@@ -99571,315 +105499,501 @@ echo "$ac_t""$ext_output" 1>&6
 fi
 
 
-php_with_libexpat_dir=no
+php_with_pcre_dir=no
 
-echo $ac_n "checking libexpat dir for XMLRPC-EPI""... $ac_c" 1>&6
-echo "configure:99578: checking libexpat dir for XMLRPC-EPI" >&5
-# Check whether --with-libexpat-dir or --without-libexpat-dir was given.
-if test "${with_libexpat_dir+set}" = set; then
-  withval="$with_libexpat_dir"
-  PHP_LIBEXPAT_DIR=$withval
+echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
+echo "configure:105506: checking pcre install prefix" >&5
+# Check whether --with-pcre-dir or --without-pcre-dir was given.
+if test "${with_pcre_dir+set}" = set; then
+  withval="$with_pcre_dir"
+  PHP_PCRE_DIR=$withval
 else
   
-  PHP_LIBEXPAT_DIR=no
+  PHP_PCRE_DIR=no
   
 
 fi
 
 
-ext_output=$PHP_LIBEXPAT_DIR
+ext_output=$PHP_PCRE_DIR
 echo "$ac_t""$ext_output" 1>&6
 
 
 
 
+if test "$PHP_ZIP" != "no"; then
 
-php_with_iconv_dir=no
-
-echo $ac_n "checking iconv dir for XMLRPC-EPI""... $ac_c" 1>&6
-echo "configure:99601: checking iconv dir for XMLRPC-EPI" >&5
-# Check whether --with-iconv-dir or --without-iconv-dir was given.
-if test "${with_iconv_dir+set}" = set; then
-  withval="$with_iconv_dir"
-  PHP_ICONV_DIR=$withval
-else
-  
-  PHP_ICONV_DIR=no
-  
-
-fi
-
-
-ext_output=$PHP_ICONV_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
+  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
+    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
+      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
+      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
+    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
+      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
+      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
+    else
+      { echo "configure: error: Can not find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
+    fi
+  else
+    for i in /usr/local /usr; do
+      if test -f "$i/include/zlib/zlib.h"; then
+        PHP_ZLIB_DIR="$i"
+        PHP_ZLIB_INCDIR="$i/include/zlib"
+      elif test -f "$i/include/zlib.h"; then
+        PHP_ZLIB_DIR="$i"
+        PHP_ZLIB_INCDIR="$i/include"
+      fi
+    done
+  fi
 
+    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
+echo "configure:105550: checking for the location of zlib" >&5
+  if test "$PHP_ZLIB_DIR" = "no"; then
+    { echo "configure: error: zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" 1>&2; exit 1; }
+  else
+    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
+    
 
-if test "$PHP_XMLRPC" != "no"; then
+  if test "$ext_shared" = "yes"; then
+    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
+    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+      
+  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
+      else
+        
   
-  am_i_shared=$PHP_XMLRPC_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xmlrpc to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xmlrpc shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xmlrpc, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLRPC_SHARED_LIBADD"
-
-  cat >> confdefs.h <<\EOF
-#define HAVE_XMLRPC 1
-EOF
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-        if test "$PHP_LIBEXPAT_DIR" = "no"; then
+      fi
+    
+  fi
 
-    if test "$PHP_LIBXML" = "no"; then
-      { echo "configure: error: XML-RPC extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
     fi
-
+  else
     
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:99657: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
-
-fi
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
+  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+    
+  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
 
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
+    
       
-  for ac_i in $LIBXML_LIBS; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -pthread"
-      else
-        
   
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
+
+    
+  fi
+
+  fi
   
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="$XMLRPC_SHARED_LIBADD -l$ac_ii" 
-    else
-      
   
-  case $ac_ii in
+  case z in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="$LIBS -l$ac_ii" 
+      LIBS="-lz $LIBS" 
    ;;
   esac
 
 
-    fi
-   ;;
-  esac
 
 
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+  fi
+
+
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then
+    
+  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$PHP_ZLIB_INCDIR
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_INCDIR\"`"
   fi
 
     
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
+    eval "INCLUDEPATH$unique=set"
     
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+  fi
+
+    old_CPPFLAGS=$CPPFLAGS
+  CPPFLAGS=$INCLUDES
+  cat > conftest.$ac_ext <<EOF
+#line 105688 "configure"
+#include "confdefs.h"
+
+#include <main/php_config.h>
+#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
+yes
+#endif
+  
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
+  
+    PHP_PCRE_REGEX=yes
+  
+else
+  rm -rf conftest*
+  
+    cat > conftest.$ac_ext <<EOF
+#line 105707 "configure"
+#include "confdefs.h"
+
+#include <main/php_config.h>
+#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
+yes
+#endif
+    
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "yes" >/dev/null 2>&1; then
+  rm -rf conftest*
+  
+      PHP_PCRE_REGEX=pecl
+    
+else
+  rm -rf conftest*
+  
+      PHP_PCRE_REGEX=no
+    
+fi
+rm -f conftest*
+
+  
+fi
+rm -f conftest*
+
+  CPPFLAGS=$old_CPPFLAGS
+
+  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
+                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
+                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
+                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
+                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
+                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
+                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
+                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
+                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
+                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
+                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
+                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
+                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
+                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
+                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
+                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
+                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
+                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
+                         lib/zip_error_clear.c lib/zip_file_error_clear.c"
+
+  cat >> confdefs.h <<\EOF
+#define HAVE_ZIP 1
+EOF
+
+  
+  ext_builddir=ext/zip
+  ext_srcdir=$abs_srcdir/ext/zip
+
+  ac_extra=
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
+    PHP_ZIP_SHARED=no
+    
+  
+  case ext/zip in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+
+    EXT_STATIC="$EXT_STATIC zip"
+    if test "$ext_shared" != "nocli"; then
+      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+    fi
+  else
+    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
+      PHP_ZIP_SHARED=yes
+      
+  case ext/zip in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
+  
+  
+
+  b_c_pre=$shared_c_pre
+  b_cxx_pre=$shared_cxx_pre
+  b_c_meta=$shared_c_meta
+  b_cxx_meta=$shared_cxx_meta
+  b_c_post=$shared_c_post
+  b_cxx_post=$shared_cxx_post
+  b_lo=$shared_lo
+
+
+  old_IFS=$IFS
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
+      
+      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"
+
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
+EOF
+  done
+
+      case $host_alias in
+        *netware*)
+          
+  install_modules="install-modules"
+
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZIP, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
+      ;;
+  esac
+
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
+  else
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
   fi
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
+
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)
+
+$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
+	$link_cmd
 
+EOF
 
-      fi
-    
-  fi
+          ;;
+        *)
+          
+  install_modules="install-modules"
 
-    ;;
-    esac
-  done
+  case $host_alias in
+    *aix*)
+      suffix=so
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
+      ;;
+    *netware*)
+      suffix=nlm
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZIP, 3)_SHARED_LIBADD)'
+      ;;
+    *)
+      suffix=la
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
+      ;;
+  esac
 
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test "x" = "xyes"; then
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
   else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
   fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
 
-    ;;
-    esac
-  done
+  cat >>Makefile.objects<<EOF
+\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)
 
+$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
+	$link_cmd
 
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:99815: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLRPC_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 99831 "configure"
-#include "confdefs.h"
+EOF
 
-    
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
+          ;;
+      esac
+      cat >> confdefs.h <<EOF
+#define COMPILE_DL_ZIP 1
 EOF
-if { (eval echo configure:99842: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
+
+    fi
+  fi
+
+  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
+    PHP_ZIP_SHARED=no
+    case "$PHP_SAPI" in
+      cgi|embed)
         
   
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
+  case ext/zip in
+  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  esac
   
-    LIBS=$old_LIBS
-    
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
   
-fi
-rm -fr conftest*
-fi
+
+  b_c_pre=$php_c_pre
+  b_cxx_pre=$php_cxx_pre
+  b_c_meta=$php_c_meta
+  b_cxx_meta=$php_cxx_meta
+  b_c_post=$php_c_post
+  b_cxx_post=$php_cxx_post
+  b_lo=$php_lo
 
 
+  old_IFS=$IFS
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  
+      IFS=.
+      set $ac_src
+      ac_obj=$1
+      IFS=$old_IFS
       
-fi
+      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
+      case $ac_src in
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+      esac
+
+    cat >>Makefile.objects<<EOF
+$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
+	$ac_comp
 EOF
+  done
 
-      fi
-      
-      if test "$PHP_XML" = "no"; then
+
+        EXT_STATIC="$EXT_STATIC zip"
+        ;;
+      *)
         
   
-  case ext/xml in
+  case ext/zip in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xml"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xml/"; ac_bdir="ext/xml/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -99894,20 +106008,20 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in compat.c; do
+  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
 
       case $ac_src in
-        *.c) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre  $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre  $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
+        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
+        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
       esac
 
     cat >>Makefile.objects<<EOF
@@ -99917,449 +106031,554 @@ EOF
   done
 
 
-        
+        ;;
+    esac
+    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+  fi
   
-    BUILD_DIR="$BUILD_DIR ext/xml"
+  
+    BUILD_DIR="$BUILD_DIR $ext_builddir"
   
 
-      fi
-    
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-      { echo "configure: error: xml2-config not found. Use --with-libxml-dir=<DIR>" 1>&2; exit 1; }
+
+  if test "$ext_builddir" = "."; then
+    PHP_PECL_EXTENSION=zip
     
+  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
+
   fi
 
-  else
-    testval=no
-    for i in $PHP_LIBEXPAT_DIR $XMLRPC_DIR /usr/local /usr; do
-      if test -f $i/$PHP_LIBDIR/libexpat.a || test -f $i/$PHP_LIBDIR/libexpat.$SHLIB_SUFFIX_NAME; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBEXPAT 1
-EOF
+  
+  
+    $php_shtool mkdir -p $ext_builddir/lib
+  
 
-        
+  
+  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"
 
-  if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-lexpat $XMLRPC_SHARED_LIBADD"
-    if test -n "$i/$PHP_LIBDIR"; then
-      
-  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$i/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
-  fi
 
     
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
+  src=$ext_srcdir/Makefile.frag
+  ac_srcdir=$ext_srcdir
+  ac_builddir=$ext_builddir
+  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+
+fi
+
+
+
+php_enable_http=no
+
+echo $ac_n "checking whether to enable extended HTTP support""... $ac_c" 1>&6
+echo "configure:106074: checking whether to enable extended HTTP support" >&5
+# Check whether --enable-http or --disable-http was given.
+if test "${enable_http+set}" = set; then
+  enableval="$enable_http"
+  PHP_HTTP=$enableval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_HTTP=no
+  test "$PHP_ENABLE_ALL" && PHP_HTTP=$PHP_ENABLE_ALL
+
+fi
+
+
+
+ext_output="yes, shared"
+ext_shared=yes
+case $PHP_HTTP in
+shared,*)
+  PHP_HTTP=`echo "$PHP_HTTP"|$SED 's/^shared,//'`
+  ;;
+shared)
+  PHP_HTTP=yes
+  ;;
+no)
+  ext_output=no
+  ext_shared=no
+  ;;
+*)
+  ext_output=yes
+  ext_shared=no
+  ;;
+esac
+
+
+
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_shared_deps=$PHP_HTTP
+
+echo $ac_n "checking whether to depend on extensions which have been built shared""... $ac_c" 1>&6
+echo "configure:106117: checking whether to depend on extensions which have been built shared" >&5
+# Check whether --with-http-shared-deps or --without-http-shared-deps was given.
+if test "${with_http_shared_deps+set}" = set; then
+  withval="$with_http_shared_deps"
+  PHP_HTTP_SHARED_DEPS=$withval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_HTTP_SHARED_DEPS=$PHP_HTTP
   
-  fi
 
+fi
 
-      fi
-    
-  fi
 
-    fi
-  else
-    
+ext_output=$PHP_HTTP_SHARED_DEPS
+echo "$ac_t""$ext_output" 1>&6
 
-  if test -n "$i/$PHP_LIBDIR"; then
-    
-  if test "$i/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$i/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$i/$PHP_LIBDIR" || echo "$i/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$i/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $i/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/$PHP_LIBDIR\"`"
-  fi
 
-    
-      
+
+
+php_with_http_curl_requests=$PHP_HTTP
+
+echo $ac_n "checking whether to enable cURL HTTP request support""... $ac_c" 1>&6
+echo "configure:106139: checking whether to enable cURL HTTP request support" >&5
+# Check whether --with-http-curl-requests or --without-http-curl-requests was given.
+if test "${with_http_curl_requests+set}" = set; then
+  withval="$with_http_curl_requests"
+  PHP_HTTP_CURL_REQUESTS=$withval
+else
   
+  PHP_HTTP_CURL_REQUESTS=$PHP_HTTP
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+
+fi
+
+
+ext_output=$PHP_HTTP_CURL_REQUESTS
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_curl_libevent=$PHP_HTTP_CURL_REQUESTS
+
+echo $ac_n "checking whether to enable libevent support fur cURL""... $ac_c" 1>&6
+echo "configure:106161: checking whether to enable libevent support fur cURL" >&5
+# Check whether --with-http-curl-libevent or --without-http-curl-libevent was given.
+if test "${with_http_curl_libevent+set}" = set; then
+  withval="$with_http_curl_libevent"
+  PHP_HTTP_CURL_LIBEVENT=$withval
+else
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  PHP_HTTP_CURL_LIBEVENT=$PHP_HTTP_CURL_REQUESTS
   
-  fi
 
+fi
 
-    
-  fi
 
-  fi
+ext_output=$PHP_HTTP_CURL_LIBEVENT
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+php_with_http_zlib_compression=$PHP_HTTP
+
+echo $ac_n "checking whether to enable zlib encodings support""... $ac_c" 1>&6
+echo "configure:106183: checking whether to enable zlib encodings support" >&5
+# Check whether --with-http-zlib-compression or --without-http-zlib-compression was given.
+if test "${with_http_zlib_compression+set}" = set; then
+  withval="$with_http_zlib_compression"
+  PHP_HTTP_ZLIB_COMPRESSION=$withval
+else
   
+  PHP_HTTP_ZLIB_COMPRESSION=$PHP_HTTP
   
-  case expat in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lexpat $LIBS" 
-   ;;
-  esac
 
+fi
 
 
+ext_output=$PHP_HTTP_ZLIB_COMPRESSION
+echo "$ac_t""$ext_output" 1>&6
 
-  fi
 
 
-        
-  if test "$i/include" != "/usr/include"; then
-    
-  if test -z "$i/include" || echo "$i/include" | grep '^/' >/dev/null ; then
-    ai_p=$i/include
-  else
-    
-    ep_dir="`echo $i/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$i/include\"`"
-  fi
 
-    
+php_with_http_magic_mime="no"
+
+echo $ac_n "checking whether to enable response content type guessing""... $ac_c" 1>&6
+echo "configure:106205: checking whether to enable response content type guessing" >&5
+# Check whether --with-http-magic-mime or --without-http-magic-mime was given.
+if test "${with_http_magic_mime+set}" = set; then
+  withval="$with_http_magic_mime"
+  PHP_HTTP_MAGIC_MIME=$withval
+else
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  PHP_HTTP_MAGIC_MIME="no"
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
+
+fi
+
+
+ext_output=$PHP_HTTP_MAGIC_MIME
+echo "$ac_t""$ext_output" 1>&6
+
+
+
+
+if test "$PHP_HTTP" != "no"; then
+
+	
+		echo $ac_n "checking for egrep""... $ac_c" 1>&6
+echo "configure:106228: checking for egrep" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_egrep'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1
+    then ac_cv_prog_egrep='grep -E'
+    else ac_cv_prog_egrep='egrep'
+    fi
+fi
+
+echo "$ac_t""$ac_cv_prog_egrep" 1>&6
+ EGREP=$ac_cv_prog_egrep
+ 
+
+	
+	
+		
+			echo $ac_n "checking for a sed that does not truncate output""... $ac_c" 1>&6
+echo "configure:106246: checking for a sed that does not truncate output" >&5
+if eval "test \"`echo '$''{'lt_cv_path_SED'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  # Loop through the user's path and test for sed and gsed.
+# Then use that list of sed's as ones to test for truncation.
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for lt_ac_prog in sed gsed; do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      if test -f "$as_dir/$lt_ac_prog$ac_exec_ext"; then
+        lt_ac_sed_list="$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext"
       fi
-    
+    done
+  done
+done
+lt_ac_max=0
+lt_ac_count=0
+# Add /usr/xpg4/bin/sed as it is typically found on Solaris
+# along with /bin/sed that truncates output.
+for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
+  test ! -f $lt_ac_sed && continue
+  cat /dev/null > conftest.in
+  lt_ac_count=0
+  echo $ECHO_N "0123456789$ECHO_C" >conftest.in
+  # Check for GNU sed and select it if it is found.
+  if "$lt_ac_sed" --version 2>&1 < /dev/null | grep 'GNU' > /dev/null; then
+    lt_cv_path_SED=$lt_ac_sed
+    break
   fi
+  while true; do
+    cat conftest.in conftest.in >conftest.tmp
+    mv conftest.tmp conftest.in
+    cp conftest.in conftest.nl
+    echo >>conftest.nl
+    $lt_ac_sed -e 's/a$//' < conftest.nl >conftest.out || break
+    cmp -s conftest.out conftest.nl || break
+    # 10000 chars as input seems more than enough
+    test $lt_ac_count -gt 10 && break
+    lt_ac_count=`expr $lt_ac_count + 1`
+    if test $lt_ac_count -gt $lt_ac_max; then
+      lt_ac_max=$lt_ac_count
+      lt_cv_path_SED=$lt_ac_sed
+    fi
+  done
+done
+
+fi
+
+SED=$lt_cv_path_SED
+echo "$ac_t""$SED" 1>&6
+
+		
+	
+	
+	echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
+echo "configure:106305: checking how to run the C preprocessor" >&5
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+    # This must be in double quotes, not single quotes, because CPP may get
+  # substituted into the Makefile and "${CC-cc}" will confuse make.
+  CPP="${CC-cc} -E"
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp.
+  cat > conftest.$ac_ext <<EOF
+#line 106320 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:106326: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -E -traditional-cpp"
+  cat > conftest.$ac_ext <<EOF
+#line 106337 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:106343: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP="${CC-cc} -nologo -E"
+  cat > conftest.$ac_ext <<EOF
+#line 106354 "configure"
+#include "confdefs.h"
+#include <assert.h>
+Syntax Error
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:106360: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  :
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  CPP=/lib/cpp
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+fi
+rm -f conftest*
+  ac_cv_prog_CPP="$CPP"
+fi
+  CPP="$ac_cv_prog_CPP"
+else
+  ac_cv_prog_CPP="$CPP"
+fi
+echo "$ac_t""$CPP" 1>&6
 
-  fi
+	
+	if test "$PHP_HTTP_SHARED_DEPS" != "no"; then
+		cat >> confdefs.h <<\EOF
+#define HTTP_SHARED_DEPS 1
+EOF
 
-        testval=yes
-        break
-      fi
-    done
+	else
+		cat >> confdefs.h <<\EOF
+#define HTTP_SHARED_DEPS 0
+EOF
 
-    if test "$testval" = "no"; then
-      { echo "configure: error: XML-RPC support requires libexpat. Use --with-libexpat-dir=<DIR> (deprecated!)" 1>&2; exit 1; }
-    fi
-  fi
+	fi
+	
+				
+	
+				
+	
+				if test "x$PHP_LIBDIR" = "x"; then
+		PHP_LIBDIR=lib
+	fi
 
-    if test "$PHP_ICONV_SHARED" = "yes" || test "$PHP_ICONV" = "no"; then
+	for ac_hdr in netdb.h unistd.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:106409: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 106414 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:106419: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
 
-    if test "$PHP_ICONV_DIR" != "no"; then
-      PHP_ICONV=$PHP_ICONV_DIR
-    fi
-  
-    if test -z "$PHP_ICONV" || test "$PHP_ICONV" = "no"; then
-      PHP_ICONV=yes
-    fi
+	
+  unset ac_cv_func_gethostname
+  unset ac_cv_func___gethostname
+  unset found
   
-    
-  found_iconv=no
-  unset ICONV_DIR
-
-  # Create the directories for a VPATH build:
-  $php_shtool mkdir -p ext/iconv
-
-  echo > ext/iconv/php_have_bsd_iconv.h
-  echo > ext/iconv/php_have_ibm_iconv.h
-  echo > ext/iconv/php_have_glibc_iconv.h
-  echo > ext/iconv/php_have_libiconv.h
-  echo > ext/iconv/php_have_iconv.h
-  echo > ext/iconv/php_php_iconv_impl.h
-  echo > ext/iconv/php_iconv_aliased_libiconv.h
-  echo > ext/iconv/php_php_iconv_h_path.h
-  echo > ext/iconv/php_iconv_supports_errno.h
-
-        if test "$PHP_ICONV" = "yes"; then
-    echo $ac_n "checking for iconv""... $ac_c" 1>&6
-echo "configure:100111: checking for iconv" >&5
-if eval "test \"`echo '$''{'ac_cv_func_iconv'+set}'`\" = set"; then
+  echo $ac_n "checking for gethostname""... $ac_c" 1>&6
+echo "configure:106451: checking for gethostname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100116 "configure"
+#line 106456 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char iconv(); below.  */
+    which can conflict with char gethostname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char iconv();
+char gethostname();
 
 int main() {
 
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_iconv) || defined (__stub___iconv)
+#if defined (__stub_gethostname) || defined (__stub___gethostname)
 choke me
 #else
-iconv();
+gethostname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:100139: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:106479: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_iconv=yes"
+  eval "ac_cv_func_gethostname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_iconv=no"
+  eval "ac_cv_func_gethostname=no"
 fi
 rm -f conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
+if eval "test \"`echo '$ac_cv_func_'gethostname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-      found_iconv=yes
-    
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-
-      echo $ac_n "checking for libiconv""... $ac_c" 1>&6
-echo "configure:100160: checking for libiconv" >&5
-if eval "test \"`echo '$''{'ac_cv_func_libiconv'+set}'`\" = set"; then
+ echo $ac_n "checking for __gethostname""... $ac_c" 1>&6
+echo "configure:106497: checking for __gethostname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100165 "configure"
+#line 106502 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char libiconv(); below.  */
+    which can conflict with char __gethostname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char libiconv();
+char __gethostname();
 
 int main() {
 
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_libiconv) || defined (__stub___libiconv)
+#if defined (__stub___gethostname) || defined (__stub_____gethostname)
 choke me
 #else
-libiconv();
+__gethostname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:100188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:106525: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_func_libiconv=yes"
+  eval "ac_cv_func___gethostname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_libiconv=no"
+  eval "ac_cv_func___gethostname=no"
 fi
 rm -f conftest*
 fi
 
-if eval "test \"`echo '$ac_cv_func_'libiconv`\" = yes"; then
+if eval "test \"`echo '$ac_cv_func_'__gethostname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-        
-  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBICONV 1
-EOF
-
-        found_iconv=yes
-      
+  found=yes
 else
   echo "$ac_t""no" 1>&6
+found=no
 fi
-
-    
+ 
 fi
 
-  fi
-
-        if test "$found_iconv" = "no"; then
 
-    for i in $PHP_ICONV /usr/local /usr; do
-      if test -r $i/include/giconv.h; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_GICONV_H 1
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETHOSTNAME 1
 EOF
 
-        ICONV_DIR=$i
-        iconv_lib_name=giconv
-        break
-      elif test -r $i/include/iconv.h; then
-        ICONV_DIR=$i
-        iconv_lib_name=iconv
-        break
-      fi
-    done
-
-    if test -z "$ICONV_DIR"; then
-      { echo "configure: error: Please specify the install prefix of iconv with --with-iconv=<DIR>" 1>&2; exit 1; }
-    fi
-  
-    if test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.a ||
-       test -f $ICONV_DIR/$PHP_LIBDIR/lib$iconv_lib_name.$SHLIB_SUFFIX_NAME
-    then
-      
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-        -L$ICONV_DIR/$PHP_LIBDIR
-      "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+    ac_cv_func_gethostname=yes
+  ;;
   
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
+    *) 
   
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for libiconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:100344: checking for libiconv in -l$iconv_lib_name" >&5
-ac_lib_var=`echo $iconv_lib_name'_'libiconv | sed 'y%./+-%__p_%'`
+  unset ac_cv_lib_nsl_gethostname
+  unset ac_cv_lib_nsl___gethostname
+  unset found
+  echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
+echo "configure:106563: checking for gethostname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$iconv_lib_name  $LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 100352 "configure"
+#line 106571 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char libiconv();
+char gethostname();
 
 int main() {
-libiconv()
+gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:100363: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:106582: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -100374,152 +106593,31 @@ LIBS="$ac_save_LIBS"
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-        found_iconv=yes
-        
-  echo "#define HAVE_LIBICONV 1" > ext/iconv/php_have_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBICONV 1
-EOF
-
-        
-  echo "#define ICONV_ALIASED_LIBICONV 1" > ext/iconv/php_iconv_aliased_libiconv.h
-
-        cat >> confdefs.h <<\EOF
-#define ICONV_ALIASED_LIBICONV 1
-EOF
-
-      
-  
+  found=yes
 else
   echo "$ac_t""no" 1>&6
 
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$iconv_lib_name_libiconv
-    
-        
-  save_old_LDFLAGS=$LDFLAGS
-  ac_stuff="
-          -L$ICONV_DIR/$PHP_LIBDIR
-        "
-  
-  save_ext_shared=$ext_shared
-  ext_shared=yes
-  
-  for ac_i in $ac_stuff; do
-    case $ac_i in
-    -pthread)
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -pthread"
-      else
-        
-  
-  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "EXTRA_LDFLAGS$unique=set"
-    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
-  fi
-
-      fi
-    ;;
-    -l*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-    if test "$ext_shared" = "yes"; then
-        LDFLAGS="$LDFLAGS -l$ac_ii" 
-    else
-      
-  
-  case $ac_ii in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="$LIBS -l$ac_ii" 
-   ;;
-  esac
-
-
-    fi
-   ;;
-  esac
-
-
-    ;;
-    -L*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
-    
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
-  else
-    
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        LDFLAGS="-L$ai_p $LDFLAGS"
-        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-      fi
-    
-  fi
-
-    ;;
-    esac
-  done
-
-  echo $ac_n "checking for iconv in -l$iconv_lib_name""... $ac_c" 1>&6
-echo "configure:100504: checking for iconv in -l$iconv_lib_name" >&5
-ac_lib_var=`echo $iconv_lib_name'_'iconv | sed 'y%./+-%__p_%'`
+    echo $ac_n "checking for __gethostname in -lnsl""... $ac_c" 1>&6
+echo "configure:106602: checking for __gethostname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-l$iconv_lib_name  $LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 100512 "configure"
+#line 106610 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
-char iconv();
+char __gethostname();
 
 int main() {
-iconv()
+__gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:100523: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:106621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -100531,1133 +106629,1544 @@ fi
 rm -f conftest*
 LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    
-          found_iconv=yes
-        
-  
-else
-  echo "$ac_t""no" 1>&6
-
-    LDFLAGS=$save_old_LDFLAGS
-    ext_shared=$save_ext_shared
-    unset ac_cv_lib_$iconv_lib_name_iconv
-    
-  
-fi
-
-      
-  
-fi
-
-    fi
-  fi
-
-  if test "$found_iconv" = "yes"; then
-    
-  echo "#define HAVE_ICONV 1" > ext/iconv/php_have_iconv.h
-
-    cat >> confdefs.h <<\EOF
-#define HAVE_ICONV 1
-EOF
-
-    if test -n "$ICONV_DIR"; then
-      
-
-  if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-l$iconv_lib_name $XMLRPC_SHARED_LIBADD"
-    if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
-      
-  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
-  fi
-
-    
-      if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
-      else
-        
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
-      fi
-    
-  fi
+  
+fi
 
-    fi
-  else
-    
 
-  if test -n "$ICONV_DIR/$PHP_LIBDIR"; then
-    
-  if test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ICONV_DIR/$PHP_LIBDIR" != "/usr/lib"; then
-    
-  if test -z "$ICONV_DIR/$PHP_LIBDIR" || echo "$ICONV_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/$PHP_LIBDIR
-  else
-    
-    ep_dir="`echo $ICONV_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/$PHP_LIBDIR\"`"
-  fi
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
+else
+  cat > conftest.$ac_ext <<EOF
+#line 106653 "configure"
+#include "confdefs.h"
+main() { return (0); }
+EOF
+if { (eval echo configure:106657: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
+fi
+rm -fr conftest*
+fi
 
-    
-      
-  
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
+    LIBS=$ac_libs
   fi
 
-
+  if test "$found" = "yes"; then
     
-  fi
-
-  fi
-  
   
-  case $iconv_lib_name in
+  case nsl in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-l$iconv_lib_name $LIBS" 
+      LIBS="-lnsl $LIBS" 
    ;;
   esac
 
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETHOSTNAME 1
+EOF
 
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
+EOF
 
-  fi
-
-
-      
-  if test "$ICONV_DIR/include" != "/usr/include"; then
-    
-  if test -z "$ICONV_DIR/include" || echo "$ICONV_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$ICONV_DIR/include
+    ac_cv_func_gethostname=yes
   else
     
-    ep_dir="`echo $ICONV_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ICONV_DIR/include\"`"
-  fi
+  :
 
-    
+  fi
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+ ;;
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
+  esac
 
-  fi
+	
+  unset ac_cv_func_getdomainname
+  unset ac_cv_func___getdomainname
+  unset found
+  
+  echo $ac_n "checking for getdomainname""... $ac_c" 1>&6
+echo "configure:106708: checking for getdomainname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getdomainname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 106713 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getdomainname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getdomainname();
 
-    fi
-    
-else 
-      { echo "configure: error: iconv not found, in order to build xmlrpc you need the iconv library" 1>&2; exit 1; }
-    
-  fi
+int main() {
 
-  fi
-fi
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getdomainname) || defined (__stub___getdomainname)
+choke me
+#else
+getdomainname();
+#endif
 
-if test "$PHP_XMLRPC" = "yes"; then
-  # Extract the first word of "ranlib", so it can be a program name with args.
-set dummy ranlib; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:100713: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test -n "$RANLIB"; then
-  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
+; return 0; }
+EOF
+if { (eval echo configure:106736: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_getdomainname=yes"
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_RANLIB="ranlib"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func_getdomainname=no"
 fi
+rm -f conftest*
 fi
-RANLIB="$ac_cv_prog_RANLIB"
-if test -n "$RANLIB"; then
-  echo "$ac_t""$RANLIB" 1>&6
+
+if eval "test \"`echo '$ac_cv_func_'getdomainname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-
-echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:100741: checking for inline" >&5
-if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
+ echo $ac_n "checking for __getdomainname""... $ac_c" 1>&6
+echo "configure:106754: checking for __getdomainname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getdomainname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  ac_cv_c_inline=no
-for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 100748 "configure"
+#line 106759 "configure"
 #include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getdomainname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getdomainname();
 
 int main() {
-} $ac_kw foo() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getdomainname) || defined (__stub_____getdomainname)
+choke me
+#else
+__getdomainname();
+#endif
+
 ; return 0; }
 EOF
-if { (eval echo configure:100755: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:106782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_c_inline=$ac_kw; break
+  eval "ac_cv_func___getdomainname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___getdomainname=no"
 fi
 rm -f conftest*
-done
-
 fi
 
-echo "$ac_t""$ac_cv_c_inline" 1>&6
-case "$ac_cv_c_inline" in
-  inline | yes) ;;
-  no) cat >> confdefs.h <<\EOF
-#define inline 
-EOF
- ;;
-  *)  cat >> confdefs.h <<EOF
-#define inline $ac_cv_c_inline
-EOF
- ;;
-esac
-
-	
-
-
-
+if eval "test \"`echo '$ac_cv_func_'__getdomainname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
 
-cat >> confdefs.h <<\EOF
-#define UNDEF_THREADS_HACK 
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETDOMAINNAME 1
 EOF
 
-
-
-echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:100793: checking for ANSI C header files" >&5
-if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
+    ac_cv_func_getdomainname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getdomainname
+  unset ac_cv_lib_nsl___getdomainname
+  unset found
+  echo $ac_n "checking for getdomainname in -lnsl""... $ac_c" 1>&6
+echo "configure:106820: checking for getdomainname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getdomainname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 100798 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 106828 "configure"
 #include "confdefs.h"
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getdomainname();
+
+int main() {
+getdomainname()
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:100806: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:106839: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_header_stdc=yes
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_stdc=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __getdomainname in -lnsl""... $ac_c" 1>&6
+echo "configure:106859: checking for __getdomainname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getdomainname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 100823 "configure"
+#line 106867 "configure"
 #include "confdefs.h"
-#include <string.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getdomainname();
+
+int main() {
+__getdomainname()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "memchr" >/dev/null 2>&1; then
-  :
+if { (eval echo configure:106878: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_stdc=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
-
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 100841 "configure"
-#include "confdefs.h"
-#include <stdlib.h>
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "free" >/dev/null 2>&1; then
-  :
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
-  rm -rf conftest*
-  ac_cv_header_stdc=no
+  echo "$ac_t""no" 1>&6
+found=no
 fi
-rm -f conftest*
 
+  
 fi
 
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-if test "$cross_compiling" = yes; then
-  :
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 100862 "configure"
+#line 106910 "configure"
 #include "confdefs.h"
-#include <ctype.h>
-#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int main () { int i; for (i = 0; i < 256; i++)
-if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
-exit (0); }
-
+main() { return (0); }
 EOF
-if { (eval echo configure:100873: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:106914: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  :
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_header_stdc=no
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-fi
+    LIBS=$ac_libs
+  fi
 
-echo "$ac_t""$ac_cv_header_stdc" 1>&6
-if test $ac_cv_header_stdc = yes; then
-  cat >> confdefs.h <<\EOF
-#define STDC_HEADERS 1
+  if test "$found" = "yes"; then
+    
+  
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETDOMAINNAME 1
 EOF
 
-fi
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
+EOF
 
-for ac_hdr in xmlparse.h xmltok.h stdlib.h strings.h string.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:100900: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+    ac_cv_func_getdomainname=yes
+  else
+    
+  :
+
+  fi
+  
+ ;;
+  
+  esac
+
+	
+  unset ac_cv_func_getservbyport
+  unset ac_cv_func___getservbyport
+  unset found
+  
+  echo $ac_n "checking for getservbyport""... $ac_c" 1>&6
+echo "configure:106965: checking for getservbyport" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getservbyport'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 100905 "configure"
+#line 106970 "configure"
 #include "confdefs.h"
-#include <$ac_hdr>
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getservbyport(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyport();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getservbyport) || defined (__stub___getservbyport)
+choke me
+#else
+getservbyport();
+#endif
+
+; return 0; }
 EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:100910: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+if { (eval echo configure:106993: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  eval "ac_cv_func_getservbyport=yes"
 else
-  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  eval "ac_cv_func_getservbyport=no"
 fi
 rm -f conftest*
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+
+if eval "test \"`echo '$ac_cv_func_'getservbyport`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+  found=yes
 else
   echo "$ac_t""no" 1>&6
-fi
-done
+ echo $ac_n "checking for __getservbyport""... $ac_c" 1>&6
+echo "configure:107011: checking for __getservbyport" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getservbyport'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107016 "configure"
+#include "confdefs.h"
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getservbyport(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyport();
 
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getservbyport) || defined (__stub_____getservbyport)
+choke me
+#else
+__getservbyport();
+#endif
 
+; return 0; }
+EOF
+if { (eval echo configure:107039: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyport=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyport=no"
+fi
+rm -f conftest*
+fi
 
+if eval "test \"`echo '$ac_cv_func_'__getservbyport`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
+fi
 
 
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYPORT 1
+EOF
 
-echo $ac_n "checking size of char""... $ac_c" 1>&6
-echo "configure:100942: checking size of char" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
+    ac_cv_func_getservbyport=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getservbyport
+  unset ac_cv_lib_nsl___getservbyport
+  unset found
+  echo $ac_n "checking for getservbyport in -lnsl""... $ac_c" 1>&6
+echo "configure:107077: checking for getservbyport in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getservbyport | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_char=1
-else
-  cat > conftest.$ac_ext <<EOF
-#line 100950 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107085 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(char));
-  exit(0);
-}
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyport();
+
+int main() {
+getservbyport()
+; return 0; }
 EOF
-if { (eval echo configure:100961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_char=`cat conftestval`
+if { (eval echo configure:107096: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_char=0
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
-rm -fr conftest*
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+
+    echo $ac_n "checking for __getservbyport in -lnsl""... $ac_c" 1>&6
+echo "configure:107116: checking for __getservbyport in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getservbyport | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107124 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyport();
+
+int main() {
+__getservbyport()
+; return 0; }
+EOF
+if { (eval echo configure:107135: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
-echo "$ac_t""$ac_cv_sizeof_char" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_CHAR $ac_cv_sizeof_char
-EOF
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
+  
+fi
 
 
-echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:100982: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_int=4
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 100990 "configure"
+#line 107167 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(int));
-  exit(0);
-}
+main() { return (0); }
 EOF
-if { (eval echo configure:101001: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:107171: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
-  ac_cv_sizeof_int=`cat conftestval`
+  found=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
-  ac_cv_sizeof_int=0
+  found=no
 fi
 rm -fr conftest*
 fi
 
-fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
+  
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYPORT 1
+EOF
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
 EOF
 
+    ac_cv_func_getservbyport=yes
+  else
+    
+  :
 
-echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:101021: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
+  fi
+  
+ ;;
+  
+  esac
+
+	
+  unset ac_cv_func_getservbyname
+  unset ac_cv_func___getservbyname
+  unset found
+  
+  echo $ac_n "checking for getservbyname""... $ac_c" 1>&6
+echo "configure:107222: checking for getservbyname" >&5
+if eval "test \"`echo '$''{'ac_cv_func_getservbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long=4
-else
   cat > conftest.$ac_ext <<EOF
-#line 101029 "configure"
+#line 107227 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long));
-  exit(0);
-}
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char getservbyname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyname();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_getservbyname) || defined (__stub___getservbyname)
+choke me
+#else
+getservbyname();
+#endif
+
+; return 0; }
 EOF
-if { (eval echo configure:101040: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
+if { (eval echo configure:107250: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func_getservbyname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long=0
-fi
-rm -fr conftest*
+  rm -rf conftest*
+  eval "ac_cv_func_getservbyname=no"
 fi
-
+rm -f conftest*
 fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
 
-
-echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:101060: checking size of long long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+if eval "test \"`echo '$ac_cv_func_'getservbyname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
 else
-  if test "$cross_compiling" = yes; then
-  ac_cv_sizeof_long_long=8
+  echo "$ac_t""no" 1>&6
+ echo $ac_n "checking for __getservbyname""... $ac_c" 1>&6
+echo "configure:107268: checking for __getservbyname" >&5
+if eval "test \"`echo '$''{'ac_cv_func___getservbyname'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 101068 "configure"
+#line 107273 "configure"
 #include "confdefs.h"
-#include <stdio.h>
-main()
-{
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long long));
-  exit(0);
-}
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char __getservbyname(); below.  */
+#include <assert.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyname();
+
+int main() {
+
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub___getservbyname) || defined (__stub_____getservbyname)
+choke me
+#else
+__getservbyname();
+#endif
+
+; return 0; }
 EOF
-if { (eval echo configure:101079: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long_long=`cat conftestval`
+if { (eval echo configure:107296: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_long_long=0
+  rm -rf conftest*
+  eval "ac_cv_func___getservbyname=no"
 fi
-rm -fr conftest*
+rm -f conftest*
 fi
 
+if eval "test \"`echo '$ac_cv_func_'__getservbyname`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
+ 
 fi
-echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
-EOF
 
 
-echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:101099: checking for size_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
+  case $found in
+  yes) 
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYNAME 1
+EOF
+
+    ac_cv_func_getservbyname=yes
+  ;;
+  
+    *) 
+  
+  unset ac_cv_lib_nsl_getservbyname
+  unset ac_cv_lib_nsl___getservbyname
+  unset found
+  echo $ac_n "checking for getservbyname in -lnsl""... $ac_c" 1>&6
+echo "configure:107334: checking for getservbyname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'getservbyname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 101104 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107342 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
-#endif
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char getservbyname();
+
+int main() {
+getservbyname()
+; return 0; }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+if { (eval echo configure:107353: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_type_size_t=yes
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_type_size_t=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
+LIBS="$ac_save_LIBS"
 
 fi
-echo "$ac_t""$ac_cv_type_size_t" 1>&6
-if test $ac_cv_type_size_t = no; then
-  cat >> confdefs.h <<\EOF
-#define size_t unsigned
-EOF
-
-fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
 
-echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:101132: checking whether time.h and sys/time.h may both be included" >&5
-if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
+    echo $ac_n "checking for __getservbyname in -lnsl""... $ac_c" 1>&6
+echo "configure:107373: checking for __getservbyname in -lnsl" >&5
+ac_lib_var=`echo nsl'_'__getservbyname | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 101137 "configure"
+  ac_save_LIBS="$LIBS"
+LIBS="-lnsl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 107381 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char __getservbyname();
+
 int main() {
-struct tm *tp;
+__getservbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:101146: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:107392: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
-  ac_cv_header_time=yes
+  eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  ac_cv_header_time=no
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
 rm -f conftest*
-fi
+LIBS="$ac_save_LIBS"
 
-echo "$ac_t""$ac_cv_header_time" 1>&6
-if test $ac_cv_header_time = yes; then
-  cat >> confdefs.h <<\EOF
-#define TIME_WITH_SYS_TIME 1
-EOF
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  found=yes
+else
+  echo "$ac_t""no" 1>&6
+found=no
+fi
 
+  
 fi
 
-echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
-echo "configure:101167: checking for uid_t in sys/types.h" >&5
-if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+  if test "$found" = "yes"; then
+    ac_libs=$LIBS
+    LIBS="$LIBS -lnsl"
+    if test "$cross_compiling" = yes; then
+  found=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 101172 "configure"
+#line 107424 "configure"
 #include "confdefs.h"
-#include <sys/types.h>
+main() { return (0); }
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "uid_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  ac_cv_type_uid_t=yes
+if { (eval echo configure:107428: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  found=yes
 else
-  rm -rf conftest*
-  ac_cv_type_uid_t=no
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  found=no
 fi
-rm -f conftest*
-
+rm -fr conftest*
 fi
 
-echo "$ac_t""$ac_cv_type_uid_t" 1>&6
-if test $ac_cv_type_uid_t = no; then
-  cat >> confdefs.h <<\EOF
-#define uid_t int
+    LIBS=$ac_libs
+  fi
+
+  if test "$found" = "yes"; then
+    
+  
+  case nsl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lnsl $LIBS" 
+   ;;
+  esac
+
+
+    cat >> confdefs.h <<\EOF
+#define HAVE_GETSERVBYNAME 1
 EOF
 
-  cat >> confdefs.h <<\EOF
-#define gid_t int
+    cat >> confdefs.h <<\EOF
+#define HAVE_LIBNSL 1
 EOF
 
-fi
+    ac_cv_func_getservbyname=yes
+  else
+    
+  :
+
+  fi
+  
+ ;;
+  
+  esac
+
+
+	if test "$PHP_HTTP_ZLIB_COMPRESSION" != "no"; then
+		echo $ac_n "checking for zlib.h""... $ac_c" 1>&6
+echo "configure:107476: checking for zlib.h" >&5
+		ZLIB_DIR=
+		for i in "$PHP_HTTP_ZLIB_COMPRESSION" "$PHP_ZLIB_DIR" "$PHP_ZLIB" /usr/local /usr /opt; do
+			if test -f "$i/include/zlib.h"; then
+				ZLIB_DIR=$i
+				break;
+			fi
+		done
+		if test "x$ZLIB_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find zlib.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $ZLIB_DIR" 1>&6
+			echo $ac_n "checking for zlib version >= 1.2.0.4""... $ac_c" 1>&6
+echo "configure:107490: checking for zlib version >= 1.2.0.4" >&5
+			ZLIB_VERSION=`$EGREP "define ZLIB_VERSION" $ZLIB_DIR/include/zlib.h | $SED -e 's/[^0-9\.]//g'`
+			echo "$ac_t""$ZLIB_VERSION" 1>&6
+			if test `echo $ZLIB_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*1000000 + $2*10000 + $3*100 + $4}'` -lt 1020004; then
+				{ echo "configure: error: libz version greater or equal to 1.2.0.4 required" 1>&2; exit 1; }
+			else
+				
+  if test "$ZLIB_DIR/include" != "/usr/include"; then
+    
+  if test -z "$ZLIB_DIR/include" || echo "$ZLIB_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/include
+  else
+    
+    ep_dir="`echo $ZLIB_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/include\"`"
+  fi
+
+    
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
+  fi
 
+				
 
+  if test "$ext_shared" = "yes"; then
+    HTTP_SHARED_LIBADD="-lz $HTTP_SHARED_LIBADD"
+    if test -n "$ZLIB_DIR/$PHP_LIBDIR"; then
+      
+  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-# Standard XMLRPC list
-for ac_func in \
- strtoul strtoull snprintf \
- strstr strpbrk strerror\
- memcpy memmove
-do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:101212: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+      fi
+    
+  fi
+
+    fi
+  else
+    
+
+  if test -n "$ZLIB_DIR/$PHP_LIBDIR"; then
+    
+  if test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$ZLIB_DIR/$PHP_LIBDIR" || echo "$ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$ZLIB_DIR/$PHP_LIBDIR
+  else
+    
+    ep_dir="`echo $ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ZLIB_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
+
+
+    
+  fi
+
+  fi
+  
+  
+  case z in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lz $LIBS" 
+   ;;
+  esac
+
+
+
+
+  fi
+
+
+				cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_ZLIB 1
+EOF
+
+			fi
+		fi
+	fi
+	
+	if test "$PHP_HTTP_CURL_REQUESTS" != "no"; then
+		echo $ac_n "checking for curl/curl.h""... $ac_c" 1>&6
+echo "configure:107634: checking for curl/curl.h" >&5
+		CURL_DIR=
+		for i in "$PHP_HTTP_CURL_REQUESTS" /usr/local /usr /opt; do
+			if test -f "$i/include/curl/curl.h"; then
+				CURL_DIR=$i
+				break
+			fi
+		done
+		if test "x$CURL_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find curl/curl.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $CURL_DIR" 1>&6
+		fi
+		
+		echo $ac_n "checking for curl-config""... $ac_c" 1>&6
+echo "configure:107650: checking for curl-config" >&5
+		CURL_CONFIG=
+		for i in "$CURL_DIR/bin/curl-config" "$CURL_DIR/curl-config" `which curl-config`; do
+			if test -x "$i"; then
+				CURL_CONFIG=$i
+				break
+			fi
+		done
+		if test "x$CURL_CONFIG" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find curl-config" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found: $CURL_CONFIG" 1>&6
+		fi
+		
+				echo $ac_n "checking for curl version >= 7.12.3""... $ac_c" 1>&6
+echo "configure:107666: checking for curl version >= 7.12.3" >&5
+		CURL_VERSION=`$CURL_CONFIG --version | $SED -e 's/[^0-9\.]//g'`
+		echo "$ac_t""$CURL_VERSION" 1>&6
+		if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71203; then
+			{ echo "configure: error: libcurl version greater or equal to 7.12.3 required" 1>&2; exit 1; }
+		fi
+		
+								
+		save_INCLUDES="$INCLUDES"
+		INCLUDES=
+		save_LIBS="$LIBS"
+		LIBS=
+		save_CFLAGS="$CFLAGS"
+		CFLAGS=`$CURL_CONFIG --cflags`
+		save_LDFLAGS="$LDFLAGS"
+		LDFLAGS=`$CURL_CONFIG --libs`
+		LDFLAGS="$LDFLAGS $ld_runpath_switch$CURL_DIR/$PHP_LIBDIR"
+		
+		echo $ac_n "checking for SSL support in libcurl""... $ac_c" 1>&6
+echo "configure:107685: checking for SSL support in libcurl" >&5
+		CURL_SSL=`$CURL_CONFIG --feature | $EGREP SSL`
+		if test "$CURL_SSL" = "SSL"; then
+			echo "$ac_t""yes" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_SSL 1
+EOF
+
+			
+			echo $ac_n "checking for openssl support in libcurl""... $ac_c" 1>&6
+echo "configure:107695: checking for openssl support in libcurl" >&5
+			if test "$cross_compiling" = yes; then
+  
+				echo "$ac_t""no" 1>&6
+			
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107702 "configure"
+#include "confdefs.h"
+
+				#include <curl/curl.h>
+				int main(int argc, char *argv[]) {
+					curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+					if (data && data->ssl_version && *data->ssl_version) {
+						const char *ptr = data->ssl_version;
+						while(*ptr == ' ') ++ptr;
+						return strncasecmp(ptr, "OpenSSL", sizeof("OpenSSL")-1);
+					}
+					return 1;
+				}
+			
+EOF
+if { (eval echo configure:107717: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+				echo "$ac_t""yes" 1>&6
+				ac_safe=`echo "openssl/crypto.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for openssl/crypto.h""... $ac_c" 1>&6
+echo "configure:107723: checking for openssl/crypto.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 101217 "configure"
+#line 107728 "configure"
 #include "confdefs.h"
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
-#include <assert.h>
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
+#include <openssl/crypto.h>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:107733: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+					cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_OPENSSL 1
+EOF
 
-int main() {
+				
+else
+  echo "$ac_t""no" 1>&6
+fi
 
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-$ac_func();
-#endif
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+				echo "$ac_t""no" 1>&6
+			
+fi
+rm -fr conftest*
+fi
 
-; return 0; }
+			
+			echo $ac_n "checking for gnutls support in libcurl""... $ac_c" 1>&6
+echo "configure:107773: checking for gnutls support in libcurl" >&5
+			if test "$cross_compiling" = yes; then
+  
+				echo "$ac_t""no" 1>&6
+			
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107780 "configure"
+#include "confdefs.h"
+
+				#include <curl/curl.h>
+				int main(int argc, char *argv[]) {
+					curl_version_info_data *data = curl_version_info(CURLVERSION_NOW);
+					if (data && data->ssl_version && *data->ssl_version) {
+						const char *ptr = data->ssl_version;
+						while(*ptr == ' ') ++ptr;
+						return strncasecmp(ptr, "GnuTLS", sizeof("GnuTLS")-1);
+					}
+					return 1;
+				}
+			
+EOF
+if { (eval echo configure:107795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+				echo "$ac_t""yes" 1>&6
+				ac_safe=`echo "gcrypt.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for gcrypt.h""... $ac_c" 1>&6
+echo "configure:107801: checking for gcrypt.h" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 107806 "configure"
+#include "confdefs.h"
+#include <gcrypt.h>
 EOF
-if { (eval echo configure:101240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:107811: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  eval "ac_cv_header_$ac_safe=yes"
 else
+  echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  eval "ac_cv_header_$ac_safe=no"
 fi
 rm -f conftest*
 fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
+  
+					cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_GNUTLS 1
 EOF
- 
+
+				
 else
   echo "$ac_t""no" 1>&6
 fi
-done
-
-
-
 
+			
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
   
-  ext_builddir=ext/xmlrpc
-  ext_srcdir=$abs_srcdir/ext/xmlrpc
+				echo "$ac_t""no" 1>&6
+			
+fi
+rm -fr conftest*
+fi
 
-  ac_extra=`echo "-I@ext_srcdir@/libxmlrpc -DVERSION="0.50""|$SED s#@ext_srcdir@#$ext_srcdir#g|$SED s#@ext_builddir@#$ext_builddir#g`
+		else
+			echo "$ac_t""no" 1>&6
+		fi
+		
+		INCLUDES="$save_INCLUDES"
+		LIBS="$save_LIBS"
+		CFLAGS="$save_CFLAGS"
+		LDFLAGS="$save_LDFLAGS"
+		
+				
+		echo $ac_n "checking for bundled SSL CA info""... $ac_c" 1>&6
+echo "configure:107860: checking for bundled SSL CA info" >&5
+		CURL_CAINFO=
+		for i in `$CURL_CONFIG --ca` "/etc/ssl/certs/ca-certificates.crt"; do
+			if test -f "$i"; then
+				CURL_CAINFO="$i"
+				break
+			fi
+		done
+		if test "x$CURL_CAINFO" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$CURL_CAINFO" 1>&6
+			cat >> confdefs.h <<EOF
+#define HTTP_CURL_CAINFO "$CURL_CAINFO"
+EOF
+
+		fi
+		
+		
+  if test "$CURL_DIR/include" != "/usr/include"; then
+    
+  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/include
+  else
+    
+    ep_dir="`echo $CURL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLRPC_SHARED=no
     
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  fi
 
+		
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  if test "$ext_shared" = "yes"; then
+    HTTP_SHARED_LIBADD="-lcurl $HTTP_SHARED_LIBADD"
+    if test -n "$CURL_DIR/$PHP_LIBDIR"; then
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC xmlrpc"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
-    fi
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLRPC_SHARED=yes
-      
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
+  fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
+        
   
   
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
-  fi
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
+  fi
 
-EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+      fi
+    
+  fi
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
+    fi
+  else
+    
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
+  if test -n "$CURL_DIR/$PHP_LIBDIR"; then
+    
+  if test "$CURL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$CURL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$CURL_DIR/$PHP_LIBDIR" || echo "$CURL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$CURL_DIR/$PHP_LIBDIR
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
+    
+    ep_dir="`echo $CURL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$CURL_DIR/$PHP_LIBDIR\"`"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+    
+      
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLRPC 1
-EOF
 
-    fi
+    
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLRPC_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  fi
   
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+  case curl in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-lcurl $LIBS" 
+   ;;
+  esac
 
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  fi
 
 
-        EXT_STATIC="$EXT_STATIC xmlrpc"
-        ;;
-      *)
+		
+  for ac_i in `$CURL_CONFIG --libs`; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="$HTTP_SHARED_LIBADD -pthread"
+      else
         
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c libxmlrpc/base64.c \
-          libxmlrpc/simplestring.c libxmlrpc/xml_to_dandarpc.c \
-          libxmlrpc/xmlrpc_introspection.c libxmlrpc/encodings.c \
-          libxmlrpc/system_methods.c libxmlrpc/xml_to_xmlrpc.c \
-          libxmlrpc/queue.c libxmlrpc/xml_element.c libxmlrpc/xmlrpc.c \
-          libxmlrpc/xml_to_soap.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="$HTTP_SHARED_LIBADD -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
+    fi
+   ;;
+  esac
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlrpc
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir/libxmlrpc"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-  XMLRPC_MODULE_TYPE=builtin
-
-elif test "$PHP_XMLRPC" != "no"; then
 
-  if test -r $PHP_XMLRPC/include/xmlrpc.h; then
-    XMLRPC_DIR=$PHP_XMLRPC/include
-  elif test -r $PHP_XMLRPC/include/xmlrpc-epi/xmlrpc.h; then
-    XMLRPC_DIR=$PHP_XMLRPC/include/xmlrpc-epi
-  else
-    echo $ac_n "checking for XMLRPC-EPI in default path""... $ac_c" 1>&6
-echo "configure:101594: checking for XMLRPC-EPI in default path" >&5
-    for i in /usr/local /usr; do
-      if test -r $i/include/xmlrpc.h; then
-        XMLRPC_DIR=$i/include
-        echo "$ac_t""found in $i" 1>&6
-        break
       fi
-    done
+    
   fi
 
-  if test -z "$XMLRPC_DIR"; then
-    echo "$ac_t""not found" 1>&6
-    { echo "configure: error: Please reinstall the XMLRPC-EPI distribution" 1>&2; exit 1; }
-  fi
+    ;;
+    esac
+  done
 
-  
-  if test "$XMLRPC_DIR" != "/usr/include"; then
-    
-  if test -z "$XMLRPC_DIR" || echo "$XMLRPC_DIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR
-  else
-    
-    ep_dir="`echo $XMLRPC_DIR|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR\"`"
-  fi
+		cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_CURL 1
+EOF
 
-    
+		
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-  if test "$ext_shared" = "yes"; then
-    XMLRPC_SHARED_LIBADD="-lxmlrpc $XMLRPC_SHARED_LIBADD"
-    if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
+
+    fi
+   ;;
+  esac
+
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
       
-  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        XMLRPC_SHARED_LIBADD="-L$ai_p $XMLRPC_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLRPC_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLRPC_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -101679,26 +108188,136 @@ echo "configure:101594: checking for XML
     
   fi
 
+    ;;
+    esac
+  done
+
+  echo $ac_n "checking for curl_share_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:108197: checking for curl_share_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_share_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108205 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_share_strerror();
+
+int main() {
+curl_share_strerror()
+; return 0; }
+EOF
+if { (eval echo configure:108216: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_SHARE_STRERROR 1
+EOF
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_share_strerror
+     
+  
+fi
+
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
+
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
+
+
     fi
-  else
-    
+   ;;
+  esac
 
-  if test -n "$XMLRPC_DIR/$PHP_LIBDIR"; then
-    
-  if test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$XMLRPC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
     
-  if test -z "$XMLRPC_DIR/$PHP_LIBDIR" || echo "$XMLRPC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$XMLRPC_DIR/$PHP_LIBDIR
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
   else
     
-    ep_dir="`echo $XMLRPC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$XMLRPC_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
     
-      
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
   unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
@@ -101714,431 +108333,676 @@ echo "configure:101594: checking for XML
   fi
 
 
+      fi
     
   fi
 
-  fi
-  
-  
-  case xmlrpc in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lxmlrpc $LIBS" 
-   ;;
-  esac
-
-
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for curl_multi_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:108346: checking for curl_multi_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108354 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_strerror();
 
-  fi
+int main() {
+curl_multi_strerror()
+; return 0; }
+EOF
+if { (eval echo configure:108365: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_STRERROR 1
+EOF
 
   
-  ext_builddir=ext/xmlrpc
-  ext_srcdir=$abs_srcdir/ext/xmlrpc
+else
+  echo "$ac_t""no" 1>&6
 
-  ac_extra=
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_strerror
+     
+  
+fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLRPC_SHARED=no
-    
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+  save_ext_shared=$ext_shared
+  ext_shared=yes
   
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
   
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
 
-    EXT_STATIC="$EXT_STATIC xmlrpc"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
     fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLRPC_SHARED=yes
-      
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+   ;;
   esac
-  
-  
 
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xmlrpc="$shared_objects_xmlrpc $ac_bdir$ac_obj.lo"
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
+      fi
+    
+  fi
+
+    ;;
+    esac
   done
 
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
+  echo $ac_n "checking for curl_easy_strerror in -lcurl""... $ac_c" 1>&6
+echo "configure:108495: checking for curl_easy_strerror in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108503 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_strerror();
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlrpc.so '$ext_builddir'/phpxmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(PHPXMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
+int main() {
+curl_easy_strerror()
+; return 0; }
+EOF
+if { (eval echo configure:108514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlrpc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlrpc.$suffix"
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlrpc.$suffix: $ext_builddir/phpxmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlrpc.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(PHPXMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
-
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_EASY_STRERROR 1
 EOF
 
-          ;;
-        *)
-          
-  install_modules="install-modules"
+  
+else
+  echo "$ac_t""no" 1>&6
 
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlrpc.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlrpc.so '$ext_builddir'/xmlrpc.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLRPC, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlrpc) $(XMLRPC_SHARED_LIBADD)'
-      ;;
-  esac
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_easy_strerror
+     
+  
+fi
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlrpc.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlrpc.$suffix"
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
   fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlrpc"
 
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlrpc.$suffix: $ext_builddir/xmlrpc.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlrpc.$suffix \$(phplibdir)
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-$ext_builddir/xmlrpc.$suffix: \$(shared_objects_xmlrpc) \$(XMLRPC_SHARED_DEPENDENCIES)
-	$link_cmd
 
-EOF
+    fi
+   ;;
+  esac
 
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLRPC 1
-EOF
 
-    fi
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLRPC_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
         
   
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
+  fi
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
 
+      fi
+    
+  fi
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
+    ;;
+    esac
+  done
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  echo $ac_n "checking for curl_easy_reset in -lcurl""... $ac_c" 1>&6
+echo "configure:108644: checking for curl_easy_reset in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_easy_reset | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108652 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_easy_reset();
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
+int main() {
+curl_easy_reset()
+; return 0; }
 EOF
-  done
-
+if { (eval echo configure:108663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-        EXT_STATIC="$EXT_STATIC xmlrpc"
-        ;;
-      *)
-        
-  
-  case ext/xmlrpc in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlrpc"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlrpc/"; ac_bdir="ext/xmlrpc/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
   
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_EASY_RESET 1
+EOF
+
   
+else
+  echo "$ac_t""no" 1>&6
 
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_easy_reset
+     
+  
+fi
 
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-  old_IFS=$IFS
-  for ac_src in xmlrpc-epi-php.c; do
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
       
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
+    fi
+   ;;
+  esac
 
 
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlrpc"
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
   fi
+
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
   
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlrpc
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
   fi
 
-  XMLRPC_MODULE_TYPE=external
-fi
-
 
+      fi
+    
+  fi
 
-php_enable_xmlwriter=yes
+    ;;
+    esac
+  done
 
-echo $ac_n "checking whether to enable XMLWriter support""... $ac_c" 1>&6
-echo "configure:102037: checking whether to enable XMLWriter support" >&5
-# Check whether --enable-xmlwriter or --disable-xmlwriter was given.
-if test "${enable_xmlwriter+set}" = set; then
-  enableval="$enable_xmlwriter"
-  PHP_XMLWRITER=$enableval
+  echo $ac_n "checking for curl_formget in -lcurl""... $ac_c" 1>&6
+echo "configure:108793: checking for curl_formget in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_formget | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_XMLWRITER=yes
-  test "$PHP_ENABLE_ALL" && PHP_XMLWRITER=$PHP_ENABLE_ALL
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108801 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_formget();
 
+int main() {
+curl_formget()
+; return 0; }
+EOF
+if { (eval echo configure:108812: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_FORMGET 1
+EOF
 
+  
+else
+  echo "$ac_t""no" 1>&6
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_XMLWRITER in
-shared,*)
-  PHP_XMLWRITER=`echo "$PHP_XMLWRITER"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_XMLWRITER=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_formget
+     
+  
+fi
 
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
+  
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-echo "$ac_t""$ext_output" 1>&6
 
+    fi
+   ;;
+  esac
 
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
-if test -z "$PHP_LIBXML_DIR"; then
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
   
-php_with_libxml_dir=no
-
-echo $ac_n "checking libxml2 install dir""... $ac_c" 1>&6
-echo "configure:102082: checking libxml2 install dir" >&5
-# Check whether --with-libxml-dir or --without-libxml-dir was given.
-if test "${with_libxml_dir+set}" = set; then
-  withval="$with_libxml_dir"
-  PHP_LIBXML_DIR=$withval
-else
   
-  PHP_LIBXML_DIR=no
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-fi
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
 
-ext_output=$PHP_LIBXML_DIR
-echo "$ac_t""$ext_output" 1>&6
+      fi
+    
+  fi
 
+    ;;
+    esac
+  done
 
+  echo $ac_n "checking for curl_multi_setopt in -lcurl""... $ac_c" 1>&6
+echo "configure:108942: checking for curl_multi_setopt in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_setopt | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 108950 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_setopt();
 
+int main() {
+curl_multi_setopt()
+; return 0; }
+EOF
+if { (eval echo configure:108961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-if test "$PHP_XMLWRITER" != "no"; then
-
-  if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XMLWriter extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SETOPT 1
+EOF
 
   
-echo $ac_n "checking for xml2-config path""... $ac_c" 1>&6
-echo "configure:102110: checking for xml2-config path" >&5
-if eval "test \"`echo '$''{'ac_cv_php_xml2_config_path'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  for i in $PHP_LIBXML_DIR /usr/local /usr; do
-    if test -x "$i/bin/xml2-config"; then
-      ac_cv_php_xml2_config_path="$i/bin/xml2-config"
-      break
-    fi
-  done
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_setopt
+     
+  
 fi
 
-echo "$ac_t""$ac_cv_php_xml2_config_path" 1>&6
-
-  if test -x "$ac_cv_php_xml2_config_path"; then
-    XML2_CONFIG="$ac_cv_php_xml2_config_path"
-    libxml_full_version=`$XML2_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxml_full_version
-    IFS=$ac_IFS
-    LIBXML_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXML_VERSION" -ge "2006011"; then
-      LIBXML_LIBS=`$XML2_CONFIG --libs`
-      LIBXML_INCS=`$XML2_CONFIG --cflags`
-      
-  for ac_i in $LIBXML_LIBS; do
+		
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+		"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -102160,7 +109024,7 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="$XMLWRITER_SHARED_LIBADD -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -102195,8 +109059,8 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
     
       if test "$ext_shared" = "yes"; then
-        XMLWRITER_SHARED_LIBADD="-L$ai_p $XMLWRITER_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XMLWRITER_SHARED_LIBADD="$ld_runpath_switch$ai_p $XMLWRITER_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -102222,22 +109086,128 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
     esac
   done
 
-      
-  for ac_i in $LIBXML_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
+  echo $ac_n "checking for curl_multi_timeout in -lcurl""... $ac_c" 1>&6
+echo "configure:109091: checking for curl_multi_timeout in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_timeout | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 109099 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_timeout();
+
+int main() {
+curl_multi_timeout()
+; return 0; }
+EOF
+if { (eval echo configure:109110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_TIMEOUT 1
+EOF
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_timeout
+     
+  
+fi
+
+		
+								
+		if test "$PHP_HTTP_CURL_LIBEVENT" != "no"; then
+			
+		extname=event
+		haveext=$PHP_EVENT
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:109151: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_EVENT=1
+				echo "$ac_t""yes" 1>&6
+				
+				echo "configure: warning: event support is incompatible with pecl/event; continuing without libevent support" 1>&2
+			
+			else
+				HTTP_HAVE_EXT_EVENT=
+				echo "$ac_t""no" 1>&6
+				
+				echo $ac_n "checking for event.h""... $ac_c" 1>&6
+echo "configure:109165: checking for event.h" >&5
+				EVENT_DIR=
+				for i in "$PHP_HTTP_CURL_LIBEVENT" /usr/local /usr /opt; do
+					if test -f "$i/include/event.h"; then
+						EVENT_DIR=$i
+						break
+					fi
+				done
+				if test "x$EVENT_DIR" = "x"; then
+					echo "$ac_t""not found" 1>&6
+					echo "configure: warning: continuing without libevent support" 1>&2
+				else
+					echo "$ac_t""found in $EVENT_DIR" 1>&6
+					
+					echo $ac_n "checking for libevent version, roughly""... $ac_c" 1>&6
+echo "configure:109180: checking for libevent version, roughly" >&5
+					EVENT_VER="1.1b or lower"
+					if test -f "$EVENT_DIR/include/evhttp.h" && test -f "$EVENT_DIR/include/evdns.h"; then
+						if test -f "$EVENT_DIR/include/evrpc.h"; then
+							EVENT_VER="1.4 or greater"
+						else
+							EVENT_VER="1.2 or greater"
+						fi
+					fi
+					cat >> confdefs.h <<EOF
+#define HTTP_EVENT_VERSION "$EVENT_VER"
+EOF
+
+					echo "$ac_t""$EVENT_VER" 1>&6
+					
+					echo $ac_n "checking for libcurl version >= 7.16.0""... $ac_c" 1>&6
+echo "configure:109196: checking for libcurl version >= 7.16.0" >&5
+					echo "$ac_t""$CURL_VERSION" 1>&6
+					if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71600; then
+						echo "configure: warning: libcurl version greater or equal to 7.16.0 required; continuing without libevent support" 1>&2
+					else
+						
+  if test "$EVENT_DIR/include" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$EVENT_DIR/include" || echo "$EVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/include
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/include\"`"
   fi
 
     
@@ -102258,464 +109228,120 @@ echo "$ac_t""$ac_cv_php_xml2_config_path
 
   fi
 
-    ;;
-    esac
-  done
-
-
-            echo $ac_n "checking whether libxml build works""... $ac_c" 1>&6
-echo "configure:102268: checking whether libxml build works" >&5
-if eval "test \"`echo '$''{'php_cv_libxml_build_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-        
-  old_LIBS=$LIBS
-  LIBS="
-          $XMLWRITER_SHARED_LIBADD
-         $LIBS"
-  if test "$cross_compiling" = yes; then
-  
-    LIBS=$old_LIBS
-  
-else
-  cat > conftest.$ac_ext <<EOF
-#line 102284 "configure"
-#include "confdefs.h"
+						
 
+  if test "$ext_shared" = "yes"; then
+    HTTP_SHARED_LIBADD="-levent $HTTP_SHARED_LIBADD"
+    if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
+      
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-    char xmlInitParser();
-    int main() {
-      xmlInitParser();
-      return 0;
-    }
-  
-EOF
-if { (eval echo configure:102295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  
-    LIBS=$old_LIBS
-    
-          php_cv_libxml_build_works=yes
-        
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  
-    LIBS=$old_LIBS
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
+  else
     
-          echo "$ac_t""no" 1>&6
-          { echo "configure: error: build test failed.  Please check the config.log for details." 1>&2; exit 1; }
-        
-  
-fi
-rm -fr conftest*
-fi
-
-
-      
-fi
-
-echo "$ac_t""$php_cv_libxml_build_works" 1>&6
-      if test "$php_cv_libxml_build_works" = "yes"; then
-        cat >> confdefs.h <<\EOF
-#define HAVE_LIBXML 1
-EOF
-
-      fi
-      
-    cat >> confdefs.h <<\EOF
-#define HAVE_XMLWRITER 1
-EOF
-
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
-  ext_builddir=ext/xmlwriter
-  ext_srcdir=$abs_srcdir/ext/xmlwriter
-
-  ac_extra=
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
+  fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XMLWRITER_SHARED=no
     
+      if test "$ext_shared" = "yes"; then
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
+      else
+        
   
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
+  fi
 
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
 
+      fi
+    
+  fi
 
-    EXT_STATIC="$EXT_STATIC xmlwriter"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
     fi
   else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XMLWRITER_SHARED=yes
-      
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xmlwriter="$shared_objects_xmlwriter $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxmlwriter.so '$ext_builddir'/phpxmlwriter.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXMLWRITER, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(PHPXMLWRITER_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxmlwriter.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxmlwriter.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxmlwriter.$suffix: $ext_builddir/phpxmlwriter.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxmlwriter.$suffix \$(phplibdir)
-
-$ext_builddir/phpxmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(PHPXMLWRITER_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xmlwriter.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xmlwriter.so '$ext_builddir'/xmlwriter.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XMLWRITER, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xmlwriter) $(XMLWRITER_SHARED_LIBADD)'
-      ;;
-  esac
+    
 
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xmlwriter.$suffix"
+  if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
+    
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+    
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xmlwriter.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xmlwriter"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xmlwriter.$suffix: $ext_builddir/xmlwriter.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xmlwriter.$suffix \$(phplibdir)
-
-$ext_builddir/xmlwriter.$suffix: \$(shared_objects_xmlwriter) \$(XMLWRITER_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XMLWRITER 1
-EOF
-
-    fi
+    
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XMLWRITER_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
+    
       
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC xmlwriter"
-        ;;
-      *)
-        
   
-  case ext/xmlwriter in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xmlwriter"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xmlwriter/"; ac_bdir="ext/xmlwriter/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
   
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
   
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xmlwriter.c; do
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xmlwriter"
   fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
 
 
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xmlwriter
     
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
   fi
 
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XMLWRITER_SHARED_LIBADD"
-
-  
-    else
-      { echo "configure: error: libxml2 version 2.6.11 or greater required." 1>&2; exit 1; }
-    fi
-else 
-    { echo "configure: error: xml2-config not found. Please check your libxml2 installation." 1>&2; exit 1; }
-  
   fi
-
-fi
-
-
-
-php_with_xsl=no
-
-echo $ac_n "checking for XSL support""... $ac_c" 1>&6
-echo "configure:102645: checking for XSL support" >&5
-# Check whether --with-xsl or --without-xsl was given.
-if test "${with_xsl+set}" = set; then
-  withval="$with_xsl"
-  PHP_XSL=$withval
-else
   
-  PHP_XSL=no
-  test "$PHP_ENABLE_ALL" && PHP_XSL=$PHP_ENABLE_ALL
-
-fi
-
-
-
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_XSL in
-shared,*)
-  PHP_XSL=`echo "$PHP_XSL"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_XSL=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
-
-
-
-echo "$ac_t""$ext_output" 1>&6
-
-
-
-
-if test "$PHP_XSL" != "no"; then
-
-  if test "$PHP_LIBXML" = "no"; then
-    { echo "configure: error: XSL extension requires LIBXML extension, add --enable-libxml" 1>&2; exit 1; }
-  fi
   
-  if test "$PHP_DOM" = "no"; then
-    { echo "configure: error: XSL extension requires DOM extension, add --enable-dom" 1>&2; exit 1; }
-  fi
-
-  for i in $PHP_XSL /usr/local /usr; do
-    if test -x "$i/bin/xslt-config"; then
-      XSLT_CONFIG=$i/bin/xslt-config
-      break
-    fi
-  done
+  case event in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-levent $LIBS" 
+   ;;
+  esac
 
-  if test -z "$XSLT_CONFIG"; then
-    { echo "configure: error: xslt-config not found. Please reinstall the libxslt >= 1.1.0 distribution" 1>&2; exit 1; }
-  else
-    libxslt_full_version=`$XSLT_CONFIG --version`
-    ac_IFS=$IFS
-    IFS="."
-    set $libxslt_full_version
-    IFS=$ac_IFS
-    LIBXSLT_VERSION=`expr $1 \* 1000000 + $2 \* 1000 + $3`
-    if test "$LIBXSLT_VERSION" -ge "1001000"; then
-      XSL_LIBS=`$XSLT_CONFIG --libs`
-      XSL_INCS=`$XSLT_CONFIG --cflags`
-      
-  for ac_i in $XSL_LIBS; do
+
+
+
+  fi
+
+
+						cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_EVENT 1
+EOF
+
+						
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+						"
+  
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
     case $ac_i in
     -pthread)
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -pthread"
+        LDFLAGS="$LDFLAGS -pthread"
       else
         
   
@@ -102737,7 +109363,7 @@ if test "$PHP_XSL" != "no"; then
   c|c_r|pthread*) ;;
   *) 
     if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="$XSL_SHARED_LIBADD -l$ac_ii" 
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
     else
       
   
@@ -102772,8 +109398,8 @@ if test "$PHP_XSL" != "no"; then
 
     
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
       else
         
   
@@ -102799,22 +109425,121 @@ if test "$PHP_XSL" != "no"; then
     esac
   done
 
-      
-  for ac_i in $XSL_INCS; do
-    case $ac_i in
-    -I*)
-      ac_ii=`echo $ac_i|cut -c 3-`
-      
-  if test "$ac_ii" != "/usr/include"; then
+  echo $ac_n "checking for curl_multi_socket_action in -lcurl""... $ac_c" 1>&6
+echo "configure:109430: checking for curl_multi_socket_action in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_socket_action | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 109438 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_socket_action();
+
+int main() {
+curl_multi_socket_action()
+; return 0; }
+EOF
+if { (eval echo configure:109449: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SOCKET_ACTION 1
+EOF
+
+  
+else
+  echo "$ac_t""no" 1>&6
+
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_socket_action
+     
+  
+fi
+
+					fi
+				fi
+			
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_EVENT=1
+			echo "$ac_t""yes" 1>&6
+			
+				echo "configure: warning: event support is incompatible with pecl/event; continuing without libevent support" 1>&2
+			
+		else
+			HTTP_HAVE_EXT_EVENT=
+			echo "$ac_t""no" 1>&6
+			
+				echo $ac_n "checking for event.h""... $ac_c" 1>&6
+echo "configure:109497: checking for event.h" >&5
+				EVENT_DIR=
+				for i in "$PHP_HTTP_CURL_LIBEVENT" /usr/local /usr /opt; do
+					if test -f "$i/include/event.h"; then
+						EVENT_DIR=$i
+						break
+					fi
+				done
+				if test "x$EVENT_DIR" = "x"; then
+					echo "$ac_t""not found" 1>&6
+					echo "configure: warning: continuing without libevent support" 1>&2
+				else
+					echo "$ac_t""found in $EVENT_DIR" 1>&6
+					
+					echo $ac_n "checking for libevent version, roughly""... $ac_c" 1>&6
+echo "configure:109512: checking for libevent version, roughly" >&5
+					EVENT_VER="1.1b or lower"
+					if test -f "$EVENT_DIR/include/evhttp.h" && test -f "$EVENT_DIR/include/evdns.h"; then
+						if test -f "$EVENT_DIR/include/evrpc.h"; then
+							EVENT_VER="1.4 or greater"
+						else
+							EVENT_VER="1.2 or greater"
+						fi
+					fi
+					cat >> confdefs.h <<EOF
+#define HTTP_EVENT_VERSION "$EVENT_VER"
+EOF
+
+					echo "$ac_t""$EVENT_VER" 1>&6
+					
+					echo $ac_n "checking for libcurl version >= 7.16.0""... $ac_c" 1>&6
+echo "configure:109528: checking for libcurl version >= 7.16.0" >&5
+					echo "$ac_t""$CURL_VERSION" 1>&6
+					if test `echo $CURL_VERSION | $SED -e 's/[^0-9]/ /g' | $AWK '{print $1*10000 + $2*100 + $3}'` -lt 71600; then
+						echo "configure: warning: libcurl version greater or equal to 7.16.0 required; continuing without libevent support" 1>&2
+					else
+						
+  if test "$EVENT_DIR/include" != "/usr/include"; then
     
-  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
-    ai_p=$ac_ii
+  if test -z "$EVENT_DIR/include" || echo "$EVENT_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/include
   else
     
-    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/include\"`"
   fi
 
     
@@ -102835,45 +109560,28 @@ if test "$PHP_XSL" != "no"; then
 
   fi
 
-    ;;
-    esac
-  done
-
-      
-      echo $ac_n "checking for EXSLT support""... $ac_c" 1>&6
-echo "configure:102845: checking for EXSLT support" >&5
-      for i in $PHP_XSL /usr/local /usr; do
-        if test -r "$i/include/libexslt/exslt.h"; then
-          PHP_XSL_EXSL_DIR=$i
-          break
-        fi
-      done
-      if test -z "$PHP_XSL_EXSL_DIR"; then
-        echo "$ac_t""not found" 1>&6
-      else 
-        echo "$ac_t""found" 1>&6
-        
+						
 
   if test "$ext_shared" = "yes"; then
-    XSL_SHARED_LIBADD="-lexslt $XSL_SHARED_LIBADD"
-    if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+    HTTP_SHARED_LIBADD="-levent $HTTP_SHARED_LIBADD"
+    if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
       
-  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        XSL_SHARED_LIBADD="-L$ai_p $XSL_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && XSL_SHARED_LIBADD="$ld_runpath_switch$ai_p $XSL_SHARED_LIBADD"
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
       else
         
   
@@ -102899,18 +109607,18 @@ echo "configure:102845: checking for EXS
   else
     
 
-  if test -n "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR"; then
+  if test -n "$EVENT_DIR/$PHP_LIBDIR"; then
     
-  if test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$EVENT_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" || echo "$PHP_XSL_EXSL_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/$PHP_LIBDIR
+  if test -z "$EVENT_DIR/$PHP_LIBDIR" || echo "$EVENT_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$EVENT_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $EVENT_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$EVENT_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -102921,542 +109629,265 @@ echo "configure:102845: checking for EXS
   
   cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "LIBPATH$unique=set"
-    
-    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
-    LDFLAGS="$LDFLAGS -L$ai_p"
-    PHP_RPATHS="$PHP_RPATHS $ai_p"
-  
-  fi
-
-
-    
-  fi
-
-  fi
-  
-  
-  case exslt in
-  c|c_r|pthread*) ;;
-  *) 
-      LIBS="-lexslt $LIBS" 
-   ;;
-  esac
-
-
-
-
-  fi
-
-
-        
-  if test "$PHP_XSL_EXSL_DIR/include" != "/usr/include"; then
-    
-  if test -z "$PHP_XSL_EXSL_DIR/include" || echo "$PHP_XSL_EXSL_DIR/include" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_XSL_EXSL_DIR/include
-  else
-    
-    ep_dir="`echo $PHP_XSL_EXSL_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
-    
-    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_XSL_EXSL_DIR/include\"`"
-  fi
-
-    
-  
-  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
-  
-  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
-  if test -n "$unique" && test "`eval $cmd`" = "" ; then
-    eval "INCLUDEPATH$unique=set"
-    
-      if test ""; then
-        INCLUDES="-I$ai_p $INCLUDES"
-      else
-        INCLUDES="$INCLUDES -I$ai_p"
-      fi
-    
-  fi
-
-  fi
-
-        cat >> confdefs.h <<\EOF
-#define HAVE_XSL_EXSLT 1
-EOF
-
-      fi
-    else
-      { echo "configure: error: libxslt version 1.1.0 or greater required." 1>&2; exit 1; }
-    fi
-    
-  
-  fi
-  
-  cat >> confdefs.h <<\EOF
-#define HAVE_XSL 1
-EOF
-
-  
-  ext_builddir=ext/xsl
-  ext_srcdir=$abs_srcdir/ext/xsl
-
-  ac_extra=
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_XSL_SHARED=no
-    
-  
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-    EXT_STATIC="$EXT_STATIC xsl"
-    if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
-    fi
-  else
-    if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_XSL_SHARED=yes
-      
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$shared_c_pre
-  b_cxx_pre=$shared_cxx_pre
-  b_c_meta=$shared_c_meta
-  b_cxx_meta=$shared_cxx_meta
-  b_c_post=$shared_c_post
-  b_cxx_post=$shared_cxx_post
-  b_lo=$shared_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      shared_objects_xsl="$shared_objects_xsl $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-      case $host_alias in
-        *netware*)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpxsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpxsl.so '$ext_builddir'/phpxsl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPXSL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(PHPXSL_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpxsl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpxsl.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpxsl.$suffix: $ext_builddir/phpxsl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpxsl.$suffix \$(phplibdir)
-
-$ext_builddir/phpxsl.$suffix: \$(shared_objects_xsl) \$(PHPXSL_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-        *)
-          
-  install_modules="install-modules"
-
-  case $host_alias in
-    *aix*)
-      suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/xsl.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/xsl.so '$ext_builddir'/xsl.so'
-      ;;
-    *netware*)
-      suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(XSL, 3)_SHARED_LIBADD)'
-      ;;
-    *)
-      suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_xsl) $(XSL_SHARED_LIBADD)'
-      ;;
-  esac
-
-  if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/xsl.$suffix"
-  else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/xsl.$suffix"
-  fi
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_xsl"
-
-  cat >>Makefile.objects<<EOF
-\$(phplibdir)/xsl.$suffix: $ext_builddir/xsl.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/xsl.$suffix \$(phplibdir)
-
-$ext_builddir/xsl.$suffix: \$(shared_objects_xsl) \$(XSL_SHARED_DEPENDENCIES)
-	$link_cmd
-
-EOF
-
-          ;;
-      esac
-      cat >> confdefs.h <<EOF
-#define COMPILE_DL_XSL 1
-EOF
-
-    fi
-  fi
-
-  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_XSL_SHARED=no
-    case "$PHP_SAPI" in
-      cgi|embed)
-        
-  
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_GLOBAL_OBJS="$PHP_GLOBAL_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        EXT_STATIC="$EXT_STATIC xsl"
-        ;;
-      *)
-        
-  
-  case ext/xsl in
-  "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/xsl"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/xsl/"; ac_bdir="ext/xsl/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
-  esac
-  
-  
-
-  b_c_pre=$php_c_pre
-  b_cxx_pre=$php_cxx_pre
-  b_c_meta=$php_c_meta
-  b_cxx_meta=$php_cxx_meta
-  b_c_post=$php_c_post
-  b_cxx_post=$php_cxx_post
-  b_lo=$php_lo
-
-
-  old_IFS=$IFS
-  for ac_src in php_xsl.c xsltprocessor.c; do
-  
-      IFS=.
-      set $ac_src
-      ac_obj=$1
-      IFS=$old_IFS
-      
-      PHP_CLI_OBJS="$PHP_CLI_OBJS $ac_bdir$ac_obj.lo"
-
-      case $ac_src in
-        *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.s) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.S) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
-        *.cpp|*.cc|*.cxx) ac_comp="$b_cxx_pre $ac_extra $ac_inc $b_cxx_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_cxx_post" ;;
-      esac
-
-    cat >>Makefile.objects<<EOF
-$ac_bdir$ac_obj.lo: $ac_srcdir$ac_src
-	$ac_comp
-EOF
-  done
-
-
-        ;;
-    esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC xsl"
-  fi
-  
-  
-    BUILD_DIR="$BUILD_DIR $ext_builddir"
-  
-
-
-  if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=xsl
-    
-  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
-
-  fi
-
-  
-  PHP_VAR_SUBST="$PHP_VAR_SUBST XSL_SHARED_LIBADD"
-
-  
-  am_i_shared=$PHP_XSL_SHARED
-  is_it_shared=$PHP_LIBXML_SHARED
-  is_it_enabled=$PHP_LIBXML
-  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
-    { echo "configure: error: 
-You've configured extension xsl to build statically, but it
-depends on extension libxml, which you've configured to build shared.
-You either need to build xsl shared or build libxml statically for the
-build to be successful.
-" 1>&2; exit 1; }
-  fi
-  if test "x$is_it_enabled" = "xno" && test "x" != "xtrue"; then
-    { echo "configure: error: 
-You've configured extension xsl, which depends on extension libxml,
-but you've either not enabled libxml, or have disabled it.
-" 1>&2; exit 1; }
-  fi
-  
-fi
-
-
-
-php_enable_zip=no
-
-echo $ac_n "checking for zip archive read/writesupport""... $ac_c" 1>&6
-echo "configure:103321: checking for zip archive read/writesupport" >&5
-# Check whether --enable-zip or --disable-zip was given.
-if test "${enable_zip+set}" = set; then
-  enableval="$enable_zip"
-  PHP_ZIP=$enableval
-else
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
   
-  PHP_ZIP=no
-  test "$PHP_ENABLE_ALL" && PHP_ZIP=$PHP_ENABLE_ALL
-
-fi
+  fi
 
 
+    
+  fi
 
-ext_output="yes, shared"
-ext_shared=yes
-case $PHP_ZIP in
-shared,*)
-  PHP_ZIP=`echo "$PHP_ZIP"|$SED 's/^shared,//'`
-  ;;
-shared)
-  PHP_ZIP=yes
-  ;;
-no)
-  ext_output=no
-  ext_shared=no
-  ;;
-*)
-  ext_output=yes
-  ext_shared=no
-  ;;
-esac
+  fi
+  
+  
+  case event in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="-levent $LIBS" 
+   ;;
+  esac
 
 
 
-echo "$ac_t""$ext_output" 1>&6
 
+  fi
 
 
+						cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_EVENT 1
+EOF
 
-if test -z "$PHP_ZLIB_DIR"; then
+						
+  save_old_LDFLAGS=$LDFLAGS
+  ac_stuff="$CURL_LIBS -L$CURL_DIR/$PHP_LIBDIR
+						"
   
-php_with_zlib_dir=no
+  save_ext_shared=$ext_shared
+  ext_shared=yes
+  
+  for ac_i in $ac_stuff; do
+    case $ac_i in
+    -pthread)
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -pthread"
+      else
+        
+  
+  unique=`echo $ac_i|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$EXTRA_LDFLAGS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "EXTRA_LDFLAGS$unique=set"
+    EXTRA_LDFLAGS="$EXTRA_LDFLAGS $ac_i"
+  fi
 
-echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:103366: checking for the location of libz" >&5
-# Check whether --with-zlib-dir or --without-zlib-dir was given.
-if test "${with_zlib_dir+set}" = set; then
-  withval="$with_zlib_dir"
-  PHP_ZLIB_DIR=$withval
-else
+      fi
+    ;;
+    -l*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
   
-  PHP_ZLIB_DIR=no
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+    if test "$ext_shared" = "yes"; then
+        LDFLAGS="$LDFLAGS -l$ac_ii" 
+    else
+      
   
+  case $ac_ii in
+  c|c_r|pthread*) ;;
+  *) 
+      LIBS="$LIBS -l$ac_ii" 
+   ;;
+  esac
 
-fi
 
+    fi
+   ;;
+  esac
 
-ext_output=$PHP_ZLIB_DIR
-echo "$ac_t""$ext_output" 1>&6
 
+    ;;
+    -L*)
+      ac_ii=`echo $ac_i|cut -c 3-`
+      
+  if test "$ac_ii" != "/usr/$PHP_LIBDIR" && test "$ac_ii" != "/usr/lib"; then
+    
+  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
+    ai_p=$ac_ii
+  else
+    
+    ep_dir="`echo $ac_ii|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
+  fi
 
+    
+      if test "$ext_shared" = "yes"; then
+        LDFLAGS="-L$ai_p $LDFLAGS"
+        test -n "$ld_runpath_switch" && LDFLAGS="$ld_runpath_switch$ai_p $LDFLAGS"
+      else
+        
+  
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBPATH$unique=set"
+    
+    test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
+    LDFLAGS="$LDFLAGS -L$ai_p"
+    PHP_RPATHS="$PHP_RPATHS $ai_p"
+  
+  fi
 
-fi
 
+      fi
+    
+  fi
 
-php_with_pcre_dir=no
+    ;;
+    esac
+  done
 
-echo $ac_n "checking pcre install prefix""... $ac_c" 1>&6
-echo "configure:103390: checking pcre install prefix" >&5
-# Check whether --with-pcre-dir or --without-pcre-dir was given.
-if test "${with_pcre_dir+set}" = set; then
-  withval="$with_pcre_dir"
-  PHP_PCRE_DIR=$withval
+  echo $ac_n "checking for curl_multi_socket_action in -lcurl""... $ac_c" 1>&6
+echo "configure:109762: checking for curl_multi_socket_action in -lcurl" >&5
+ac_lib_var=`echo curl'_'curl_multi_socket_action | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
 else
-  
-  PHP_PCRE_DIR=no
-  
+  ac_save_LIBS="$LIBS"
+LIBS="-lcurl  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 109770 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char curl_multi_socket_action();
 
+int main() {
+curl_multi_socket_action()
+; return 0; }
+EOF
+if { (eval echo configure:109781: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
 fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    cat >> confdefs.h <<\EOF
+#define HAVE_CURL_MULTI_SOCKET_ACTION 1
+EOF
 
-ext_output=$PHP_PCRE_DIR
-echo "$ac_t""$ext_output" 1>&6
-
-
+  
+else
+  echo "$ac_t""no" 1>&6
 
+    LDFLAGS=$save_old_LDFLAGS
+    ext_shared=$save_ext_shared
+    unset ac_cv_lib_curl_curl_multi_socket_action
+     
+  
+fi
 
-if test "$PHP_ZIP" != "no"; then
+					fi
+				fi
+			
+		fi
+	
+		fi
+	fi
 
-  if test "$PHP_ZLIB_DIR" != "no" && test "$PHP_ZLIB_DIR" != "yes"; then
-    if test -f "$PHP_ZLIB_DIR/include/zlib/zlib.h"; then
-      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
-      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include/zlib"
-    elif test -f "$PHP_ZLIB_DIR/include/zlib.h"; then
-      PHP_ZLIB_DIR="$PHP_ZLIB_DIR"
-      PHP_ZLIB_INCDIR="$PHP_ZLIB_DIR/include"
-    else
-      { echo "configure: error: Can not find zlib headers under "$PHP_ZLIB_DIR"" 1>&2; exit 1; }
-    fi
+	if test "$PHP_HTTP_MAGIC_MIME" != "no"; then
+		echo $ac_n "checking for magic.h""... $ac_c" 1>&6
+echo "configure:109824: checking for magic.h" >&5
+		MAGIC_DIR=
+		for i in "$PHP_HTTP_MAGIC_MIME" /usr/local /usr /opt; do
+			if test -f "$i/include/magic.h"; then
+				MAGIC_DIR=$i
+				break
+			fi
+		done
+		if test "x$MAGIC_DIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+			{ echo "configure: error: could not find magic.h" 1>&2; exit 1; }
+		else
+			echo "$ac_t""found in $MAGIC_DIR" 1>&6
+		fi
+		
+		
+  if test "$MAGIC_DIR/include" != "/usr/include"; then
+    
+  if test -z "$MAGIC_DIR/include" || echo "$MAGIC_DIR/include" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/include
   else
-    for i in /usr/local /usr; do
-      if test -f "$i/include/zlib/zlib.h"; then
-        PHP_ZLIB_DIR="$i"
-        PHP_ZLIB_INCDIR="$i/include/zlib"
-      elif test -f "$i/include/zlib.h"; then
-        PHP_ZLIB_DIR="$i"
-        PHP_ZLIB_INCDIR="$i/include"
-      fi
-    done
+    
+    ep_dir="`echo $MAGIC_DIR/include|$SED 's%/*[^/][^/]*/*$%%'`"
+    
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/include\"`"
   fi
 
-    echo $ac_n "checking for the location of zlib""... $ac_c" 1>&6
-echo "configure:103434: checking for the location of zlib" >&5
-  if test "$PHP_ZLIB_DIR" = "no"; then
-    { echo "configure: error: zip support requires ZLIB. Use --with-zlib-dir=<DIR> to specify prefix where ZLIB include and library are located" 1>&2; exit 1; }
-  else
-    echo "$ac_t""$PHP_ZLIB_DIR" 1>&6
     
+  
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
+
+  fi
+
+		
 
   if test "$ext_shared" = "yes"; then
-    ZIP_SHARED_LIBADD="-lz $ZIP_SHARED_LIBADD"
-    if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+    HTTP_SHARED_LIBADD="-lmagic $HTTP_SHARED_LIBADD"
+    if test -n "$MAGIC_DIR/$PHP_LIBDIR"; then
       
-  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  if test -z "$MAGIC_DIR/$PHP_LIBDIR" || echo "$MAGIC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MAGIC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
       if test "$ext_shared" = "yes"; then
-        ZIP_SHARED_LIBADD="-L$ai_p $ZIP_SHARED_LIBADD"
-        test -n "$ld_runpath_switch" && ZIP_SHARED_LIBADD="$ld_runpath_switch$ai_p $ZIP_SHARED_LIBADD"
+        HTTP_SHARED_LIBADD="-L$ai_p $HTTP_SHARED_LIBADD"
+        test -n "$ld_runpath_switch" && HTTP_SHARED_LIBADD="$ld_runpath_switch$ai_p $HTTP_SHARED_LIBADD"
       else
         
   
@@ -103482,18 +109913,18 @@ echo "configure:103434: checking for the
   else
     
 
-  if test -n "$PHP_ZLIB_DIR/$PHP_LIBDIR"; then
+  if test -n "$MAGIC_DIR/$PHP_LIBDIR"; then
     
-  if test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$PHP_ZLIB_DIR/$PHP_LIBDIR" != "/usr/lib"; then
+  if test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/$PHP_LIBDIR" && test "$MAGIC_DIR/$PHP_LIBDIR" != "/usr/lib"; then
     
-  if test -z "$PHP_ZLIB_DIR/$PHP_LIBDIR" || echo "$PHP_ZLIB_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_DIR/$PHP_LIBDIR
+  if test -z "$MAGIC_DIR/$PHP_LIBDIR" || echo "$MAGIC_DIR/$PHP_LIBDIR" | grep '^/' >/dev/null ; then
+    ai_p=$MAGIC_DIR/$PHP_LIBDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $MAGIC_DIR/$PHP_LIBDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_DIR/$PHP_LIBDIR\"`"
+    ai_p="$ep_realdir/`basename \"$MAGIC_DIR/$PHP_LIBDIR\"`"
   fi
 
     
@@ -103519,10 +109950,10 @@ echo "configure:103434: checking for the
   fi
   
   
-  case z in
+  case magic in
   c|c_r|pthread*) ;;
   *) 
-      LIBS="-lz $LIBS" 
+      LIBS="-lmagic $LIBS" 
    ;;
   esac
 
@@ -103532,17 +109963,57 @@ echo "configure:103434: checking for the
   fi
 
 
+		cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_MAGIC 1
+EOF
+
+	fi
+
+	
+		extname=hash
+		haveext=$PHP_HASH
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:109978: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_HASH=1
+				echo "$ac_t""yes" 1>&6
+				
+		echo $ac_n "checking for php_hash.h""... $ac_c" 1>&6
+echo "configure:109986: checking for php_hash.h" >&5
+		HTTP_EXT_HASH_INCDIR=
+		for i in `echo $INCLUDES | $SED -e's/-I//g'` $abs_srcdir ../hash; do
+			if test -d $i; then
+				if test -f $i/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i
+					break
+				elif test -f $i/ext/hash/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i/ext/hash
+					break
+				fi
+			fi
+		done
+		if test "x$HTTP_EXT_HASH_INCDIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$HTTP_EXT_HASH_INCDIR" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_PHP_HASH_H 1
+EOF
+
+			
+  if test "$HTTP_EXT_HASH_INCDIR" != "/usr/include"; then
     
-  if test "$PHP_ZLIB_INCDIR" != "/usr/include"; then
-    
-  if test -z "$PHP_ZLIB_INCDIR" || echo "$PHP_ZLIB_INCDIR" | grep '^/' >/dev/null ; then
-    ai_p=$PHP_ZLIB_INCDIR
+  if test -z "$HTTP_EXT_HASH_INCDIR" || echo "$HTTP_EXT_HASH_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$HTTP_EXT_HASH_INCDIR
   else
     
-    ep_dir="`echo $PHP_ZLIB_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
+    ep_dir="`echo $HTTP_EXT_HASH_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
     ep_realdir="`(cd \"$ep_dir\" && pwd)`"
-    ai_p="$ep_realdir/`basename \"$PHP_ZLIB_INCDIR\"`"
+    ai_p="$ep_realdir/`basename \"$HTTP_EXT_HASH_INCDIR\"`"
   fi
 
     
@@ -103563,97 +110034,160 @@ echo "configure:103434: checking for the
 
   fi
 
-  fi
-
-    old_CPPFLAGS=$CPPFLAGS
-  CPPFLAGS=$INCLUDES
-  cat > conftest.$ac_ext <<EOF
-#line 103572 "configure"
-#include "confdefs.h"
-
-#include <main/php_config.h>
-#if defined(HAVE_BUNDLED_PCRE) && !defined(COMPILE_DL_PCRE)
-yes
-#endif
-  
+		fi
+	
+			else
+				HTTP_HAVE_EXT_HASH=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_HASH=1
+			echo "$ac_t""yes" 1>&6
+			
+		echo $ac_n "checking for php_hash.h""... $ac_c" 1>&6
+echo "configure:110050: checking for php_hash.h" >&5
+		HTTP_EXT_HASH_INCDIR=
+		for i in `echo $INCLUDES | $SED -e's/-I//g'` $abs_srcdir ../hash; do
+			if test -d $i; then
+				if test -f $i/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i
+					break
+				elif test -f $i/ext/hash/php_hash.h; then
+					HTTP_EXT_HASH_INCDIR=$i/ext/hash
+					break
+				fi
+			fi
+		done
+		if test "x$HTTP_EXT_HASH_INCDIR" = "x"; then
+			echo "$ac_t""not found" 1>&6
+		else
+			echo "$ac_t""$HTTP_EXT_HASH_INCDIR" 1>&6
+			cat >> confdefs.h <<\EOF
+#define HTTP_HAVE_PHP_HASH_H 1
 EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
-    PHP_PCRE_REGEX=yes
-  
-else
-  rm -rf conftest*
-  
-    cat > conftest.$ac_ext <<EOF
-#line 103591 "configure"
-#include "confdefs.h"
 
-#include <main/php_config.h>
-#if defined(HAVE_PCRE) && !defined(COMPILE_DL_PCRE)
-yes
-#endif
+			
+  if test "$HTTP_EXT_HASH_INCDIR" != "/usr/include"; then
     
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "yes" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
-      PHP_PCRE_REGEX=pecl
+  if test -z "$HTTP_EXT_HASH_INCDIR" || echo "$HTTP_EXT_HASH_INCDIR" | grep '^/' >/dev/null ; then
+    ai_p=$HTTP_EXT_HASH_INCDIR
+  else
     
-else
-  rm -rf conftest*
-  
-      PHP_PCRE_REGEX=no
+    ep_dir="`echo $HTTP_EXT_HASH_INCDIR|$SED 's%/*[^/][^/]*/*$%%'`"
     
-fi
-rm -f conftest*
+    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
+    ai_p="$ep_realdir/`basename \"$HTTP_EXT_HASH_INCDIR\"`"
+  fi
 
+    
   
-fi
-rm -f conftest*
+  unique=`echo $ai_p|$SED 's/[^a-zA-Z0-9]/_/g'`
+  
+  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INCLUDEPATH$unique=set"
+    
+      if test ""; then
+        INCLUDES="-I$ai_p $INCLUDES"
+      else
+        INCLUDES="$INCLUDES -I$ai_p"
+      fi
+    
+  fi
 
-  CPPFLAGS=$old_CPPFLAGS
+  fi
 
-  PHP_ZIP_SOURCES="$PHP_ZIP_SOURCES lib/zip_add.c lib/zip_error.c lib/zip_fclose.c \
-                         lib/zip_fread.c lib/zip_open.c lib/zip_source_filep.c  \
-                         lib/zip_strerror.c lib/zip_close.c lib/zip_error_get.c \
-                         lib/zip_file_error_get.c lib/zip_free.c lib/zip_rename.c \
-                         lib/zip_source_free.c lib/zip_unchange_all.c lib/zip_delete.c \
-                         lib/zip_error_get_sys_type.c lib/zip_file_get_offset.c \
-                         lib/zip_get_name.c lib/zip_replace.c lib/zip_source_function.c \
-                         lib/zip_unchange.c lib/zip_dirent.c lib/zip_error_strerror.c \
-                         lib/zip_filerange_crc.c lib/zip_file_strerror.c lib/zip_get_num_files.c \
-                         lib/zip_get_archive_flag.c lib/zip_set_archive_flag.c \
-                         lib/zip_set_name.c lib/zip_source_zip.c lib/zip_unchange_data.c \
-                         lib/zip_entry_free.c lib/zip_error_to_str.c lib/zip_fopen.c \
-                         lib/zip_name_locate.c lib/zip_source_buffer.c lib/zip_stat.c \
-                         lib/zip_entry_new.c lib/zip_err_str.c lib/zip_fopen_index.c \
-                         lib/zip_get_archive_comment.c lib/zip_get_file_comment.c \
-                         lib/zip_new.c lib/zip_source_file.c lib/zip_stat_index.c \
-                         lib/zip_set_archive_comment.c lib/zip_set_file_comment.c \
-                         lib/zip_unchange_archive.c lib/zip_memdup.c lib/zip_stat_init.c lib/zip_add_dir.c \
-                         lib/zip_error_clear.c lib/zip_file_error_clear.c"
+		fi
+	
+		else
+			HTTP_HAVE_EXT_HASH=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
 
-  cat >> confdefs.h <<\EOF
-#define HAVE_ZIP 1
-EOF
+	
+		extname=iconv
+		haveext=$PHP_ICONV
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:110116: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_ICONV=1
+				echo "$ac_t""yes" 1>&6
+				
+			else
+				HTTP_HAVE_EXT_ICONV=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_ICONV=1
+			echo "$ac_t""yes" 1>&6
+			
+		else
+			HTTP_HAVE_EXT_ICONV=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
 
-  
-  ext_builddir=ext/zip
-  ext_srcdir=$abs_srcdir/ext/zip
+	
+		extname=session
+		haveext=$PHP_SESSION
+		
+		echo $ac_n "checking for ext/$extname support""... $ac_c" 1>&6
+echo "configure:110144: checking for ext/$extname support" >&5
+		if test -x "$PHP_EXECUTABLE"; then
+			grepext=`$PHP_EXECUTABLE -m | $EGREP ^$extname\$`
+			if test "$grepext" = "$extname"; then
+				HTTP_HAVE_EXT_SESSION=1
+				echo "$ac_t""yes" 1>&6
+				
+			else
+				HTTP_HAVE_EXT_SESSION=
+				echo "$ac_t""no" 1>&6
+				
+			fi
+		elif test "$haveext" != "no" && test "x$haveext" != "x"; then
+			HTTP_HAVE_EXT_SESSION=1
+			echo "$ac_t""yes" 1>&6
+			
+		else
+			HTTP_HAVE_EXT_SESSION=
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+
+	PHP_HTTP_SOURCES="missing.c http.c http_functions.c phpstr/phpstr.c \
+		http_util_object.c http_message_object.c http_request_object.c http_request_pool_api.c \
+		http_response_object.c http_exception_object.c http_requestpool_object.c \
+		http_api.c http_cache_api.c http_request_api.c http_request_info.c http_date_api.c \
+		http_headers_api.c http_message_api.c http_send_api.c http_url_api.c \
+		http_info_api.c http_request_method_api.c http_encoding_api.c \
+		http_filter_api.c http_request_body_api.c http_querystring_object.c \
+		http_deflatestream_object.c http_inflatestream_object.c http_cookie_api.c \
+		http_querystring_api.c http_request_datashare_api.c http_requestdatashare_object.c \
+		http_persistent_handle_api.c"
+	
+	
+  ext_builddir=ext/http
+  ext_srcdir=$abs_srcdir/ext/http
 
   ac_extra=
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" != "cli"; then
-    PHP_ZIP_SHARED=no
+    PHP_HTTP_SHARED=no
     
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103668,7 +110202,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103691,18 +110225,18 @@ EOF
   done
 
 
-    EXT_STATIC="$EXT_STATIC zip"
+    EXT_STATIC="$EXT_STATIC http"
     if test "$ext_shared" != "nocli"; then
-      EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+      EXT_CLI_STATIC="$EXT_CLI_STATIC http"
     fi
   else
     if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
-      PHP_ZIP_SHARED=yes
+      PHP_HTTP_SHARED=yes
       
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103717,14 +110251,14 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
       ac_obj=$1
       IFS=$old_IFS
       
-      shared_objects_zip="$shared_objects_zip $ac_bdir$ac_obj.lo"
+      shared_objects_http="$shared_objects_http $ac_bdir$ac_obj.lo"
 
       case $ac_src in
         *.c) ac_comp="$b_c_pre $ac_extra $ac_inc $b_c_meta -c $ac_srcdir$ac_src -o $ac_bdir$ac_obj.$b_lo $b_c_post" ;;
@@ -103747,31 +110281,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phpzip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phpzip.so '$ext_builddir'/phpzip.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/phphttp.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(PHPHTTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/phphttp.so '$ext_builddir'/phphttp.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPZIP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(PHPHTTP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(PHPZIP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(PHPHTTP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phpzip.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/phphttp.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phpzip.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/phphttp.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_http"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/phpzip.$suffix: $ext_builddir/phpzip.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/phpzip.$suffix \$(phplibdir)
+\$(phplibdir)/phphttp.$suffix: $ext_builddir/phphttp.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/phphttp.$suffix \$(phplibdir)
 
-$ext_builddir/phpzip.$suffix: \$(shared_objects_zip) \$(PHPZIP_SHARED_DEPENDENCIES)
+$ext_builddir/phphttp.$suffix: \$(shared_objects_http) \$(PHPHTTP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -103784,31 +110318,31 @@ EOF
   case $host_alias in
     *aix*)
       suffix=so
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/zip.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/zip.so '$ext_builddir'/zip.so'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -Wl,-G -o '$ext_builddir'/http.la -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(HTTP_SHARED_LIBADD) && mv -f '$ext_builddir'/.libs/http.so '$ext_builddir'/http.so'
       ;;
     *netware*)
       suffix=nlm
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(ZIP, 3)_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -shared -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) -L$(top_builddir)/netware -lphp5lib $(M4_SUBSTR(HTTP, 3)_SHARED_LIBADD)'
       ;;
     *)
       suffix=la
-      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_zip) $(ZIP_SHARED_LIBADD)'
+      link_cmd='$(LIBTOOL) --mode=link $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) $(LDFLAGS) -o $@ -export-dynamic -avoid-version -prefer-pic -module -rpath $(phplibdir) $(EXTRA_LDFLAGS) $(shared_objects_http) $(HTTP_SHARED_LIBADD)'
       ;;
   esac
 
   if test "x" = "xyes"; then
-    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/zip.$suffix"
+    PHP_ZEND_EX="$PHP_ZEND_EX \$(phplibdir)/http.$suffix"
   else
-    PHP_MODULES="$PHP_MODULES \$(phplibdir)/zip.$suffix"
+    PHP_MODULES="$PHP_MODULES \$(phplibdir)/http.$suffix"
   fi
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_zip"
+  PHP_VAR_SUBST="$PHP_VAR_SUBST shared_objects_http"
 
   cat >>Makefile.objects<<EOF
-\$(phplibdir)/zip.$suffix: $ext_builddir/zip.$suffix
-	\$(LIBTOOL) --mode=install cp $ext_builddir/zip.$suffix \$(phplibdir)
+\$(phplibdir)/http.$suffix: $ext_builddir/http.$suffix
+	\$(LIBTOOL) --mode=install cp $ext_builddir/http.$suffix \$(phplibdir)
 
-$ext_builddir/zip.$suffix: \$(shared_objects_zip) \$(ZIP_SHARED_DEPENDENCIES)
+$ext_builddir/http.$suffix: \$(shared_objects_http) \$(HTTP_SHARED_DEPENDENCIES)
 	$link_cmd
 
 EOF
@@ -103816,22 +110350,22 @@ EOF
           ;;
       esac
       cat >> confdefs.h <<EOF
-#define COMPILE_DL_ZIP 1
+#define COMPILE_DL_HTTP 1
 EOF
 
     fi
   fi
 
   if test "$ext_shared" != "shared" && test "$ext_shared" != "yes" && test "" = "cli"; then
-    PHP_ZIP_SHARED=no
+    PHP_HTTP_SHARED=no
     case "$PHP_SAPI" in
       cgi|embed)
         
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103846,7 +110380,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103869,15 +110403,15 @@ EOF
   done
 
 
-        EXT_STATIC="$EXT_STATIC zip"
+        EXT_STATIC="$EXT_STATIC http"
         ;;
       *)
         
   
-  case ext/zip in
+  case ext/http in
   "") ac_srcdir="$abs_srcdir/"; unset ac_bdir; ac_inc="-I. -I$abs_srcdir" ;;
-  /*) ac_srcdir=`echo "ext/zip"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
-  *) ac_srcdir="$abs_srcdir/ext/zip/"; ac_bdir="ext/zip/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
+  /*) ac_srcdir=`echo "ext/http"|cut -c 2-`"/"; ac_bdir=$ac_srcdir; ac_inc="-I$ac_bdir -I$abs_srcdir/$ac_bdir" ;;
+  *) ac_srcdir="$abs_srcdir/ext/http/"; ac_bdir="ext/http/"; ac_inc="-I$ac_bdir -I$ac_srcdir" ;;
   esac
   
   
@@ -103892,7 +110426,7 @@ EOF
 
 
   old_IFS=$IFS
-  for ac_src in php_zip.c zip_stream.c $PHP_ZIP_SOURCES; do
+  for ac_src in $PHP_HTTP_SOURCES; do
   
       IFS=.
       set $ac_src
@@ -103917,7 +110451,7 @@ EOF
 
         ;;
     esac
-    EXT_CLI_STATIC="$EXT_CLI_STATIC zip"
+    EXT_CLI_STATIC="$EXT_CLI_STATIC http"
   fi
   
   
@@ -103926,26 +110460,172 @@ EOF
 
 
   if test "$ext_builddir" = "."; then
-    PHP_PECL_EXTENSION=zip
+    PHP_PECL_EXTENSION=http
     
   PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PECL_EXTENSION"
 
   fi
 
+	
+		
+		extname=hash
+		haveext=$HTTP_HAVE_EXT_HASH
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:110476: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_HASH_SHARED
+  is_it_enabled=$PHP_HASH
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension hash, which you've configured to build shared.
+You either need to build http shared or build hash statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension hash,
+but you've either not enabled hash, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+		extname=iconv
+		haveext=$HTTP_HAVE_EXT_ICONV
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:110514: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_ICONV_SHARED
+  is_it_enabled=$PHP_ICONV
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension iconv, which you've configured to build shared.
+You either need to build http shared or build iconv statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension iconv,
+but you've either not enabled iconv, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+		extname=session
+		haveext=$HTTP_HAVE_EXT_SESSION
+		
+		echo $ac_n "checking whether to add a dependency on ext/$extname""... $ac_c" 1>&6
+echo "configure:110552: checking whether to add a dependency on ext/$extname" >&5
+		if test "$PHP_HTTP_SHARED_DEPS" = "no"; then
+			echo "$ac_t""no" 1>&6
+			
+		elif test "$haveext"; then
+			echo "$ac_t""yes" 1>&6
+			
+				
+  am_i_shared=$PHP_HTTP_SHARED
+  is_it_shared=$PHP_SESSION_SHARED
+  is_it_enabled=$PHP_SESSION
+  if test "$am_i_shared" = "no" && test "$is_it_shared" = "yes" ; then
+    { echo "configure: error: 
+You've configured extension http to build statically, but it
+depends on extension session, which you've configured to build shared.
+You either need to build http shared or build session statically for the
+build to be successful.
+" 1>&2; exit 1; }
+  fi
+  if test "x$is_it_enabled" = "xno" && test "xtrue" != "xtrue"; then
+    { echo "configure: error: 
+You've configured extension http, which depends on extension session,
+but you've either not enabled session, or have disabled it.
+" 1>&2; exit 1; }
+  fi
+  
+			
+			
+		else
+			echo "$ac_t""no" 1>&6
+			
+		fi
+	
+	
+	
+  
+    $php_shtool mkdir -p $ext_builddir/phpstr
+  
+
+	
+  PHP_VAR_SUBST="$PHP_VAR_SUBST HTTP_SHARED_LIBADD"
+
+
+	PHP_HTTP_HEADERS="php_http_std_defs.h php_http.h php_http_api.h php_http_cache_api.h \
+		php_http_date_api.h php_http_headers_api.h php_http_info_api.h php_http_message_api.h \
+		php_http_request_api.h php_http_request_method_api.h php_http_send_api.h php_http_url_api.h \
+		php_http_encoding_api.h phpstr/phpstr.h missing.h php_http_request_body_api.h \
+		php_http_exception_object.h php_http_message_object.h php_http_request_object.h \
+		php_http_requestpool_object.h php_http_response_object.h php_http_util_object.h \
+		php_http_querystring_object.h php_http_deflatestream_object.h php_http_inflatestream_object.h \
+		php_http_cookie_api.h php_http_querystring_api.h php_http_request_datashare_api.h php_http_requestdatashare_object.h \
+		php_http_persistent_handle_api.h"
+	
+		
   
+    header_path=ext/http
+    for header_file in $PHP_HTTP_HEADERS; do
+      hp_hf="$header_path/$header_file"
+      
   
-    $php_shtool mkdir -p $ext_builddir/lib
+  unique=`echo $hp_hf|$SED 's/[^a-zA-Z0-9]/_/g'`
   
+  cmd="echo $ac_n \"\$INSTALLHEADERS$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "INSTALLHEADERS$unique=set"
+    
+        INSTALL_HEADERS="$INSTALL_HEADERS $hp_hf"
+      
+  fi
 
+    done 
   
-  PHP_VAR_SUBST="$PHP_VAR_SUBST ZIP_SHARED_LIBADD"
 
+	
 
-    
-  src=$ext_srcdir/Makefile.frag
-  ac_srcdir=$ext_srcdir
-  ac_builddir=$ext_builddir
-  test -f "$src" && $SED -e "s#\$(srcdir)#$ac_srcdir#g" -e "s#\$(builddir)#$ac_builddir#g" $src  >> Makefile.fragments
+	cat >> confdefs.h <<\EOF
+#define HAVE_HTTP 1
+EOF
 
 fi
 
@@ -103954,7 +110634,7 @@ fi
 php_enable_mysqlnd=no
 
 echo $ac_n "checking whether to enable mysqlnd""... $ac_c" 1>&6
-echo "configure:103958: checking whether to enable mysqlnd" >&5
+echo "configure:110638: checking whether to enable mysqlnd" >&5
 # Check whether --enable-mysqlnd or --disable-mysqlnd was given.
 if test "${enable_mysqlnd+set}" = set; then
   enableval="$enable_mysqlnd"
@@ -103998,7 +110678,7 @@ echo "$ac_t""$ext_output" 1>&6
 php_enable_mysqlnd_compression_support=yes
 
 echo $ac_n "checking whether to disable compressed protocol support in mysqlnd""... $ac_c" 1>&6
-echo "configure:104002: checking whether to disable compressed protocol support in mysqlnd" >&5
+echo "configure:110682: checking whether to disable compressed protocol support in mysqlnd" >&5
 # Check whether --enable-mysqlnd_compression_support or --disable-mysqlnd_compression_support was given.
 if test "${enable_mysqlnd_compression_support+set}" = set; then
   enableval="$enable_mysqlnd_compression_support"
@@ -104022,7 +110702,7 @@ if test -z "$PHP_ZLIB_DIR"; then
 php_with_zlib_dir=no
 
 echo $ac_n "checking for the location of libz""... $ac_c" 1>&6
-echo "configure:104026: checking for the location of libz" >&5
+echo "configure:110706: checking for the location of libz" >&5
 # Check whether --with-zlib-dir or --without-zlib-dir was given.
 if test "${with_zlib_dir+set}" = set; then
   withval="$with_zlib_dir"
@@ -104389,7 +111069,7 @@ if test "$PHP_MYSQLND" != "no" || test "
     
   for php_typename in int8 uint8 int16 uint16 int32 uint32 uchar ulong int8_t uint8_t int16_t uint16_t int32_t uint32_t int64_t uint64_t; do
     echo $ac_n "checking whether $php_typename exists""... $ac_c" 1>&6
-echo "configure:104393: checking whether $php_typename exists" >&5
+echo "configure:111073: checking whether $php_typename exists" >&5
     
   php_cache_value=php_cv_sizeof_$php_typename
   if eval "test \"`echo '$''{'php_cv_sizeof_$php_typename'+set}'`\" = set"; then
@@ -104406,7 +111086,7 @@ else
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 104410 "configure"
+#line 111090 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #if STDC_HEADERS
@@ -104436,7 +111116,7 @@ int main()
 }
   
 EOF
-if { (eval echo configure:104440: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:111120: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
     eval $php_cache_value=`cat conftestval`
@@ -104576,7 +111256,7 @@ if test "$PHP_RECODE" != "no"; then
   done
 
   echo $ac_n "checking for hash_insert in -l$MYSQL_LIBNAME""... $ac_c" 1>&6
-echo "configure:104580: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
+echo "configure:111260: checking for hash_insert in -l$MYSQL_LIBNAME" >&5
 ac_lib_var=`echo $MYSQL_LIBNAME'_'hash_insert | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -104584,7 +111264,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-l$MYSQL_LIBNAME  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 104588 "configure"
+#line 111268 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -104595,7 +111275,7 @@ int main() {
 hash_insert()
 ; return 0; }
 EOF
-if { (eval echo configure:104599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111279: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -104697,7 +111377,7 @@ fi
 php_with_pear=DEFAULT
 
 echo $ac_n "checking whether to install PEAR""... $ac_c" 1>&6
-echo "configure:104701: checking whether to install PEAR" >&5
+echo "configure:111381: checking whether to install PEAR" >&5
 # Check whether --with-pear or --without-pear was given.
 if test "${with_pear+set}" = set; then
   withval="$with_pear"
@@ -104799,7 +111479,7 @@ fi
   bison_version=none
   if test "$YACC"; then
     echo $ac_n "checking for bison version""... $ac_c" 1>&6
-echo "configure:104803: checking for bison version" >&5
+echo "configure:111483: checking for bison version" >&5
 if eval "test \"`echo '$''{'php_cv_bison_version'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -104855,17 +111535,17 @@ dlfcn.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:104859: checking for $ac_hdr" >&5
+echo "configure:111539: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104864 "configure"
+#line 111544 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:104869: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:111549: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -104893,12 +111573,12 @@ done
 
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:104897: checking for size_t" >&5
+echo "configure:111577: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104902 "configure"
+#line 111582 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -104926,12 +111606,12 @@ EOF
 fi
 
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:104930: checking return type of signal handlers" >&5
+echo "configure:111610: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104935 "configure"
+#line 111615 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
@@ -104948,7 +111628,7 @@ int main() {
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:104952: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111632: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
@@ -104972,12 +111652,12 @@ EOF
 
 
 echo $ac_n "checking for uint""... $ac_c" 1>&6
-echo "configure:104976: checking for uint" >&5
+echo "configure:111656: checking for uint" >&5
 if eval "test \"`echo '$''{'ac_cv_type_uint'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 104981 "configure"
+#line 111661 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -105005,12 +111685,12 @@ EOF
 fi
 
 echo $ac_n "checking for ulong""... $ac_c" 1>&6
-echo "configure:105009: checking for ulong" >&5
+echo "configure:111689: checking for ulong" >&5
 if eval "test \"`echo '$''{'ac_cv_type_ulong'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105014 "configure"
+#line 111694 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
@@ -105040,9 +111720,9 @@ fi
 
 
 echo $ac_n "checking for int32_t""... $ac_c" 1>&6
-echo "configure:105044: checking for int32_t" >&5
+echo "configure:111724: checking for int32_t" >&5
 cat > conftest.$ac_ext <<EOF
-#line 105046 "configure"
+#line 111726 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H  
@@ -105061,7 +111741,7 @@ if (sizeof (int32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:105065: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111745: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   cat >> confdefs.h <<EOF
@@ -105080,9 +111760,9 @@ fi
 rm -f conftest*
 
 echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
-echo "configure:105084: checking for uint32_t" >&5
+echo "configure:111764: checking for uint32_t" >&5
 cat > conftest.$ac_ext <<EOF
-#line 105086 "configure"
+#line 111766 "configure"
 #include "confdefs.h"
 
 #if HAVE_SYS_TYPES_H  
@@ -105101,7 +111781,7 @@ if (sizeof (uint32_t))
 
 ; return 0; }
 EOF
-if { (eval echo configure:105105: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:111785: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
   cat >> confdefs.h <<EOF
@@ -105120,12 +111800,12 @@ fi
 rm -f conftest*
 
 echo $ac_n "checking for vprintf""... $ac_c" 1>&6
-echo "configure:105124: checking for vprintf" >&5
+echo "configure:111804: checking for vprintf" >&5
 if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105129 "configure"
+#line 111809 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char vprintf(); below.  */
@@ -105148,7 +111828,7 @@ vprintf();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105152: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111832: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_vprintf=yes"
 else
@@ -105172,12 +111852,12 @@ fi
 
 if test "$ac_cv_func_vprintf" != yes; then
 echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
-echo "configure:105176: checking for _doprnt" >&5
+echo "configure:111856: checking for _doprnt" >&5
 if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105181 "configure"
+#line 111861 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char _doprnt(); below.  */
@@ -105200,7 +111880,7 @@ _doprnt();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111884: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func__doprnt=yes"
 else
@@ -105225,7 +111905,7 @@ fi
 fi
 
 echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:105229: checking for 8-bit clean memcmp" >&5
+echo "configure:111909: checking for 8-bit clean memcmp" >&5
 if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -105233,7 +111913,7 @@ else
   ac_cv_func_memcmp_clean=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 105237 "configure"
+#line 111917 "configure"
 #include "confdefs.h"
 
 main()
@@ -105243,7 +111923,7 @@ main()
 }
 
 EOF
-if { (eval echo configure:105247: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:111927: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_memcmp_clean=yes
 else
@@ -105263,19 +111943,19 @@ test $ac_cv_func_memcmp_clean = no && LI
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
 echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:105267: checking for working alloca.h" >&5
+echo "configure:111947: checking for working alloca.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105272 "configure"
+#line 111952 "configure"
 #include "confdefs.h"
 #include <alloca.h>
 int main() {
 char *p = alloca(2 * sizeof(int));
 ; return 0; }
 EOF
-if { (eval echo configure:105279: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:111959: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_header_alloca_h=yes
 else
@@ -105296,12 +111976,12 @@ EOF
 fi
 
 echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:105300: checking for alloca" >&5
+echo "configure:111980: checking for alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105305 "configure"
+#line 111985 "configure"
 #include "confdefs.h"
 
 #ifdef __GNUC__
@@ -105329,7 +112009,7 @@ int main() {
 char *p = (char *) alloca(1);
 ; return 0; }
 EOF
-if { (eval echo configure:105333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_alloca_works=yes
 else
@@ -105361,12 +112041,12 @@ EOF
 
 
 echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:105365: checking whether alloca needs Cray hooks" >&5
+echo "configure:112045: checking whether alloca needs Cray hooks" >&5
 if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105370 "configure"
+#line 112050 "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -105391,12 +112071,12 @@ echo "$ac_t""$ac_cv_os_cray" 1>&6
 if test $ac_cv_os_cray = yes; then
 for ac_func in _getb67 GETB67 getb67; do
   echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:105395: checking for $ac_func" >&5
+echo "configure:112075: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105400 "configure"
+#line 112080 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -105419,7 +112099,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112103: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -105446,7 +112126,7 @@ done
 fi
 
 echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:105450: checking stack direction for C alloca" >&5
+echo "configure:112130: checking stack direction for C alloca" >&5
 if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -105454,7 +112134,7 @@ else
   ac_cv_c_stack_direction=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 105458 "configure"
+#line 112138 "configure"
 #include "confdefs.h"
 find_stack_direction ()
 {
@@ -105473,7 +112153,7 @@ main ()
   exit (find_stack_direction() < 0);
 }
 EOF
-if { (eval echo configure:105477: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112157: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_stack_direction=1
 else
@@ -105497,12 +112177,12 @@ fi
 for ac_func in memcpy strdup getpid kill strtod strtol finite fpclass sigsetjmp
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:105501: checking for $ac_func" >&5
+echo "configure:112181: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105506 "configure"
+#line 112186 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -105525,7 +112205,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -105551,7 +112231,7 @@ done
 
 
   echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
-echo "configure:105555: checking whether sprintf is broken" >&5
+echo "configure:112235: checking whether sprintf is broken" >&5
 if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -105562,11 +112242,11 @@ else
     
 else
   cat > conftest.$ac_ext <<EOF
-#line 105566 "configure"
+#line 112246 "configure"
 #include "confdefs.h"
 main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
 EOF
-if { (eval echo configure:105570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112250: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       ac_cv_broken_sprintf=no
@@ -105600,12 +112280,12 @@ EOF
 for ac_func in finite isfinite isinf isnan
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:105604: checking for $ac_func" >&5
+echo "configure:112284: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105609 "configure"
+#line 112289 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -105628,7 +112308,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:105632: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -105655,13 +112335,13 @@ done
 
 
   echo $ac_n "checking whether fp_except is defined""... $ac_c" 1>&6
-echo "configure:105659: checking whether fp_except is defined" >&5
+echo "configure:112339: checking whether fp_except is defined" >&5
 if eval "test \"`echo '$''{'ac_cv_type_fp_except'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   
     cat > conftest.$ac_ext <<EOF
-#line 105665 "configure"
+#line 112345 "configure"
 #include "confdefs.h"
 
 #include <floatingpoint.h>
@@ -105672,7 +112352,7 @@ fp_except x = (fp_except) 0;
 
 ; return 0; }
 EOF
-if { (eval echo configure:105676: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:112356: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
      ac_cv_type_fp_except=yes
@@ -105699,9 +112379,9 @@ EOF
 
 
   echo $ac_n "checking for usable _FPU_SETCW""... $ac_c" 1>&6
-echo "configure:105703: checking for usable _FPU_SETCW" >&5
+echo "configure:112383: checking for usable _FPU_SETCW" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105705 "configure"
+#line 112385 "configure"
 #include "confdefs.h"
 
     #include <fpu_control.h>
@@ -105721,7 +112401,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105725: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112405: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__fpu_setcw=yes
 else
@@ -105742,9 +112422,9 @@ EOF
   fi
   
   echo $ac_n "checking for usable fpsetprec""... $ac_c" 1>&6
-echo "configure:105746: checking for usable fpsetprec" >&5
+echo "configure:112426: checking for usable fpsetprec" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105748 "configure"
+#line 112428 "configure"
 #include "confdefs.h"
 
     #include <machine/ieeefp.h>
@@ -105763,7 +112443,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105767: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112447: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have_fpsetprec=yes
 else
@@ -105784,9 +112464,9 @@ EOF
   fi
 
   echo $ac_n "checking for usable _controlfp""... $ac_c" 1>&6
-echo "configure:105788: checking for usable _controlfp" >&5
+echo "configure:112468: checking for usable _controlfp" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105790 "configure"
+#line 112470 "configure"
 #include "confdefs.h"
 
     #include <float.h>
@@ -105805,7 +112485,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__controlfp=yes
 else
@@ -105826,9 +112506,9 @@ EOF
   fi
 
   echo $ac_n "checking for usable _controlfp_s""... $ac_c" 1>&6
-echo "configure:105830: checking for usable _controlfp_s" >&5
+echo "configure:112510: checking for usable _controlfp_s" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105832 "configure"
+#line 112512 "configure"
 #include "confdefs.h"
 
    #include <float.h>
@@ -105848,7 +112528,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105852: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112532: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have__controlfp_s=yes
 else
@@ -105869,9 +112549,9 @@ EOF
   fi
 
   echo $ac_n "checking whether FPU control word can be manipulated by inline assembler""... $ac_c" 1>&6
-echo "configure:105873: checking whether FPU control word can be manipulated by inline assembler" >&5
+echo "configure:112553: checking whether FPU control word can be manipulated by inline assembler" >&5
   cat > conftest.$ac_ext <<EOF
-#line 105875 "configure"
+#line 112555 "configure"
 #include "confdefs.h"
 
     /* nothing */
@@ -105893,7 +112573,7 @@ int main() {
   
 ; return 0; }
 EOF
-if { (eval echo configure:105897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:112577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cfp_have_fpu_inline_asm_x86=yes
 else
@@ -105915,7 +112595,7 @@ EOF
 
 
 echo $ac_n "checking whether double cast to long preserves least significant bits""... $ac_c" 1>&6
-echo "configure:105919: checking whether double cast to long preserves least significant bits" >&5
+echo "configure:112599: checking whether double cast to long preserves least significant bits" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -105923,7 +112603,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 105927 "configure"
+#line 112607 "configure"
 #include "confdefs.h"
 
 #include <limits.h>
@@ -105947,7 +112627,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:105951: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:112631: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -105973,17 +112653,17 @@ for ac_hdr in dlfcn.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:105977: checking for $ac_hdr" >&5
+echo "configure:112657: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 105982 "configure"
+#line 112662 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:105987: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:112667: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -106011,14 +112691,14 @@ done
 
 
 echo $ac_n "checking whether dlsym() requires a leading underscore in symbol names""... $ac_c" 1>&6
-echo "configure:106015: checking whether dlsym() requires a leading underscore in symbol names" >&5
+echo "configure:112695: checking whether dlsym() requires a leading underscore in symbol names" >&5
 if test "$cross_compiling" = yes; then :
   
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 106022 "configure"
+#line 112702 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -106081,7 +112761,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:106085: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:112765: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -106164,23 +112844,23 @@ fi
 
 
 echo $ac_n "checking virtual machine dispatch method""... $ac_c" 1>&6
-echo "configure:106168: checking virtual machine dispatch method" >&5
+echo "configure:112848: checking virtual machine dispatch method" >&5
 echo "$ac_t""$PHP_ZEND_VM" 1>&6
 
 echo $ac_n "checking whether to enable thread-safety""... $ac_c" 1>&6
-echo "configure:106172: checking whether to enable thread-safety" >&5
+echo "configure:112852: checking whether to enable thread-safety" >&5
 echo "$ac_t""$ZEND_MAINTAINER_ZTS" 1>&6
 
 echo $ac_n "checking whether to enable inline optimization for GCC""... $ac_c" 1>&6
-echo "configure:106176: checking whether to enable inline optimization for GCC" >&5
+echo "configure:112856: checking whether to enable inline optimization for GCC" >&5
 echo "$ac_t""$ZEND_INLINE_OPTIMIZATION" 1>&6
 
 echo $ac_n "checking whether to enable Zend debugging""... $ac_c" 1>&6
-echo "configure:106180: checking whether to enable Zend debugging" >&5
+echo "configure:112860: checking whether to enable Zend debugging" >&5
 echo "$ac_t""$ZEND_DEBUG" 1>&6
 
 echo $ac_n "checking whether to enable Zend multibyte""... $ac_c" 1>&6
-echo "configure:106184: checking whether to enable Zend multibyte" >&5
+echo "configure:112864: checking whether to enable Zend multibyte" >&5
 echo "$ac_t""$ZEND_MULTIBYTE" 1>&6
 
 case $PHP_ZEND_VM in
@@ -106253,21 +112933,21 @@ fi
 
 
 echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:106257: checking for inline" >&5
+echo "configure:112937: checking for inline" >&5
 if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 106264 "configure"
+#line 112944 "configure"
 #include "confdefs.h"
 
 int main() {
 } $ac_kw foo() {
 ; return 0; }
 EOF
-if { (eval echo configure:106271: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:112951: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_inline=$ac_kw; break
 else
@@ -106296,7 +112976,7 @@ esac
 
 
 echo $ac_n "checking target system is Darwin""... $ac_c" 1>&6
-echo "configure:106300: checking target system is Darwin" >&5
+echo "configure:112980: checking target system is Darwin" >&5
 if echo "$target" | grep "darwin" > /dev/null; then
   cat >> confdefs.h <<\EOF
 #define DARWIN 1
@@ -106308,7 +112988,7 @@ else
 fi
 
 echo $ac_n "checking for MM alignment and log values""... $ac_c" 1>&6
-echo "configure:106312: checking for MM alignment and log values" >&5
+echo "configure:112992: checking for MM alignment and log values" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -106316,7 +112996,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106320 "configure"
+#line 113000 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -106352,7 +113032,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:106356: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113036: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   LIBZEND_MM_ALIGN=`cat conftest.zend | cut -d ' ' -f 1`
@@ -106377,7 +113057,7 @@ fi
 echo "$ac_t""done" 1>&6
 
 echo $ac_n "checking for memory allocation using mmap(MAP_ANON)""... $ac_c" 1>&6
-echo "configure:106381: checking for memory allocation using mmap(MAP_ANON)" >&5
+echo "configure:113061: checking for memory allocation using mmap(MAP_ANON)" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -106385,7 +113065,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106389 "configure"
+#line 113069 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -106421,7 +113101,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:106425: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113105: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -106443,7 +113123,7 @@ fi
 
 
 echo $ac_n "checking for memory allocation using mmap("/dev/zero")""... $ac_c" 1>&6
-echo "configure:106447: checking for memory allocation using mmap("/dev/zero")" >&5
+echo "configure:113127: checking for memory allocation using mmap("/dev/zero")" >&5
 
 if test "$cross_compiling" = yes; then
   
@@ -106451,7 +113131,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106455 "configure"
+#line 113135 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -106497,7 +113177,7 @@ int main()
 }
 
 EOF
-if { (eval echo configure:106501: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113181: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   cat >> confdefs.h <<\EOF
@@ -106521,12 +113201,12 @@ fi
 for ac_func in mremap
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:106525: checking for $ac_func" >&5
+echo "configure:113205: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106530 "configure"
+#line 113210 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -106549,7 +113229,7 @@ $ac_func();
 
 ; return 0; }
 EOF
-if { (eval echo configure:106553: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:113233: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -106616,17 +113296,17 @@ for ac_hdr in stdarg.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:106620: checking for $ac_hdr" >&5
+echo "configure:113300: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106625 "configure"
+#line 113305 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:106630: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:113310: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -106703,7 +113383,7 @@ if test "$TSRM_PTH" != "no"; then
   
 
 echo $ac_n "checking for GNU Pth""... $ac_c" 1>&6
-echo "configure:106707: checking for GNU Pth" >&5
+echo "configure:113387: checking for GNU Pth" >&5
 PTH_PREFIX="`$TSRM_PTH --prefix`"
 if test -z "$PTH_PREFIX"; then
   echo "$ac_t""Please check your Pth installation" 1>&6
@@ -106733,17 +113413,17 @@ elif test "$TSRM_ST" != "no"; then
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:106737: checking for $ac_hdr" >&5
+echo "configure:113417: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 106742 "configure"
+#line 113422 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:106747: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:113427: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -106773,7 +113453,7 @@ done
 
   LIBS="$LIBS -lst"
   echo $ac_n "checking for SGI's State Threads""... $ac_c" 1>&6
-echo "configure:106777: checking for SGI's State Threads" >&5
+echo "configure:113457: checking for SGI's State Threads" >&5
   echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
 #define TSRM_ST 1
@@ -106812,7 +113492,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106816 "configure"
+#line 113496 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106830,7 +113510,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106834: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -106850,7 +113530,7 @@ fi
   CFLAGS=$save_CFLAGS
 
   echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
-echo "configure:106854: checking for pthreads_cflags" >&5
+echo "configure:113534: checking for pthreads_cflags" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -106872,7 +113552,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106876 "configure"
+#line 113556 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106890,7 +113570,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106894: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113574: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -106920,7 +113600,7 @@ fi
 echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6
 
 echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
-echo "configure:106924: checking for pthreads_lib" >&5
+echo "configure:113604: checking for pthreads_lib" >&5
 if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -106942,7 +113622,7 @@ if test "$cross_compiling" = yes; then
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 106946 "configure"
+#line 113626 "configure"
 #include "confdefs.h"
 
 #include <pthread.h>
@@ -106960,7 +113640,7 @@ int main() {
     return pthread_create(&thd, NULL, thread_routine, &data);
 } 
 EOF
-if { (eval echo configure:106964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:113644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
   pthreads_working=yes
@@ -107011,7 +113691,7 @@ EOF
 
 
   echo $ac_n "checking for POSIX threads""... $ac_c" 1>&6
-echo "configure:107015: checking for POSIX threads" >&5
+echo "configure:113695: checking for POSIX threads" >&5
   echo "$ac_t""yes" 1>&6
 fi
 
@@ -107647,7 +114327,7 @@ fi
 
 
 echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:107651: checking build system type" >&5
+echo "configure:114331: checking build system type" >&5
 
 build_alias=$build
 case "$build_alias" in
@@ -107676,7 +114356,7 @@ ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
-echo "configure:107680: checking for ld used by $CC" >&5
+echo "configure:114360: checking for ld used by $CC" >&5
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -107706,10 +114386,10 @@ echo "configure:107680: checking for ld
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:107710: checking for GNU ld" >&5
+echo "configure:114390: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:107713: checking for non-GNU ld" >&5
+echo "configure:114393: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -107748,7 +114428,7 @@ else
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:107752: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:114432: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107768,7 +114448,7 @@ with_gnu_ld=$lt_cv_prog_gnu_ld
 
 
 echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
-echo "configure:107772: checking for $LD option to reload object files" >&5
+echo "configure:114452: checking for $LD option to reload object files" >&5
 if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107793,7 +114473,7 @@ case $host_os in
 esac
 
 echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
-echo "configure:107797: checking for BSD-compatible nm" >&5
+echo "configure:114477: checking for BSD-compatible nm" >&5
 if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -107846,7 +114526,7 @@ echo "$ac_t""$lt_cv_path_NM" 1>&6
 NM="$lt_cv_path_NM"
 
 echo $ac_n "checking how to recognize dependent libraries""... $ac_c" 1>&6
-echo "configure:107850: checking how to recognize dependent libraries" >&5
+echo "configure:114530: checking how to recognize dependent libraries" >&5
 if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108038,13 +114718,13 @@ deplibs_check_method=$lt_cv_deplibs_chec
 test -z "$deplibs_check_method" && deplibs_check_method=unknown
 
 echo $ac_n "checking for object suffix""... $ac_c" 1>&6
-echo "configure:108042: checking for object suffix" >&5
+echo "configure:114722: checking for object suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   rm -f conftest*
 echo 'int i = 1;' > conftest.$ac_ext
-if { (eval echo configure:108048: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:114728: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   for ac_file in conftest.*; do
     case $ac_file in
     *.c) ;;
@@ -108064,7 +114744,7 @@ ac_objext=$ac_cv_objext
 
 
 echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
-echo "configure:108068: checking for executable suffix" >&5
+echo "configure:114748: checking for executable suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108074,10 +114754,10 @@ else
   rm -f conftest*
   echo 'int main () { return 0; }' > conftest.$ac_ext
   ac_cv_exeext=
-  if { (eval echo configure:108078: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+  if { (eval echo configure:114758: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
     for file in conftest.*; do
       case $file in
-      *.c | *.o | *.obj) ;;
+      *.$ac_ext | *.c | *.o | *.obj) ;;
       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
       esac
     done
@@ -108120,7 +114800,7 @@ case $host in
 ia64-*-hpux*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:108124: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114804: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.$ac_objext` in
     *ELF-32*)
       HPUX_IA64_MODE="32"
@@ -108134,8 +114814,8 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 108138 "configure"' > conftest.$ac_ext
-  if { (eval echo configure:108139: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  echo '#line 114818 "configure"' > conftest.$ac_ext
+  if { (eval echo configure:114819: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    if test "$lt_cv_prog_gnu_ld" = yes; then
     case `/usr/bin/file conftest.$ac_objext` in
     *32-bit*)
@@ -108169,7 +114849,7 @@ x86_64-*kfreebsd*-gnu|x86_64-*linux*|ppc
 s390*-*linux*|sparc*-*linux*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:108173: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114853: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.o` in
     *32-bit*)
       case $host in
@@ -108219,7 +114899,7 @@ s390*-*linux*|sparc*-*linux*)
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
-echo "configure:108223: checking whether the C compiler needs -belf" >&5
+echo "configure:114903: checking whether the C compiler needs -belf" >&5
 if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108232,14 +114912,14 @@ ac_link='${CC-cc} -o conftest${ac_exeext
 cross_compiling=$ac_cv_prog_cc_cross
 
      cat > conftest.$ac_ext <<EOF
-#line 108236 "configure"
+#line 114916 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:108243: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:114923: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   lt_cv_cc_needs_belf=yes
 else
@@ -108267,7 +114947,7 @@ echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
 sparc*-*solaris*)
   # Find out which ABI we are using.
   echo 'int i;' > conftest.$ac_ext
-  if { (eval echo configure:108271: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:114951: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.o` in
     *64-bit*)
       case $lt_cv_prog_gnu_ld in
@@ -108296,7 +114976,7 @@ if test -n "$CXX" && ( test "X$CXX" != "
     ( (test "X$CXX" = "Xg++" && `g++ -v >/dev/null 2>&1` ) ||
     (test "X$CXX" != "Xg++"))) ; then
   echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
-echo "configure:108300: checking how to run the C++ preprocessor" >&5
+echo "configure:114980: checking how to run the C++ preprocessor" >&5
 if test -z "$CXXCPP"; then
 if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -108309,12 +114989,12 @@ ac_link='${CXX-g++} -o conftest${ac_exee
 cross_compiling=$ac_cv_prog_cxx_cross
   CXXCPP="${CXX-g++} -E"
   cat > conftest.$ac_ext <<EOF
-#line 108313 "configure"
+#line 114993 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:108318: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:114998: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -108344,7 +115024,7 @@ fi
 # Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
 # find the maximum length of command line arguments
 echo $ac_n "checking the maximum length of command line arguments""... $ac_c" 1>&6
-echo "configure:108348: checking the maximum length of command line arguments" >&5
+echo "configure:115028: checking the maximum length of command line arguments" >&5
 if eval "test \"`echo '$''{'lt_cv_sys_max_cmd_len'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108466,7 +115146,7 @@ fi
 
 # Check for command to grab the raw symbol name followed by C symbol from nm.
 echo $ac_n "checking command to parse $NM output from $compiler object""... $ac_c" 1>&6
-echo "configure:108470: checking command to parse $NM output from $compiler object" >&5
+echo "configure:115150: checking command to parse $NM output from $compiler object" >&5
 if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108570,10 +115250,10 @@ void nm_test_func(){}
 int main(){nm_test_var='a';nm_test_func();return(0);}
 EOF
 
-  if { (eval echo configure:108574: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  if { (eval echo configure:115254: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     # Now try to grab the symbols.
     nlist=conftest.nm
-    if { (eval echo configure:108577: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
+    if { (eval echo configure:115257: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
       # Try sorting and uniquifying the output.
       if sort "$nlist" | uniq > "$nlist"T; then
 	mv -f "$nlist"T "$nlist"
@@ -108624,7 +115304,7 @@ EOF
 	  lt_save_CFLAGS="$CFLAGS"
 	  LIBS="conftstm.$ac_objext"
 	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
-	  if { (eval echo configure:108628: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+	  if { (eval echo configure:115308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
 	    pipe_works=yes
 	  fi
 	  LIBS="$lt_save_LIBS"
@@ -108664,7 +115344,7 @@ else
 fi
 
 echo $ac_n "checking for objdir""... $ac_c" 1>&6
-echo "configure:108668: checking for objdir" >&5
+echo "configure:115348: checking for objdir" >&5
 if eval "test \"`echo '$''{'lt_cv_objdir'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108730,7 +115410,7 @@ with_gnu_ld="$lt_cv_prog_gnu_ld"
 # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ar; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108734: checking for $ac_word" >&5
+echo "configure:115414: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108762,7 +115442,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "ar", so it can be a program name with args.
 set dummy ar; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108766: checking for $ac_word" >&5
+echo "configure:115446: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108797,7 +115477,7 @@ fi
 # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108801: checking for $ac_word" >&5
+echo "configure:115481: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108829,7 +115509,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108833: checking for $ac_word" >&5
+echo "configure:115513: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108864,7 +115544,7 @@ fi
 # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
 set dummy ${ac_tool_prefix}strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108868: checking for $ac_word" >&5
+echo "configure:115548: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108896,7 +115576,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "strip", so it can be a program name with args.
 set dummy strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:108900: checking for $ac_word" >&5
+echo "configure:115580: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -108983,7 +115663,7 @@ case $deplibs_check_method in
 file_magic*)
   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
     echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
-echo "configure:108987: checking for ${ac_tool_prefix}file" >&5
+echo "configure:115667: checking for ${ac_tool_prefix}file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109043,7 +115723,7 @@ fi
 if test -z "$lt_cv_path_MAGIC_CMD"; then
   if test -n "$ac_tool_prefix"; then
     echo $ac_n "checking for file""... $ac_c" 1>&6
-echo "configure:109047: checking for file" >&5
+echo "configure:115727: checking for file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109115,7 +115795,7 @@ esac
     # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
 set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:109119: checking for $ac_word" >&5
+echo "configure:115799: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109147,7 +115827,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "dsymutil", so it can be a program name with args.
 set dummy dsymutil; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:109151: checking for $ac_word" >&5
+echo "configure:115831: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_DSYMUTIL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109182,7 +115862,7 @@ fi
     # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
 set dummy ${ac_tool_prefix}nmedit; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:109186: checking for $ac_word" >&5
+echo "configure:115866: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109214,7 +115894,7 @@ if test -n "$ac_tool_prefix"; then
   # Extract the first word of "nmedit", so it can be a program name with args.
 set dummy nmedit; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:109218: checking for $ac_word" >&5
+echo "configure:115898: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_NMEDIT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109248,7 +115928,7 @@ fi
 
 
     echo $ac_n "checking for -single_module linker flag""... $ac_c" 1>&6
-echo "configure:109252: checking for -single_module linker flag" >&5
+echo "configure:115932: checking for -single_module linker flag" >&5
 if eval "test \"`echo '$''{'lt_cv_apple_cc_single_mod'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109271,7 +115951,7 @@ fi
 
 echo "$ac_t""$lt_cv_apple_cc_single_mod" 1>&6
     echo $ac_n "checking for -exported_symbols_list linker flag""... $ac_c" 1>&6
-echo "configure:109275: checking for -exported_symbols_list linker flag" >&5
+echo "configure:115955: checking for -exported_symbols_list linker flag" >&5
 if eval "test \"`echo '$''{'lt_cv_ld_exported_symbols_list'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109281,12 +115961,12 @@ else
       LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
       
 cat > conftest.$ac_ext <<EOF
-#line 109285 "configure"
+#line 115965 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:109290: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:115970: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  lt_cv_ld_exported_symbols_list=yes
   rm -rf conftest*
 else
@@ -109420,7 +116100,7 @@ if test "$GCC" = yes; then
 
   
 echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
-echo "configure:109424: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
+echo "configure:116104: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_rtti_exceptions'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109437,11 +116117,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:109441: $lt_compile\"" >&5)
+   (eval echo "\"configure:116121: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:109445: \$? = $ac_status" >&5
+   echo "configure:116125: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -109470,7 +116150,7 @@ lt_prog_compiler_pic=
 lt_prog_compiler_static=
 
 echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
-echo "configure:109474: checking for $compiler option to produce PIC" >&5
+echo "configure:116154: checking for $compiler option to produce PIC" >&5
  
   if test "$GCC" = yes; then
     lt_prog_compiler_wl='-Wl,'
@@ -109717,7 +116397,7 @@ echo "$ac_t""$lt_prog_compiler_pic" 1>&6
 if test -n "$lt_prog_compiler_pic"; then
   
 echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic works""... $ac_c" 1>&6
-echo "configure:109721: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
+echo "configure:116401: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109734,11 +116414,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:109738: $lt_compile\"" >&5)
+   (eval echo "\"configure:116418: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:109742: \$? = $ac_status" >&5
+   echo "configure:116422: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -109780,7 +116460,7 @@ esac
 #
 wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
 echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
-echo "configure:109784: checking if $compiler static flag $lt_tmp_static_flag works" >&5
+echo "configure:116464: checking if $compiler static flag $lt_tmp_static_flag works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109818,7 +116498,7 @@ fi
 
 
 echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
-echo "configure:109822: checking if $compiler supports -c -o file.$ac_objext" >&5
+echo "configure:116502: checking if $compiler supports -c -o file.$ac_objext" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -109838,11 +116518,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:109842: $lt_compile\"" >&5)
+   (eval echo "\"configure:116522: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "configure:109846: \$? = $ac_status" >&5
+   echo "configure:116526: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -109872,7 +116552,7 @@ hard_links="nottested"
 if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
   # do not overwrite the value of need_locks provided by the user
   echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
-echo "configure:109876: checking if we can lock with hard links" >&5
+echo "configure:116556: checking if we can lock with hard links" >&5
   hard_links=yes
   $rm conftest*
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
@@ -109889,7 +116569,7 @@ else
 fi
 
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:109893: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:116573: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 
   runpath_var=
   allow_undefined_flag=
@@ -110300,12 +116980,12 @@ _LT_EOF
        # Determine the default libpath from the value encoded in an empty executable.
        
 cat > conftest.$ac_ext <<EOF
-#line 110304 "configure"
+#line 116984 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:110309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:116989: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -110338,12 +117018,12 @@ if test -z "$aix_libpath"; then aix_libp
 	 # Determine the default libpath from the value encoded in an empty executable.
 	 
 cat > conftest.$ac_ext <<EOF
-#line 110342 "configure"
+#line 117022 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:110347: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:117027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -110833,11 +117513,11 @@ x|xyes)
       # systems, -lgcc has to come before -lc. If gcc already passes -lc
       # to ld, don't add -lc before -lgcc.
       echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
-echo "configure:110837: checking whether -lc should be explicitly linked in" >&5
+echo "configure:117517: checking whether -lc should be explicitly linked in" >&5
       $rm conftest*
       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
 
-      if { (eval echo configure:110841: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
+      if { (eval echo configure:117521: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
         soname=conftest
         lib=conftest
         libobjs=conftest.$ac_objext
@@ -110851,7 +117531,7 @@ echo "configure:110837: checking whether
         libname=conftest
         lt_save_allow_undefined_flag=$allow_undefined_flag
         allow_undefined_flag=
-        if { (eval echo configure:110855: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
+        if { (eval echo configure:117535: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
         then
 	  archive_cmds_need_lc=no
         else
@@ -110870,7 +117550,7 @@ echo "configure:110837: checking whether
 esac
 
 echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
-echo "configure:110874: checking dynamic linker characteristics" >&5
+echo "configure:117554: checking dynamic linker characteristics" >&5
 library_names_spec=
 libname_spec='lib$name'
 soname_spec=
@@ -111495,7 +118175,7 @@ if test "$GCC" = yes; then
 fi
 
 echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
-echo "configure:111499: checking how to hardcode library paths into programs" >&5
+echo "configure:118179: checking how to hardcode library paths into programs" >&5
 hardcode_action=
 if test -n "$hardcode_libdir_flag_spec" || \
    test -n "$runpath_var" || \
@@ -111533,7 +118213,7 @@ fi
 striplib=
 old_striplib=
 echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
-echo "configure:111537: checking whether stripping libraries is possible" >&5
+echo "configure:118217: checking whether stripping libraries is possible" >&5
 if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
@@ -111584,7 +118264,7 @@ else
   darwin*)
   # if libdl is installed we need to link against it
     echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:111588: checking for dlopen in -ldl" >&5
+echo "configure:118268: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111592,7 +118272,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111596 "configure"
+#line 118276 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111603,7 +118283,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118287: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111632,12 +118312,12 @@ fi
 
   *)
     echo $ac_n "checking for shl_load""... $ac_c" 1>&6
-echo "configure:111636: checking for shl_load" >&5
+echo "configure:118316: checking for shl_load" >&5
 if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 111641 "configure"
+#line 118321 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shl_load(); below.  */
@@ -111660,7 +118340,7 @@ shl_load();
 
 ; return 0; }
 EOF
-if { (eval echo configure:111664: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_shl_load=yes"
 else
@@ -111678,7 +118358,7 @@ if eval "test \"`echo '$ac_cv_func_'shl_
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
-echo "configure:111682: checking for shl_load in -ldld" >&5
+echo "configure:118362: checking for shl_load in -ldld" >&5
 ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111686,7 +118366,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111690 "configure"
+#line 118370 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111697,7 +118377,7 @@ int main() {
 shl_load()
 ; return 0; }
 EOF
-if { (eval echo configure:111701: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118381: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111716,12 +118396,12 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen""... $ac_c" 1>&6
-echo "configure:111720: checking for dlopen" >&5
+echo "configure:118400: checking for dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 111725 "configure"
+#line 118405 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen(); below.  */
@@ -111744,7 +118424,7 @@ dlopen();
 
 ; return 0; }
 EOF
-if { (eval echo configure:111748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118428: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_dlopen=yes"
 else
@@ -111762,7 +118442,7 @@ if eval "test \"`echo '$ac_cv_func_'dlop
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:111766: checking for dlopen in -ldl" >&5
+echo "configure:118446: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111770,7 +118450,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111774 "configure"
+#line 118454 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111781,7 +118461,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111785: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118465: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111800,7 +118480,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
-echo "configure:111804: checking for dlopen in -lsvld" >&5
+echo "configure:118484: checking for dlopen in -lsvld" >&5
 ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111808,7 +118488,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsvld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111812 "configure"
+#line 118492 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111819,7 +118499,7 @@ int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:111823: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118503: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111838,7 +118518,7 @@ if eval "test \"`echo '$ac_cv_lib_'$ac_l
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dld_link in -ldld""... $ac_c" 1>&6
-echo "configure:111842: checking for dld_link in -ldld" >&5
+echo "configure:118522: checking for dld_link in -ldld" >&5
 ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -111846,7 +118526,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 111850 "configure"
+#line 118530 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -111857,7 +118537,7 @@ int main() {
 dld_link()
 ; return 0; }
 EOF
-if { (eval echo configure:111861: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:118541: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -111913,7 +118593,7 @@ fi
     LIBS="$lt_cv_dlopen_libs $LIBS"
 
     echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
-echo "configure:111917: checking whether a program can dlopen itself" >&5
+echo "configure:118597: checking whether a program can dlopen itself" >&5
 if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -111923,7 +118603,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 111927 "configure"
+#line 118607 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -111986,7 +118666,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:111990: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:118670: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -112009,7 +118689,7 @@ echo "$ac_t""$lt_cv_dlopen_self" 1>&6
     if test "x$lt_cv_dlopen_self" = xyes; then
       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
       echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
-echo "configure:112013: checking whether a statically linked program can dlopen itself" >&5
+echo "configure:118693: checking whether a statically linked program can dlopen itself" >&5
 if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -112019,7 +118699,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 112023 "configure"
+#line 118703 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -112082,7 +118762,7 @@ int main ()
     exit (status);
 }
 EOF
-  if { (eval echo configure:112086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
+  if { (eval echo configure:118766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) >&5 2>/dev/null
     lt_status=$?
     case x$lt_status in
@@ -112123,11 +118803,11 @@ fi
 
 # Report which library types will actually be built
 echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
-echo "configure:112127: checking if libtool supports shared libraries" >&5
+echo "configure:118807: checking if libtool supports shared libraries" >&5
 echo "$ac_t""$can_build_shared" 1>&6
 
 echo $ac_n "checking whether to build shared libraries""... $ac_c" 1>&6
-echo "configure:112131: checking whether to build shared libraries" >&5
+echo "configure:118811: checking whether to build shared libraries" >&5
 test "$can_build_shared" = "no" && enable_shared=no
 
 # On AIX, shared libraries and static libraries use the same namespace, and
@@ -112150,7 +118830,7 @@ esac
 echo "$ac_t""$enable_shared" 1>&6
 
 echo $ac_n "checking whether to build static libraries""... $ac_c" 1>&6
-echo "configure:112154: checking whether to build static libraries" >&5
+echo "configure:118834: checking whether to build static libraries" >&5
 # Make sure either enable_shared or enable_static is yes.
 test "$enable_shared" = yes || enable_static=yes
 echo "$ac_t""$enable_static" 1>&6
@@ -112836,7 +119516,7 @@ ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by $CC""... $ac_c" 1>&6
-echo "configure:112840: checking for ld used by $CC" >&5
+echo "configure:119520: checking for ld used by $CC" >&5
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -112866,10 +119546,10 @@ echo "configure:112840: checking for ld
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:112870: checking for GNU ld" >&5
+echo "configure:119550: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:112873: checking for non-GNU ld" >&5
+echo "configure:119553: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -112908,7 +119588,7 @@ else
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:112912: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:119592: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -112974,7 +119654,7 @@ fi
 
 # PORTME: fill in a description of your system's C++ link characteristics
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:112978: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:119658: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 ld_shlibs_CXX=yes
 case $host_os in
   aix3*)
@@ -113072,12 +119752,12 @@ case $host_os in
       # Determine the default libpath from the value encoded in an empty executable.
       
 cat > conftest.$ac_ext <<EOF
-#line 113076 "configure"
+#line 119756 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:113081: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:119761: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -113111,12 +119791,12 @@ if test -z "$aix_libpath"; then aix_libp
 	# Determine the default libpath from the value encoded in an empty executable.
 	
 cat > conftest.$ac_ext <<EOF
-#line 113115 "configure"
+#line 119795 "configure"
 #include "confdefs.h"
 int main() {
 ; return 0; }
 EOF
-if { (eval echo configure:113120: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:119800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  
 lt_aix_libpath_sed='
     /Import File Strings/,/^$/ {
@@ -113883,7 +120563,7 @@ private:
 };
 EOF
 
-if { (eval echo configure:113887: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:120567: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   # Parse the compiler output and extract the necessary
   # objects, libraries and library flags.
 
@@ -114039,7 +120719,7 @@ lt_prog_compiler_pic_CXX=
 lt_prog_compiler_static_CXX=
 
 echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
-echo "configure:114043: checking for $compiler option to produce PIC" >&5
+echo "configure:120723: checking for $compiler option to produce PIC" >&5
  
   # C++ specific cases for pic, static, wl, etc.
   if test "$GXX" = yes; then
@@ -114336,7 +121016,7 @@ echo "$ac_t""$lt_prog_compiler_pic_CXX"
 if test -n "$lt_prog_compiler_pic_CXX"; then
   
 echo $ac_n "checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works""... $ac_c" 1>&6
-echo "configure:114340: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
+echo "configure:121020: checking if $compiler PIC flag $lt_prog_compiler_pic_CXX works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_pic_works_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -114353,11 +121033,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:114357: $lt_compile\"" >&5)
+   (eval echo "\"configure:121037: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "configure:114361: \$? = $ac_status" >&5
+   echo "configure:121041: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -114399,7 +121079,7 @@ esac
 #
 wl=$lt_prog_compiler_wl_CXX eval lt_tmp_static_flag=\"$lt_prog_compiler_static_CXX\"
 echo $ac_n "checking if $compiler static flag $lt_tmp_static_flag works""... $ac_c" 1>&6
-echo "configure:114403: checking if $compiler static flag $lt_tmp_static_flag works" >&5
+echo "configure:121083: checking if $compiler static flag $lt_tmp_static_flag works" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_static_works_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -114437,7 +121117,7 @@ fi
 
 
 echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
-echo "configure:114441: checking if $compiler supports -c -o file.$ac_objext" >&5
+echo "configure:121121: checking if $compiler supports -c -o file.$ac_objext" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_compiler_c_o_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -114457,11 +121137,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"configure:114461: $lt_compile\"" >&5)
+   (eval echo "\"configure:121141: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "configure:114465: \$? = $ac_status" >&5
+   echo "configure:121145: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -114491,7 +121171,7 @@ hard_links="nottested"
 if test "$lt_cv_prog_compiler_c_o_CXX" = no && test "$need_locks" != no; then
   # do not overwrite the value of need_locks provided by the user
   echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
-echo "configure:114495: checking if we can lock with hard links" >&5
+echo "configure:121175: checking if we can lock with hard links" >&5
   hard_links=yes
   $rm conftest*
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
@@ -114508,7 +121188,7 @@ else
 fi
 
 echo $ac_n "checking whether the $compiler linker ($LD) supports shared libraries""... $ac_c" 1>&6
-echo "configure:114512: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+echo "configure:121192: checking whether the $compiler linker ($LD) supports shared libraries" >&5
 
   export_symbols_cmds_CXX='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq > $export_symbols'
   case $host_os in
@@ -114554,11 +121234,11 @@ x|xyes)
       # systems, -lgcc has to come before -lc. If gcc already passes -lc
       # to ld, don't add -lc before -lgcc.
       echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
-echo "configure:114558: checking whether -lc should be explicitly linked in" >&5
+echo "configure:121238: checking whether -lc should be explicitly linked in" >&5
       $rm conftest*
       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
 
-      if { (eval echo configure:114562: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
+      if { (eval echo configure:121242: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; } 2>conftest.err; then
         soname=conftest
         lib=conftest
         libobjs=conftest.$ac_objext
@@ -114572,7 +121252,7 @@ echo "configure:114558: checking whether
         libname=conftest
         lt_save_allow_undefined_flag=$allow_undefined_flag_CXX
         allow_undefined_flag_CXX=
-        if { (eval echo configure:114576: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
+        if { (eval echo configure:121256: \"$archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds_CXX 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
         then
 	  archive_cmds_need_lc_CXX=no
         else
@@ -114591,7 +121271,7 @@ echo "configure:114558: checking whether
 esac
 
 echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
-echo "configure:114595: checking dynamic linker characteristics" >&5
+echo "configure:121275: checking dynamic linker characteristics" >&5
 library_names_spec=
 libname_spec='lib$name'
 soname_spec=
@@ -115164,7 +121844,7 @@ if test "$GCC" = yes; then
 fi
 
 echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
-echo "configure:115168: checking how to hardcode library paths into programs" >&5
+echo "configure:121848: checking how to hardcode library paths into programs" >&5
 hardcode_action_CXX=
 if test -n "$hardcode_libdir_flag_spec_CXX" || \
    test -n "$runpath_var_CXX" || \
--- a/generated_lists
+++ b/generated_lists
@@ -1,3 +1,3 @@
 makefile_am_files = Zend/Makefile.am TSRM/Makefile.am
 config_h_files = Zend/acconfig.h TSRM/acconfig.h
-config_m4_files = Zend/Zend.m4 TSRM/tsrm.m4 TSRM/threads.m4 Zend/acinclude.m4 ext/bcmath/config.m4 ext/bz2/config.m4 ext/calendar/config.m4 ext/ctype/config.m4 ext/curl/config.m4 ext/date/config0.m4 ext/dba/config.m4 ext/dom/config.m4 ext/enchant/config.m4 ext/ereg/config0.m4 ext/exif/config.m4 ext/fileinfo/config.m4 ext/filter/config.m4 ext/ftp/config.m4 ext/gd/config.m4 ext/gettext/config.m4 ext/gmp/config.m4 ext/hash/config.m4 ext/iconv/config.m4 ext/imap/config.m4 ext/interbase/config.m4 ext/intl/config.m4 ext/json/config.m4 ext/ldap/config.m4 ext/libxml/config0.m4 ext/mbstring/config.m4 ext/mcrypt/config.m4 ext/mssql/config.m4 ext/mysql/config.m4 ext/mysqli/config.m4 ext/mysqlnd/config9.m4 ext/oci8/config.m4 ext/odbc/config.m4 ext/openssl/config0.m4 ext/pcntl/config.m4 ext/pcre/config0.m4 ext/pdo/config.m4 ext/pdo_dblib/config.m4 ext/pdo_firebird/config.m4 ext/pdo_mysql/config.m4 ext/pdo_oci/config.m4 ext/pdo_odbc/config.m4 ext/pdo_pgsql/config.m4 ext/pdo_sqlite/config.m4 ext/pgsql/config.m4 ext/phar/config.m4 ext/posix/config.m4 ext/pspell/config.m4 ext/readline/config.m4 ext/recode/config9.m4 ext/recode/config.m4 ext/reflection/config.m4 ext/session/config.m4 ext/shmop/config.m4 ext/simplexml/config.m4 ext/snmp/config.m4 ext/soap/config.m4 ext/sockets/config.m4 ext/spl/config.m4 ext/sqlite3/config0.m4 ext/sqlite/config.m4 ext/standard/config.m4 ext/sybase_ct/config.m4 ext/sysvmsg/config.m4 ext/sysvsem/config.m4 ext/sysvshm/config.m4 ext/tidy/config.m4 ext/tokenizer/config.m4 ext/wddx/config.m4 ext/xml/config.m4 ext/xmlreader/config.m4 ext/xmlrpc/config.m4 ext/xmlwriter/config.m4 ext/xsl/config.m4 ext/zip/config.m4 ext/zlib/config0.m4 sapi/aolserver/config.m4 sapi/apache2filter/config.m4 sapi/apache2handler/config.m4 sapi/apache/config.m4 sapi/apache_hooks/config.m4 sapi/caudium/config.m4 sapi/cli/config.m4 sapi/continuity/config.m4 sapi/embed/config.m4 sapi/fpm/config.m4 sapi/isapi/config.m4 sapi/litespeed/config.m4 sapi/milter/config.m4 sapi/nsapi/config.m4 sapi/phttpd/config.m4 sapi/pi3web/config.m4 sapi/roxen/config.m4 sapi/thttpd/config.m4 sapi/tux/config.m4 sapi/webjames/config.m4
+config_m4_files = Zend/Zend.m4 TSRM/tsrm.m4 TSRM/threads.m4 Zend/acinclude.m4 ext/apc/config.m4 ext/bcmath/config.m4 ext/bz2/config.m4 ext/calendar/config.m4 ext/ctype/config.m4 ext/curl/config.m4 ext/date/config0.m4 ext/dba/config.m4 ext/dio/config.m4 ext/dom/config.m4 ext/enchant/config.m4 ext/ereg/config0.m4 ext/exif/config.m4 ext/fileinfo/config.m4 ext/filter/config.m4 ext/ftp/config.m4 ext/gd/config.m4 ext/gettext/config.m4 ext/gmp/config.m4 ext/hash/config.m4 ext/http/config9.m4 ext/http/config.m4 ext/iconv/config.m4 ext/imap/config.m4 ext/interbase/config.m4 ext/intl/config.m4 ext/json/config.m4 ext/ldap/config.m4 ext/libevent/config.m4 ext/libxml/config0.m4 ext/mbstring/config.m4 ext/mcrypt/config.m4 ext/mssql/config.m4 ext/mysql/config.m4 ext/mysqli/config.m4 ext/mysqlnd/config9.m4 ext/oci8/config.m4 ext/odbc/config.m4 ext/openssl/config0.m4 ext/pcntl/config.m4 ext/pcre/config0.m4 ext/pdo/config.m4 ext/pdo_dblib/config.m4 ext/pdo_firebird/config.m4 ext/pdo_mysql/config.m4 ext/pdo_oci/config.m4 ext/pdo_odbc/config.m4 ext/pdo_pgsql/config.m4 ext/pdo_sqlite/config.m4 ext/pgsql/config.m4 ext/phar/config.m4 ext/posix/config.m4 ext/pspell/config.m4 ext/readline/config.m4 ext/recode/config9.m4 ext/recode/config.m4 ext/reflection/config.m4 ext/session/config.m4 ext/shmop/config.m4 ext/simplexml/config.m4 ext/snmp/config.m4 ext/soap/config.m4 ext/sockets/config.m4 ext/spl/config.m4 ext/sqlite3/config0.m4 ext/sqlite/config.m4 ext/standard/config.m4 ext/sybase_ct/config.m4 ext/sysvmsg/config.m4 ext/sysvsem/config.m4 ext/sysvshm/config.m4 ext/tidy/config.m4 ext/tokenizer/config.m4 ext/wddx/config.m4 ext/xml/config.m4 ext/xmlreader/config.m4 ext/xmlrpc/config.m4 ext/xmlwriter/config.m4 ext/xsl/config.m4 ext/zip/config.m4 ext/zlib/config0.m4 sapi/aolserver/config.m4 sapi/apache2filter/config.m4 sapi/apache2handler/config.m4 sapi/apache/config.m4 sapi/apache_hooks/config.m4 sapi/caudium/config.m4 sapi/cli/config.m4 sapi/continuity/config.m4 sapi/embed/config.m4 sapi/fpm/config.m4 sapi/isapi/config.m4 sapi/litespeed/config.m4 sapi/milter/config.m4 sapi/nsapi/config.m4 sapi/phttpd/config.m4 sapi/pi3web/config.m4 sapi/roxen/config.m4 sapi/thttpd/config.m4 sapi/tux/config.m4 sapi/webjames/config.m4
--- a/main/php_config.h.in
+++ b/main/php_config.h.in
@@ -1,4 +1,4 @@
-/* main/php_config.h.in.  Generated from configure.in by autoheader.  */
+/* main/php_config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
 /* Leave this file alone */
 /*
    +----------------------------------------------------------------------+
@@ -32,442 +32,1112 @@
 #define ZEND_DLIMPORT
 
 
-#undef uint
-#undef ulong
+/* Define if on AIX 3.
+   System headers sometimes define this.
+   We just want to avoid a redefinition error message.  */
+#ifndef _ALL_SOURCE
+#undef _ALL_SOURCE
+#endif
 
-/* Define if you want to enable memory limit support */
-#define MEMORY_LIMIT 0
+/* Define if using alloca.c.  */
+#undef C_ALLOCA
 
+/* Define to empty if the keyword does not work.  */
+#undef const
 
-/* */
-#undef AIX
+/* Define to one of _getb67, GETB67, getb67 for Cray-2 and Cray-YMP systems.
+   This function is required for alloca.c support on those systems.  */
+#undef CRAY_STACKSEG_END
 
-/* Whether to use native BeOS threads */
-#undef BETHREADS
+/* Define to `int' if <sys/types.h> doesn't define.  */
+#undef gid_t
 
-/* */
-#undef CDB_INCLUDE_FILE
+/* Define if you have alloca, as a function or macro.  */
+#undef HAVE_ALLOCA
 
-/* Define if system uses EBCDIC */
-#undef CHARSET_EBCDIC
+/* Define if you have <alloca.h> and it should be used (not on Ultrix).  */
+#undef HAVE_ALLOCA_H
 
-/* Whether to build bcmath as dynamic module */
-#undef COMPILE_DL_BCMATH
+/* Define if you don't have vprintf but do have _doprnt.  */
+#undef HAVE_DOPRNT
 
-/* Whether to build bz2 as dynamic module */
-#undef COMPILE_DL_BZ2
+/* Define if your system has a working fnmatch function.  */
+#undef HAVE_FNMATCH
 
-/* Whether to build calendar as dynamic module */
-#undef COMPILE_DL_CALENDAR
+/* Define if your struct stat has st_blksize.  */
+#undef HAVE_ST_BLKSIZE
 
-/* Whether to build ctype as dynamic module */
-#undef COMPILE_DL_CTYPE
+/* Define if your struct stat has st_blocks.  */
+#undef HAVE_ST_BLOCKS
 
-/* Whether to build curl as dynamic module */
-#undef COMPILE_DL_CURL
+/* Define if your struct stat has st_rdev.  */
+#undef HAVE_ST_RDEV
 
-/* Whether to build date as dynamic module */
-#undef COMPILE_DL_DATE
+/* Define if your struct tm has tm_zone.  */
+#undef HAVE_TM_ZONE
 
-/* Whether to build dba as dynamic module */
-#undef COMPILE_DL_DBA
+/* Define if you don't have tm_zone but do have the external array
+   tzname.  */
+#undef HAVE_TZNAME
 
-/* Whether to build dom as dynamic module */
-#undef COMPILE_DL_DOM
+/* Define if utime(file, NULL) sets file's timestamp to the present.  */
+#undef HAVE_UTIME_NULL
 
-/* Whether to build enchant as dynamic module */
-#undef COMPILE_DL_ENCHANT
+/* Define if you have the vprintf function.  */
+#undef HAVE_VPRINTF
 
-/* Whether to build ereg as dynamic module */
-#undef COMPILE_DL_EREG
+/* Define as __inline if that's what the C compiler calls it.  */
+#undef inline
 
-/* Whether to build exif as dynamic module */
-#undef COMPILE_DL_EXIF
+/* Define if your C compiler doesn't accept -c and -o together.  */
+#undef NO_MINUS_C_MINUS_O
 
-/* Whether to build fileinfo as dynamic module */
-#undef COMPILE_DL_FILEINFO
+/* Define as the return type of signal handlers (int or void).  */
+#undef RETSIGTYPE
 
-/* Whether to build filter as dynamic module */
-#undef COMPILE_DL_FILTER
+/* Define to `unsigned' if <sys/types.h> doesn't define.  */
+#undef size_t
 
-/* Whether to build ftp as dynamic module */
-#undef COMPILE_DL_FTP
+/* If using the C implementation of alloca, define if you know the
+   direction of stack growth for your system; otherwise it will be
+   automatically deduced at run-time.
+ STACK_DIRECTION > 0 => grows toward higher addresses
+ STACK_DIRECTION < 0 => grows toward lower addresses
+ STACK_DIRECTION = 0 => direction of growth unknown
+ */
+#undef STACK_DIRECTION
 
-/* Whether to build gd as dynamic module */
-#undef COMPILE_DL_GD
+/* Define if you have the ANSI C header files.  */
+#undef STDC_HEADERS
 
-/* Whether to build gettext as dynamic module */
-#undef COMPILE_DL_GETTEXT
+/* Define if you can safely include both <sys/time.h> and <time.h>.  */
+#undef TIME_WITH_SYS_TIME
 
-/* Whether to build gmp as dynamic module */
-#undef COMPILE_DL_GMP
+/* Define if your <sys/time.h> declares struct tm.  */
+#undef TM_IN_SYS_TIME
 
-/* Whether to build hash as dynamic module */
-#undef COMPILE_DL_HASH
+/* Define to `int' if <sys/types.h> doesn't define.  */
+#undef uid_t
 
-/* Whether to build iconv as dynamic module */
-#undef COMPILE_DL_ICONV
+#undef uint
+#undef ulong
 
-/* Whether to build imap as dynamic module */
-#undef COMPILE_DL_IMAP
+/* The number of bytes in a char.  */
+#undef SIZEOF_CHAR
 
-/* Whether to build interbase as dynamic module */
-#undef COMPILE_DL_INTERBASE
+/* The number of bytes in a char *.  */
+#undef SIZEOF_CHAR_P
 
-/* Whether to build intl as dynamic module */
-#undef COMPILE_DL_INTL
+/* The number of bytes in a int.  */
+#undef SIZEOF_INT
 
-/* Whether to build json as dynamic module */
-#undef COMPILE_DL_JSON
+/* The number of bytes in a long.  */
+#undef SIZEOF_LONG
 
-/* Whether to build ldap as dynamic module */
-#undef COMPILE_DL_LDAP
+/* The number of bytes in a long int.  */
+#undef SIZEOF_LONG_INT
 
-/* Whether to build libxml as dynamic module */
-#undef COMPILE_DL_LIBXML
+/* The number of bytes in a long long.  */
+#undef SIZEOF_LONG_LONG
 
-/* Whether to build mbstring as dynamic module */
-#undef COMPILE_DL_MBSTRING
+/* The number of bytes in a long long int.  */
+#undef SIZEOF_LONG_LONG_INT
 
-/* Whether to build mcrypt as dynamic module */
-#undef COMPILE_DL_MCRYPT
+/* The number of bytes in a short.  */
+#undef SIZEOF_SHORT
 
-/* Whether to build mssql as dynamic module */
-#undef COMPILE_DL_MSSQL
+/* The number of bytes in a size_t.  */
+#undef SIZEOF_SIZE_T
 
-/* Whether to build mysql as dynamic module */
-#undef COMPILE_DL_MYSQL
+/* Define if you have the CreateProcess function.  */
+#undef HAVE_CREATEPROCESS
 
-/* Whether to build mysqli as dynamic module */
-#undef COMPILE_DL_MYSQLI
+/* Define if you have the acosh function.  */
+#undef HAVE_ACOSH
 
-/* Whether to build mysqlnd as dynamic module */
-#undef COMPILE_DL_MYSQLND
+/* Define if you have the alphasort function.  */
+#undef HAVE_ALPHASORT
 
-/* Whether to build oci8 as dynamic module */
-#undef COMPILE_DL_OCI8
+/* Define if you have the asctime_r function.  */
+#undef HAVE_ASCTIME_R
 
-/* Whether to build odbc as dynamic module */
-#undef COMPILE_DL_ODBC
+/* Define if you have the asinh function.  */
+#undef HAVE_ASINH
 
-/* Whether to build openssl as dynamic module */
-#undef COMPILE_DL_OPENSSL
+/* Define if you have the asprintf function.  */
+#undef HAVE_ASPRINTF
 
-/* Whether to build pcntl as dynamic module */
-#undef COMPILE_DL_PCNTL
+/* Define if you have the atanh function.  */
+#undef HAVE_ATANH
 
-/* Whether to build pcre as dynamic module */
-#undef COMPILE_DL_PCRE
+/* Define if you have the atoll function.  */
+#undef HAVE_ATOLL
 
-/* Whether to build pdo as dynamic module */
-#undef COMPILE_DL_PDO
+/* Define if you have the chroot function.  */
+#undef HAVE_CHROOT
 
-/* Whether to build pdo_dblib as dynamic module */
-#undef COMPILE_DL_PDO_DBLIB
+/* Define if you have the clearenv function.  */
+#undef HAVE_CLEARENV
 
-/* Whether to build pdo_firebird as dynamic module */
-#undef COMPILE_DL_PDO_FIREBIRD
+/* Define if you have the crypt function.  */
+#undef HAVE_CRYPT
 
-/* Whether to build pdo_mysql as dynamic module */
-#undef COMPILE_DL_PDO_MYSQL
+/* Define if you have the crypt_r function.  */
+#undef HAVE_CRYPT_R
 
-/* Whether to build pdo_oci as dynamic module */
-#undef COMPILE_DL_PDO_OCI
+/* Define if you have the ctermid function.  */
+#undef HAVE_CTERMID
 
-/* Whether to build pdo_odbc as dynamic module */
-#undef COMPILE_DL_PDO_ODBC
+/* Define if you have the ctime_r function.  */
+#undef HAVE_CTIME_R
 
-/* Whether to build pdo_pgsql as dynamic module */
-#undef COMPILE_DL_PDO_PGSQL
+/* Define if you have the cuserid function.  */
+#undef HAVE_CUSERID
 
-/* Whether to build pdo_sqlite as dynamic module */
-#undef COMPILE_DL_PDO_SQLITE
+/* Define if you have the fabsf function.  */
+#undef HAVE_FABSF
 
-/* Whether to build pgsql as dynamic module */
-#undef COMPILE_DL_PGSQL
+/* Define if you have the finite function.  */
+#undef HAVE_FINITE
 
-/* Whether to build phar as dynamic module */
-#undef COMPILE_DL_PHAR
+/* Define if you have the flock function.  */
+#undef HAVE_FLOCK
 
-/* Whether to build posix as dynamic module */
-#undef COMPILE_DL_POSIX
+/* Define if you have the floorf function.  */
+#undef HAVE_FLOORF
 
-/* Whether to build pspell as dynamic module */
-#undef COMPILE_DL_PSPELL
+/* Define if you have the fork function.  */
+#undef HAVE_FORK
 
-/* Whether to build readline as dynamic module */
-#undef COMPILE_DL_READLINE
+/* Define if you have the fpclass function.  */
+#undef HAVE_FPCLASS
 
-/* Whether to build recode as dynamic module */
-#undef COMPILE_DL_RECODE
+/* Define if you have the ftok function.  */
+#undef HAVE_FTOK
 
-/* Whether to build reflection as dynamic module */
-#undef COMPILE_DL_REFLECTION
+/* Define if you have the funopen function.  */
+#undef HAVE_FUNOPEN
 
-/* Whether to build session as dynamic module */
-#undef COMPILE_DL_SESSION
+/* Define if you have the gai_strerror function.  */
+#undef HAVE_GAI_STRERROR
 
-/* Whether to build shmop as dynamic module */
-#undef COMPILE_DL_SHMOP
+/* Define if you have the gcvt function.  */
+#undef HAVE_GCVT
 
-/* Whether to build simplexml as dynamic module */
-#undef COMPILE_DL_SIMPLEXML
+/* Define if you have the getcwd function.  */
+#undef HAVE_GETCWD
 
-/* Whether to build snmp as dynamic module */
-#undef COMPILE_DL_SNMP
+/* Define if you have the getgrgid_r function.  */
+#undef HAVE_GETGRGID_R
 
-/* Whether to build soap as dynamic module */
-#undef COMPILE_DL_SOAP
+/* Define if you have the getgrnam_r function.  */
+#undef HAVE_GETGRNAM_R
 
-/* Whether to build sockets as dynamic module */
-#undef COMPILE_DL_SOCKETS
+/* Define if you have the getgroups function.  */
+#undef HAVE_GETGROUPS
 
-/* Whether to build spl as dynamic module */
-#undef COMPILE_DL_SPL
+/* Define if you have the gethostname function.  */
+#undef HAVE_GETHOSTNAME
 
-/* Whether to build sqlite as dynamic module */
-#undef COMPILE_DL_SQLITE
+/* Define if you have the getloadavg function.  */
+#undef HAVE_GETLOADAVG
 
-/* Whether to build sqlite3 as dynamic module */
-#undef COMPILE_DL_SQLITE3
+/* Define if you have the getlogin function.  */
+#undef HAVE_GETLOGIN
 
-/* Whether to build standard as dynamic module */
-#undef COMPILE_DL_STANDARD
+/* Define if you have the getopt function.  */
+#undef HAVE_GETOPT
 
-/* Whether to build sybase_ct as dynamic module */
-#undef COMPILE_DL_SYBASE_CT
+/* Define if you have the getpgid function.  */
+#undef HAVE_GETPGID
 
-/* Whether to build sysvmsg as dynamic module */
-#undef COMPILE_DL_SYSVMSG
+/* Define if you have the getpid function.  */
+#undef HAVE_GETPID
 
-/* Whether to build sysvsem as dynamic module */
-#undef COMPILE_DL_SYSVSEM
+/* Define if you have the getpriority function.  */
+#undef HAVE_GETPRIORITY
 
-/* Whether to build sysvshm as dynamic module */
-#undef COMPILE_DL_SYSVSHM
+/* Define if you have the getprotobyname function.  */
+#undef HAVE_GETPROTOBYNAME
 
-/* Whether to build tidy as dynamic module */
-#undef COMPILE_DL_TIDY
+/* Define if you have the getprotobynumber function.  */
+#undef HAVE_GETPROTOBYNUMBER
 
-/* Whether to build tokenizer as dynamic module */
-#undef COMPILE_DL_TOKENIZER
+/* Define if you have the getpwnam_r function.  */
+#undef HAVE_GETPWNAM_R
 
-/* Whether to build wddx as dynamic module */
-#undef COMPILE_DL_WDDX
+/* Define if you have the getpwuid_r function.  */
+#undef HAVE_GETPWUID_R
 
-/* Whether to build xml as dynamic module */
-#undef COMPILE_DL_XML
+/* Define if you have the getrlimit function.  */
+#undef HAVE_GETRLIMIT
 
-/* Whether to build xmlreader as dynamic module */
-#undef COMPILE_DL_XMLREADER
+/* Define if you have the getrusage function.  */
+#undef HAVE_GETRUSAGE
 
-/* Whether to build xmlrpc as dynamic module */
-#undef COMPILE_DL_XMLRPC
+/* Define if you have the getservbyname function.  */
+#undef HAVE_GETSERVBYNAME
 
-/* Whether to build xmlwriter as dynamic module */
-#undef COMPILE_DL_XMLWRITER
+/* Define if you have the getservbyport function.  */
+#undef HAVE_GETSERVBYPORT
 
-/* Whether to build xsl as dynamic module */
-#undef COMPILE_DL_XSL
+/* Define if you have the getsid function.  */
+#undef HAVE_GETSID
 
-/* Whether to build zip as dynamic module */
-#undef COMPILE_DL_ZIP
+/* Define if you have the gettimeofday function.  */
+#undef HAVE_GETTIMEOFDAY
 
-/* Whether to build zlib as dynamic module */
-#undef COMPILE_DL_ZLIB
+/* Define if you have the getwd function.  */
+#undef HAVE_GETWD
 
-/* */
-#undef COOKIE_IO_FUNCTIONS_T
+/* Define if you have the glob function.  */
+#undef HAVE_GLOB
 
-/* */
-#undef COOKIE_SEEKER_USES_OFF64_T
+/* Define if you have the gmtime_r function.  */
+#undef HAVE_GMTIME_R
 
-/* Define to one of `_getb67', `GETB67', `getb67' for Cray-2 and Cray-YMP
-   systems. This function is required for `alloca.c' support on those systems.
-   */
-#undef CRAY_STACKSEG_END
+/* Define if you have the grantpt function.  */
+#undef HAVE_GRANTPT
 
-/* Define if crypt_r has uses CRYPTD */
-#undef CRYPT_R_CRYPTD
+/* Define if you have the hstrerror function.  */
+#undef HAVE_HSTRERROR
 
-/* Define if struct crypt_data requires _GNU_SOURCE */
-#undef CRYPT_R_GNU_SOURCE
+/* Define if you have the hypot function.  */
+#undef HAVE_HYPOT
 
-/* Define if crypt_r uses struct crypt_data */
-#undef CRYPT_R_STRUCT_CRYPT_DATA
+/* Define if you have the inet_ntoa function.  */
+#undef HAVE_INET_NTOA
 
-/* Define to 1 if using `alloca.c'. */
-#undef C_ALLOCA
+/* Define if you have the inet_ntop function.  */
+#undef HAVE_INET_NTOP
 
-/* Define if the target system is darwin */
-#undef DARWIN
+/* Define if you have the inet_pton function.  */
+#undef HAVE_INET_PTON
 
-/* */
-#undef DB1_INCLUDE_FILE
+/* Define if you have the initgroups function.  */
+#undef HAVE_INITGROUPS
+
+/* Define if you have the isascii function.  */
+#undef HAVE_ISASCII
+
+/* Define if you have the isfinite function.  */
+#undef HAVE_ISFINITE
+
+/* Define if you have the isinf function.  */
+#undef HAVE_ISINF
+
+/* Define if you have the isnan function.  */
+#undef HAVE_ISNAN
+
+/* Define if you have the kill function.  */
+#undef HAVE_KILL
+
+/* Define if you have the lchown function.  */
+#undef HAVE_LCHOWN
+
+/* Define if you have the ldap_parse_reference function.  */
+#undef HAVE_LDAP_PARSE_REFERENCE
+
+/* Define if you have the ldap_parse_result function.  */
+#undef HAVE_LDAP_PARSE_RESULT
+
+/* Define if you have the ldap_start_tls_s function.  */
+#undef HAVE_LDAP_START_TLS_S
+
+/* Define if you have the link function.  */
+#undef HAVE_LINK
+
+/* Define if you have the localeconv function.  */
+#undef HAVE_LOCALECONV
+
+/* Define if you have the localtime_r function.  */
+#undef HAVE_LOCALTIME_R
+
+/* Define if you have the lockf function.  */
+#undef HAVE_LOCKF
+
+/* Define if you have the log1p function.  */
+#undef HAVE_LOG1P
+
+/* Define if you have the lrand48 function.  */
+#undef HAVE_LRAND48
+
+/* Define if you have the makedev function.  */
+#undef HAVE_MAKEDEV
+
+/* Define if you have the mblen function.  */
+#undef HAVE_MBLEN
+
+/* Define if you have the mbrlen function.  */
+#undef HAVE_MBRLEN
+
+/* Define if you have the mbsinit function.  */
+#undef HAVE_MBSINIT
+
+/* Define if you have the memcpy function.  */
+#undef HAVE_MEMCPY
+
+/* Define if you have the memmove function.  */
+#undef HAVE_MEMMOVE
+
+/* Define if you have the mempcpy function.  */
+#undef HAVE_MEMPCPY
+
+/* Define if you have the mkfifo function.  */
+#undef HAVE_MKFIFO
+
+/* Define if you have the mknod function.  */
+#undef HAVE_MKNOD
+
+/* Define if you have the mkstemp function.  */
+#undef HAVE_MKSTEMP
+
+/* Define if you have the mmap function.  */
+#undef HAVE_MMAP
+
+/* Define if you have the mremap function.  */
+#undef HAVE_MREMAP
+
+/* Define if you have the mysql_commit function.  */
+#undef HAVE_MYSQL_COMMIT
+
+/* Define if you have the mysql_next_result function.  */
+#undef HAVE_MYSQL_NEXT_RESULT
+
+/* Define if you have the mysql_sqlstate function.  */
+#undef HAVE_MYSQL_SQLSTATE
+
+/* Define if you have the mysql_stmt_prepare function.  */
+#undef HAVE_MYSQL_STMT_PREPARE
+
+/* Define if you have the nanosleep function.  */
+#undef HAVE_NANOSLEEP
+
+/* Define if you have the nice function.  */
+#undef HAVE_NICE
+
+/* Define if you have the nl_langinfo function.  */
+#undef HAVE_NL_LANGINFO
+
+/* Define if you have the perror function.  */
+#undef HAVE_PERROR
+
+/* Define if you have the poll function.  */
+#undef HAVE_POLL
+
+/* Define if you have the ptsname function.  */
+#undef HAVE_PTSNAME
+
+/* Define if you have the putenv function.  */
+#undef HAVE_PUTENV
+
+/* Define if you have the rand_r function.  */
+#undef HAVE_RAND_R
+
+/* Define if you have the random function.  */
+#undef HAVE_RANDOM
+
+/* Define if you have the realpath function.  */
+#undef HAVE_REALPATH
+
+/* Define if you have the rl_completion_matches function.  */
+#undef HAVE_RL_COMPLETION_MATCHES
+
+/* Define if you have the scandir function.  */
+#undef HAVE_SCANDIR
+
+/* Define if you have the setegid function.  */
+#undef HAVE_SETEGID
+
+/* Define if you have the setenv function.  */
+#undef HAVE_SETENV
+
+/* Define if you have the seteuid function.  */
+#undef HAVE_SETEUID
+
+/* Define if you have the setitimer function.  */
+#undef HAVE_SETITIMER
+
+/* Define if you have the setlocale function.  */
+#undef HAVE_SETLOCALE
+
+/* Define if you have the setpgid function.  */
+#undef HAVE_SETPGID
+
+/* Define if you have the setpriority function.  */
+#undef HAVE_SETPRIORITY
+
+/* Define if you have the setproctitle function.  */
+#undef HAVE_SETPROCTITLE
+
+/* Define if you have the setsid function.  */
+#undef HAVE_SETSID
+
+/* Define if you have the setsockopt function.  */
+#undef HAVE_SETSOCKOPT
+
+/* Define if you have the setvbuf function.  */
+#undef HAVE_SETVBUF
+
+/* Define if you have the shutdown function.  */
+#undef HAVE_SHUTDOWN
+
+/* Define if you have the sigaction function.  */
+#undef HAVE_SIGACTION
+
+/* Define if you have the sigprocmask function.  */
+#undef HAVE_SIGPROCMASK
+
+/* Define if you have the sigsetjmp function.  */
+#undef HAVE_SIGSETJMP
+
+/* Define if you have the sigtimedwait function.  */
+#undef HAVE_SIGTIMEDWAIT
+
+/* Define if you have the sigwaitinfo function.  */
+#undef HAVE_SIGWAITINFO
+
+/* Define if you have the sin function.  */
+#undef HAVE_SIN
+
+/* Define if you have the snprintf function.  */
+#undef HAVE_SNPRINTF
+
+/* Define if you have the socketpair function.  */
+#undef HAVE_SOCKETPAIR
+
+/* Define if you have the srand48 function.  */
+#undef HAVE_SRAND48
+
+/* Define if you have the srandom function.  */
+#undef HAVE_SRANDOM
+
+/* Define if you have the statfs function.  */
+#undef HAVE_STATFS
+
+/* Define if you have the statvfs function.  */
+#undef HAVE_STATVFS
+
+/* Define if you have the std_syslog function.  */
+#undef HAVE_STD_SYSLOG
+
+/* Define if you have the strcasecmp function.  */
+#undef HAVE_STRCASECMP
+
+/* Define if you have the strcoll function.  */
+#undef HAVE_STRCOLL
+
+/* Define if you have the strdup function.  */
+#undef HAVE_STRDUP
+
+/* Define if you have the strerror function.  */
+#undef HAVE_STRERROR
+
+/* Define if you have the strfmon function.  */
+#undef HAVE_STRFMON
+
+/* Define if you have the strftime function.  */
+#undef HAVE_STRFTIME
+
+/* Define if you have the strlcat function.  */
+#undef HAVE_STRLCAT
+
+/* Define if you have the strlcpy function.  */
+#undef HAVE_STRLCPY
+
+/* Define if you have the strndup function.  */
+#undef HAVE_STRNDUP
+
+/* Define if you have the strnlen function.  */
+#undef HAVE_STRNLEN
+
+/* Define if you have the strpbrk function.  */
+#undef HAVE_STRPBRK
+
+/* Define if you have the strpncpy function.  */
+#undef HAVE_STRPNCPY
+
+/* Define if you have the strptime function.  */
+#undef HAVE_STRPTIME
+
+/* Define if you have the strstr function.  */
+#undef HAVE_STRSTR
+
+/* Define if you have the strtod function.  */
+#undef HAVE_STRTOD
+
+/* Define if you have the strtok_r function.  */
+#undef HAVE_STRTOK_R
+
+/* Define if you have the strtol function.  */
+#undef HAVE_STRTOL
+
+/* Define if you have the strtoll function.  */
+#undef HAVE_STRTOLL
+
+/* Define if you have the strtoul function.  */
+#undef HAVE_STRTOUL
+
+/* Define if you have the strtoull function.  */
+#undef HAVE_STRTOULL
+
+/* Define if you have the symlink function.  */
+#undef HAVE_SYMLINK
+
+/* Define if you have the tempnam function.  */
+#undef HAVE_TEMPNAM
+
+/* Define if you have the tzset function.  */
+#undef HAVE_TZSET
+
+/* Define if you have the unlockpt function.  */
+#undef HAVE_UNLOCKPT
+
+/* Define if you have the unsetenv function.  */
+#undef HAVE_UNSETENV
+
+/* Define if you have the usleep function.  */
+#undef HAVE_USLEEP
+
+/* Define if you have the utime function.  */
+#undef HAVE_UTIME
+
+/* Define if you have the utimes function.  */
+#undef HAVE_UTIMES
+
+/* Define if you have the vasprintf function.  */
+#undef HAVE_VASPRINTF
+
+/* Define if you have the vsnprintf function.  */
+#undef HAVE_VSNPRINTF
+
+/* Define if you have the wait3 function.  */
+#undef HAVE_WAIT3
+
+/* Define if you have the waitpid function.  */
+#undef HAVE_WAITPID
+
+/* Define if you have the </nsapi.h> header file.  */
+#undef HAVE__NSAPI_H
+
+/* Define if you have the <ApplicationServices/ApplicationServices.h> header file.  */
+#undef HAVE_APPLICATIONSERVICES_APPLICATIONSERVICES_H
+
+/* Define if you have the <alloca.h> header file.  */
+#undef HAVE_ALLOCA_H
+
+/* Define if you have the <arpa/inet.h> header file.  */
+#undef HAVE_ARPA_INET_H
+
+/* Define if you have the <arpa/nameser.h> header file.  */
+#undef HAVE_ARPA_NAMESER_H
+
+/* Define if you have the <assert.h> header file.  */
+#undef HAVE_ASSERT_H
+
+/* Define if you have the <atomic.h> header file.  */
+#undef HAVE_ATOMIC_H
+
+/* Define if you have the <crypt.h> header file.  */
+#undef HAVE_CRYPT_H
+
+/* Define if you have the <default_store.h> header file.  */
+#undef HAVE_DEFAULT_STORE_H
+
+/* Define if you have the <dirent.h> header file.  */
+#undef HAVE_DIRENT_H
+
+/* Define if you have the <dlfcn.h> header file.  */
+#undef HAVE_DLFCN_H
+
+/* Define if you have the <dns.h> header file.  */
+#undef HAVE_DNS_H
+
+/* Define if you have the <errno.h> header file.  */
+#undef HAVE_ERRNO_H
+
+/* Define if you have the <fcntl.h> header file.  */
+#undef HAVE_FCNTL_H
+
+/* Define if you have the <grp.h> header file.  */
+#undef HAVE_GRP_H
+
+/* Define if you have the <ieeefp.h> header file.  */
+#undef HAVE_IEEEFP_H
+
+/* Define if you have the <inttypes.h> header file.  */
+#undef HAVE_INTTYPES_H
+
+/* Define if you have the <langinfo.h> header file.  */
+#undef HAVE_LANGINFO_H
+
+/* Define if you have the <limits.h> header file.  */
+#undef HAVE_LIMITS_H
+
+/* Define if you have the <locale.h> header file.  */
+#undef HAVE_LOCALE_H
+
+/* Define if you have the <malloc.h> header file.  */
+#undef HAVE_MALLOC_H
+
+/* Define if you have the <monetary.h> header file.  */
+#undef HAVE_MONETARY_H
+
+/* Define if you have the <ndir.h> header file.  */
+#undef HAVE_NDIR_H
+
+/* Define if you have the <netdb.h> header file.  */
+#undef HAVE_NETDB_H
+
+/* Define if you have the <netinet/in.h> header file.  */
+#undef HAVE_NETINET_IN_H
+
+/* Define if you have the <netinet/tcp.h> header file.  */
+#undef HAVE_NETINET_TCP_H
+
+/* Define if you have the <openssl/crypto.h> header file.  */
+#undef HAVE_OPENSSL_CRYPTO_H
+
+/* Define if you have the <pwd.h> header file.  */
+#undef HAVE_PWD_H
+
+/* Define if you have the <resolv.h> header file.  */
+#undef HAVE_RESOLV_H
+
+/* Define if you have the <signal.h> header file.  */
+#undef HAVE_SIGNAL_H
+
+/* Define if you have the <st.h> header file.  */
+#undef HAVE_ST_H
+
+/* Define if you have the <stdarg.h> header file.  */
+#undef HAVE_STDARG_H
+
+/* Define if you have the <stdbool.h> header file.  */
+#undef HAVE_STDBOOL_H
+
+/* Define if you have the <stdint.h> header file.  */
+#undef HAVE_STDINT_H
+
+/* Define if you have the <stdio.h> header file.  */
+#undef HAVE_STDIO_H
+
+/* Define if you have the <stdlib.h> header file.  */
+#undef HAVE_STDLIB_H
+
+/* Define if you have the <string.h> header file.  */
+#undef HAVE_STRING_H
+
+/* Define if you have the <strings.h> header file.  */
+#undef HAVE_STRINGS_H
+
+/* Define if you have the <sys/dir.h> header file.  */
+#undef HAVE_SYS_DIR_H
+
+/* Define if you have the <sys/file.h> header file.  */
+#undef HAVE_SYS_FILE_H
+
+/* Define if you have the <sys/ioctl.h> header file.  */
+#undef HAVE_SYS_IOCTL_H
+
+/* Define if you have the <sys/ipc.h> header file.  */
+#undef HAVE_SYS_IPC_H
+
+/* Define if you have the <sys/loadavg.h> header file.  */
+#undef HAVE_SYS_LOADAVG_H
+
+/* Define if you have the <sys/mkdev.h> header file.  */
+#undef HAVE_SYS_MKDEV_H
+
+/* Define if you have the <sys/mman.h> header file.  */
+#undef HAVE_SYS_MMAN_H
+
+/* Define if you have the <sys/mount.h> header file.  */
+#undef HAVE_SYS_MOUNT_H
+
+/* Define if you have the <sys/ndir.h> header file.  */
+#undef HAVE_SYS_NDIR_H
+
+/* Define if you have the <sys/param.h> header file.  */
+#undef HAVE_SYS_PARAM_H
+
+/* Define if you have the <sys/poll.h> header file.  */
+#undef HAVE_SYS_POLL_H
+
+/* Define if you have the <sys/resource.h> header file.  */
+#undef HAVE_SYS_RESOURCE_H
+
+/* Define if you have the <sys/select.h> header file.  */
+#undef HAVE_SYS_SELECT_H
+
+/* Define if you have the <sys/socket.h> header file.  */
+#undef HAVE_SYS_SOCKET_H
+
+/* Define if you have the <sys/stat.h> header file.  */
+#undef HAVE_SYS_STAT_H
+
+/* Define if you have the <sys/statfs.h> header file.  */
+#undef HAVE_SYS_STATFS_H
+
+/* Define if you have the <sys/statvfs.h> header file.  */
+#undef HAVE_SYS_STATVFS_H
+
+/* Define if you have the <sys/sysexits.h> header file.  */
+#undef HAVE_SYS_SYSEXITS_H
+
+/* Define if you have the <sys/time.h> header file.  */
+#undef HAVE_SYS_TIME_H
+
+/* Define if you have the <sys/times.h> header file.  */
+#undef HAVE_SYS_TIMES_H
+
+/* Define if you have the <sys/types.h> header file.  */
+#undef HAVE_SYS_TYPES_H
+
+/* Define if you have the <sys/uio.h> header file.  */
+#undef HAVE_SYS_UIO_H
+
+/* Define if you have the <sys/un.h> header file.  */
+#undef HAVE_SYS_UN_H
+
+/* Define if you have the <sys/utsname.h> header file.  */
+#undef HAVE_SYS_UTSNAME_H
+
+/* Define if you have the <sys/varargs.h> header file.  */
+#undef HAVE_SYS_VARARGS_H
+
+/* Define if you have the <sys/vfs.h> header file.  */
+#undef HAVE_SYS_VFS_H
+
+/* Define if you have the <sys/wait.h> header file.  */
+#undef HAVE_SYS_WAIT_H
+
+/* Define if you have the <sysexits.h> header file.  */
+#undef HAVE_SYSEXITS_H
+
+/* Define if you have the <syslog.h> header file.  */
+#undef HAVE_SYSLOG_H
+
+/* Define if you have the <termios.h> header file.  */
+#undef HAVE_TERMIOS_H
+
+/* Define if you have the <time.h> header file.  */
+#undef HAVE_TIME_H
+
+/* Define if you have the <tuxmodule.h> header file.  */
+#undef HAVE_TUXMODULE_H
+
+/* Define if you have the <unistd.h> header file.  */
+#undef HAVE_UNISTD_H
+
+/* Define if you have the <unix.h> header file.  */
+#undef HAVE_UNIX_H
+
+/* Define if you have the <utime.h> header file.  */
+#undef HAVE_UTIME_H
+
+/* Define if you have the <wchar.h> header file.  */
+#undef HAVE_WCHAR_H
+
+/* Define if you have the <xmlparse.h> header file.  */
+#undef HAVE_XMLPARSE_H
+
+/* Define if you have the <xmltok.h> header file.  */
+#undef HAVE_XMLTOK_H
+
+/* Define if you have the m library (-lm).  */
+#undef HAVE_LIBM
+
+/* Define if the target system has /dev/urandom device */
+#undef HAVE_DEV_URANDOM
+
+/* Whether you have AOLserver */
+#undef HAVE_AOLSERVER
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_APACHE
+
+/*   */
+#undef HAVE_APACHE
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef USE_TRANSFER_TABLES
+
+/*   */
+#undef PHP_APACHE_HAVE_CLIENT_FD
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_APACHE_HOOKS
+
+/*   */
+#undef HAVE_APACHE
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef HAVE_AP_CONFIG_H
+
+/*   */
+#undef HAVE_AP_COMPAT_H
+
+/*   */
+#undef HAVE_OLD_COMPAT_H
+
+/*   */
+#undef USE_TRANSFER_TABLES
+
+/*   */
+#undef PHP_APACHE_HAVE_CLIENT_FD
+
+/* Whether to compile with Caudium support */
+#undef HAVE_CAUDIUM
+
+/* Whether you have a Continuity Server */
+#undef HAVE_CONTINUITY
+
+/* do we have prctl? */
+#undef HAVE_PRCTL
+
+/* do we have clock_gettime? */
+#undef HAVE_CLOCK_GETTIME
+
+/* do we have clock_get_time? */
+#undef HAVE_CLOCK_GET_TIME
+
+/* do we have ptrace? */
+#undef HAVE_PTRACE
+
+/* do we have mach_vm_read? */
+#undef HAVE_MACH_VM_READ
+
+/* /proc/pid/mem interface */
+#undef PROC_MEM_FILE
+
+/* Define to 1 if gcc supports __sync_bool_compare_and_swap() a.o. */
+#undef HAVE_BUILTIN_ATOMIC
 
-/* */
-#undef DB1_VERSION
+/* do we have TCP_INFO? */
+#undef HAVE_LQ_TCP_INFO
 
-/* */
-#undef DB2_INCLUDE_FILE
+/* do we have SO_LISTENQxxx? */
+#undef HAVE_LQ_SO_LISTENQ
 
-/* */
-#undef DB3_INCLUDE_FILE
+/* do we have sysconf? */
+#undef HAVE_SYSCONF
 
-/* */
-#undef DB4_INCLUDE_FILE
+/* do we have times? */
+#undef HAVE_TIMES
 
-/* */
-#undef DBA_CDB
+/* do we have kqueue? */
+#undef HAVE_KQUEUE
 
-/* */
-#undef DBA_CDB_BUILTIN
+/* do we have port framework? */
+#undef HAVE_PORT
 
-/* */
-#undef DBA_CDB_MAKE
+/* do we have /dev/poll? */
+#undef HAVE_DEVPOLL
 
-/* */
-#undef DBA_DB1
+/* do we have epoll? */
+#undef HAVE_EPOLL
 
-/* */
-#undef DBA_DB2
+/* do we have poll? */
+#undef HAVE_POLL
 
-/* */
-#undef DBA_DB3
+/* do we have select? */
+#undef HAVE_SELECT
 
-/* */
-#undef DBA_DB4
+/* fpm user name */
+#undef PHP_FPM_USER
 
-/* */
-#undef DBA_DBM
+/* fpm group name */
+#undef PHP_FPM_GROUP
 
-/* */
-#undef DBA_FLATFILE
+/*   */
+#undef WITH_ZEUS
 
-/* */
-#undef DBA_GDBM
+/* Whether you have a Netscape/iPlanet/Sun Webserver */
+#undef HAVE_NSAPI
 
-/* */
-#undef DBA_INIFILE
+/* Whether you have phttpd */
+#undef HAVE_PHTTPD
 
-/* */
-#undef DBA_NDBM
+/* whether you want Pi3Web support */
+#undef WITH_PI3WEB
 
-/* */
-#undef DBA_QDBM
+/* Whether you use Roxen */
+#undef HAVE_ROXEN
 
-/* */
-#undef DBM_INCLUDE_FILE
+/* Whether to use Roxen in ZTS mode */
+#undef ROXEN_USE_ZTS
 
-/* */
-#undef DBM_VERSION
+/* Define if the socklen_t typedef is in sys/socket.h */
+#undef HAVE_SOCKLEN_T
 
-/* */
-#undef DEFAULT_SHORT_OPEN_TAG
+/* Define if sockaddr_un in sys/un.h contains a sun_len component */
+#undef HAVE_SOCKADDR_UN_SUN_LEN
 
-/* Define if dlsym() requires a leading underscore in symbol names. */
-#undef DLSYM_NEEDS_UNDERSCORE
+/* Define if cross-process locking is required by accept() */
+#undef USE_LOCKING
 
-/* Whether to enable chroot() function */
-#undef ENABLE_CHROOT_FUNC
+/* Define if system uses EBCDIC */
+#undef CHARSET_EBCDIC
 
-/* */
-#undef ENABLE_GD_TTF
+/* Define if processor uses big-endian word */
+#undef WORDS_BIGENDIAN
 
-/* */
-#undef ENCHANT_VERSION_STRING
+/* whether write(2) works */
+#undef PHP_WRITE_STDOUT
 
-/* */
-#undef GDBM_INCLUDE_FILE
+/*   */
+#undef HAVE_SOCKET
 
-/* Whether you use GNU Pth */
-#undef GNUPTH
+/*   */
+#undef HAVE_SOCKET
 
-/* Whether 3 arg set_rebind_proc() */
-#undef HAVE_3ARG_SETREBINDPROC
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Define to 1 if you have the `acosh' function. */
-#undef HAVE_ACOSH
+/*   */
+#undef HAVE_SOCKETPAIR
 
-/* */
-#undef HAVE_ADABAS
+/*   */
+#undef HAVE_SOCKETPAIR
 
-/* whether the compiler supports __alignof__ */
-#undef HAVE_ALIGNOF
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Define to 1 if you have `alloca', as a function or macro. */
-#undef HAVE_ALLOCA
+/*   */
+#undef HAVE_HTONL
 
-/* Define to 1 if you have <alloca.h> and it should be used (not on Ultrix).
-   */
-#undef HAVE_ALLOCA_H
+/*   */
+#undef HAVE_HTONL
 
-/* Define to 1 if you have the `alphasort' function. */
-#undef HAVE_ALPHASORT
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Whether you have AOLserver */
-#undef HAVE_AOLSERVER
+/*   */
+#undef HAVE_GETHOSTNAME
 
-/* */
-#undef HAVE_APACHE
+/*   */
+#undef HAVE_GETHOSTNAME
 
-/* */
-#undef HAVE_APACHE_HOOKS
+/*   */
+#undef HAVE_LIBNSL
 
-/* Define to 1 if you have the <ApplicationServices/ApplicationServices.h>
-   header file. */
-#undef HAVE_APPLICATIONSERVICES_APPLICATIONSERVICES_H
+/*   */
+#undef HAVE_GETHOSTBYADDR
 
-/* */
-#undef HAVE_AP_COMPAT_H
+/*   */
+#undef HAVE_GETHOSTBYADDR
 
-/* */
-#undef HAVE_AP_CONFIG_H
+/*   */
+#undef HAVE_LIBNSL
 
-/* Define to 1 if you have the <arpa/inet.h> header file. */
-#undef HAVE_ARPA_INET_H
+/*   */
+#undef HAVE_YP_GET_DEFAULT_DOMAIN
 
-/* Define to 1 if you have the <arpa/nameser.h> header file. */
-#undef HAVE_ARPA_NAMESER_H
+/*   */
+#undef HAVE_YP_GET_DEFAULT_DOMAIN
 
-/* Define to 1 if you have the `asctime_r' function. */
-#undef HAVE_ASCTIME_R
+/*   */
+#undef HAVE_LIBNSL
 
-/* Define to 1 if you have the `asinh' function. */
-#undef HAVE_ASINH
+/*   */
+#undef HAVE_DLOPEN
 
-/* Define to 1 if you have the `asprintf' function. */
-#undef HAVE_ASPRINTF
+/*   */
+#undef HAVE_DLOPEN
 
-/* Define to 1 if you have the <assert.h> header file. */
-#undef HAVE_ASSERT_H
+/*   */
+#undef HAVE_LIBDL
 
-/* Define to 1 if you have the `atanh' function. */
-#undef HAVE_ATANH
+/*   */
+#undef HAVE_LIBDL
 
-/* whether atof() accepts INF */
-#undef HAVE_ATOF_ACCEPTS_INF
+/*   */
+#undef HAVE_INET_ATON
 
-/* whether atof() accepts NAN */
-#undef HAVE_ATOF_ACCEPTS_NAN
+/*   */
+#undef HAVE_INET_ATON
 
-/* Define to 1 if you have the `atoll' function. */
-#undef HAVE_ATOLL
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* Define to 1 if you have the <atomic.h> header file. */
-#undef HAVE_ATOMIC_H
+/*   */
+#undef HAVE_INET_ATON
 
-/* whether the compiler supports __attribute__ ((__aligned__)) */
-#undef HAVE_ATTRIBUTE_ALIGNED
+/*   */
+#undef HAVE_LIBBIND
 
-/* Whether you have bcmath */
-#undef HAVE_BCMATH
+/*   */
+#undef HAVE_FOPENCOOKIE
 
-/* */
-#undef HAVE_BIND_TEXTDOMAIN_CODESET
+/*   */
+#undef COOKIE_IO_FUNCTIONS_T
 
-/* */
-#undef HAVE_BIRDSTEP
+/*   */
+#undef COOKIE_SEEKER_USES_OFF64_T
 
 /* Define if system has broken getcwd */
 #undef HAVE_BROKEN_GETCWD
@@ -475,1975 +1145,1977 @@
 /* Define if your glibc borks on fopen with mode a+ */
 #undef HAVE_BROKEN_GLIBC_FOPEN_APPEND
 
-/* Whether we have librecode 3.5 */
-#undef HAVE_BROKEN_RECODE
+/* Whether localtime_r is declared */
+#undef MISSING_LOCALTIME_R_DECL
 
-/* Konstantin Chuguev's iconv implementation */
-#undef HAVE_BSD_ICONV
+/* Whether gmtime_r is declared */
+#undef MISSING_GMTIME_R_DECL
 
-/* */
-#undef HAVE_BUILD_DEFS_H
+/* Whether asctime_r is declared */
+#undef MISSING_ASCTIME_R_DECL
 
-/* Define to 1 if gcc supports __sync_bool_compare_and_swap() a.o. */
-#undef HAVE_BUILTIN_ATOMIC
+/* Whether ctime_r is declared */
+#undef MISSING_CTIME_R_DECL
 
-/* */
-#undef HAVE_BUNDLED_PCRE
+/* Whether strtok_r is declared */
+#undef MISSING_STRTOK_R_DECL
 
-/* */
-#undef HAVE_BZ2
+/*   */
+#undef MISSING_FCLOSE_DECL
 
-/* */
-#undef HAVE_CALENDAR
+/*   */
+#undef MISSING_FCLOSE_DECL
 
-/* Whether to compile with Caudium support */
-#undef HAVE_CAUDIUM
+/* whether you have tm_gmtoff in struct tm */
+#undef HAVE_TM_GMTOFF
 
-/* Define to 1 if you have the `chroot' function. */
-#undef HAVE_CHROOT
+/* whether you have struct flock */
+#undef HAVE_STRUCT_FLOCK
 
-/* Define to 1 if you have the `clearenv' function. */
-#undef HAVE_CLEARENV
+/* Whether you have socklen_t */
+#undef HAVE_SOCKLEN_T
 
-/* */
-#undef HAVE_CLI0CLI_H
+/* Size of intmax_t */
+#undef SIZEOF_INTMAX_T
 
-/* */
-#undef HAVE_CLI0CORE_H
+/* Whether intmax_t is available */
+#undef HAVE_INTMAX_T
 
-/* */
-#undef HAVE_CLI0DEFS_H
+/* Size of ssize_t */
+#undef SIZEOF_SSIZE_T
 
-/* */
-#undef HAVE_CLI0ENV_H
+/* Whether ssize_t is available */
+#undef HAVE_SSIZE_T
 
-/* */
-#undef HAVE_CLI0EXT_H
+/* Size of ptrdiff_t */
+#undef SIZEOF_PTRDIFF_T
 
-/* do we have clock_gettime? */
-#undef HAVE_CLOCK_GETTIME
+/* Whether ptrdiff_t is available */
+#undef HAVE_PTRDIFF_T
 
-/* do we have clock_get_time? */
-#undef HAVE_CLOCK_GET_TIME
+/* Whether you have struct sockaddr_storage */
+#undef HAVE_SOCKADDR_STORAGE
 
-/* Whether you have struct cmsghdr */
-#undef HAVE_CMSGHDR
+/* Whether struct sockaddr has field sa_len */
+#undef HAVE_SOCKADDR_SA_LEN
 
-/* */
-#undef HAVE_CODBC
+/*   */
+#undef HAVE_NANOSLEEP
 
-/* */
-#undef HAVE_COLORCLOSESTHWB
+/*   */
+#undef HAVE_LIBRT
 
-/* Whether you have a Continuity Server */
-#undef HAVE_CONTINUITY
+/* Define if you have the getaddrinfo function */
+#undef HAVE_GETADDRINFO
 
-/* Define to 1 if you have the `CreateProcess' function. */
-#undef HAVE_CREATEPROCESS
+/* Define if you have the __sync_fetch_and_add function */
+#undef HAVE_SYNC_FETCH_AND_ADD
 
-/* */
-#undef HAVE_CRYPT
+/* Whether system headers declare timezone */
+#undef HAVE_DECLARED_TIMEZONE
 
-/* Define to 1 if you have the <crypt.h> header file. */
-#undef HAVE_CRYPT_H
+/* Whether you have HP-UX 10.x */
+#undef PHP_HPUX_TIME_R
 
-/* Define to 1 if you have the `crypt_r' function. */
-#undef HAVE_CRYPT_R
+/* Whether you have IRIX-style functions */
+#undef PHP_IRIX_TIME_R
 
-/* Define to 1 if you have the `ctermid' function. */
-#undef HAVE_CTERMID
+/* whether you have POSIX readdir_r */
+#undef HAVE_POSIX_READDIR_R
 
-/* Define to 1 if you have the `ctime_r' function. */
-#undef HAVE_CTIME_R
+/* whether you have old-style readdir_r */
+#undef HAVE_OLD_READDIR_R
 
-/* */
-#undef HAVE_CTYPE
+/*   */
+#undef in_addr_t
 
-/* */
-#undef HAVE_CURL
+/* Define if crypt_r has uses CRYPTD */
+#undef CRYPT_R_CRYPTD
 
-/* */
-#undef HAVE_CURL_EASY_STRERROR
+/* Define if crypt_r uses struct crypt_data */
+#undef CRYPT_R_STRUCT_CRYPT_DATA
 
-/* Have cURL with GnuTLS support */
-#undef HAVE_CURL_GNUTLS
+/* Define if struct crypt_data requires _GNU_SOURCE */
+#undef CRYPT_R_GNU_SOURCE
 
-/* */
-#undef HAVE_CURL_MULTI_STRERROR
+/* Whether you have gcov */
+#undef HAVE_GCOV
 
-/* Have cURL with OpenSSL support */
-#undef HAVE_CURL_OPENSSL
+/*   */
+#undef PHP_SAFE_MODE
 
-/* Have cURL with SSL support */
-#undef HAVE_CURL_SSL
+/*   */
+#undef PHP_SAFE_MODE
 
-/* */
-#undef HAVE_CURL_VERSION_INFO
+/*   */
+#undef PHP_SAFE_MODE_EXEC_DIR
 
-/* Define to 1 if you have the `cuserid' function. */
-#undef HAVE_CUSERID
+/*   */
+#undef PHP_SAFE_MODE_EXEC_DIR
+
+/*   */
+#undef PHP_SIGCHILD
+
+/*   */
+#undef PHP_SIGCHILD
+
+/*   */
+#undef MAGIC_QUOTES
+
+/*   */
+#undef MAGIC_QUOTES
 
-/* */
-#undef HAVE_DBA
+/*   */
+#undef DEFAULT_SHORT_OPEN_TAG
 
-/* Whether you want DBMaker */
-#undef HAVE_DBMAKER
+/*   */
+#undef DEFAULT_SHORT_OPEN_TAG
 
-/* */
-#undef HAVE_DCNGETTEXT
+/* Whether you have dmalloc */
+#undef HAVE_DMALLOC
 
-/* Whether system headers declare timezone */
-#undef HAVE_DECLARED_TIMEZONE
+/* Whether to enable IPv6 support */
+#undef HAVE_IPV6
 
-/* Define to 1 if you have the declaration of `tzname', and to 0 if you don't.
-   */
-#undef HAVE_DECL_TZNAME
+/*  Define if int32_t type is present.  */
+#undef HAVE_INT32_T
 
-/* Define to 1 if you have the <default_store.h> header file. */
-#undef HAVE_DEFAULT_STORE_H
+/*  Define if uint32_t type is present.  */
+#undef HAVE_UINT32_T
 
-/* do we have /dev/poll? */
-#undef HAVE_DEVPOLL
+/* Define if system timezone data is used */
+#undef HAVE_SYSTEM_TZDATA
 
-/* Define if the target system has /dev/urandom device */
-#undef HAVE_DEV_URANDOM
+/* Define for location of system timezone data */
+#undef HAVE_SYSTEM_TZDATA_PREFIX
 
-/* Define to 1 if you have the <dirent.h> header file. */
-#undef HAVE_DIRENT_H
+/* Whether to build date as dynamic module */
+#undef COMPILE_DL_DATE
 
-/* Define to 1 if you have the <dlfcn.h> header file. */
-#undef HAVE_DLFCN_H
+/* Whether to build ereg as dynamic module */
+#undef COMPILE_DL_EREG
 
-/* */
-#undef HAVE_DLOPEN
+/*   */
+#undef HAVE_REGEX_T_RE_MAGIC
 
-/* Whether you have dmalloc */
-#undef HAVE_DMALLOC
+/*   */
+#undef HSREGEX
 
-/* */
-#undef HAVE_DNGETTEXT
+/*   */
+#undef REGEX
 
-/* Define to 1 if you have the <dns.h> header file. */
-#undef HAVE_DNS_H
+/*   */
+#undef REGEX
 
-/* */
-#undef HAVE_DNS_SEARCH
+/* 1 */
+#undef HAVE_REGEX_T_RE_MAGIC
 
-/* */
-#undef HAVE_DN_EXPAND
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef HAVE_DN_SKIPNAME
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef HAVE_DOM
+/* Whether to build libxml as dynamic module */
+#undef COMPILE_DL_LIBXML
 
-/* Define to 1 if you don't have `vprintf' but do have `_doprnt.' */
-#undef HAVE_DOPRNT
+/* Whether to build openssl as dynamic module */
+#undef COMPILE_DL_OPENSSL
 
 /* OpenSSL 0.9.7 or later */
 #undef HAVE_DSA_DEFAULT_METHOD
 
-/* embedded MySQL support enabled */
-#undef HAVE_EMBEDDED_MYSQLI
+/* OpenSSL 0.9.7 or later */
+#undef HAVE_DSA_DEFAULT_METHOD
 
-/* */
-#undef HAVE_EMPRESS
+/*   */
+#undef HAVE_OPENSSL_EXT
 
-/* */
-#undef HAVE_ENCHANT
+/*   */
+#undef HAVE_PCRE
 
-/* */
-#undef HAVE_ENCHANT_BROKER_SET_PARAM
+/* Whether to build pcre as dynamic module */
+#undef COMPILE_DL_PCRE
 
-/* do we have epoll? */
-#undef HAVE_EPOLL
+/* Whether to build pcre as dynamic module */
+#undef COMPILE_DL_PCRE
 
-/* Define to 1 if you have the <errno.h> header file. */
-#undef HAVE_ERRNO_H
+/*   */
+#undef HAVE_BUNDLED_PCRE
 
-/* */
-#undef HAVE_ESOOB
+/* have commercial sqlite3 with crypto support */
+#undef HAVE_SQLITE3_KEY
 
-/* Whether you want EXIF (metadata from images) support */
-#undef HAVE_EXIF
+/* have sqlite3 with extension support */
+#undef SQLITE_OMIT_LOAD_EXTENSION
 
-/* Define to 1 if you have the `fabsf' function. */
-#undef HAVE_FABSF
+/*   */
+#undef HAVE_SQLITE3
 
-/* Define to 1 if you have the <fcntl.h> header file. */
-#undef HAVE_FCNTL_H
+/* Whether to build sqlite3 as dynamic module */
+#undef COMPILE_DL_SQLITE3
 
-/* Define to 1 if you have the `finite' function. */
-#undef HAVE_FINITE
+/* Whether to build zlib as dynamic module */
+#undef COMPILE_DL_ZLIB
 
-/* Define to 1 if you have the `flock' function. */
-#undef HAVE_FLOCK
+/*   */
+#undef HAVE_ZLIB
 
-/* Define to 1 if you have the `floorf' function. */
-#undef HAVE_FLOORF
+/*   */
+#undef APC_MMAP
 
-/* Define if flush should be called explicitly after a buffered io. */
-#undef HAVE_FLUSHIO
+/*   */
+#undef APC_FILEHITS
 
-/* Define to 1 if your system has a working POSIX `fnmatch' function. */
-#undef HAVE_FNMATCH
+/*   */
+#undef __DEBUG_APC__
 
-/* */
-#undef HAVE_FOPENCOOKIE
+/*   */
+#undef APC_SEM_LOCKS
 
-/* Define to 1 if you have the `fork' function. */
-#undef HAVE_FORK
+/*   */
+#undef APC_SPIN_LOCKS
 
-/* Define to 1 if you have the `fpclass' function. */
-#undef HAVE_FPCLASS
+/*   */
+#undef APC_PTHREADMUTEX_LOCKS
 
-/* whether fpsetprec is present and usable */
-#undef HAVE_FPSETPREC
+/*   */
+#undef APC_FCNTL_LOCKS
 
-/* whether FPU control word can be manipulated by inline assembler */
-#undef HAVE_FPU_INLINE_ASM_X86
+/*  shm/mmap memory protection  */
+#undef APC_MEMPROTECT
 
-/* whether floatingpoint.h defines fp_except */
-#undef HAVE_FP_EXCEPT
+/*   */
+#undef APC_HAVE_LOOKUP_HOOKS
 
-/* */
-#undef HAVE_FREETDS
+/*   */
+#undef APC_HAVE_LOOKUP_HOOKS
 
-/* Define to 1 if you have the `ftok' function. */
-#undef HAVE_FTOK
+/*   */
+#undef HAVE_SEMUN
 
-/* Whether you want FTP support */
-#undef HAVE_FTP
+/*   */
+#undef HAVE_SEMUN
 
-/* Define to 1 if you have the `funopen' function. */
-#undef HAVE_FUNOPEN
+/* enable valgrind memchecks */
+#undef HAVE_VALGRIND_MEMCHECK_H
 
-/* Define to 1 if you have the `gai_strerror' function. */
-#undef HAVE_GAI_STRERROR
+/* Whether to build apc as dynamic module */
+#undef COMPILE_DL_APC
 
-/* Whether you have gcov */
-#undef HAVE_GCOV
+/*   */
+#undef HAVE_APC
 
-/* Define to 1 if you have the `gcvt' function. */
-#undef HAVE_GCVT
+/* Whether to build bcmath as dynamic module */
+#undef COMPILE_DL_BCMATH
 
-/* */
-#undef HAVE_GDIMAGECOLORRESOLVE
+/* Whether you have bcmath */
+#undef HAVE_BCMATH
 
-/* */
-#undef HAVE_GD_BUNDLED
+/*   */
+#undef HAVE_BZ2
 
-/* */
-#undef HAVE_GD_CACHE_CREATE
+/* Whether to build bz2 as dynamic module */
+#undef COMPILE_DL_BZ2
 
-/* */
-#undef HAVE_GD_DYNAMIC_CTX_EX
+/*   */
+#undef HAVE_CALENDAR
 
-/* */
-#undef HAVE_GD_FONTCACHESHUTDOWN
+/* Whether to build calendar as dynamic module */
+#undef COMPILE_DL_CALENDAR
 
-/* */
-#undef HAVE_GD_FONTMUTEX
+/*   */
+#undef HAVE_CTYPE
 
-/* */
-#undef HAVE_GD_FREEFONTCACHE
+/* Whether to build ctype as dynamic module */
+#undef COMPILE_DL_CTYPE
 
-/* */
-#undef HAVE_GD_GD2
+/* Have cURL with  SSL support */
+#undef HAVE_CURL_SSL
 
-/* */
-#undef HAVE_GD_GIF_CREATE
+/* Have cURL with OpenSSL support */
+#undef HAVE_CURL_OPENSSL
 
-/* */
-#undef HAVE_GD_GIF_CTX
+/* Have cURL with GnuTLS support */
+#undef HAVE_CURL_GNUTLS
 
-/* */
-#undef HAVE_GD_GIF_READ
+/*   */
+#undef HAVE_CURL
 
-/* */
-#undef HAVE_GD_IMAGEELLIPSE
+/*   */
+#undef HAVE_CURL_VERSION_INFO
 
-/* */
-#undef HAVE_GD_IMAGESETBRUSH
+/*   */
+#undef HAVE_CURL_EASY_STRERROR
 
-/* */
-#undef HAVE_GD_IMAGESETTILE
+/*   */
+#undef HAVE_CURL_MULTI_STRERROR
 
-/* */
-#undef HAVE_GD_JPG
+/*   */
+#undef PHP_CURL_URL_WRAPPERS
 
-/* */
-#undef HAVE_GD_PNG
+/* Whether to build curl as dynamic module */
+#undef COMPILE_DL_CURL
 
-/* */
-#undef HAVE_GD_STRINGFT
+/*   */
+#undef QDBM_INCLUDE_FILE
 
-/* */
-#undef HAVE_GD_STRINGFTEX
+/*   */
+#undef DBA_QDBM
 
-/* */
-#undef HAVE_GD_STRINGTTF
+/*   */
+#undef GDBM_INCLUDE_FILE
 
-/* */
-#undef HAVE_GD_WBMP
+/*   */
+#undef DBA_GDBM
 
-/* */
-#undef HAVE_GD_XBM
+/*   */
+#undef NDBM_INCLUDE_FILE
 
-/* */
-#undef HAVE_GD_XPM
+/*   */
+#undef DBA_NDBM
 
-/* Define if you have the getaddrinfo function */
-#undef HAVE_GETADDRINFO
+/*   */
+#undef DBA_DB4
 
-/* Define to 1 if you have the `getcwd' function. */
-#undef HAVE_GETCWD
+/*   */
+#undef DB4_INCLUDE_FILE
 
-/* Define to 1 if you have the `getgrgid_r' function. */
-#undef HAVE_GETGRGID_R
+/*   */
+#undef DBA_DB3
 
-/* Define to 1 if you have the `getgrnam_r' function. */
-#undef HAVE_GETGRNAM_R
+/*   */
+#undef DB3_INCLUDE_FILE
 
-/* Define to 1 if you have the `getgroups' function. */
-#undef HAVE_GETGROUPS
+/*   */
+#undef DBA_DB2
 
-/* */
-#undef HAVE_GETHOSTBYADDR
+/*   */
+#undef DB2_INCLUDE_FILE
 
-/* Define to 1 if you have the `gethostname' function. */
-#undef HAVE_GETHOSTNAME
+/*   */
+#undef DB1_VERSION
 
-/* Define to 1 if you have the `getloadavg' function. */
-#undef HAVE_GETLOADAVG
+/*   */
+#undef DB1_VERSION
 
-/* Define to 1 if you have the `getlogin' function. */
-#undef HAVE_GETLOGIN
+/*   */
+#undef DB1_INCLUDE_FILE
 
-/* Define to 1 if you have the `getopt' function. */
-#undef HAVE_GETOPT
+/*   */
+#undef DBA_DB1
 
-/* Define to 1 if you have the `getpgid' function. */
-#undef HAVE_GETPGID
+/*   */
+#undef DBM_INCLUDE_FILE
 
-/* Define to 1 if you have the `getpid' function. */
-#undef HAVE_GETPID
+/*   */
+#undef DBM_VERSION
 
-/* Define to 1 if you have the `getpriority' function. */
-#undef HAVE_GETPRIORITY
+/*   */
+#undef DBM_VERSION
 
-/* Define to 1 if you have the `getprotobyname' function. */
-#undef HAVE_GETPROTOBYNAME
+/*   */
+#undef DBA_DBM
 
-/* Define to 1 if you have the `getprotobynumber' function. */
-#undef HAVE_GETPROTOBYNUMBER
+/*   */
+#undef DBA_CDB_BUILTIN
 
-/* Define to 1 if you have the `getpwnam_r' function. */
-#undef HAVE_GETPWNAM_R
+/*   */
+#undef DBA_CDB_MAKE
 
-/* Define to 1 if you have the `getpwuid_r' function. */
-#undef HAVE_GETPWUID_R
+/*   */
+#undef DBA_CDB
 
-/* Define to 1 if you have the `getrlimit' function. */
-#undef HAVE_GETRLIMIT
+/*   */
+#undef CDB_INCLUDE_FILE
 
-/* Define to 1 if you have the `getrusage' function. */
-#undef HAVE_GETRUSAGE
+/*   */
+#undef DBA_CDB
 
-/* Define to 1 if you have the `getservbyname' function. */
-#undef HAVE_GETSERVBYNAME
+/*   */
+#undef DBA_INIFILE
 
-/* Define to 1 if you have the `getservbyport' function. */
-#undef HAVE_GETSERVBYPORT
+/*   */
+#undef DBA_FLATFILE
 
-/* Define to 1 if you have the `getsid' function. */
-#undef HAVE_GETSID
+/*   */
+#undef HAVE_DBA
 
-/* Define to 1 if you have the `gettimeofday' function. */
-#undef HAVE_GETTIMEOFDAY
+/* Whether to build dba as dynamic module */
+#undef COMPILE_DL_DBA
 
-/* Define to 1 if you have the `getwd' function. */
-#undef HAVE_GETWD
+/* Whether to build dio as dynamic module */
+#undef COMPILE_DL_DIO
 
-/* */
-#undef HAVE_GICONV_H
+/*   */
+#undef HAVE_LIBXML
 
-/* glibc's iconv implementation */
-#undef HAVE_GLIBC_ICONV
+/*   */
+#undef HAVE_DOM
 
-/* Define to 1 if you have the `glob' function. */
-#undef HAVE_GLOB
+/* Whether to build dom as dynamic module */
+#undef COMPILE_DL_DOM
 
-/* */
-#undef HAVE_GMP
+/* Whether to build enchant as dynamic module */
+#undef COMPILE_DL_ENCHANT
 
-/* Define to 1 if you have the `gmtime_r' function. */
-#undef HAVE_GMTIME_R
+/*   */
+#undef HAVE_ENCHANT
 
-/* Define to 1 if you have the `grantpt' function. */
-#undef HAVE_GRANTPT
+/*   */
+#undef HAVE_ENCHANT_BROKER_SET_PARAM
 
-/* Define to 1 if you have the <grp.h> header file. */
-#undef HAVE_GRP_H
+/*   */
+#undef ENCHANT_VERSION_STRING
 
-/* Have HASH Extension */
-#undef HAVE_HASH_EXT
+/* Whether you want EXIF (metadata from images) support */
+#undef HAVE_EXIF
 
-/* Define to 1 if you have the `hstrerror' function. */
-#undef HAVE_HSTRERROR
+/* Whether to build exif as dynamic module */
+#undef COMPILE_DL_EXIF
 
-/* */
-#undef HAVE_HTONL
+/* Whether to build fileinfo as dynamic module */
+#undef COMPILE_DL_FILEINFO
 
-/* whether HUGE_VAL == INF */
-#undef HAVE_HUGE_VAL_INF
+/* Whether to build filter as dynamic module */
+#undef COMPILE_DL_FILTER
 
-/* whether HUGE_VAL + -HUGEVAL == NAN */
-#undef HAVE_HUGE_VAL_NAN
+/* Whether you want FTP support */
+#undef HAVE_FTP
 
-/* Define to 1 if you have the `hypot' function. */
-#undef HAVE_HYPOT
+/* Whether to build ftp as dynamic module */
+#undef COMPILE_DL_FTP
 
-/* */
-#undef HAVE_IBASE
+/*   */
+#undef USE_GD_IMGSTRTTF
 
-/* */
-#undef HAVE_IBMDB2
+/*   */
+#undef USE_GD_IMGSTRTTF
 
-/* IBM iconv implementation */
-#undef HAVE_IBM_ICONV
+/*   */
+#undef HAVE_LIBFREETYPE
 
-/* */
-#undef HAVE_ICONV
+/*   */
+#undef ENABLE_GD_TTF
 
-/* Define to 1 if you have the <ieeefp.h> header file. */
-#undef HAVE_IEEEFP_H
+/*   */
+#undef HAVE_LIBT1
 
-/* */
-#undef HAVE_IMAP
+/*   */
+#undef HAVE_LIBGD
 
-/* */
-#undef HAVE_IMAP2000
+/*   */
+#undef HAVE_LIBGD13
 
-/* */
-#undef HAVE_IMAP2001
+/*   */
+#undef HAVE_LIBGD15
 
-/* */
-#undef HAVE_IMAP2004
+/*   */
+#undef HAVE_LIBGD20
 
-/* */
-#undef HAVE_IMAP_AUTH_GSS
+/*   */
+#undef HAVE_LIBGD204
 
-/* */
-#undef HAVE_IMAP_KRB
+/*   */
+#undef HAVE_GD_IMAGESETTILE
 
-/* */
-#undef HAVE_IMAP_MUTF7
+/*   */
+#undef HAVE_GD_IMAGESETBRUSH
 
-/* */
-#undef HAVE_IMAP_SSL
+/*   */
+#undef HAVE_GDIMAGECOLORRESOLVE
 
-/* */
-#undef HAVE_INET_ATON
+/*   */
+#undef HAVE_COLORCLOSESTHWB
 
-/* Define to 1 if you have the `inet_ntoa' function. */
-#undef HAVE_INET_NTOA
+/*   */
+#undef HAVE_GD_WBMP
 
-/* Define to 1 if you have the `inet_ntop' function. */
-#undef HAVE_INET_NTOP
+/*   */
+#undef HAVE_GD_GD2
 
-/* Define to 1 if you have the `inet_pton' function. */
-#undef HAVE_INET_PTON
+/*   */
+#undef HAVE_GD_PNG
 
-/* Define to 1 if you have the `initgroups' function. */
-#undef HAVE_INITGROUPS
+/*   */
+#undef HAVE_GD_XBM
 
-/* Define if int32_t type is present. */
-#undef HAVE_INT32_T
+/*   */
+#undef HAVE_GD_BUNDLED
 
-/* Whether intmax_t is available */
-#undef HAVE_INTMAX_T
+/*   */
+#undef HAVE_GD_GIF_READ
 
-/* Define to 1 if you have the <inttypes.h> header file. */
-#undef HAVE_INTTYPES_H
+/*   */
+#undef HAVE_GD_GIF_CREATE
 
-/* */
-#undef HAVE_IODBC
+/*   */
+#undef HAVE_GD_IMAGEELLIPSE
 
-/* */
-#undef HAVE_IODBC_H
+/*   */
+#undef HAVE_GD_FONTCACHESHUTDOWN
 
-/* Whether to enable IPv6 support */
-#undef HAVE_IPV6
+/*   */
+#undef HAVE_GD_FONTMUTEX
 
-/* Define to 1 if you have the `isascii' function. */
-#undef HAVE_ISASCII
+/*   */
+#undef HAVE_GD_DYNAMIC_CTX_EX
 
-/* Define to 1 if you have the `isfinite' function. */
-#undef HAVE_ISFINITE
+/*   */
+#undef HAVE_GD_GIF_CTX
 
-/* Define to 1 if you have the `isinf' function. */
-#undef HAVE_ISINF
+/*   */
+#undef HAVE_GD_JPG
 
-/* Define to 1 if you have the `isnan' function. */
-#undef HAVE_ISNAN
+/*   */
+#undef HAVE_GD_XPM
 
-/* */
-#undef HAVE_ISQLEXT_H
+/*   */
+#undef HAVE_GD_STRINGFT
 
-/* */
-#undef HAVE_ISQL_H
+/*   */
+#undef HAVE_GD_STRINGFTEX
 
-/* whether to enable JavaScript Object Serialization support */
-#undef HAVE_JSON
+/*   */
+#undef ENABLE_GD_TTF
 
-/* Define to 1 if you have the `kill' function. */
-#undef HAVE_KILL
+/*   */
+#undef USE_GD_JISX0208
 
-/* do we have kqueue? */
-#undef HAVE_KQUEUE
+/*   */
+#undef USE_GD_IMGSTRTTF
 
-/* Define to 1 if you have the <langinfo.h> header file. */
-#undef HAVE_LANGINFO_H
+/*   */
+#undef USE_GD_IMGSTRTTF
 
-/* Define to 1 if you have the `lchown' function. */
-#undef HAVE_LCHOWN
+/*   */
+#undef HAVE_LIBFREETYPE
 
-/* */
-#undef HAVE_LDAP
+/*   */
+#undef ENABLE_GD_TTF
 
-/* Define to 1 if you have the `ldap_parse_reference' function. */
-#undef HAVE_LDAP_PARSE_REFERENCE
+/*   */
+#undef HAVE_LIBT1
 
-/* Define to 1 if you have the `ldap_parse_result' function. */
-#undef HAVE_LDAP_PARSE_RESULT
+/*   */
+#undef HAVE_LIBGD
 
-/* LDAP SASL support */
-#undef HAVE_LDAP_SASL
+/*   */
+#undef HAVE_LIBGD13
 
-/* */
-#undef HAVE_LDAP_SASL_H
+/*   */
+#undef HAVE_LIBGD15
 
-/* */
-#undef HAVE_LDAP_SASL_SASL_H
+/*   */
+#undef HAVE_GD_PNG
 
-/* Define to 1 if you have the `ldap_start_tls_s' function. */
-#undef HAVE_LDAP_START_TLS_S
+/*   */
+#undef HAVE_GD_GIF_READ
 
-/* */
-#undef HAVE_LIBBIND
+/*   */
+#undef HAVE_GD_GIF_CREATE
 
-/* */
-#undef HAVE_LIBCRYPT
+/*   */
+#undef HAVE_GD_WBMP
 
-/* */
-#undef HAVE_LIBDL
+/*   */
+#undef HAVE_GD_JPG
 
-/* */
-#undef HAVE_LIBDNET_STUB
+/*   */
+#undef HAVE_GD_XPM
 
-/* */
-#undef HAVE_LIBEDIT
+/*   */
+#undef HAVE_GD_GD2
 
-/* */
-#undef HAVE_LIBEXPAT
+/*   */
+#undef HAVE_LIBGD20
 
-/* */
-#undef HAVE_LIBFREETYPE
+/*   */
+#undef HAVE_GD_IMAGESETTILE
 
-/* */
-#undef HAVE_LIBGD
+/*   */
+#undef HAVE_GD_IMAGEELLIPSE
 
-/* */
-#undef HAVE_LIBGD13
+/*   */
+#undef HAVE_GD_IMAGESETBRUSH
 
-/* */
-#undef HAVE_LIBGD15
+/*   */
+#undef HAVE_GD_STRINGTTF
 
-/* */
-#undef HAVE_LIBGD20
+/*   */
+#undef HAVE_GD_STRINGFT
 
-/* */
-#undef HAVE_LIBGD204
+/*   */
+#undef HAVE_GD_STRINGFTEX
 
-/* */
-#undef HAVE_LIBICONV
+/*   */
+#undef HAVE_COLORCLOSESTHWB
 
-/* */
-#undef HAVE_LIBINTL
+/*   */
+#undef HAVE_GDIMAGECOLORRESOLVE
 
-/* Define to 1 if you have the `m' library (-lm). */
-#undef HAVE_LIBM
+/*   */
+#undef HAVE_GD_GIF_CTX
 
-/* */
-#undef HAVE_LIBMCRYPT
+/*   */
+#undef HAVE_GD_CACHE_CREATE
 
-/* Whether you have libmm */
-#undef HAVE_LIBMM
+/*   */
+#undef HAVE_GD_FONTCACHESHUTDOWN
 
-/* */
-#undef HAVE_LIBNSL
+/*   */
+#undef HAVE_GD_FREEFONTCACHE
 
-/* */
-#undef HAVE_LIBPAM
+/*   */
+#undef HAVE_GD_FONTMUTEX
 
-/* */
-#undef HAVE_LIBRARYMANAGER_H
+/*   */
+#undef HAVE_GD_DYNAMIC_CTX_EX
 
-/* */
-#undef HAVE_LIBREADLINE
+/*   */
+#undef HAVE_LIBGD204
 
-/* Whether we have librecode 3.5 or higher */
-#undef HAVE_LIBRECODE
+/* Whether to build gd as dynamic module */
+#undef COMPILE_DL_GD
 
-/* */
-#undef HAVE_LIBRESOLV
+/*   */
+#undef HAVE_LIBINTL
 
-/* */
-#undef HAVE_LIBRT
+/* Whether to build gettext as dynamic module */
+#undef COMPILE_DL_GETTEXT
 
-/* */
-#undef HAVE_LIBSOCKET
+/*   */
+#undef HAVE_NGETTEXT
 
-/* */
-#undef HAVE_LIBT1
+/*   */
+#undef HAVE_DNGETTEXT
 
-/* */
-#undef HAVE_LIBXML
+/*   */
+#undef HAVE_DCNGETTEXT
 
-/* Define to 1 if you have the <limits.h> header file. */
-#undef HAVE_LIMITS_H
+/*   */
+#undef HAVE_BIND_TEXTDOMAIN_CODESET
 
-/* Define to 1 if you have the `link' function. */
-#undef HAVE_LINK
+/* Whether to build gmp as dynamic module */
+#undef COMPILE_DL_GMP
 
-/* Define to 1 if you have the `localeconv' function. */
-#undef HAVE_LOCALECONV
+/*   */
+#undef HAVE_GMP
 
-/* Define to 1 if you have the <locale.h> header file. */
-#undef HAVE_LOCALE_H
+/*   */
+#undef PHP_MHASH_BC
 
-/* Define to 1 if you have the `localtime_r' function. */
-#undef HAVE_LOCALTIME_R
+/* Have HASH Extension */
+#undef HAVE_HASH_EXT
 
-/* Define to 1 if you have the `lockf' function. */
-#undef HAVE_LOCKF
+/* Define if processor uses big-endian word */
+#undef WORDS_BIGENDIAN
 
-/* Define to 1 if you have the `log1p' function. */
-#undef HAVE_LOG1P
+/* Whether to build hash as dynamic module */
+#undef COMPILE_DL_HASH
 
-/* do we have SO_LISTENQxxx? */
-#undef HAVE_LQ_SO_LISTENQ
+/*   */
+#undef HAVE_LIBICONV
 
-/* do we have TCP_INFO? */
-#undef HAVE_LQ_TCP_INFO
+/*   */
+#undef HAVE_GICONV_H
 
-/* Define to 1 if you have the `lrand48' function. */
-#undef HAVE_LRAND48
+/*   */
+#undef HAVE_LIBICONV
 
-/* do we have mach_vm_read? */
-#undef HAVE_MACH_VM_READ
+/* iconv() is aliased to libiconv() in -liconv */
+#undef ICONV_ALIASED_LIBICONV
 
-/* Define to 1 if you have the `makedev' function. */
-#undef HAVE_MAKEDEV
+/*   */
+#undef HAVE_ICONV
 
-/* Define to 1 if you have the <malloc.h> header file. */
-#undef HAVE_MALLOC_H
+/* Which iconv implementation to use */
+#undef PHP_ICONV_IMPL
 
-/* Define to 1 if you have the `mblen' function. */
-#undef HAVE_MBLEN
+/* Konstantin Chuguev's iconv implementation */
+#undef HAVE_BSD_ICONV
 
-/* whether to have multibyte regex support */
-#undef HAVE_MBREGEX
+/* Which iconv implementation to use */
+#undef PHP_ICONV_IMPL
 
-/* Define to 1 if you have the `mbrlen' function. */
-#undef HAVE_MBRLEN
+/* glibc's iconv implementation */
+#undef HAVE_GLIBC_ICONV
 
-/* Define to 1 if you have the `mbsinit' function. */
-#undef HAVE_MBSINIT
+/* Which iconv implementation to use */
+#undef PHP_ICONV_IMPL
 
-/* Define if your system has mbstate_t in wchar.h */
-#undef HAVE_MBSTATE_T
+/* IBM iconv implementation */
+#undef HAVE_IBM_ICONV
 
-/* whether to have multibyte string support */
-#undef HAVE_MBSTRING
+/* Which iconv implementation to use */
+#undef PHP_ICONV_IMPL
 
-/* Define to 1 if you have the `memcpy' function. */
-#undef HAVE_MEMCPY
+/* Whether iconv supports error no or not */
+#undef ICONV_SUPPORTS_ERRNO
 
-/* Define to 1 if you have the `memmove' function. */
-#undef HAVE_MEMMOVE
+/* Whether iconv supports error no or not */
+#undef ICONV_SUPPORTS_ERRNO
 
-/* Define to 1 if you have the <memory.h> header file. */
-#undef HAVE_MEMORY_H
+/* Whether iconv supports error no or not */
+#undef ICONV_SUPPORTS_ERRNO
 
-/* Define to 1 if you have the `mempcpy' function. */
-#undef HAVE_MEMPCPY
+/* Path to iconv.h */
+#undef PHP_ICONV_H_PATH
 
-/* Define if the target system has support for memory allocation using
-   mmap(MAP_ANON) */
-#undef HAVE_MEM_MMAP_ANON
+/* Whether to build iconv as dynamic module */
+#undef COMPILE_DL_ICONV
 
-/* Define if the target system has support for memory allocation using
-   mmap("/dev/zero") */
-#undef HAVE_MEM_MMAP_ZERO
+/* Whether to build imap as dynamic module */
+#undef COMPILE_DL_IMAP
 
-/* Define to 1 if you have the `mkfifo' function. */
-#undef HAVE_MKFIFO
+/*   */
+#undef HAVE_IMAP
 
-/* Define to 1 if you have the `mknod' function. */
-#undef HAVE_MKNOD
+/*   */
+#undef HAVE_IMAP2000
 
-/* Define to 1 if you have the `mkstemp' function. */
-#undef HAVE_MKSTEMP
+/*   */
+#undef HAVE_IMAP2000
 
-/* Define to 1 if you have the `mmap' function. */
-#undef HAVE_MMAP
+/*   */
+#undef HAVE_IMAP2000
 
-/* Define to 1 if you have the <monetary.h> header file. */
-#undef HAVE_MONETARY_H
+/*   */
+#undef HAVE_IMAP2000
 
-/* Define to 1 if you have the `mremap' function. */
-#undef HAVE_MREMAP
+/*   */
+#undef HAVE_IMAP2000
 
-/* */
-#undef HAVE_MSSQL
+/*   */
+#undef HAVE_IMAP2000
 
-/* Whether you have MySQL */
-#undef HAVE_MYSQL
+/*   */
+#undef HAVE_IMAP2004
 
-/* */
-#undef HAVE_MYSQLILIB
+/* Whether utf8_mime2text() has new signature */
+#undef HAVE_NEW_MIME2TEXT
 
-/* Define to 1 if you have the `mysql_commit' function. */
-#undef HAVE_MYSQL_COMMIT
+/*   */
+#undef HAVE_IMAP2001
 
-/* Define to 1 if you have the `mysql_next_result' function. */
-#undef HAVE_MYSQL_NEXT_RESULT
+/*   */
+#undef HAVE_LIBPAM
 
-/* Define to 1 if you have the `mysql_sqlstate' function. */
-#undef HAVE_MYSQL_SQLSTATE
+/*   */
+#undef HAVE_LIBCRYPT
 
-/* Define to 1 if you have the `mysql_stmt_prepare' function. */
-#undef HAVE_MYSQL_STMT_PREPARE
+/*   */
+#undef HAVE_IMAP_KRB
 
-/* Define to 1 if you have the `nanosleep' function. */
-#undef HAVE_NANOSLEEP
+/*   */
+#undef HAVE_IMAP_SSL
 
-/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
-#undef HAVE_NDIR_H
+/*   */
+#undef HAVE_IMAP_AUTH_GSS
 
-/* Define to 1 if you have the <netdb.h> header file. */
-#undef HAVE_NETDB_H
+/*   */
+#undef HAVE_IMAP_MUTF7
 
-/* Define to 1 if you have the <netinet/in.h> header file. */
-#undef HAVE_NETINET_IN_H
+/*   */
+#undef HAVE_RFC822_OUTPUT_ADDRESS_LIST
 
-/* Define to 1 if you have the <netinet/tcp.h> header file. */
-#undef HAVE_NETINET_TCP_H
+/*   */
+#undef HAVE_IBASE
 
-/* */
-#undef HAVE_NET_SNMP
+/* Whether to build interbase as dynamic module */
+#undef COMPILE_DL_INTERBASE
 
-/* Whether utf8_mime2text() has new signature */
-#undef HAVE_NEW_MIME2TEXT
+/* Whether to build intl as dynamic module */
+#undef COMPILE_DL_INTL
 
-/* */
-#undef HAVE_NGETTEXT
+/* whether to enable JavaScript Object Serialization support */
+#undef HAVE_JSON
 
-/* Define to 1 if you have the `nice' function. */
-#undef HAVE_NICE
+/* Whether to build json as dynamic module */
+#undef COMPILE_DL_JSON
 
-/* Define to 1 if you have the `nl_langinfo' function. */
-#undef HAVE_NL_LANGINFO
+/* Whether to build ldap as dynamic module */
+#undef COMPILE_DL_LDAP
 
-/* Whether you have a Netscape/iPlanet/Sun Webserver */
-#undef HAVE_NSAPI
+/*   */
+#undef HAVE_NSLDAP
 
-/* */
+/*   */
 #undef HAVE_NSLDAP
 
-/* */
-#undef HAVE_OCI8
+/*   */
+#undef HAVE_NSLDAP
 
-/* */
-#undef HAVE_OCICOLLASSIGN
+/*   */
+#undef HAVE_NSLDAP
 
-/* */
-#undef HAVE_OCIENVCREATE
+/*   */
+#undef HAVE_ORALDAP
 
-/* */
-#undef HAVE_OCIENVNLSCREATE
+/*   */
+#undef HAVE_ORALDAP_10
 
-/* */
-#undef HAVE_OCILOBISTEMPORARY
+/*   */
+#undef HAVE_LDAP
 
-/* */
-#undef HAVE_OCISTMTFETCH2
+/* Whether 3 arg set_rebind_proc() */
+#undef HAVE_3ARG_SETREBINDPROC
 
-/* */
-#undef HAVE_OCI_INSTANT_CLIENT
+/*   */
+#undef HAVE_LDAP_SASL_SASL_H
 
-/* */
-#undef HAVE_OCI_LOB_READ2
+/*   */
+#undef HAVE_LDAP_SASL_H
 
-/* */
-#undef HAVE_ODBC2
+/* LDAP SASL support */
+#undef HAVE_LDAP_SASL
 
-/* */
-#undef HAVE_ODBCSDK_H
+/* Whether to build libevent as dynamic module */
+#undef COMPILE_DL_LIBEVENT
 
-/* */
-#undef HAVE_ODBC_H
+/* whether to have multibyte string support */
+#undef HAVE_MBSTRING
 
-/* */
-#undef HAVE_ODBC_ROUTER
+/* whether to check multibyte regex backtrack */
+#undef USE_COMBINATION_EXPLOSION_CHECK
 
-/* */
-#undef HAVE_OLD_COMPAT_H
+/* Define to 1 if you have the <stdarg.h> header file. */
+#undef HAVE_STDARG_PROTOTYPES
 
-/* whether you have old-style readdir_r */
-#undef HAVE_OLD_READDIR_R
+/* Define to 1 if the bundled oniguruma is used */
+#undef PHP_ONIG_BUNDLED
 
 /* Define to 1 if the oniguruma library is available */
 #undef HAVE_ONIG
 
-/* Define to 1 if you have the <openssl/crypto.h> header file. */
-#undef HAVE_OPENSSL_CRYPTO_H
+/* Define to 1 if the oniguruma library is available */
+#undef HAVE_ONIG
 
-/* */
-#undef HAVE_OPENSSL_EXT
+/* define to 1 if oniguruma has an invalid entry for KOI8 encoding */
+#undef PHP_ONIG_BAD_KOI8_ENTRY
 
-/* */
-#undef HAVE_ORALDAP
+/* whether to have multibyte regex support */
+#undef HAVE_MBREGEX
 
-/* */
-#undef HAVE_ORALDAP_10
+/* Whether to build mbstring as dynamic module */
+#undef COMPILE_DL_MBSTRING
 
-/* Whether struct _zend_object_value is packed */
-#undef HAVE_PACKED_OBJECT_VALUE
+/*   */
+#undef HAVE_LIBMCRYPT
 
-/* */
-#undef HAVE_PCRE
+/*   */
+#undef HAVE_LIBMCRYPT
 
-/* */
-#undef HAVE_PDO_DBLIB
+/* Whether to build mcrypt as dynamic module */
+#undef COMPILE_DL_MCRYPT
 
-/* */
-#undef HAVE_PDO_FIREBIRD
+/* Whether to build mssql as dynamic module */
+#undef COMPILE_DL_MSSQL
 
-/* Whether to build PostgreSQL for PDO support or not */
-#undef HAVE_PDO_PGSQL
+/*   */
+#undef HAVE_LIBDNET_STUB
 
-/* */
-#undef HAVE_PDO_SQLITELIB
+/*   */
+#undef HAVE_MSSQL
 
-/* Define to 1 if you have the `perror' function. */
-#undef HAVE_PERROR
+/*   */
+#undef HAVE_FREETDS
 
-/* Whether to build PostgreSQL support or not */
-#undef HAVE_PGSQL
+/*   */
+#undef PHP_MYSQL_UNIX_SOCK_ADDR
 
-/* Whether libpq is compiled with --enable-multibyte */
-#undef HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT
+/*   */
+#undef PHP_MYSQL_UNIX_SOCK_ADDR
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PGTRANSACTIONSTATUS
+/* Whether you have MySQL */
+#undef HAVE_MYSQL
 
-/* Whether to have pg_config.h */
-#undef HAVE_PG_CONFIG_H
+/* Whether to build mysql as dynamic module */
+#undef COMPILE_DL_MYSQL
 
-/* PostgreSQL 8.1 or later */
-#undef HAVE_PG_LO_CREATE
+/* Whether mysqlnd is enabled */
+#undef MYSQL_USE_MYSQLND
 
-/* PostgreSQL 8.4 or later */
-#undef HAVE_PG_LO_IMPORT_WITH_OID
+/* embedded MySQL support enabled */
+#undef HAVE_EMBEDDED_MYSQLI
 
-/* */
-#undef HAVE_PHP_SESSION
+/*   */
+#undef HAVE_MYSQLILIB
 
-/* Whether you have phttpd */
-#undef HAVE_PHTTPD
+/*   */
+#undef HAVE_STMT_NEXT_RESULT
 
-/* Define to 1 if you have the `poll' function. */
-#undef HAVE_POLL
+/* Whether to build mysqli as dynamic module */
+#undef COMPILE_DL_MYSQLI
 
-/* do we have port framework? */
-#undef HAVE_PORT
+/* Whether mysqlnd is enabled */
+#undef MYSQLI_USE_MYSQLND
 
-/* whether to include POSIX-like functions */
-#undef HAVE_POSIX
+/*   */
+#undef HAVE_OCI_LOB_READ2
 
-/* whether you have POSIX readdir_r */
-#undef HAVE_POSIX_READDIR_R
+/* Whether to build oci8 as dynamic module */
+#undef COMPILE_DL_OCI8
 
-/* PostgreSQL 7.0.x or later */
-#undef HAVE_PQCLIENTENCODING
+/*   */
+#undef HAVE_OCI8
 
-/* Broken libpq under windows */
-#undef HAVE_PQCMDTUPLES
+/*   */
+#undef PHP_OCI8_DEF_DIR
 
-/* PostgreSQL 7.2.0 or later */
-#undef HAVE_PQESCAPE
+/*   */
+#undef PHP_OCI8_DEF_SHARED_LIBADD
 
-/* PostgreSQL 8.1.4 or later */
-#undef HAVE_PQESCAPE_BYTEA_CONN
+/*   */
+#undef HAVE_OCI_INSTANT_CLIENT
 
-/* PostgreSQL 8.1.4 or later */
-#undef HAVE_PQESCAPE_CONN
+/*   */
+#undef HAVE_OCI_LOB_READ2
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQEXECPARAMS
+/* Whether to build oci8 as dynamic module */
+#undef COMPILE_DL_OCI8
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQEXECPREPARED
+/*   */
+#undef HAVE_OCI8
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQFREEMEM
+/*   */
+#undef HAVE_ADABAS
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQFTABLE
+/*   */
+#undef HAVE_SAPDB
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQGETCOPYDATA
+/*   */
+#undef HAVE_SOLID_35
 
-/* Older PostgreSQL */
-#undef HAVE_PQOIDVALUE
+/*   */
+#undef HAVE_SOLID_30
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQPARAMETERSTATUS
+/*   */
+#undef HAVE_SOLID
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQPREPARE
+/* Needed in sqlunix.h  */
+#undef SS_LINUX
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQPROTOCOLVERSION
+/* Needed in sqlunix.h  */
+#undef SS_LINUX
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQPUTCOPYDATA
+/* Needed in sqlunix.h for wchar defs  */
+#undef SS_FBX
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQPUTCOPYEND
+/* Needed in sqlunix.h for wchar defs  */
+#undef SS_FBX
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQRESULTERRORFIELD
+/*   */
+#undef HAVE_IBMDB2
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQSENDPREPARE
+/*   */
+#undef HAVE_ODBC_ROUTER
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQSENDQUERYPARAMS
+/*   */
+#undef HAVE_EMPRESS
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQSENDQUERYPREPARED
+/*   */
+#undef HAVE_EMPRESS
 
-/* PostgreSQL 7.4 or later */
-#undef HAVE_PQSETERRORVERBOSITY
+/*   */
+#undef AIX
 
-/* PostgreSQL 7.0.x or later */
-#undef HAVE_PQSETNONBLOCKING
+/*   */
+#undef HPUX
 
-/* PostgreSQL 7.3.0 or later */
-#undef HAVE_PQUNESCAPEBYTEA
+/*   */
+#undef LINUX
 
-/* do we have prctl? */
-#undef HAVE_PRCTL
+/*   */
+#undef NEUTRINO
 
-/* */
-#undef HAVE_PREAD
+/*   */
+#undef ISOLARIS
 
-/* */
-#undef HAVE_PSPELL
+/*   */
+#undef SOLARIS
 
-/* do we have ptrace? */
-#undef HAVE_PTRACE
+/*   */
+#undef UNIXWARE
 
-/* Whether ptrdiff_t is available */
-#undef HAVE_PTRDIFF_T
+/*   */
+#undef HAVE_BIRDSTEP
 
-/* Define to 1 if you have the `ptsname' function. */
-#undef HAVE_PTSNAME
+/*   */
+#undef HAVE_CODBC
 
-/* Define to 1 if you have the `putenv' function. */
-#undef HAVE_PUTENV
+/*   */
+#undef HAVE_IODBC
 
-/* Define to 1 if you have the <pwd.h> header file. */
-#undef HAVE_PWD_H
+/*   */
+#undef HAVE_ODBC2
 
-/* */
-#undef HAVE_PWRITE
+/*   */
+#undef HAVE_ESOOB
 
-/* Define to 1 if you have the `random' function. */
-#undef HAVE_RANDOM
+/*   */
+#undef HAVE_UNIXODBC
 
-/* Define to 1 if you have the `rand_r' function. */
-#undef HAVE_RAND_R
+/* Whether you want DBMaker */
+#undef HAVE_DBMAKER
 
-/* Define to 1 if you have the `realpath' function. */
-#undef HAVE_REALPATH
+/*   */
+#undef HAVE_SQLDATASOURCES
 
-/* Whether Reflection is enabled */
-#undef HAVE_REFLECTION
+/*   */
+#undef HAVE_UODBC
 
-/* 1 */
-#undef HAVE_REGEX_T_RE_MAGIC
+/* Whether to build odbc as dynamic module */
+#undef COMPILE_DL_ODBC
 
-/* Define to 1 if you have the <resolv.h> header file. */
-#undef HAVE_RESOLV_H
+/*   */
+#undef HAVE_FORK
 
-/* */
-#undef HAVE_RES_NSEARCH
+/*   */
+#undef HAVE_WAITPID
 
-/* */
-#undef HAVE_RES_SEARCH
+/*   */
+#undef HAVE_SIGACTION
 
-/* */
-#undef HAVE_RFC822_OUTPUT_ADDRESS_LIST
+/* Whether to build pcntl as dynamic module */
+#undef COMPILE_DL_PCNTL
 
-/* */
-#undef HAVE_RL_CALLBACK_READ_CHAR
+/* Whether to build pdo as dynamic module */
+#undef COMPILE_DL_PDO
 
-/* Define to 1 if you have the `rl_completion_matches' function. */
-#undef HAVE_RL_COMPLETION_MATCHES
+/* Whether to build pdo_dblib as dynamic module */
+#undef COMPILE_DL_PDO_DBLIB
 
-/* Whether you use Roxen */
-#undef HAVE_ROXEN
+/*   */
+#undef HAVE_LIBDNET_STUB
 
-/* */
-#undef HAVE_SAPDB
+/*   */
+#undef HAVE_PDO_DBLIB
 
-/* Define to 1 if you have the `scandir' function. */
-#undef HAVE_SCANDIR
+/*   */
+#undef HAVE_FREETDS
 
-/* do we have select? */
-#undef HAVE_SELECT
+/*   */
+#undef HAVE_PDO_FIREBIRD
 
-/* */
-#undef HAVE_SEMUN
+/* Whether to build pdo_firebird as dynamic module */
+#undef COMPILE_DL_PDO_FIREBIRD
 
-/* Define to 1 if you have the `setegid' function. */
-#undef HAVE_SETEGID
+/* Whether pdo_mysql uses mysqlnd */
+#undef PDO_USE_MYSQLND
+
+/* Whether you have MySQL */
+#undef HAVE_MYSQL
 
-/* Define to 1 if you have the `setenv' function. */
-#undef HAVE_SETENV
+/*   */
+#undef PDO_MYSQL_UNIX_ADDR
 
-/* Define to 1 if you have the `seteuid' function. */
-#undef HAVE_SETEUID
+/* Whether to build pdo_mysql as dynamic module */
+#undef COMPILE_DL_PDO_MYSQL
 
-/* Define to 1 if you have the `setitimer' function. */
-#undef HAVE_SETITIMER
+/*   */
+#undef HAVE_OCIENVCREATE
 
-/* Define to 1 if you have the `setlocale' function. */
-#undef HAVE_SETLOCALE
+/*   */
+#undef HAVE_OCIENVNLSCREATE
 
-/* Define to 1 if you have the `setpgid' function. */
-#undef HAVE_SETPGID
+/*   */
+#undef HAVE_OCILOBISTEMPORARY
 
-/* Define to 1 if you have the `setpriority' function. */
-#undef HAVE_SETPRIORITY
+/*   */
+#undef HAVE_OCILOBISTEMPORARY
 
-/* Define to 1 if you have the `setproctitle' function. */
-#undef HAVE_SETPROCTITLE
+/*   */
+#undef HAVE_OCICOLLASSIGN
 
-/* Define to 1 if you have the `setsid' function. */
-#undef HAVE_SETSID
+/*   */
+#undef HAVE_OCISTMTFETCH2
 
-/* Define to 1 if you have the `setsockopt' function. */
-#undef HAVE_SETSOCKOPT
+/* Whether to build pdo_oci as dynamic module */
+#undef COMPILE_DL_PDO_OCI
 
-/* Define to 1 if you have the `setvbuf' function. */
-#undef HAVE_SETVBUF
+/*   */
+#undef PHP_PDO_OCI_CLIENT_VERSION
 
-/* */
-#undef HAVE_SHMOP
+/*   */
+#undef HAVE_ODBC_H
 
-/* Define to 1 if you have the `shutdown' function. */
-#undef HAVE_SHUTDOWN
+/*   */
+#undef HAVE_ODBCSDK_H
 
-/* */
-#undef HAVE_SIGACTION
+/*   */
+#undef HAVE_IODBC_H
 
-/* Define to 1 if you have the <signal.h> header file. */
-#undef HAVE_SIGNAL_H
+/*   */
+#undef HAVE_SQLUNIX_H
 
-/* Define to 1 if you have the `sigprocmask' function. */
-#undef HAVE_SIGPROCMASK
+/*   */
+#undef HAVE_SQLTYPES_H
 
-/* Define to 1 if you have the `sigsetjmp' function. */
-#undef HAVE_SIGSETJMP
+/*   */
+#undef HAVE_SQLUCODE_H
 
-/* Define to 1 if you have the `sigtimedwait' function. */
-#undef HAVE_SIGTIMEDWAIT
+/*   */
+#undef HAVE_SQL_H
 
-/* Define to 1 if you have the `sigwaitinfo' function. */
-#undef HAVE_SIGWAITINFO
+/*   */
+#undef HAVE_ISQL_H
 
-/* */
-#undef HAVE_SIMPLEXML
+/*   */
+#undef HAVE_SQLEXT_H
 
-/* Define to 1 if you have the `sin' function. */
-#undef HAVE_SIN
+/*   */
+#undef HAVE_ISQLEXT_H
 
-/* */
-#undef HAVE_SNMP
+/*   */
+#undef HAVE_UDBCEXT_H
 
-/* */
-#undef HAVE_SNMP_PARSE_OID
+/*   */
+#undef HAVE_SQLCLI1_H
 
-/* Define to 1 if you have the `snprintf' function. */
-#undef HAVE_SNPRINTF
+/*   */
+#undef HAVE_LIBRARYMANAGER_H
 
-/* */
-#undef HAVE_SOAP
+/*   */
+#undef HAVE_CLI0CORE_H
 
-/* Whether struct sockaddr has field sa_len */
-#undef HAVE_SOCKADDR_SA_LEN
+/*   */
+#undef HAVE_CLI0EXT_H
 
-/* Whether you have struct sockaddr_storage */
-#undef HAVE_SOCKADDR_STORAGE
+/*   */
+#undef HAVE_CLI0CLI_H
 
-/* Define if sockaddr_un in sys/un.h contains a sun_len component */
-#undef HAVE_SOCKADDR_UN_SUN_LEN
+/*   */
+#undef HAVE_CLI0DEFS_H
 
-/* */
-#undef HAVE_SOCKET
+/*   */
+#undef HAVE_CLI0ENV_H
 
-/* Define to 1 if you have the `socketpair' function. */
-#undef HAVE_SOCKETPAIR
+/* Whether to build pdo_odbc as dynamic module */
+#undef COMPILE_DL_PDO_ODBC
 
-/* */
-#undef HAVE_SOCKETS
+/* Whether to have pg_config.h */
+#undef HAVE_PG_CONFIG_H
 
-/* Whether you have socklen_t */
-#undef HAVE_SOCKLEN_T
+/* Whether to have pg_config.h */
+#undef HAVE_PG_CONFIG_H
 
-/* */
-#undef HAVE_SOLID
+/* Whether to build PostgreSQL for PDO support or not */
+#undef HAVE_PDO_PGSQL
 
-/* */
-#undef HAVE_SOLID_30
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPARAMETERSTATUS
 
-/* */
-#undef HAVE_SOLID_35
+/* PostgreSQL 8.0 or later */
+#undef HAVE_PQPREPARE
 
-/* Whether you want SPL (Standard PHP Library) support */
-#undef HAVE_SPL
+/* PostgreSQL 8.1.4 or later */
+#undef HAVE_PQESCAPE_CONN
 
-/* */
-#undef HAVE_SQLCLI1_H
+/* PostgreSQL 8.1.4 or later */
+#undef HAVE_PQESCAPE_BYTEA_CONN
 
-/* */
-#undef HAVE_SQLDATASOURCES
+/* Whether libpq is compiled with --enable-multibyte */
+#undef HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT
 
-/* */
-#undef HAVE_SQLEXT_H
+/* Whether to build pdo_pgsql as dynamic module */
+#undef COMPILE_DL_PDO_PGSQL
 
-/* */
-#undef HAVE_SQLITE3
+/*   */
+#undef HAVE_PDO_SQLITELIB
 
 /* have commercial sqlite3 with crypto support */
 #undef HAVE_SQLITE3_KEY
 
-/* */
-#undef HAVE_SQLTYPES_H
+/* Whether to build pdo_sqlite as dynamic module */
+#undef COMPILE_DL_PDO_SQLITE
 
-/* */
-#undef HAVE_SQLUCODE_H
+/* Whether to build pdo_sqlite as dynamic module */
+#undef COMPILE_DL_PDO_SQLITE
 
-/* */
-#undef HAVE_SQLUNIX_H
+/* Whether to have pg_config.h */
+#undef HAVE_PG_CONFIG_H
 
-/* */
-#undef HAVE_SQL_H
+/* Whether to have pg_config.h */
+#undef HAVE_PG_CONFIG_H
 
-/* Define to 1 if you have the `srand48' function. */
-#undef HAVE_SRAND48
+/* Whether to build PostgreSQL support or not */
+#undef HAVE_PGSQL
 
-/* Define to 1 if you have the `srandom' function. */
-#undef HAVE_SRANDOM
+/* PostgreSQL 7.2.0 or later */
+#undef HAVE_PQESCAPE
 
-/* Whether ssize_t is available */
-#undef HAVE_SSIZE_T
+/* PostgreSQL 7.3.0 or later */
+#undef HAVE_PQUNESCAPEBYTEA
 
-/* Define to 1 if you have the `statfs' function. */
-#undef HAVE_STATFS
+/* PostgreSQL 7.0.x or later */
+#undef HAVE_PQSETNONBLOCKING
 
-/* Define to 1 if you have the `statvfs' function. */
-#undef HAVE_STATVFS
+/* Broken libpq under windows */
+#undef HAVE_PQCMDTUPLES
 
-/* Define to 1 if you have the <stdarg.h> header file. */
-#undef HAVE_STDARG_H
+/* Older PostgreSQL */
+#undef HAVE_PQOIDVALUE
 
-/* Define to 1 if you have the <stdarg.h> header file. */
-#undef HAVE_STDARG_PROTOTYPES
+/* PostgreSQL 7.0.x or later */
+#undef HAVE_PQCLIENTENCODING
 
-/* Define to 1 if you have the <stdbool.h> header file. */
-#undef HAVE_STDBOOL_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPARAMETERSTATUS
 
-/* Define to 1 if you have the <stdint.h> header file. */
-#undef HAVE_STDINT_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPROTOCOLVERSION
 
-/* Define to 1 if you have the <stdio.h> header file. */
-#undef HAVE_STDIO_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PGTRANSACTIONSTATUS
 
-/* Define to 1 if you have the <stdlib.h> header file. */
-#undef HAVE_STDLIB_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQEXECPARAMS
 
-/* Define to 1 if you have the `std_syslog' function. */
-#undef HAVE_STD_SYSLOG
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPREPARE
 
-/* */
-#undef HAVE_STMT_NEXT_RESULT
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQEXECPREPARED
 
-/* Define to 1 if you have the `strcasecmp' function. */
-#undef HAVE_STRCASECMP
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQRESULTERRORFIELD
 
-/* Define to 1 if you have the `strcoll' function. */
-#undef HAVE_STRCOLL
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQSENDQUERYPARAMS
 
-/* Define to 1 if you have the `strdup' function. */
-#undef HAVE_STRDUP
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQSENDPREPARE
 
-/* Define to 1 if you have the `strerror' function. */
-#undef HAVE_STRERROR
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQSENDQUERYPREPARED
 
-/* Define to 1 if you have the `strfmon' function. */
-#undef HAVE_STRFMON
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPUTCOPYDATA
 
-/* Define to 1 if you have the `strftime' function. */
-#undef HAVE_STRFTIME
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQPUTCOPYEND
 
-/* Define to 1 if you have the <strings.h> header file. */
-#undef HAVE_STRINGS_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQGETCOPYDATA
 
-/* Define to 1 if you have the <string.h> header file. */
-#undef HAVE_STRING_H
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQFREEMEM
 
-/* Define to 1 if you have the `strlcat' function. */
-#undef HAVE_STRLCAT
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQSETERRORVERBOSITY
 
-/* Define to 1 if you have the `strlcpy' function. */
-#undef HAVE_STRLCPY
+/* PostgreSQL 7.4 or later */
+#undef HAVE_PQFTABLE
 
-/* Define to 1 if you have the `strndup' function. */
-#undef HAVE_STRNDUP
+/* PostgreSQL 8.1.4 or later */
+#undef HAVE_PQESCAPE_CONN
 
-/* Define to 1 if you have the `strnlen' function. */
-#undef HAVE_STRNLEN
+/* PostgreSQL 8.1.4 or later */
+#undef HAVE_PQESCAPE_BYTEA_CONN
 
-/* Define to 1 if you have the `strpbrk' function. */
-#undef HAVE_STRPBRK
+/* Whether libpq is compiled with --enable-multibyte */
+#undef HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT
 
-/* Define to 1 if you have the `strpncpy' function. */
-#undef HAVE_STRPNCPY
+/* PostgreSQL 8.1 or later */
+#undef HAVE_PG_LO_CREATE
 
-/* Define to 1 if you have the `strptime' function. */
-#undef HAVE_STRPTIME
+/* PostgreSQL 8.4 or later */
+#undef HAVE_PG_LO_IMPORT_WITH_OID
 
-/* whether strptime() declaration fails */
-#undef HAVE_STRPTIME_DECL_FAILS
+/* Whether to build pgsql as dynamic module */
+#undef COMPILE_DL_PGSQL
 
-/* Define to 1 if you have the `strstr' function. */
-#undef HAVE_STRSTR
+/* Whether to build phar as dynamic module */
+#undef COMPILE_DL_PHAR
 
-/* Define to 1 if you have the `strtod' function. */
-#undef HAVE_STRTOD
+/*   */
+#undef PHAR_HASH_OK
 
-/* Define to 1 if you have the `strtok_r' function. */
-#undef HAVE_STRTOK_R
+/*   */
+#undef PHAR_HAVE_OPENSSL
 
-/* Define to 1 if you have the `strtol' function. */
-#undef HAVE_STRTOL
+/* whether to include POSIX-like functions */
+#undef HAVE_POSIX
 
-/* Define to 1 if you have the `strtoll' function. */
-#undef HAVE_STRTOLL
+/* Whether to build posix as dynamic module */
+#undef COMPILE_DL_POSIX
 
-/* Define to 1 if you have the `strtoul' function. */
-#undef HAVE_STRTOUL
+/* Whether you have a working ttyname_r */
+#undef HAVE_TTYNAME_R
 
-/* Define to 1 if you have the `strtoull' function. */
-#undef HAVE_STRTOULL
+/* Wether struct utsname has domainname */
+#undef HAVE_UTSNAME_DOMAINNAME
 
-/* whether you have struct flock */
-#undef HAVE_STRUCT_FLOCK
+/* Whether to build pspell as dynamic module */
+#undef COMPILE_DL_PSPELL
+
+/*   */
+#undef HAVE_PSPELL
+
+/*   */
+#undef HAVE_RL_CALLBACK_READ_CHAR
 
-/* Define to 1 if `st_blksize' is member of `struct stat'. */
-#undef HAVE_STRUCT_STAT_ST_BLKSIZE
+/*   */
+#undef HAVE_LIBREADLINE
 
-/* Define to 1 if `st_blocks' is member of `struct stat'. */
-#undef HAVE_STRUCT_STAT_ST_BLOCKS
+/*   */
+#undef HAVE_LIBEDIT
 
-/* Define to 1 if `st_rdev' is member of `struct stat'. */
-#undef HAVE_STRUCT_STAT_ST_RDEV
+/* Whether to build readline as dynamic module */
+#undef COMPILE_DL_READLINE
 
-/* Define to 1 if `tm_zone' is member of `struct tm'. */
-#undef HAVE_STRUCT_TM_TM_ZONE
+/* Whether we have librecode 3.5 */
+#undef HAVE_BROKEN_RECODE
 
-/* Define to 1 if your `struct stat' has `st_blksize'. Deprecated, use
-   `HAVE_STRUCT_STAT_ST_BLKSIZE' instead. */
-#undef HAVE_ST_BLKSIZE
+/* Whether we have librecode 3.5 or higher */
+#undef HAVE_LIBRECODE
 
-/* Define to 1 if your `struct stat' has `st_blocks'. Deprecated, use
-   `HAVE_STRUCT_STAT_ST_BLOCKS' instead. */
-#undef HAVE_ST_BLOCKS
+/* Whether to build recode as dynamic module */
+#undef COMPILE_DL_RECODE
 
-/* Define to 1 if you have the <st.h> header file. */
-#undef HAVE_ST_H
+/* Whether Reflection is enabled */
+#undef HAVE_REFLECTION
 
-/* Define to 1 if your `struct stat' has `st_rdev'. Deprecated, use
-   `HAVE_STRUCT_STAT_ST_RDEV' instead. */
-#undef HAVE_ST_RDEV
+/* Whether to build reflection as dynamic module */
+#undef COMPILE_DL_REFLECTION
 
-/* */
-#undef HAVE_SYBASE_CT
+/*   */
+#undef HAVE_PWRITE
 
-/* Define to 1 if you have the `symlink' function. */
-#undef HAVE_SYMLINK
+/* whether pwrite64 is default */
+#undef PHP_PWRITE_64
 
-/* Define if you have the __sync_fetch_and_add function */
-#undef HAVE_SYNC_FETCH_AND_ADD
+/*   */
+#undef HAVE_PREAD
+
+/* whether pread64 is default */
+#undef PHP_PREAD_64
+
+/* Whether to build session as dynamic module */
+#undef COMPILE_DL_SESSION
 
-/* do we have sysconf? */
-#undef HAVE_SYSCONF
+/*   */
+#undef HAVE_PHP_SESSION
 
-/* Define to 1 if you have the <sysexits.h> header file. */
-#undef HAVE_SYSEXITS_H
+/* Whether you have libmm */
+#undef HAVE_LIBMM
 
-/* Define to 1 if you have the <syslog.h> header file. */
-#undef HAVE_SYSLOG_H
+/*   */
+#undef HAVE_SHMOP
 
-/* */
-#undef HAVE_SYSVMSG
+/* Whether to build shmop as dynamic module */
+#undef COMPILE_DL_SHMOP
 
-/* */
-#undef HAVE_SYSVSEM
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef HAVE_SYSVSHM
+/*   */
+#undef HAVE_SIMPLEXML
 
-/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
-   */
-#undef HAVE_SYS_DIR_H
+/* Whether to build simplexml as dynamic module */
+#undef COMPILE_DL_SIMPLEXML
 
-/* Define to 1 if you have the <sys/file.h> header file. */
-#undef HAVE_SYS_FILE_H
+/*   */
+#undef HAVE_NET_SNMP
 
-/* Define to 1 if you have the <sys/ioctl.h> header file. */
-#undef HAVE_SYS_IOCTL_H
+/*   */
+#undef HAVE_SNMP_PARSE_OID
 
-/* Define to 1 if you have the <sys/ipc.h> header file. */
-#undef HAVE_SYS_IPC_H
+/*   */
+#undef HAVE_SNMP
 
-/* Define to 1 if you have the <sys/loadavg.h> header file. */
-#undef HAVE_SYS_LOADAVG_H
+/*   */
+#undef UCD_SNMP_HACK
 
-/* Define to 1 if you have the <sys/mkdev.h> header file. */
-#undef HAVE_SYS_MKDEV_H
+/* Whether to build snmp as dynamic module */
+#undef COMPILE_DL_SNMP
 
-/* Define to 1 if you have the <sys/mman.h> header file. */
-#undef HAVE_SYS_MMAN_H
+/*   */
+#undef HAVE_LIBXML
 
-/* Define to 1 if you have the <sys/mount.h> header file. */
-#undef HAVE_SYS_MOUNT_H
+/*   */
+#undef HAVE_SOAP
 
-/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
-   */
-#undef HAVE_SYS_NDIR_H
+/* Whether to build soap as dynamic module */
+#undef COMPILE_DL_SOAP
 
-/* Define to 1 if you have the <sys/param.h> header file. */
-#undef HAVE_SYS_PARAM_H
+/* Whether you have struct cmsghdr */
+#undef HAVE_CMSGHDR
 
-/* Define to 1 if you have the <sys/poll.h> header file. */
-#undef HAVE_SYS_POLL_H
+/*   */
+#undef MISSING_MSGHDR_MSGFLAGS
 
-/* Define to 1 if you have the <sys/resource.h> header file. */
-#undef HAVE_SYS_RESOURCE_H
+/*   */
+#undef HAVE_SOCKETS
 
-/* Define to 1 if you have the <sys/select.h> header file. */
-#undef HAVE_SYS_SELECT_H
+/* Whether to build sockets as dynamic module */
+#undef COMPILE_DL_SOCKETS
 
-/* Define to 1 if you have the <sys/socket.h> header file. */
-#undef HAVE_SYS_SOCKET_H
+/* Whether struct _zend_object_value is packed */
+#undef HAVE_PACKED_OBJECT_VALUE
 
-/* Define to 1 if you have the <sys/statfs.h> header file. */
-#undef HAVE_SYS_STATFS_H
+/* Whether you want SPL (Standard PHP Library) support */
+#undef HAVE_SPL
 
-/* Define to 1 if you have the <sys/statvfs.h> header file. */
-#undef HAVE_SYS_STATVFS_H
+/* Whether to build spl as dynamic module */
+#undef COMPILE_DL_SPL
 
-/* Define to 1 if you have the <sys/stat.h> header file. */
-#undef HAVE_SYS_STAT_H
+/* Have PDO */
+#undef PHP_SQLITE2_HAVE_PDO
 
-/* Define to 1 if you have the <sys/sysexits.h> header file. */
-#undef HAVE_SYS_SYSEXITS_H
+/* Whether to build sqlite as dynamic module */
+#undef COMPILE_DL_SQLITE
 
-/* Define to 1 if you have the <sys/times.h> header file. */
-#undef HAVE_SYS_TIMES_H
+/* Size of a pointer */
+#undef SQLITE_PTR_SZ
 
-/* Define to 1 if you have the <sys/time.h> header file. */
-#undef HAVE_SYS_TIME_H
+/*   */
+#undef SQLITE_UTF8
 
-/* Define to 1 if you have the <sys/types.h> header file. */
-#undef HAVE_SYS_TYPES_H
+/* Define if flush should be called explicitly after a buffered io. */
+#undef HAVE_FLUSHIO
 
-/* Define to 1 if you have the <sys/uio.h> header file. */
-#undef HAVE_SYS_UIO_H
+/*   */
+#undef HAVE_CRYPT
 
-/* Define to 1 if you have the <sys/un.h> header file. */
-#undef HAVE_SYS_UN_H
+/* whether the compiler supports __alignof__ */
+#undef HAVE_ALIGNOF
 
-/* Define to 1 if you have the <sys/utsname.h> header file. */
-#undef HAVE_SYS_UTSNAME_H
+/* whether the compiler supports __attribute__ ((__aligned__)) */
+#undef HAVE_ATTRIBUTE_ALIGNED
 
-/* Define to 1 if you have the <sys/varargs.h> header file. */
-#undef HAVE_SYS_VARARGS_H
+/* Whether PHP has to use its own crypt_r for blowfish, des, ext des and md5 */
+#undef PHP_USE_PHP_CRYPT_R
 
-/* Define to 1 if you have the <sys/vfs.h> header file. */
-#undef HAVE_SYS_VFS_H
+/* Whether the system supports standard DES salt */
+#undef PHP_STD_DES_CRYPT
 
-/* Define to 1 if you have the <sys/wait.h> header file. */
-#undef HAVE_SYS_WAIT_H
+/* Whether the system supports BlowFish salt */
+#undef PHP_BLOWFISH_CRYPT
 
-/* Define to 1 if you have the `tempnam' function. */
-#undef HAVE_TEMPNAM
+/* Whether the system supports extended DES salt */
+#undef PHP_EXT_DES_CRYPT
 
-/* Define to 1 if you have the <termios.h> header file. */
-#undef HAVE_TERMIOS_H
+/* Whether the system supports MD5 salt */
+#undef PHP_MD5_CRYPT
 
-/* */
-#undef HAVE_TIDY
+/* Whether the system supports SHA512 salt */
+#undef PHP_SHA512_CRYPT
 
-/* */
-#undef HAVE_TIDYOPTGETDOC
+/* Whether the system supports SHA256 salt */
+#undef PHP_SHA256_CRYPT
 
-/* do we have times? */
-#undef HAVE_TIMES
+/* Whether the system supports standard DES salt */
+#undef PHP_STD_DES_CRYPT
 
-/* Define to 1 if you have the <time.h> header file. */
-#undef HAVE_TIME_H
+/* Whether the system supports BlowFish salt */
+#undef PHP_BLOWFISH_CRYPT
 
-/* whether you have tm_gmtoff in struct tm */
-#undef HAVE_TM_GMTOFF
+/* Whether the system supports extended DES salt */
+#undef PHP_EXT_DES_CRYPT
 
-/* Define to 1 if your `struct tm' has `tm_zone'. Deprecated, use
-   `HAVE_STRUCT_TM_TM_ZONE' instead. */
-#undef HAVE_TM_ZONE
+/* Whether the system supports MD5 salt */
+#undef PHP_MD5_CRYPT
 
-/* Whether you have a working ttyname_r */
-#undef HAVE_TTYNAME_R
+/* Whether the system supports SHA512 salt */
+#undef PHP_SHA512_CRYPT
 
-/* Define to 1 if you have the <tuxmodule.h> header file. */
-#undef HAVE_TUXMODULE_H
+/* Whether the system supports SHA256 salt */
+#undef PHP_SHA256_CRYPT
 
-/* Define to 1 if you don't have `tm_zone' but do have the external array
-   `tzname'. */
-#undef HAVE_TZNAME
+/* Whether PHP has to use its own crypt_r for blowfish, des and ext des */
+#undef PHP_USE_PHP_CRYPT_R
 
-/* Define to 1 if you have the `tzset' function. */
-#undef HAVE_TZSET
+/* Define if your system has fork/vfork/CreateProcess */
+#undef PHP_CAN_SUPPORT_PROC_OPEN
 
-/* */
-#undef HAVE_UDBCEXT_H
+/* Whether to enable chroot() function */
+#undef ENABLE_CHROOT_FUNC
 
-/* Define if uint32_t type is present. */
-#undef HAVE_UINT32_T
+/*   */
+#undef HAVE_RES_NSEARCH
 
-/* Define to 1 if you have the <unistd.h> header file. */
-#undef HAVE_UNISTD_H
+/*   */
+#undef HAVE_RES_NSEARCH
 
-/* */
-#undef HAVE_UNIXODBC
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* Define to 1 if you have the <unix.h> header file. */
-#undef HAVE_UNIX_H
+/*   */
+#undef HAVE_RES_NSEARCH
 
-/* Define to 1 if you have the `unlockpt' function. */
-#undef HAVE_UNLOCKPT
+/*   */
+#undef HAVE_LIBBIND
 
-/* Define to 1 if you have the `unsetenv' function. */
-#undef HAVE_UNSETENV
+/*   */
+#undef HAVE_RES_NSEARCH
 
-/* */
-#undef HAVE_UODBC
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Define to 1 if you have the `usleep' function. */
-#undef HAVE_USLEEP
+/*   */
+#undef HAVE_DNS_SEARCH
 
-/* Define to 1 if you have the `utime' function. */
-#undef HAVE_UTIME
+/*   */
+#undef HAVE_DNS_SEARCH
 
-/* Define to 1 if you have the `utimes' function. */
-#undef HAVE_UTIMES
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* Define to 1 if you have the <utime.h> header file. */
-#undef HAVE_UTIME_H
+/*   */
+#undef HAVE_DNS_SEARCH
 
-/* Define to 1 if `utime(file, NULL)' sets file's timestamp to the present. */
-#undef HAVE_UTIME_NULL
+/*   */
+#undef HAVE_LIBBIND
 
-/* Wether struct utsname has domainname */
-#undef HAVE_UTSNAME_DOMAINNAME
+/*   */
+#undef HAVE_DNS_SEARCH
 
-/* Define to 1 if you have the `vasprintf' function. */
-#undef HAVE_VASPRINTF
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Define to 1 if you have the `vprintf' function. */
-#undef HAVE_VPRINTF
+/*   */
+#undef HAVE_DN_EXPAND
 
-/* Define to 1 if you have the `vsnprintf' function. */
-#undef HAVE_VSNPRINTF
+/*   */
+#undef HAVE_DN_EXPAND
 
-/* Define to 1 if you have the `wait3' function. */
-#undef HAVE_WAIT3
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* */
-#undef HAVE_WAITPID
+/*   */
+#undef HAVE_DN_EXPAND
 
-/* Define to 1 if you have the <wchar.h> header file. */
-#undef HAVE_WCHAR_H
+/*   */
+#undef HAVE_LIBBIND
 
-/* */
-#undef HAVE_WDDX
+/*   */
+#undef HAVE_DN_EXPAND
 
-/* */
-#undef HAVE_XML
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* Define to 1 if you have the <xmlparse.h> header file. */
-#undef HAVE_XMLPARSE_H
+/*   */
+#undef HAVE_DN_SKIPNAME
 
-/* */
-#undef HAVE_XMLREADER
+/*   */
+#undef HAVE_DN_SKIPNAME
 
-/* */
-#undef HAVE_XMLRPC
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* Define to 1 if you have the <xmltok.h> header file. */
-#undef HAVE_XMLTOK_H
+/*   */
+#undef HAVE_DN_SKIPNAME
 
-/* */
-#undef HAVE_XMLWRITER
+/*   */
+#undef HAVE_LIBBIND
 
-/* */
-#undef HAVE_XSL
+/*   */
+#undef HAVE_DN_SKIPNAME
 
-/* */
-#undef HAVE_XSL_EXSLT
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* */
-#undef HAVE_YP_GET_DEFAULT_DOMAIN
+/*   */
+#undef HAVE_RES_SEARCH
 
-/* */
-#undef HAVE_ZIP
+/*   */
+#undef HAVE_RES_SEARCH
 
-/* */
-#undef HAVE_ZLIB
+/*   */
+#undef HAVE_LIBRESOLV
 
-/* whether _controlfp is present usable */
-#undef HAVE__CONTROLFP
+/*   */
+#undef HAVE_RES_SEARCH
 
-/* whether _controlfp_s is present and usable */
-#undef HAVE__CONTROLFP_S
+/*   */
+#undef HAVE_LIBBIND
 
-/* whether _FPU_SETCW is present and usable */
-#undef HAVE__FPU_SETCW
+/*   */
+#undef HAVE_RES_SEARCH
 
-/* */
-#undef HPUX
+/*   */
+#undef HAVE_LIBSOCKET
 
-/* */
-#undef HSREGEX
+/* whether atof() accepts NAN */
+#undef HAVE_ATOF_ACCEPTS_NAN
 
-/* iconv() is aliased to libiconv() in -liconv */
-#undef ICONV_ALIASED_LIBICONV
+/* whether atof() accepts INF */
+#undef HAVE_ATOF_ACCEPTS_INF
 
-/* Whether iconv supports error no or not */
-#undef ICONV_SUPPORTS_ERRNO
+/* whether HUGE_VAL == INF */
+#undef HAVE_HUGE_VAL_INF
 
-/* */
-#undef ISOLARIS
+/* whether HUGE_VAL + -HUGEVAL == NAN */
+#undef HAVE_HUGE_VAL_NAN
 
-/* */
-#undef LINUX
+/* whether strptime() declaration fails */
+#undef HAVE_STRPTIME_DECL_FAILS
 
-/* */
-#undef MAGIC_QUOTES
+/* Define if your system has mbstate_t in wchar.h */
+#undef HAVE_MBSTATE_T
 
-/* Whether asctime_r is declared */
-#undef MISSING_ASCTIME_R_DECL
+/* Whether to build standard as dynamic module */
+#undef COMPILE_DL_STANDARD
 
-/* Whether ctime_r is declared */
-#undef MISSING_CTIME_R_DECL
+/*   */
+#undef HAVE_SYBASE_CT
 
-/* */
-#undef MISSING_FCLOSE_DECL
+/* Whether to build sybase_ct as dynamic module */
+#undef COMPILE_DL_SYBASE_CT
 
-/* Whether gmtime_r is declared */
-#undef MISSING_GMTIME_R_DECL
+/*   */
+#undef HAVE_SYSVMSG
 
-/* Whether localtime_r is declared */
-#undef MISSING_LOCALTIME_R_DECL
+/* Whether to build sysvmsg as dynamic module */
+#undef COMPILE_DL_SYSVMSG
 
-/* */
-#undef MISSING_MSGHDR_MSGFLAGS
+/* Whether to build sysvsem as dynamic module */
+#undef COMPILE_DL_SYSVSEM
 
-/* Whether strtok_r is declared */
-#undef MISSING_STRTOK_R_DECL
+/*   */
+#undef HAVE_SYSVSEM
 
-/* Whether mysqlnd is enabled */
-#undef MYSQLI_USE_MYSQLND
+/*   */
+#undef HAVE_SEMUN
 
-/* Enable compressed protocol support */
-#undef MYSQLND_COMPRESSION_WANTED
+/*   */
+#undef HAVE_SEMUN
 
-/* Enable SSL support */
-#undef MYSQLND_SSL_SUPPORTED
+/*   */
+#undef HAVE_SYSVSHM
+
+/* Whether to build sysvshm as dynamic module */
+#undef COMPILE_DL_SYSVSHM
 
-/* Whether mysqlnd is enabled */
-#undef MYSQL_USE_MYSQLND
+/*   */
+#undef HAVE_TIDYOPTGETDOC
 
-/* */
-#undef NDBM_INCLUDE_FILE
+/* Whether to build tidy as dynamic module */
+#undef COMPILE_DL_TIDY
 
-/* */
-#undef NEUTRINO
+/*   */
+#undef HAVE_TIDY
 
-/* Define to 1 if your C compiler doesn't accept -c and -o together. */
-#undef NO_MINUS_C_MINUS_O
+/* Whether to build tokenizer as dynamic module */
+#undef COMPILE_DL_TOKENIZER
 
-/* Define to the address where bug reports for this package should be sent. */
-#undef PACKAGE_BUGREPORT
+/*   */
+#undef HAVE_LIBXML
 
-/* Define to the full name of this package. */
-#undef PACKAGE_NAME
+/*   */
+#undef HAVE_LIBEXPAT
 
-/* Define to the full name and version of this package. */
-#undef PACKAGE_STRING
+/*   */
+#undef HAVE_WDDX
 
-/* Define to the one symbol short name of this package. */
-#undef PACKAGE_TARNAME
+/* Whether to build wddx as dynamic module */
+#undef COMPILE_DL_WDDX
 
-/* Define to the version of this package. */
-#undef PACKAGE_VERSION
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef PDO_MYSQL_UNIX_ADDR
+/*   */
+#undef HAVE_LIBEXPAT
 
-/* Whether pdo_mysql uses mysqlnd */
-#undef PDO_USE_MYSQLND
+/* Whether to build xml as dynamic module */
+#undef COMPILE_DL_XML
 
-/* */
-#undef PHAR_HASH_OK
+/*   */
+#undef HAVE_XML
 
-/* */
-#undef PHAR_HAVE_OPENSSL
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef PHP_APACHE_HAVE_CLIENT_FD
+/*   */
+#undef HAVE_XMLREADER
 
-/* Whether the system supports BlowFish salt */
-#undef PHP_BLOWFISH_CRYPT
+/* Whether to build xmlreader as dynamic module */
+#undef COMPILE_DL_XMLREADER
 
-/* PHP build date */
-#undef PHP_BUILD_DATE
+/*   */
+#undef HAVE_XMLRPC
 
-/* Define if your system has fork/vfork/CreateProcess */
-#undef PHP_CAN_SUPPORT_PROC_OPEN
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef PHP_CURL_URL_WRAPPERS
+/*   */
+#undef HAVE_LIBEXPAT
 
-/* Whether the system supports extended DES salt */
-#undef PHP_EXT_DES_CRYPT
+/*   */
+#undef HAVE_LIBICONV
 
-/* fpm group name */
-#undef PHP_FPM_GROUP
+/*   */
+#undef HAVE_GICONV_H
 
-/* fpm user name */
-#undef PHP_FPM_USER
+/*   */
+#undef HAVE_LIBICONV
 
-/* Whether you have HP-UX 10.x */
-#undef PHP_HPUX_TIME_R
+/* iconv() is aliased to libiconv() in -liconv */
+#undef ICONV_ALIASED_LIBICONV
 
-/* Path to iconv.h */
-#undef PHP_ICONV_H_PATH
+/*   */
+#undef HAVE_ICONV
 
-/* Which iconv implementation to use */
-#undef PHP_ICONV_IMPL
+/*   */
+#undef UNDEF_THREADS_HACK
 
-/* Whether you have IRIX-style functions */
-#undef PHP_IRIX_TIME_R
+/* Whether to build xmlrpc as dynamic module */
+#undef COMPILE_DL_XMLRPC
 
-/* Whether the system supports MD5 salt */
-#undef PHP_MD5_CRYPT
+/* Whether to build xmlrpc as dynamic module */
+#undef COMPILE_DL_XMLRPC
 
-/* */
-#undef PHP_MHASH_BC
+/*   */
+#undef HAVE_LIBXML
 
-/* */
-#undef PHP_MYSQL_UNIX_SOCK_ADDR
+/*   */
+#undef HAVE_XMLWRITER
 
-/* */
-#undef PHP_OCI8_DEF_DIR
+/* Whether to build xmlwriter as dynamic module */
+#undef COMPILE_DL_XMLWRITER
 
-/* */
-#undef PHP_OCI8_DEF_SHARED_LIBADD
+/*   */
+#undef HAVE_XSL_EXSLT
 
-/* define to 1 if oniguruma has an invalid entry for KOI8 encoding */
-#undef PHP_ONIG_BAD_KOI8_ENTRY
+/*   */
+#undef HAVE_XSL
 
-/* Define to 1 if the bundled oniguruma is used */
-#undef PHP_ONIG_BUNDLED
+/* Whether to build xsl as dynamic module */
+#undef COMPILE_DL_XSL
 
-/* uname output */
-#undef PHP_OS
+/*   */
+#undef HAVE_ZIP
 
-/* */
-#undef PHP_PDO_OCI_CLIENT_VERSION
+/* Whether to build zip as dynamic module */
+#undef COMPILE_DL_ZIP
 
-/* whether pread64 is default */
-#undef PHP_PREAD_64
+/*   */
+#undef HTTP_SHARED_DEPS
 
-/* whether pwrite64 is default */
-#undef PHP_PWRITE_64
+/*   */
+#undef HTTP_SHARED_DEPS
 
-/* */
-#undef PHP_SAFE_MODE
+/*   */
+#undef HAVE_GETHOSTNAME
 
-/* */
-#undef PHP_SAFE_MODE_EXEC_DIR
+/*   */
+#undef HAVE_GETHOSTNAME
 
-/* Whether the system supports SHA256 salt */
-#undef PHP_SHA256_CRYPT
+/*   */
+#undef HAVE_LIBNSL
 
-/* Whether the system supports SHA512 salt */
-#undef PHP_SHA512_CRYPT
+/*   */
+#undef HAVE_GETDOMAINNAME
 
-/* */
-#undef PHP_SIGCHILD
+/*   */
+#undef HAVE_GETDOMAINNAME
 
-/* Have PDO */
-#undef PHP_SQLITE2_HAVE_PDO
+/*   */
+#undef HAVE_LIBNSL
 
-/* Whether the system supports standard DES salt */
-#undef PHP_STD_DES_CRYPT
+/*   */
+#undef HAVE_GETSERVBYPORT
 
-/* uname -a output */
-#undef PHP_UNAME
+/*   */
+#undef HAVE_GETSERVBYPORT
 
-/* Whether PHP has to use its own crypt_r for blowfish, des and ext des */
-#undef PHP_USE_PHP_CRYPT_R
+/*   */
+#undef HAVE_LIBNSL
 
-/* whether write(2) works */
-#undef PHP_WRITE_STDOUT
+/*   */
+#undef HAVE_GETSERVBYNAME
 
-/* /proc/pid/mem interface */
-#undef PROC_MEM_FILE
+/*   */
+#undef HAVE_GETSERVBYNAME
 
-/* Whether to use Pthreads */
-#undef PTHREADS
+/*   */
+#undef HAVE_LIBNSL
 
-/* */
-#undef QDBM_INCLUDE_FILE
+/* Have zlib support */
+#undef HTTP_HAVE_ZLIB
 
-/* */
-#undef REGEX
+/*   */
+#undef HTTP_HAVE_SSL
 
-/* Define as the return type of signal handlers (`int' or `void'). */
-#undef RETSIGTYPE
+/*   */
+#undef HTTP_HAVE_OPENSSL
 
-/* Whether to use Roxen in ZTS mode */
-#undef ROXEN_USE_ZTS
+/*   */
+#undef HTTP_HAVE_GNUTLS
 
-/* The size of `char', as computed by sizeof. */
-#undef SIZEOF_CHAR
+/* path to bundled SSL CA info */
+#undef HTTP_CURL_CAINFO
 
-/* The size of `char *', as computed by sizeof. */
-#undef SIZEOF_CHAR_P
+/* Have cURL support */
+#undef HTTP_HAVE_CURL
 
-/* The size of `int', as computed by sizeof. */
-#undef SIZEOF_INT
+/*   */
+#undef HAVE_CURL_SHARE_STRERROR
 
-/* Size of intmax_t */
-#undef SIZEOF_INTMAX_T
+/*   */
+#undef HAVE_CURL_MULTI_STRERROR
 
-/* The size of `long', as computed by sizeof. */
-#undef SIZEOF_LONG
+/*   */
+#undef HAVE_CURL_EASY_STRERROR
 
-/* The size of `long int', as computed by sizeof. */
-#undef SIZEOF_LONG_INT
+/*   */
+#undef HAVE_CURL_EASY_RESET
 
-/* The size of `long long', as computed by sizeof. */
-#undef SIZEOF_LONG_LONG
+/*   */
+#undef HAVE_CURL_FORMGET
 
-/* The size of `long long int', as computed by sizeof. */
-#undef SIZEOF_LONG_LONG_INT
+/*   */
+#undef HAVE_CURL_MULTI_SETOPT
 
-/* Size of ptrdiff_t */
-#undef SIZEOF_PTRDIFF_T
+/*   */
+#undef HAVE_CURL_MULTI_TIMEOUT
 
-/* The size of `short', as computed by sizeof. */
-#undef SIZEOF_SHORT
+/*   */
+#undef HTTP_EVENT_VERSION
 
-/* The size of `size_t', as computed by sizeof. */
-#undef SIZEOF_SIZE_T
+/* Have libevent support for cURL */
+#undef HTTP_HAVE_EVENT
 
-/* Size of ssize_t */
-#undef SIZEOF_SSIZE_T
+/*   */
+#undef HAVE_CURL_MULTI_SOCKET_ACTION
 
-/* */
-#undef SOLARIS
+/*   */
+#undef HTTP_EVENT_VERSION
 
-/* have sqlite3 with extension support */
-#undef SQLITE_OMIT_LOAD_EXTENSION
+/* Have libevent support for cURL */
+#undef HTTP_HAVE_EVENT
 
-/* Size of a pointer */
-#undef SQLITE_PTR_SZ
+/*   */
+#undef HAVE_CURL_MULTI_SOCKET_ACTION
 
-/* */
-#undef SQLITE_UTF8
+/* Have magic mime support */
+#undef HTTP_HAVE_MAGIC
 
-/* Needed in sqlunix.h for wchar defs */
-#undef SS_FBX
+/* Have ext/hash support */
+#undef HTTP_HAVE_PHP_HASH_H
 
-/* Needed in sqlunix.h */
-#undef SS_LINUX
+/* Have ext/hash support */
+#undef HTTP_HAVE_PHP_HASH_H
 
-/* If using the C implementation of alloca, define if you know the
-   direction of stack growth for your system; otherwise it will be
-   automatically deduced at runtime.
-	STACK_DIRECTION > 0 => grows toward higher addresses
-	STACK_DIRECTION < 0 => grows toward lower addresses
-	STACK_DIRECTION = 0 => direction of growth unknown */
-#undef STACK_DIRECTION
+/* Whether to build http as dynamic module */
+#undef COMPILE_DL_HTTP
 
-/* Define to 1 if you have the ANSI C header files. */
-#undef STDC_HEADERS
+/* Have extended HTTP support */
+#undef HAVE_HTTP
 
-/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
-#undef TIME_WITH_SYS_TIME
+/* Enable compressed protocol support */
+#undef MYSQLND_COMPRESSION_WANTED
 
-/* Define to 1 if your <sys/time.h> declares `struct tm'. */
-#undef TM_IN_SYS_TIME
+/* Enable SSL support */
+#undef MYSQLND_SSL_SUPPORTED
 
-/* */
-#undef TSRM_ST
+/* Whether to build mysqlnd as dynamic module */
+#undef COMPILE_DL_MYSQLND
 
-/* */
-#undef UCD_SNMP_HACK
+/* Define if int32_t type is present.  */
+#undef HAVE_INT32_T
 
-/* */
-#undef UNDEF_THREADS_HACK
+/* Define if uint32_t type is present.  */
+#undef HAVE_UINT32_T
 
-/* */
-#undef UNIXWARE
+/* Whether sprintf is broken */
+#undef ZEND_BROKEN_SPRINTF
 
-/* whether to check multibyte regex backtrack */
-#undef USE_COMBINATION_EXPLOSION_CHECK
+/* whether floatingpoint.h defines fp_except */
+#undef HAVE_FP_EXCEPT
 
-/* */
-#undef USE_GD_IMGSTRTTF
+/* whether _FPU_SETCW is present and usable */
+#undef HAVE__FPU_SETCW
 
-/* */
-#undef USE_GD_JISX0208
+/* whether fpsetprec is present and usable */
+#undef HAVE_FPSETPREC
 
-/* Define if cross-process locking is required by accept() */
-#undef USE_LOCKING
+/* whether _controlfp is present usable */
+#undef HAVE__CONTROLFP
 
-/* Enable extensions on AIX 3, Interix.  */
-#ifndef _ALL_SOURCE
-# undef _ALL_SOURCE
-#endif
-/* Enable GNU extensions on systems that have them.  */
-#ifndef _GNU_SOURCE
-# undef _GNU_SOURCE
-#endif
-/* Enable threading extensions on Solaris.  */
-#ifndef _POSIX_PTHREAD_SEMANTICS
-# undef _POSIX_PTHREAD_SEMANTICS
-#endif
-/* Enable extensions on HP NonStop.  */
-#ifndef _TANDEM_SOURCE
-# undef _TANDEM_SOURCE
-#endif
-/* Enable general extensions on Solaris.  */
-#ifndef __EXTENSIONS__
-# undef __EXTENSIONS__
-#endif
+/* whether _controlfp_s is present and usable */
+#undef HAVE__CONTROLFP_S
 
+/* whether FPU control word can be manipulated by inline assembler */
+#undef HAVE_FPU_INLINE_ASM_X86
 
-/* */
-#undef USE_TRANSFER_TABLES
+/* Define if double cast to long preserves least significant bits */
+#undef ZEND_DVAL_TO_LVAL_CAST_OK
 
-/* whether you want Pi3Web support */
-#undef WITH_PI3WEB
+/* Define if dlsym() requires a leading underscore in symbol names.  */
+#undef DLSYM_NEEDS_UNDERSCORE
 
-/* */
-#undef WITH_ZEUS
+/* virtual machine dispatch method */
+#undef ZEND_VM_KIND
 
-/* Define if processor uses big-endian word */
-#undef WORDS_BIGENDIAN
+/* virtual machine dispatch method */
+#undef ZEND_VM_KIND
 
-/* Whether sprintf is broken */
-#undef ZEND_BROKEN_SPRINTF
+/* virtual machine dispatch method */
+#undef ZEND_VM_KIND
 
-/* */
+/*   */
 #undef ZEND_DEBUG
 
-/* Define if double cast to long preserves least significant bits */
-#undef ZEND_DVAL_TO_LVAL_CAST_OK
+/*   */
+#undef ZEND_DEBUG
+
+/*   */
+#undef ZTS
+
+/*   */
+#undef ZEND_MULTIBYTE
+
+/* Define if the target system is darwin */
+#undef DARWIN
 
-/* */
+/*   */
 #undef ZEND_MM_ALIGNMENT
 
-/* */
+/*   */
 #undef ZEND_MM_ALIGNMENT_LOG2
 
-/* */
-#undef ZEND_MULTIBYTE
+/* Define if the target system has support for memory allocation using mmap(MAP_ANON) */
+#undef HAVE_MEM_MMAP_ANON
 
-/* virtual machine dispatch method */
-#undef ZEND_VM_KIND
+/* Define if the target system has support for memory allocation using mmap(/dev/zero) */
+#undef HAVE_MEM_MMAP_ZERO
 
-/* */
+/*   */
 #undef ZTS
 
-/* Define to 1 if on MINIX. */
-#undef _MINIX
+/* Whether you use GNU Pth */
+#undef GNUPTH
 
-/* Define to 2 if the system does not provide POSIX.1 features except with
-   this defined. */
-#undef _POSIX_1_SOURCE
+/*   */
+#undef TSRM_ST
 
-/* Define to 1 if you need to in order for `stat' and other things to work. */
-#undef _POSIX_SOURCE
+/* Whether to use native BeOS threads */
+#undef BETHREADS
 
-/* Define to empty if `const' does not conform to ANSI C. */
-#undef const
+/* Whether to use Pthreads */
+#undef PTHREADS
 
-/* Define to `int' if <sys/types.h> doesn't define. */
-#undef gid_t
+/* PHP build date */
+#undef PHP_BUILD_DATE
 
-/* */
-#undef in_addr_t
+/* hardcode for each of the cross compiler host */
+#undef PHP_OS
 
-/* Define to `__inline__' or `__inline' if that's what the C compiler
-   calls it, or to nothing if 'inline' is not supported under any name.  */
-#ifndef __cplusplus
-#undef inline
-#endif
+/* hardcode for each of the cross compiler host */
+#undef PHP_UNAME
 
-/* Define to `unsigned int' if <sys/types.h> does not define. */
-#undef size_t
+/* uname -a output */
+#undef PHP_UNAME
 
-/* Define to `int' if <sys/types.h> doesn't define. */
-#undef uid_t
+/* uname output */
+#undef PHP_OS
 
-/* Define to `unsigned int ' if <sys/types.h> does not define. */
-#undef uint
+/*   */
+#undef HAVE_BUILD_DEFS_H
 
-/* Define to `unsigned long ' if <sys/types.h> does not define. */
-#undef ulong
 
 #ifndef ZEND_ACCONFIG_H_NO_C_PROTOS
 
